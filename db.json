{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/yilia/source/main.266c1c.css","path":"main.266c1c.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/slider.096dc6.js","path":"slider.096dc6.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/main.266c1c.js","path":"main.266c1c.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/mobile.906508.js","path":"mobile.906508.js","modified":1,"renderable":1},{"_id":"source/assets/img/construct.jpg","path":"assets/img/construct.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/favicon.ico","path":"assets/img/favicon.ico","modified":1,"renderable":0},{"_id":"source/assets/img/empty.png","path":"assets/img/empty.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-1.png","path":"assets/img/git-1.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-10.png","path":"assets/img/git-10.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-12.png","path":"assets/img/git-12.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-11.png","path":"assets/img/git-11.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-13.png","path":"assets/img/git-13.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-2.png","path":"assets/img/git-2.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-4.png","path":"assets/img/git-4.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-5.png","path":"assets/img/git-5.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-6.png","path":"assets/img/git-6.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-8.png","path":"assets/img/git-8.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-7.png","path":"assets/img/git-7.png","modified":1,"renderable":0},{"_id":"source/assets/img/miso.png","path":"assets/img/miso.png","modified":1,"renderable":0},{"_id":"source/assets/img/mvvm-2.png","path":"assets/img/mvvm-2.png","modified":1,"renderable":0},{"_id":"source/assets/img/mvvm-3.png","path":"assets/img/mvvm-3.png","modified":1,"renderable":0},{"_id":"source/assets/img/npm-version.png","path":"assets/img/npm-version.png","modified":1,"renderable":0},{"_id":"source/assets/img/weixin.png","path":"assets/img/weixin.png","modified":1,"renderable":0},{"_id":"source/assets/img/preloader.gif","path":"assets/img/preloader.gif","modified":1,"renderable":0},{"_id":"source/assets/img/mvvm-result.gif","path":"assets/img/mvvm-result.gif","modified":1,"renderable":0},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":1,"renderable":1},{"_id":"source/assets/img/alipay.jpg","path":"assets/img/alipay.jpg","modified":1,"renderable":0},{"_id":"source/assets/img/git-9.png","path":"assets/img/git-9.png","modified":1,"renderable":0},{"_id":"source/assets/demo/mediator/sgws.jpg","path":"assets/demo/mediator/sgws.jpg","modified":1,"renderable":0},{"_id":"source/assets/demo/gift/img/shake.png","path":"assets/demo/gift/img/shake.png","modified":1,"renderable":0},{"_id":"source/assets/demo/gift/css/index.scss","path":"assets/demo/gift/css/index.scss","modified":1,"renderable":0},{"_id":"source/assets/demo/gift/img/paper.jpg","path":"assets/demo/gift/img/paper.jpg","modified":1,"renderable":0},{"_id":"source/assets/demo/gift/img/paper-b.jpg","path":"assets/demo/gift/img/paper-b.jpg","modified":1,"renderable":0},{"_id":"source/assets/demo/pre_css3_demo/bg.jpg","path":"assets/demo/pre_css3_demo/bg.jpg","modified":1,"renderable":0},{"_id":"source/assets/demo/pre_css3_demo/mhxy.png","path":"assets/demo/pre_css3_demo/mhxy.png","modified":1,"renderable":0},{"_id":"source/assets/img/git-3.png","path":"assets/img/git-3.png","modified":1,"renderable":0},{"_id":"source/assets/demo/gift/media/gift.ogg","path":"assets/demo/gift/media/gift.ogg","modified":1,"renderable":0}],"Cache":[{"_id":"themes/yilia/.eslintrc.js","hash":"303d25adf02ad65720e537a16a4a137d14bb755f","modified":1584021348691},{"_id":"themes/yilia/.eslintignore","hash":"ed9d8911ca08c3dd5072c48dd0be4d06f8897730","modified":1584021348691},{"_id":"themes/yilia/.editorconfig","hash":"daaa8757fac18f8735fadd0a37a42c06f421ca14","modified":1584021348690},{"_id":"themes/yilia/README.md","hash":"86757b00d393bd4956a252d92a469f11f2ae8914","modified":1584021348692},{"_id":"themes/yilia/.babelrc","hash":"db600d40e93e6d8023737a65d58d3be7370e5e30","modified":1584021348690},{"_id":"themes/yilia/package.json","hash":"ee6aa61f1cb89fd549e3e087c0232207a9c9ee30","modified":1584021348710},{"_id":"themes/yilia/webpack.config.js","hash":"da7657347109ddb4ab8602b219778117254677fe","modified":1584021348741},{"_id":"source/photos/lazyload.min.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1584021348689},{"_id":"themes/yilia/.gitattributes","hash":"758cfbecfa7919e99abddf3297f37cde7e3d8d4e","modified":1584021348691},{"_id":"themes/yilia/_config.yml","hash":"698de90db6098975f6bfb450db42f5a6a4550663","modified":1584021348692},{"_id":"source/_posts/JavaScript中的发布-订阅模式.md","hash":"63510df30a365ac72acd14b31fb62f3df8817b0a","modified":1584021348637},{"_id":"source/_posts/REST-GraphQL.md","hash":"453d0af1c3af840b51e841b239302cc8c4f3757e","modified":1584021348638},{"_id":"source/_posts/Porxy-实现vue-MVVM.md","hash":"cbf4022f5b366e8a5d93775cbf11e0c6569a2cd6","modified":1584021348637},{"_id":"source/_posts/git使用总结.md","hash":"975dfe136d505d812c8e9762c00f2e9ed7fca302","modified":1584021348638},{"_id":"source/_posts/javascript中this、call和apply.md","hash":"1fc406e05cba9f181b7e184b6bbd3fa6c1203935","modified":1584021348639},{"_id":"source/_posts/vue组件封装及npm包发布.md","hash":"c0f6ae670e9f8eb14e355fda13d364e898127bca","modified":1584021348639},{"_id":"source/_posts/了解mvvm数据双向绑定.md","hash":"380973fd014d5912e3b56bb2723ee877490dc222","modified":1584021348640},{"_id":"source/_posts/自定义脚手架.md","hash":"c8f2876f6a56522dd8b85b168533391373823675","modified":1584021348640},{"_id":"source/_posts/前端开发中IOC的理解.md","hash":"1bb51cfd1de3d59b1b1c45180367925db42c6c91","modified":1584021348640},{"_id":"source/photos/ins.css","hash":"2ba8d33e612ceec5224d3ef2f9809b86dc2a66e7","modified":1584021348687},{"_id":"source/photos/ins.js","hash":"2b147cfc39d7f91e592b1c2f4506e5a077843a97","modified":1584021348688},{"_id":"source/photos/ins.json","hash":"9778f5bfdc9f7de2b5e5e91140fa8b5f108c35b1","modified":1584021348689},{"_id":"themes/yilia/languages/fr.yml","hash":"b4be1c1592a72012e48df2b3ec41cc9685573e50","modified":1584021348693},{"_id":"themes/yilia/languages/no.yml","hash":"ddf2035e920a5ecb9076138c184257d9f51896a7","modified":1584021348694},{"_id":"themes/yilia/languages/default.yml","hash":"f26a34a7983d4bc17c65c7f0f14da598e62ce66d","modified":1584021348693},{"_id":"source/photos/index.ejs","hash":"550e74d833430e4f62391468f10669975308c702","modified":1584021348687},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"b057f389c6713010f97d461e48ec959b0b6f3b44","modified":1584021348695},{"_id":"themes/yilia/languages/ru.yml","hash":"2a476b4c6e04900914c81378941640ac5d58a1f0","modified":1584021348695},{"_id":"themes/yilia/languages/nl.yml","hash":"3d82ec703d0b3287739d7cb4750a715ae83bfcb3","modified":1584021348694},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1584021348708},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1584021348708},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"f5f0ca88185da7a8457760d84bf221781473bd7c","modified":1584021348696},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1584021348709},{"_id":"themes/yilia/layout/index.ejs","hash":"ec498c6c0606acde997ce195dad97b267418d980","modified":1584021348708},{"_id":"themes/yilia/source/main.266c1c.css","hash":"6b9cfabb81f021081a93da5a069674e9be910194","modified":1584021348739},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1584021348709},{"_id":"themes/yilia/source/slider.096dc6.js","hash":"25e34d09ead8cabd34d777997c4b1f073918f6cf","modified":1584021348741},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1584021348709},{"_id":"themes/yilia/layout/layout.ejs","hash":"b471ab706d48e0be3f783eab1c94bf5878ef5a94","modified":1584021348708},{"_id":"themes/yilia/source-src/css.ejs","hash":"cf7eab48d626433120d1ef9697f719a359817018","modified":1584021348710},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1584021348707},{"_id":"themes/yilia/source/main.266c1c.js","hash":"42f38b932426a0bd24a41343a75f8517ca00e8eb","modified":1584021348740},{"_id":"themes/yilia/source/mobile.906508.js","hash":"60329066ec16a2f264b438b94c9d1cc44a551f88","modified":1584021348740},{"_id":"source/assets/img/construct.jpg","hash":"b876bdff62a213f0c4263e262be73068de359b4f","modified":1584021348665},{"_id":"source/assets/img/favicon.ico","hash":"500fe46b405934c01588987bd28355a4d5356718","modified":1584021348668},{"_id":"source/assets/img/empty.png","hash":"e88177c88f6b7219a3474da7d210965a6dbb57d7","modified":1584021348668},{"_id":"source/assets/img/git-1.png","hash":"17aec9fa3afd3fd7e320e25d74685675ee92411f","modified":1584021348669},{"_id":"source/assets/img/git-10.png","hash":"d77f1d183ece94c7b5291b0f9ef33a4601c6dffc","modified":1584021348669},{"_id":"source/assets/img/git-12.png","hash":"604109b4fb067edd4ce59a5014c737c630296bbd","modified":1584021348670},{"_id":"source/assets/img/git-11.png","hash":"83a79db9824fd8ca3396d54045ee613bfcbb90c1","modified":1584021348670},{"_id":"source/assets/img/git-13.png","hash":"cc15f15c109326825babbfed8f0bc8651d6575e9","modified":1584021348670},{"_id":"source/assets/img/git-2.png","hash":"251641a2bef8f8ade34d3ea312aa773f44a06f81","modified":1584021348671},{"_id":"source/assets/img/git-4.png","hash":"a7ea1de83f60d92b695086316dcb771b949d1fde","modified":1584021348676},{"_id":"source/assets/img/git-5.png","hash":"beecafd54e857e4cdd7d1f6331acbc27d229c842","modified":1584021348677},{"_id":"source/assets/img/git-6.png","hash":"beecafd54e857e4cdd7d1f6331acbc27d229c842","modified":1584021348678},{"_id":"source/assets/img/git-8.png","hash":"60c62e9e635a392d61bd1cdfa3fdc6c6763086b0","modified":1584021348679},{"_id":"source/assets/img/git-7.png","hash":"337454d4a718b73017d814bf831537ac00273f2d","modified":1584021348678},{"_id":"source/assets/img/miso.png","hash":"cda31caa5da6cb5a74adb557e6852ca2ee530c0f","modified":1584021348681},{"_id":"source/assets/img/mvvm-2.png","hash":"a1e306967a8da3126cd24907de1c17ba24b19b61","modified":1584021348682},{"_id":"source/assets/img/mvvm-3.png","hash":"d3ff1533ab2592ddc985c9ce8bf21729bfdb14f5","modified":1584021348683},{"_id":"source/assets/img/npm-version.png","hash":"d033192761f2afad08fcfa327e6548c3f6fb38d6","modified":1584021348685},{"_id":"source/assets/img/weixin.png","hash":"91f16d44822290a625b185ca29e07f468275dd19","modified":1584021348686},{"_id":"source/assets/demo/border1px.html","hash":"c4f993a19af5cee2e4608b227aaecbf64c9fff8e","modified":1584021348641},{"_id":"source/assets/demo/hack_demo.html","hash":"cdff5602f015fd7689b56aa0fcace157600ea4b8","modified":1584021348653},{"_id":"source/assets/demo/jiugongge_demo.html","hash":"ec73571bcf1ec61396461770909a36acab2d4063","modified":1584021348654},{"_id":"source/assets/demo/jiugongge_demo2.html","hash":"91b19b0248479a1f935384833ea7c628297102ee","modified":1584021348655},{"_id":"source/assets/img/preloader.gif","hash":"ce90ce8d769d5be6093230626ad80a79429c9483","modified":1584021348685},{"_id":"source/assets/img/mvvm-result.gif","hash":"c0dc2afd3143f04f834dd2805451375e0a2eb311","modified":1584021348684},{"_id":"themes/yilia/source-src/script.ejs","hash":"28abac2426761d7e715b38aadd86ce6549c8ae77","modified":1584021348732},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"edc0154b30a4127acda10297bec6aacf754b4ac4","modified":1584021348697},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"751e5deab5365348be5243688b419c82d337ab9a","modified":1584021348698},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a4eacc2bc1278095a0ef99f904b0634c78f980eb","modified":1584021348697},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"c70f367f54064a441e574c913f5e0ea121d0f899","modified":1584021348696},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"9bfcbd9e71401b6da6b2bbbe61e97625ca247b7a","modified":1584021348699},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"871f81cacd5d41cb2eb001cd56254217a857dc2f","modified":1584021348699},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"155327c23607f69989b58845f24d842a54e504b8","modified":1584021348698},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"1ccc627d7697e68fddc367c73ac09920457e5b35","modified":1584021348700},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"b69855e07b65117769adc515cb64b803932068c9","modified":1584021348701},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"dff6e1f3b5e82495ec776baa24d9e6bbaad883df","modified":1584021348697},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"12ca7d8dba56bc767b9309dda9526dcbaffc1614","modified":1584021348701},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"e2b3f2b3631ef211a4d98d11f0da2d285340f10e","modified":1584021348701},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"11550a418921d330e6553be0569a94ab5a217967","modified":1584021348702},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"cc1c39903aed0a0601d104238d2bbd13ad2a36f3","modified":1584021348707},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1584021348734},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"ccec1fc70f021cb50ac85b524e7949878ab93a18","modified":1584021348702},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1584021348736},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"75767c904d483d9b93469afb6b92bb6bdface639","modified":1584021348735},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"0ffcb251b79e8a920c9b4cb6bb7a96a808816165","modified":1584021348707},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1584021348735},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1584021348737},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1584021348737},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1584021348738},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1584021348738},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1584021348736},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"29ba600e98ed55f7af4ade8038272c84cba21188","modified":1584021348711},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"ce227b6f5a9af194fd5d455200630f32c05e151f","modified":1584021348711},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"d6a7dd88404b383b5b94e4c7ec675a410c41f3cc","modified":1584021348711},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"f7388f5c11370ef462f7cb913d8f72edf24ecaf9","modified":1584021348712},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"8f82fe898ba1c1bd00c24a7d8270feddc7eba3bc","modified":1584021348712},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"1577a2336b3ad122f49f60dff2bc1a97d4e7b18b","modified":1584021348712},{"_id":"themes/yilia/source-src/css/article.scss","hash":"55d082fec4c6bb341725567acaa29ce37d50320a","modified":1584021348713},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"07244c188f58ecfb90bb7c047b8cde977f1dc4b4","modified":1584021348713},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"2d1c70bb606c0d87e4f68ec2e600e08b27f32b99","modified":1584021348714},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"96d7eb1d42c06fdcccb8ef969f6ecd30c3194903","modified":1584021348717},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1584021348720},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7ca837a4cc34db1c35f01baec85eb10ccc64ea86","modified":1584021348720},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"f53ea8270752b5919ec5d79224d22af91f2eda12","modified":1584021348720},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"40e5aa5056dc0b3b9f51c5b387370b612e265d4e","modified":1584021348721},{"_id":"themes/yilia/source-src/css/left.scss","hash":"80dac621e43581a254d0152d5df901e4d0b01c09","modified":1584021348722},{"_id":"themes/yilia/source-src/css/main.scss","hash":"9eba1fcf4805256697528fcf3b767cf6dd8d0591","modified":1584021348723},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"19f10fd2f0c3377aa4b165b3c2291ecf86dd9351","modified":1584021348723},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"d995dcd483a250fe61b426158afb61bf8923a927","modified":1584021348723},{"_id":"themes/yilia/source-src/css/page.scss","hash":"244c4d75c375978ff9edb74acc68825e63c6b235","modified":1584021348724},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"a557a9ed244c82b8b71e9da9de3339d92783499f","modified":1584021348724},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"2495f7e4e3b055735c531f944b5f40a118a351ec","modified":1584021348724},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"399744e98e7c67939ed9b23c2670d8baad044eda","modified":1584021348725},{"_id":"themes/yilia/source-src/css/share.scss","hash":"9d6f6884f40c191882e56a1e1e1192400944a515","modified":1584021348725},{"_id":"themes/yilia/source-src/css/social.scss","hash":"a10a038a1dac8953cb4ffc7e04272eff9fac54e4","modified":1584021348725},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"b81cedbe31accca82e597801186911a7b5e6841c","modified":1584021348727},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"6932c642bf8191768d7090982a91c8c1f1c4ed1e","modified":1584021348726},{"_id":"themes/yilia/source-src/js/Q.js","hash":"e56d9710afa79b31ca6b9fbd845f6d1895f5214b","modified":1584021348728},{"_id":"themes/yilia/source-src/js/anm.js","hash":"d18f6276a352b871390a4112d479b9e58b8cdbbe","modified":1584021348728},{"_id":"themes/yilia/source-src/js/aside.js","hash":"5e4c3c3d61f1e1ce2f09688d3aff25fadc851fff","modified":1584021348728},{"_id":"themes/yilia/source-src/js/fix.js","hash":"d12df875d3b587354ce59fb7c431ecece53560e3","modified":1584021348729},{"_id":"themes/yilia/source-src/js/browser.js","hash":"4dc04845cf27f350922b63f1813a9c82e6e33b05","modified":1584021348729},{"_id":"themes/yilia/source-src/js/main.js","hash":"fe98bf90ce61658fe16ae057f8b6a512a845af3b","modified":1584021348729},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"461c08ffcbc724d74ec7e0ff38e171eefe0f89fd","modified":1584021348730},{"_id":"themes/yilia/source-src/js/share.js","hash":"d4ccff8266c37363b3904226f5d035b7db882c61","modified":1584021348730},{"_id":"themes/yilia/source-src/js/report.js","hash":"57680f9a23bd0a1eaafd64ae08cc33e20627ab15","modified":1584021348730},{"_id":"themes/yilia/source-src/js/util.js","hash":"3bcdeb95072b85600874424e6929e3e22cfddaa0","modified":1584021348731},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"3e0fd4479a40ddbd1571c6c953df7e23637b61f5","modified":1584021348732},{"_id":"themes/yilia/source-src/js/slider.js","hash":"707842efee006e3ea9b6765d7460f4ef4f08e41f","modified":1584021348731},{"_id":"source/assets/img/alipay.jpg","hash":"30430ac7390aa07b5251f5c8fb74d3caa4206772","modified":1584021348665},{"_id":"source/assets/demo/jquery.js","hash":"359c6c1ed98081b9a69eb3513b9deced59c957f9","modified":1584021348656},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"915c93edd67c5326695cc7dc84b14c5f154dbcc8","modified":1584021348726},{"_id":"source/assets/img/git-9.png","hash":"0917224198ba6ee7c719970b93067d1006c3647f","modified":1584021348680},{"_id":"source/assets/demo/coffee_pc_demo/pro-con.html","hash":"1a259097f10f0dca8323ee6f50c6e4ee9d759430","modified":1584021348642},{"_id":"source/assets/demo/gift/index.html","hash":"e047f0d525b53f5b0e37452f94b9f5dc4554d3cf","modified":1584021348645},{"_id":"source/assets/demo/coffee_pc_demo/pro-con.js","hash":"1c10a825e3e5664bb5f2bffef0b4161675d181ca","modified":1584021348642},{"_id":"source/assets/demo/mediator/demo.html","hash":"af5ae85103f4c1d79d0aec43ee8a14c71961cf67","modified":1584021348656},{"_id":"source/assets/demo/mediator/mediator.js","hash":"3704881a60f99472de32f1f579618ded15053665","modified":1584021348656},{"_id":"source/assets/demo/my_news_reader/index.html","hash":"e6d4492d3e55340c3435a83246b5e7280c956953","modified":1584021348657},{"_id":"source/assets/demo/pre_css3_demo/demo.html","hash":"887ec1edb77213f8d9357e99634f6cfd2dd9b57b","modified":1584021348661},{"_id":"source/assets/demo/mediator/sgws.jpg","hash":"e7f9e277bfae87f2570d76b3e50ed836b3d6c091","modified":1584021348657},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"aae96de18d48cd3b9b7bf6fed0100e15b53cca97","modified":1584021348703},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"f75b236818b6c0ec0e5e6c12a517825d6230d756","modified":1584021348703},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"b6a97043f9ec37e571aacacfedcda1d4d75e3c7c","modified":1584021348704},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"f6b4c4eaafb5ac386273354b5f64a26139b7a3b0","modified":1584021348704},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"cc384aeaed9ffde92efdf192c26db4da3fe5858f","modified":1584021348703},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"06a2dd18ac9a43fbc9a59c61e6f795f9326e9927","modified":1584021348704},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"d4a460a35e2112d0c7414fd5e19b3a16093f1caf","modified":1584021348705},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2c4e4ca36c9bb4318506c38aca7127f1f44d827f","modified":1584021348705},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1584021348718},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"fb022502c741b4a26bad6b2ad37245c10ede3f1a","modified":1584021348705},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"75767c904d483d9b93469afb6b92bb6bdface639","modified":1584021348719},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1584021348719},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1584021348719},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"1834c3ed8560716e63bb3a50be94cac87fbbeaf3","modified":1584021348714},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1584021348721},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1584021348721},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1584021348722},{"_id":"source/assets/demo/gift/js/index.main.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1584021348646},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"91db061c9c17628291a005e5bd4936cf9d35a6c4","modified":1584021348715},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"398a49913b4a47d928103562b1ce94520be4026a","modified":1584021348716},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"262ffcd88775080b7f511db37f58d2bcb1b2bfc7","modified":1584021348714},{"_id":"source/assets/demo/gift/css/index.css","hash":"7a3215b85367eaa4c56ed78f1c74704e7103a8f2","modified":1584021348643},{"_id":"source/assets/demo/gift/css/reset.css","hash":"a82902ac501de401d95c6f09e4b644a4713e9213","modified":1584021348644},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"6e75bdaa46de83094ba0873099c6e7d656a22453","modified":1584021348716},{"_id":"source/assets/demo/gift/img/shake.png","hash":"777f0ec90a458ad4e4364a7d84f5f6d57db0eb92","modified":1584021348645},{"_id":"source/assets/demo/gift/css/index.scss","hash":"0b5e922d881be59530194b530e6b136d868ee474","modified":1584021348644},{"_id":"source/assets/demo/gift/js/shake.js","hash":"2cac0480c408b3449d3efca3c83df0e8fa6fb923","modified":1584021348646},{"_id":"source/assets/demo/gift/img/paper.jpg","hash":"234944832a4d1774c0780ef4835e869494868c31","modified":1584021348645},{"_id":"source/assets/demo/gift/js/zepto.min.js","hash":"147b35a7a34524abfde0367a34d4b872742d3a1c","modified":1584021348647},{"_id":"source/assets/demo/my_news_reader/js/main.js","hash":"9b77f212c41597485024ed2c85f03f33499ef07e","modified":1584021348658},{"_id":"source/assets/demo/my_news_reader/js/tagConfig.js","hash":"535bc91d0315c8aa1258edd45282c36f15bcdbe5","modified":1584021348658},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"c71c3e704e844df3676f4a1b82d9cd8286f0b06b","modified":1584021348706},{"_id":"source/assets/demo/gift/img/paper-b.jpg","hash":"97ae11a83c12b2af13c01d54b666aca7a7c47646","modified":1584021348644},{"_id":"source/assets/demo/pre_css3_demo/bg.jpg","hash":"e6ffd5910deb7d881f6ed47cfd22d722b4f46575","modified":1584021348661},{"_id":"source/assets/demo/pre_css3_demo/mhxy.png","hash":"8e01ae2fa02d2e5fb0d309db174d141140ee02a6","modified":1584021348663},{"_id":"source/assets/img/git-3.png","hash":"9db1593e2ebeacc03cacb80c81b6674d8e07c0d0","modified":1584021348676},{"_id":"source/assets/demo/gift/media/gift.ogg","hash":"326274afd016f6d4ae7a4b866bf7b286a93bdfe8","modified":1584021348653}],"Category":[],"Data":[],"Page":[{"_content":"","source":"photos/lazyload.min.js","raw":"","date":"2020-03-12T13:55:48.689Z","updated":"2020-03-12T13:55:48.689Z","path":"photos/lazyload.min.js","layout":"false","title":"","comments":1,"_id":"ck7otizpr00007gui74fxrisd","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","source":"photos/ins.css","raw":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","date":"2020-03-12T13:55:48.687Z","updated":"2020-03-12T13:55:48.687Z","path":"photos/ins.css","layout":"false","title":"","comments":1,"_id":"ck7otizpy00027guipa17ry3m","content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","site":{"data":{}},"excerpt":"","more":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0;\n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}"},{"layout":"post","slug":"photos","title":"相册","noDate":"true","comments":0,"_content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">Ins</a>\n\t<a class=\"photos-btn\" target=\"_blank\" href=\"http://litten.me/gallery/\">摄影</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/litten225/\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","source":"photos/index.ejs","raw":"---\nlayout: post\nslug: \"photos\"\ntitle: \"相册\"\nnoDate: \"true\"\ncomments: \"false\"\n---\n<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">Ins</a>\n\t<a class=\"photos-btn\" target=\"_blank\" href=\"http://litten.me/gallery/\">摄影</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/litten225/\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","date":"2020-03-12T13:55:48.687Z","updated":"2020-03-12T13:55:48.687Z","path":"photos/index.html","_id":"ck7otizq400057gui9xunvkcu","content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"noopener\">Ins</a>\n\t<a class=\"photos-btn\" target=\"_blank\" href=\"http://litten.me/gallery/\">摄影</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/litten225/\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","site":{"data":{}},"excerpt":"","more":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"noopener\">Ins</a>\n\t<a class=\"photos-btn\" target=\"_blank\" href=\"http://litten.me/gallery/\">摄影</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/litten225/\" target=\"_blank\" class=\"open-ins\">图片来自instagram，正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n"},{"_content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'http://litten.me/ins-min/' + data.link[i] + '.min.jpg';\n          var src = 'http://litten.me/ins/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '.jpg';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"640x640\" data-type=\"' + type + '\" data-target=\"' + target + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './ins.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","source":"photos/ins.js","raw":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'http://litten.me/ins-min/' + data.link[i] + '.min.jpg';\n          var src = 'http://litten.me/ins/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '.jpg';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"640x640\" data-type=\"' + type + '\" data-target=\"' + target + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './ins.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","date":"2020-03-12T13:55:48.688Z","updated":"2020-03-12T13:55:48.688Z","path":"photos/ins.js","layout":"false","title":"","comments":1,"_id":"ck7otizq800077guidfp1pip4","content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'http://litten.me/ins-min/' + data.link[i] + '.min.jpg';\n          var src = 'http://litten.me/ins/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '.jpg';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"640x640\" data-type=\"' + type + '\" data-target=\"' + target + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './ins.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","site":{"data":{}},"excerpt":"","more":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n\n    /**\n     * @name impush-client \n     * @description 这个项目让我发家致富…\n     * @date 2016-12-1\n     */\n\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'http://litten.me/ins-min/' + data.link[i] + '.min.jpg';\n          var src = 'http://litten.me/ins/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '.jpg';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"640x640\" data-type=\"' + type + '\" data-target=\"' + target + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './ins.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);"},{"_content":"{\n\t\"list\": [{\n\t\t\"date\": \"2017-07\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 7,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BW_0-LNAEQy\", \"BWw_lTjAWvP\", \"BWl0n7ggC8d\", \"BWbyVtmgZA0\", \"BWPEL03A6QN\", \"BWJyvn_A8k1\", \"BWEqgtvgzyu\"],\n\t\t\t\"text\": [\"那天拍这张照片，是看到一个小女孩，借了妈妈的手机，边拍边赞叹“好美丽的颜色啊”。但照片最大的谎言就是定格，人们觉得美好是永恒的，至少不太会想时间之外的事情。\\n事实上这种植物一旦攀上柱子，就疯子一般往上爬，为了给顶端的小苗供给养分，下面的叶子会慢慢掉光。立交桥好高呀，小苗爬不上去，累了也枯萎了。最后只剩下光秃秃的丑陋藤条。\\n不过我还是希望小女孩过几天再看到它时，只是轻轻说“啊原来是这样”，而不是和我一样觉得它很丑。\", \"倦\", \"最光明的那个早上\", \"光芒万丈\", \"接连的雨，让高架上的三角梅窜得好高。高于路灯高于建筑物高于一切。不过它们的命运就是被剪掉，然后继续做一棵安分守己的好花\", \"天桥上汽车奔驰，天桥下静默花开。这是两个世界。\", \"用流行的话来讲，深圳现在的天气就是“一言不合就下雨”。但是天空从来就没有言语呀，也从来没有凑合谁的心意。不说话，不取悦，就很酷。\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-06\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 6,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BV6WiUxgHp0\", \"BVrnb0GAIbo\", \"BVq6fMHAV8i\", \"BVUXrYtFwlA\", \"BVHdxQsFpYS\", \"BVE4dC6l-tK\", \"BVCbPn6lOqn\"],\n\t\t\t\"text\": [\"午睡\", \"分享一个甜甜圈\", \"分享一个失败的对焦\", \"雨后\", \"腾讯云\", \"黄昏的公园深处\", \"从今天开始，决定数一下一年有多少个多云的日子。\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-05\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 5,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BUqBlIWFF_f\", \"BUlWsL0F5kE\", \"BUgrXBVlaJR\", \"BUdT28JFYpP\", \"BUYZzrJFfdJ\", \"BUO7nZZlWf0\", \"BUEZNOKFUK0\", \"BUB8VemFJEE\", \"BUA8KqRlF3n\", \"BT_4mkYFxc5\", \"BT_eImQF9sY\", \"BT-fITqlTiO\", \"BT27_ryFIr_\", \"BT0azZAFBIs\"],\n\t\t\t\"text\": [\"森林之晨\", \"Hello, _____\", \"水中豆\", \"雨中的公交车窗外\", \"飞机飞过天空\", \"西塘总的来说，还是挺好。就满大街唱着《成都》和《一瞬间》，感觉不是很懂…\", \"可能南浔真的是去过小镇的一个特例。没有太多的迷之传说去渲染，它就在这，一言不发的等你。兜兜转转又回到了百间楼，挨家问有人吗，随便帮再做个炒绣花锦吧，吃完这个菜我就走。\", \"看了一下午的燕子\", \"燕子飞过百间楼\", \"夜色里迷了路\", \"雨中漫步\", \"可能是一种“一出行铁定下雨”的体质\", \"生如夏花。整个四月都过得比较丧，想了下唯一开心的事情就是朴树的专辑了。\", \"五月\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"video\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-04\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 4,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BTvD8fCFOpY\", \"BTbS_uKF5Xx\", \"BTYKbXMFoUM\", \"BSc5TamlT16\", \"BSbA96PFiWC\", \"BSTZP6-gSaD\"],\n\t\t\t\"text\": [\"多久没去看一场日出\", \"阳光已经铺满下班的街道\", \"午睡\", \"与你跋山涉水\", \"清明晚宴，以及一个迟下楼的我\", \"一个突如其来的雨天\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-03\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 3,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BSLeDr7gDu9\", \"BSIUnyfAdQY\", \"BSAjHqkgtr9\", \"BR-0YW4gfC9\", \"BRk5uUzlAe2\", \"BRXafqQgsSY\", \"BRS_5qFA9dW\", \"BRIjntvFr5d\"],\n\t\t\t\"text\": [\"蜘蛛与落日\", \"春林初盛\", \"日光倾城\", \"夜空中最亮的路灯\", \"二月底就开始构思要拍一组日系，每天端着相机来上班，然而是连续半个月的阴雨。今天终于天放晴了，相机却没了电。\", \"车窗里雾气，车窗外水滴。想起小时候作文，写为什么喜欢雨天，因为晴天你会纠结要不要出去玩，雨天就不用想，踏实呆家里好了。但那是小时候，现在也踏实了，就是下不下雨都要去上班啊…\", \"街拍 | 七点半\", \"“又是一轮月高悬 云端那边的天 两颗星座遥望夜空 永远不能相逢”\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-02\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 2,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BRBWMaAl2h2\", \"BQfmYX5gfiy\", \"BQU0S39AetF\", \"BQFkKYIASOp\", \"BQAdVx5AOLy\"],\n\t\t\t\"text\": [\"深圳的高架有很多三角梅，这种花的优点和缺点都是太倔强\", \"最近重新把球拍拿了起来。还是会很怀念，高中那时的球馆，阳光也是这样斜斜照进来。球滚到再远的角落，还是能捡起来；人走出了球馆，可能再也回不来。不过，只要你等，也总有陌生人推开门说：加我一个。\", \"深圳\", \"离家前心血来潮，突然想再刷一遍《白鹿原》，就把书给捎上了。列车经过山洞，窗外是明灭的光影，第一次觉得黑娃横腰打白嘉轩的那一棍子这么魔幻…好像会有迷之bgm响起，佐助说我要毁了木叶\", \"近乡情怯。情怯，多好的词语\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-01\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 1,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BPwIWSXgQ_L\", \"BPoXK-sgC6M\", \"BPMTnMTAH_Y\", \"BPKrtVMgo9j\", \"BPAVAW5gFc7\"],\n\t\t\t\"text\": [\"城市住久了，第一次决定在乡村过年。白天开心农场，晚上拍星星，过上了谈笑无鸿儒往来有白丁的生活…\", \"稻草人的早晨\", \"列车继续加速度，水珠在最后的时光里尽情飞驰\", \"一个等车的人都没有。上一次看到这副光景，是2009年10月5日的凌晨3点半，湘潭至武汉\", \"“人呢？”“买菜去了呗，真慢”——所谓冬日的阳光\"],\n\t\t\t\"type\": [\"image\", \"image\", \"video\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-12\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 12,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BOsC8obAOwI\", \"BOpI4qsAi6c\", \"BOjCbzZAhQy\", \"BOUysuPgbXG\", \"BOTVNfYgjRt\", \"BOMjl4LATC-\", \"BOAF_bbA9H0\", \"BN9ZdHuAqL1\", \"BN30BiDAVGo\", \"BN2CjzagYQK\", \"BNyLQGUgdma\", \"BNwOJYlgAOL\", \"BNtsL5QgEts\", \"BNn5V7oA_nc\"],\n\t\t\t\"text\": [\"每年这个时候都要趴在这座天桥，拍一张照。这个世界似乎没变，但又在喧哗和前行。这年成长了挺多，也学会看淡一些事情。\\n可能是代码写多了，感觉世界的逻辑有时很简单，事情无非是let，变化历历，或者是const，永恒安息。如果一开始就想清楚，留不住的就随风去，不会变的就钉到骨子里。那你说多轻松。\", \"去看雪？\", \"“大楼诗人”\", \"又是一年岁末时\", \"say hi\", \"现在的每个日落，都会有光正巧从窗帘缝隙钻过，平行照射到我的电脑屏幕。这个时刻就感觉特别神圣和中二。披上了迷之神眷色彩，讲不好我的工位就是个宇宙中心，太阳在绕着代码转\", \"末班车\", \"树影，好似一只黄鹂和蜣螂\", \"街拍 | 晴天\", \"“望”\", \"午睡\", \"“黄昏之时”\", \"枯萎的植物，最后的光\", \"街拍 | 也许是深圳最后的夏日\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-11\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 11,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BNUaqEagioX\", \"BNTHIbUgigX\", \"BNRr9zBg0fu\", \"BNQHWSwA1Gy\", \"BNPbdVIg6gT\", \"BNOpXsKgU53\", \"BNBrozHAAV7\", \"BM8hsf-grvj\", \"BM8WO8xglvC\", \"BMy1VT3grFk\", \"BMrSxSNgpIN\", \"BMedxcZA0_g\", \"BMQLQvogqn7\"],\n\t\t\t\"text\": [\"“我是谁我爱谁我要谁我去哪”\", \"天都峰顶转一圈，站的地方巴掌大其实很慌…\", \"下了一夜雨，晚上没睡好，脑子里老想着天都峰关闭的事情。但风云变幻就在一瞬间，冥冥中必有回响，突如其来的晴天太过惊喜。峰顶走起\", \"上年没见着的雾凇突然出现，愿望兑现的感觉\", \"“不看岳”\", \"黄山行\", \"宿舍楼\", \"华科的秋天好像一条安静河流，慢慢扩散，了无声息，异常缓慢，又很具体。反正，时间还有很多，请随意\", \"又回我科，我科这个季节怎么拍都好看\", \"今夜月亮\", \"想过去改变，想过要离开，想过拍拍裤管就去远方。然后又想是不是先做出点事情，后来又突然有了点责任，再后来发现自己可以影响一些人… 它没有扼杀选择，反而让更多条路铺在我面前。所以，生日快乐，18岁。\", \"街拍 | 面对面\", \"一叶知秋\"],\n\t\t\t\"type\": [\"image\", \"video\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-10\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 10,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BL_WXdxAM1Y\", \"BL6dTmIgecl\", \"BLv6COag1M6\", \"BLlf8WWgHcJ\", \"BLfzJ7gjj-8\", \"BLbaFJDAJ1i\", \"BLVHTFJgfg-\", \"BLTvxMWgKUn\", \"BLTd_nVAFQi\", \"BLP2UMKAGcn\", \"BLJIJCegCT3\", \"BLDZyq2g7Zr\", \"BLDSZ6pAsAZ\"],\n\t\t\t\"text\": [\"这年头不做作的民谣已经很少了……\", \"很久没去看那群留守的孩子了。他们还是很容易对每个人卸下心防，情绪会很强烈，所以开心时笑得特别大声，这让我想到悲伤会不会也成正比。不敢想。这世上，不一定所有问题都要去思考去直面，因为时间能帮你们解决很多问题。起码，在一起玩的时间。\", \"深圳雨，台风。小时候问大人，为什么我的风筝飞不起来？他们说要等大风。所以我期待着台风天。等了半年，台风来了，我却只能呆在窗户里往外看，也开始理解这场空欢喜。后来发现台风不单是种天气，还可以是一件事或一个人\", \"鸽子再也看不到无名山的高，你也不再是安和桥下清澈的水\", \"降低了预期，觉得滕王阁还不错。路遇一位玩摄影的大爷，教了许多东西，也听他说了许多往事。其实人得不得意都要尽欢，白不白头都要有那么一点青云之志\", \"东四变成了超市\\n东三变成了清真\\n神剪阁还在\\n绝望坡的小吃多到绝望\\n球场都翻修了\\n计科有钱了(辅导员说的)\\nofo小黄车已占领校园\\n学弟学妹主要玩lol和王者荣耀\\n光谷门对面依旧有鸡蛋灌饼和麻辣烫\\n韵苑食堂还是不怎么好吃\\n沁苑的猫又生了许多娃…\\n\\n来去匆匆，一些照片在：http://120.24.181.238/gallery/\", \"要是一个地方能称作图书馆，不单单是因为图书，还因为它收藏了太多的心事。\\n一语一念，虽不可借阅，愿永不过期。\", \"《深夜食堂》\", \"《返校日》\", \"旧时作\", \"和奶奶在一起。把轮椅推到广场下面玩，突然问我：你们厂生产什么？我：很难说，网络你知道吗… 奶奶：哦，卖绳子的啊\", \"19年前的我，就已经学会了爱恨分明……\", \"回老家，今天正好是“圩日”。村民一家老小，从竹林深处的罗江村出发，走过这条小桥，赶往市集。买到中意的衣服，或者零食，这就是完美的一天\"],\n\t\t\t\"type\": [\"video\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-09\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 9,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BK-l0eHgWep\", \"BK3W05HgBqP\", \"BK0nQcSARek\", \"BKx6pvkg5HE\", \"BKfNILQgNAO\", \"BKdn7vEAJJW\", \"BKcdEbPAWzk\", \"BKcCulagAx1\", \"BKazUfGAFlb\", \"BKayutggosw\", \"BKTJUOdgkLm\", \"BKIiijpAvmT\"],\n\t\t\t\"text\": [\"街拍 | 回望\", \"街拍 | 深拷贝…\", \"街拍 | 拷贝\", \"街拍 | 擦肩而过\", \"苗族妹子上来敬酒。以为只是普通米酒，一饮而尽，后来才跟我说有70度。那还怎样办？不走了。\", \"满城星星点点的灯火，当作你心心念念的生日蜡烛吧。生日快乐，永远单纯。\", \"以大为美的苗族银饰，近看却有许多复杂的细节\", \"迷了路找不见甲秀楼位置。干脆坐下来吃一碗哨脆面，听到对面歌舞升平，寻路过去果然找到了。道理就是，有地标的地方就有广场，有广场的地方就有广场舞。感谢大妈，感谢广场舞。\", \"眼中仿佛藏了一个宇宙\", \"曾经想仗剑走天涯\", \"…\", \"hello，好久不见\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-12\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 12,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/12317949_812027942276002_800384968_n.jpg\"],\n\t\t\t\"link\": [\"-wSMLcI7sl\"],\n\t\t\t\"text\": [\"秦教练教学得很好，三小时已可征服中级场。滑雪真是项迷人的活动，还没回去就约好了下次再来\"],\n\t\t\t\"type\": [\"video\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-11\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 11,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/s640x640/sh0.08/e35/12269862_894338194013437_1805169379_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/s640x640/sh0.08/e35/12276891_172191463131445_911534090_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/12237527_913338585386151_2037194016_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11934646_1088170014540783_209449183_n.jpg\"],\n\t\t\t\"link\": [\"-tqoLXo7v-\", \"-qKfKxo7nw\", \"-nE5BQo7uP\", \"9qjBpWI7lk\"],\n\t\t\t\"text\": [\"雪上鸦飞\", \"行走于结了冰的松花江上，遇到一群放生的人。佛经飘扬，鱼虾入河，河面转瞬又恢复了平静。而后在饭店，服务员说我们的鱼，就来自这松花江里。\\n\\n佛的安排奇妙又令人啼笑，鱼让俩群不同的人都收获了快乐？那么我想，鱼就是佛\", \"月上枝头\", \"在天黑后的日光岩顶呆了很久，一个人看一座岛，孤单也自由。后来遇到一位姑娘，我们一同下山。带着她逛遍整条龙头路找吃的，但她什么也不愿吃，问她，她说，想吃酸辣土豆丝。\\n\\n只有笑着承认，真是意料之外的答案。我出来玩，就是为了吃平时吃不到的东西，她则是觉得家乡的菜最熟悉，在哪都是愿意吃的。\\n\\n好吧，陪你吃。因为，离开武汉这么久，我也挺想念这道菜。\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"video\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-10\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 10,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12145229_1722399741326075_2063247708_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12080493_892409564169375_1626542651_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/11849199_203248513340142_1615092499_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/12132912_162625974083441_1400003063_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12135478_1700175696879683_933151519_n.jpg\"],\n\t\t\t\"link\": [\"9VYE8YI7sk\", \"9BkX3xo7od\", \"8-Ba4MI7lt\", \"88Neujo7r2\", \"8uKqhDo7vp\"],\n\t\t\t\"text\": [\"在路上\", \"11点的时候，不想睡，借一只手电，一人夜游古村。这事情很刺激，转角遇到的神像，榕树的垂枝，摇曳的灯笼，自己投射到土楼的巨大影子，莫名的恐惧自心底升起。然而后来又不怕了，却总是想起以前去的思溪源村…with my friends\", \"古城的砖瓦年代久了，就很容易长出猫来\", \"以前吉他老师说，对于一首天空之城，听过与弹过是完全不一样的。弹过后才知道，从开始的吉他2品就一直在递增，仿佛自身也在飞翔，云层渐开，空城显现，情绪是那么容易被调动。然而我的水平只够感动自己，要抓紧时间努力学习了。不说了，玩游戏去了\", \"海上日出\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"video\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-9\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 9,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/s640x640/sh0.08/e35/11875445_885316994870904_706284789_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/s640x640/sh0.08/e35/11352715_138879086461968_2066668148_n.jpg\"],\n\t\t\t\"link\": [\"8NKC9RI7oZ\", \"8DOh_to7p0\"],\n\t\t\t\"text\": [\"沙滩总有数不完的沙子，数不完的故事。在这突然想起那本还没看完的《岛上书店》，是时候继续做些什么了\", \"陌上花开\"],\n\t\t\t\"type\": [\"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-6\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 6,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11429225_720390118073037_768409912_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11420780_1012574008772885_1569805305_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11252784_879698105429690_2109453469_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11267410_925161560884785_371811288_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11375982_491190547696110_2013240096_n.jpg\"],\n\t\t\t\"link\": [\"4T1Lfgo7gX\", \"3-mmN3o7mn\", \"3uts9do7jI\", \"3iK7kwI7j1\", \"3glBKbI7jm\"],\n\t\t\t\"text\": [\"大雨之后\", \"一脸无辜的王尼玛大哥，从肚腩来看，果然是正品？\", \"感觉迷上风筝了。有次做梦，想到一根根拉伸向上的线，像是在钓空中的鱼。而一个技术娴熟的“渔夫”，收杆时是这么干净利落。\", \"起飞\", \"小萝莉不愿回家，跟奶奶说：“再让我玩会，明天要学钢琴，后天要学跳舞，就来不了这儿玩了。”\"],\n\t\t\t\"type\": [\"image\", \"image\", \"video\", \"video\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-5\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 5,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/11252751_1444216632541093_1558227860_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11226595_701075516681953_1354085958_n.jpg\"],\n\t\t\t\"link\": [\"24-dd6o7uB\", \"2uQeuaI7nv\"],\n\t\t\t\"text\": [\"风雨欲来\", \"野生海带\"],\n\t\t\t\"type\": [\"image\", \"video\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-4\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 4,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11142212_609961145801361_1913577076_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11049421_1375007652828983_401355534_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11137852_1649834698581861_1050691792_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11055751_1573536912901494_1683773508_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11055897_1407191599597961_1763496348_n.jpg\"],\n\t\t\t\"link\": [\"1IUZByo7vP\", \"1ISKRxo7r8\", \"1GPBzpo7qW\", \"1FtGO3I7kN\", \"1C03iPI7hZ\"],\n\t\t\t\"text\": [\"要回去啦，再见北流河\", \"灵芝get√\", \"这里的清明是个很重要的节日，子孙们都会回来，跋山涉水，竹排渡江，荒山寻路，凭集体的记忆寻找列祖列宗的宝地，寄哀思，也求福德。一路上可以听他们唠叨旧事，也有超级靠谱的风水科普\", \"为了部落\", \"在清明的山路遇到了天然松香\"],\n\t\t\t\"type\": [\"video\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-3\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 3,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11123665_1542600796003839_1576473443_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008101_1593505510894691_369067449_n.jpg\"],\n\t\t\t\"link\": [\"04_8fwo7gL\", \"zzfe7Oo7uc\"],\n\t\t\t\"text\": [\"如果你飞得像月亮这么高，就不会搁浅在树上\", \"喜欢这个季节的天空，你找个草坪一躺，飞机，风筝，鸟儿就都在上边，天气好时还能看到白天的月亮\"],\n\t\t\t\"type\": [\"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-2\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 2,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10958252_1405701033068537_2023890854_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10832246_413065338853260_183697882_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10268927_436139166536328_1377561628_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008343_410508022446936_713236389_n.jpg\"],\n\t\t\t\"link\": [\"zcWez6I7uo\", \"zRPazvI7ol\", \"zPN2LtI7sT\", \"zKrDWlo7gZ\"],\n\t\t\t\"text\": [\"很多东西随着慢慢长大，变得不像小时候那样盼望热切，比如巧克力麦当劳薯片雪糕。只有对担子粉的爱永远不变的说…\", \"据说是一年一度考验演技的时候…\", \"锈迹斑斑的香炉\", \"回老家了，小时候跟我打过玻璃珠的小伙伴们呢？你们一个在北京，一个在安徽，一个在澳洲，一个我都不知道了…但你们看到玻璃珠的时候，要想起我来啊\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-1\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 1,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10932550_620643038062978_1729442807_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/891532_1563899373855738_1180535181_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10005439_338105566394046_854247264_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10903312_693622147425934_1766884651_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10914460_1546003772305181_1301162053_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10903277_832760670116494_255352239_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/924083_1539057536347062_2062767438_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10890944_765121966897759_2039585477_n.jpg\"],\n\t\t\t\"link\": [\"yb8uaCI7tt\", \"yKBopho7mX\", \"yAOcawI7pA\", \"x5U25kI7sN\", \"x1TTZUo7gW\", \"xeGbWuo7if\", \"xXr70fI7iD\", \"xUB4dOI7g1\"],\n\t\t\t\"text\": [\"草地上遗落的鞋子\", \"有位很久没联系的朋友寄来明信片，说：我很少看到海，正如你没见过几次雪\", \"深夜总是灵感乍现的最佳时期，只是几个设计方案都没法使自己满意。累了打开窗看到天上有个大月亮，只想用图章工具把它干掉。\", \"面朝大海冬暖花开\", \"分享日常不正常生活照一张\", \"其实我想，那些古老的渔民们，每天看着海岸线的日落日出，肯定是有人想过地球是圆的。而“想法”与“证明”之间，却跨越了一整条麦哲伦航道\", \"鱼山鱼海中，只有你，肯安静的趴在65厘米厚的亚克力板子上与我合影，大丑鱼\", \"新年单人旅行走起。其实从九洲港码头开始，珠海并没有给人很惊喜的感觉，包括盛名之下的沿海风光与渔女雕塑。倒是交通不通畅，从轮渡到公交都给我带来了许多麻烦。直到，晚上吃烤生蚝的第一口，我又觉得什么事情都是可以原谅的……\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-12\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 12,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10899183_999582293404177_745539859_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10894909_702627706517406_1277557620_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10831989_483313928477468_40906631_n.jpg\"],\n\t\t\t\"link\": [\"xRWN47I7pW\", \"xO3qREI7iW\", \"wEQykeo7tU\"],\n\t\t\t\"text\": [\"2014年最后的阳光\", \"最后一节吉他课结束后，马路上那风一直吹，才感觉南方的冬天终于是来了。其实吉他在冬天会有许多神奇的事情。比如琴弦如肌肉一样因冷而紧绷，发出比以往沉闷的低语；而空旷的大教室里，如有其他同伴拨响和弦，手中本已按灭的琴弦又会因共鸣微微颤动。像有生命一样。\", \"有棵丑树，我经常去看，又胖又歪，秃得可笑。在变冷的一天，它突然就开花了。冬天的花我知道得很少，南方没有梅花，那就是异木棉了\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-11\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 11,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10784965_1518537748403855_176956695_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10735195_1505939246340704_1984926778_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10747711_429336373885590_422028037_n.jpg\"],\n\t\t\t\"link\": [\"vP2ywuo7pq\", \"vA68BLo7tN\", \"u7zEVxo7vw\"],\n\t\t\t\"text\": [\"通灵之术！\", \"现场气氛果然不一样，马上就可以看到小伞在大哥胯下疯狂输出…是时候来首选一记薇恩了\", \"有朋友跟我说，挪威的森林根本看不下去；又有朋友说，看这书一发不可收拾。差别好大呀！我倒觉得有个简单的方法：翻到开篇的这几个字，如果心中一紧，那就说明这本书适合你，否则请弃之\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-10\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 10,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10735112_730529873702428_413107753_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10725177_573652486072155_1401604216_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10724868_302191016652312_2097904817_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10731727_461314204008708_386749273_n.jpg\"],\n\t\t\t\"link\": [\"uu70zJo7qb\", \"uQnvluo7sK\", \"uLi56Wo7oO\", \"uEv-tCo7rJ\"],\n\t\t\t\"text\": [\"天下的小饼干遇到我，貌似就只有一种下场！！\", \"一个人，一支口琴，一片海，一瓶酒\", \"《论夜归，打的，以及发票的正确用法》\", \"童年真好。我以后一定不要跟孩子说：希望你快高长大这种傻话…\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-9\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 9,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10616983_1382591478697855_2107473552_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925287_1464119273867077_427071626_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/925284_1534308033454310_855505111_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10666267_1550871771803214_2074300649_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693244_734401199942901_1572709880_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693771_1517437541834868_665867908_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693822_497709657032441_1125408654_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10683941_796597910390683_12441123_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10661142_164227523747936_1526737465_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10661182_550889531706942_2043749716_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10520334_1523531751215211_1344090061_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693390_547748238660649_761529890_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693650_837768039589771_1793184733_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/914812_1529561143923493_1662159287_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10644019_368509079979549_2085033896_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10684161_918887498139099_2081383304_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10683828_327931784041264_894089329_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10666028_872988212713750_1345360858_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10665501_1452353738387652_2075798065_n.jpg\"],\n\t\t\t\"link\": [\"tXuIHso7qK\", \"tJjQlAo7kH\", \"tDYyUeo7oX\", \"tCBULHo7sW\", \"tB_Xmao7qG\", \"s8cKzLI7pM\", \"s6-lOFo7ip\", \"s5GifkI7q7\", \"s3uZcmo7uj\", \"s2bb5io7p-\", \"s2P72tI7o6\", \"s2FPpGI7o_\", \"s1LPQPo7v8\", \"szZP5Io7lY\", \"sr9rtNo7lM\", \"sr7gXKI7h_\", \"srG7fjo7sV\", \"spAnrio7oh\", \"sj4BGgI7t_\"],\n\t\t\t\"text\": [\"我的好朋友——超级高冷超级磨人的丝瓜\", \"沉眠的店主失眠的狗。想起大学的最后时光，宿舍24小时都有人醒着，自由的人生，自由的酒和曲终人散，大家通常没有另一半，没有钱，没有忧愁，爽成狗\", \"如果他是程序员…\\nvar date = lifetime;\\rif(rotate(mountain, water, stupa)){ /*return nextLifetime;*/ return meetyou(journey);\\r}\", \"听着山寨的民谣电子乐，看着美好的姑娘。功德无量。\", \"弥里塘太宁静。在这我一直想起每一个被深圳车水马龙声吵醒的早晨，真是光辉的岁月\", \"进藏。天空挂满着云，黑的白的都有。云朵转眼飘散，它却依然是蓝色。\", \"“音浪太强不晃会被撞到地上…”\", \"陌生的朋友，愿下次再能与你们相聚在丽江love wine & half。我无法融解你悲观现实的想法，你也无法说服我旅行并不是逃避。但这都很有意思。只是想起以前有个人叫我不能喝太多的酒，一想到这个呀我就越喝越多\", \"玉龙雪山\", \"以前想去丽江，但去过的人都灌输着你也许会失望的观念，因而甚至不敢动身。这是一种“怕”。有时候真得自己去看看才会了然。第一天在丽江，民谣吉他缓缓流过商业化的街道，原来没有惊喜，也没有失望，一切刚刚好。\", \"我注定要回到老路上\", \"彩云之南\", \"云南，向往已久的地方\", \"QQ同时在线人数破2亿纪念，作为一颗小小螺丝钉，名字正好镶到企鹅的大嘴巴上。这时觉得有一丝光荣，一种努力被实化的错觉；然后又有点不舒服，感觉此时的自己，和名字身边的人一样。可我想要的就是不一样。\", \"陪伴一定得是件漫长的事呵。和奶奶在一起的中秋节。\", \"中秋和家人一起去看孔明灯，热闹而安逸，这是小城市的美好。\", \"老家的葡萄藤，从我初中时就挂在这，再见已是十一年\", \"家里橄榄熟了，盐渍，暴晒，蘸蜜，简直人间美味!\", \"在一场太阳雨里回到家中\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"video\", \"image\", \"video\", \"image\", \"video\", \"image\", \"image\", \"image\", \"image\", \"video\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-8\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 8,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10654876_610857929023752_364709543_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10644013_777642448965989_544517718_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/924456_1471485796442896_1699836323_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10607913_692632367472666_1829853902_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10611052_1466241683635233_830264506_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10617144_829548960388746_1611410337_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10453953_542161702576881_1621059386_n.jpg\"],\n\t\t\t\"link\": [\"sXa9g6I7jB\", \"sPt4u4I7kA\", \"sC18G0o7qb\", \"sAMmEWI7oC\", \"rzSow4o7lH\", \"ro28LPI7oc\", \"rR37wLo7iu\"],\n\t\t\t\"text\": [\"在书店的晚上终于把新专反复听完。太柔了…打一星两星的人肯定是真爱粉，这点有人敢怀疑？我不是，打四星！停不下来，直到书店响起:深圳即将入眠。但22点还是深圳的早晨呀\", \"慢三的华尔兹，大篇幅的爵士即兴。感觉生活得太浮躁。也太安逸。\", \"好久没看话剧，这部果然没让人失望。导演太会讲故事了，1024个赞\", \"纵有一万种悲伤的美丽，也比不过这段。\", \"在书城里看到的《后会无期》分镜图。电影那么美，分镜是这样，这就是现实~\", \"如果你从北京来看我，我会很感动;如果你像光，从太阳那头过来，我不以为然。因为光到地球只要8.3分钟。我们经常错用代价来衡量情感\", \"相聚总有时:)\"],\n\t\t\t\"type\": [\"image\", \"video\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-7\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 7,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925559_1482425071996009_1940959046_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10554006_501929086608023_917623457_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10576105_624878090953161_638111947_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10570119_332808380211109_125412512_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/926536_828142997203682_1319760676_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/923702_252705761596555_721784545_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10549755_708603639175850_2095584541_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/928307_1442957109299429_297849354_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10488451_303926969784787_1278259348_n.jpg\"],\n\t\t\t\"link\": [\"q5e2KpI7qn\", \"qyXXpNI7q5\", \"qxfUe0I7lp\", \"qq9usdo7hr\", \"qn4WCIo7hi\", \"ql0brho7vN\", \"qkiaYDo7t9\", \"qURC9fI7r-\", \"p4A8IuI7py\"],\n\t\t\t\"text\": [\"随便走走，发现世界还是很美好的。当拥有美好事物时，经常习惯性的熟视无睹;当努力抓住你想要的东西时，它又可能瞬间破碎。但依旧需要不妥协。\", \"荔枝——我心目中的水果之王（有之一）\", \"高中时代最新款的mp4，现已成了老古董\", \"台风来临时，刚好会是暑假。但我已没有暑假。\", \"看着一场雨由远及近的淋湿院子，太漂亮\", \"归来却空空的行囊  那故乡的云  那故乡的风  啦啦啦啦啦 啦啦啦。\", \"在今年第一个狂风大作的早上，回家去\", \"98年，世界杯第一次在我脑中留下记忆，和爸，围着那台很小的tcl。今天，爸还打电话给我，让我别看太晚影响到明天工作，但我知道他自己也会去看的。是的，我们爱足球，今生今世\", \"这几天深圳的天空很美，无论晴雨\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-6\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 6,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10362316_1434933843444633_1187384207_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10471930_507725875994902_393186392_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10454011_484872768311603_738380027_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/923661_248502122024084_2086692261_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10424605_774238262594769_78480252_n.jpg\"],\n\t\t\t\"link\": [\"p06uEZI7tG\", \"pytFNpo7sD\", \"poMFteI7q0\", \"pMt5tgI7vj\", \"o3eroFo7gK\"],\n\t\t\t\"text\": [\"“往事依稀浑似梦，都随风雨到心头”——梅表姐\", \"navy blue\", \"今天我遇到一朵枯玫瑰。她只是枯萎，从未凋零。\", \"上届卫冕冠军被打成筛子的…是热火…\", \"我和大神的差距——web工程师的自我修养\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-5\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 5,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xat1/t51.2885-15/e15/10387796_255697041300477_753213015_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10005623_779769878723970_627922376_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10358172_1495900567292387_640174442_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10369281_674379822637848_233362820_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/928251_430572373746575_786910314_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10358301_256481271142988_1088114034_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10296597_1413560715589179_392570057_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10299642_561366610636165_721929935_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10268965_1446530205590326_114108738_n.jpg\"],\n\t\t\t\"link\": [\"op03boo7lW\", \"ops-ZUI7t-\", \"ofqhBpI7mQ\", \"odP0cno7ue\", \"oLX-4GI7ne\", \"oBl6WtI7qC\", \"nvPChzI7vU\", \"ngAyz8o7qj\", \"ndTggdI7jn\"],\n\t\t\t\"text\": [\"突然发现我还是挺喜欢大晴天的\", \"单人旅行走起！开心\", \"不久就可以吃了\", \"黄昏时分\", \"大雨倾城\", \"今天路过公园，一朵玉兰掉在身边。想起小时候陪伴我的三棵树，两棵木棉，一棵玉兰。当然玉兰这名字是后来才知道的，记忆里的那朵永远叫做香花。三年级的某天放学，这三棵树一并倒下了。\", \"雨中深大。雨季再来不再来。\", \"say hey to may\", \"故事中的小黄花\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-4\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 4,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10261258_711820055527911_220271949_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10249356_695726313802446_881680057_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268929_597082527053970_1060360934_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268941_490697914386538_1148834228_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10254195_545488182236276_1930978882_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/917572_539124756205696_1549712749_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/927273_657564254280429_578859844_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175316_650834874981595_1358429831_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/926422_245144379006241_1254093305_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/891289_302574849898688_205313988_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175309_510867459023322_1700312549_n.jpg\"],\n\t\t\t\"link\": [\"nOGNjUI7op\", \"nGJfYAo7lW\", \"nATIxlI7tR\", \"mxsNwto7pQ\", \"mm7JTUI7p0\", \"mhER0lo7oe\", \"mfvVUYI7hu\", \"mdF-nNo7pE\", \"mcVLQzo7nl\", \"mb5cFho7sd\", \"maqYInI7if\"],\n\t\t\t\"text\": [\"谢谢亲们的蛋糕和礼物;谢谢我们始终用“同学”来称呼彼此。\", \"处女座老榕树\", \"放风筝的人们\", \"现在我的状态，像极了一只被推上战场僵尸\", \"这几天我耳边是都是这样的话语:1、“就是敲敲键盘，挺清闲的哈！”2、“别太挑剔，给个一两千就先做着”3、“什么？你那一碗粉要十二块钱？！”我回深圳了，几天的清静生活，谢谢乡亲们的招待。\", \"good luck\", \"瓦上花开\", \"好吧，这是一艘船\", \"石表山，思罗河，四年后的清明我又来到了这儿\", \"清明，一路向西\", \"清明一回到家，老妈就开始炫耀她试验种的豆芽。愿君多采撷，此物最好吃？\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-3\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 3,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10012487_604746702952671_676907736_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/1171265_389602547845527_1588547561_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11376491_1614984048759908_413209146_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11251074_365441270314698_1015057085_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11380079_1581430378786145_504181803_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11330604_837683999618217_506172540_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11273047_110162449318540_1639646034_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11375356_908792249164254_112740693_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11357539_388432694679963_1281450994_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11311124_1611430865770700_1482115931_n.jpg\"],\n\t\t\t\"link\": [\"mIgOdio7jT\", \"mIAS5lo7hb\", \"lrhVmio7lF\", \"lmADv6I7rU\", \"lhPFVeI7g6\", \"lcyrKSI7h_\", \"lSda6Ko7nG\", \"lSSxd8I7kB\", \"lK0xswI7s6\", \"lA4KaBI7go\"],\n\t\t\t\"text\": [\"转角遇到戏台，耳熟却不知道是哪一出了。想起爷爷以前的二胡与杨琴，自己精削细磨的琴竹，还有他组织的“菊山楼”粤剧队，真是一晃好些年。今年清明，一定回去。\", \"这本书超赞！好书好书好书\", \"四五点写程序太累，就不写了。不告诉任何人，跑到这个立交桥底，我已来过好几回。这里有一棵白色的紫荆花，满墙爬山虎，和刚放学的小朋友，出去，右拐，再右拐，转角可以遇到你，我的肉夹馍…\", \"越来越认生了，到步行街买衣服，找到比较适合的，却因为店员太过热情…跑了出来。闹市中居然藏有一古庙，还是这里自在，漫天神佛只是笑笑，不理物我，无论喜悲。对了我来这干嘛\", \"爬山的好处:强身健体，磨砺意志，开阔胸怀…坏处是:没有wifi。\", \"又见回南天\", \"老妈说，今天要我送个礼物！离家万里，只好迅速开发出这个app，摇后就会播放我唱的真的爱你。可惜她说摇后没反应，后来才知道，她拿的ipad在摇…但我是真的爱你\", \"今天下雨，的士司机都不肯理我。头上路灯光芒遥不可及，脚下路面棱角冰冷鲜明\", \"起风吧，明天。喜欢偏冷的日子，假如是春天，假如是风大，太完美了\", \"腾讯的凌晨四点半。第一次在此过夜，听着耳熟不能详的歌，看着平静不微笑的人。然后记起，家里打来被我按掉的电话，忘了回\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-2\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 2,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/1737225_591794970889160_1849235580_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/1741200_451260698337036_577792061_n.jpg\"],\n\t\t\t\"link\": [\"kv3jNgI7sw\", \"kr8sW8I7nR\"],\n\t\t\t\"text\": [\"“不能吃太胖喔，会被杀掉的！”\", \"今晚，已经看到两个小女生在问，这里有《九云梦》吗？\"],\n\t\t\t\"type\": [\"image\", \"image\"]\n\t\t}\n\t}]\n}","source":"photos/ins.json","raw":"{\n\t\"list\": [{\n\t\t\"date\": \"2017-07\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 7,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BW_0-LNAEQy\", \"BWw_lTjAWvP\", \"BWl0n7ggC8d\", \"BWbyVtmgZA0\", \"BWPEL03A6QN\", \"BWJyvn_A8k1\", \"BWEqgtvgzyu\"],\n\t\t\t\"text\": [\"那天拍这张照片，是看到一个小女孩，借了妈妈的手机，边拍边赞叹“好美丽的颜色啊”。但照片最大的谎言就是定格，人们觉得美好是永恒的，至少不太会想时间之外的事情。\\n事实上这种植物一旦攀上柱子，就疯子一般往上爬，为了给顶端的小苗供给养分，下面的叶子会慢慢掉光。立交桥好高呀，小苗爬不上去，累了也枯萎了。最后只剩下光秃秃的丑陋藤条。\\n不过我还是希望小女孩过几天再看到它时，只是轻轻说“啊原来是这样”，而不是和我一样觉得它很丑。\", \"倦\", \"最光明的那个早上\", \"光芒万丈\", \"接连的雨，让高架上的三角梅窜得好高。高于路灯高于建筑物高于一切。不过它们的命运就是被剪掉，然后继续做一棵安分守己的好花\", \"天桥上汽车奔驰，天桥下静默花开。这是两个世界。\", \"用流行的话来讲，深圳现在的天气就是“一言不合就下雨”。但是天空从来就没有言语呀，也从来没有凑合谁的心意。不说话，不取悦，就很酷。\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-06\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 6,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BV6WiUxgHp0\", \"BVrnb0GAIbo\", \"BVq6fMHAV8i\", \"BVUXrYtFwlA\", \"BVHdxQsFpYS\", \"BVE4dC6l-tK\", \"BVCbPn6lOqn\"],\n\t\t\t\"text\": [\"午睡\", \"分享一个甜甜圈\", \"分享一个失败的对焦\", \"雨后\", \"腾讯云\", \"黄昏的公园深处\", \"从今天开始，决定数一下一年有多少个多云的日子。\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-05\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 5,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BUqBlIWFF_f\", \"BUlWsL0F5kE\", \"BUgrXBVlaJR\", \"BUdT28JFYpP\", \"BUYZzrJFfdJ\", \"BUO7nZZlWf0\", \"BUEZNOKFUK0\", \"BUB8VemFJEE\", \"BUA8KqRlF3n\", \"BT_4mkYFxc5\", \"BT_eImQF9sY\", \"BT-fITqlTiO\", \"BT27_ryFIr_\", \"BT0azZAFBIs\"],\n\t\t\t\"text\": [\"森林之晨\", \"Hello, _____\", \"水中豆\", \"雨中的公交车窗外\", \"飞机飞过天空\", \"西塘总的来说，还是挺好。就满大街唱着《成都》和《一瞬间》，感觉不是很懂…\", \"可能南浔真的是去过小镇的一个特例。没有太多的迷之传说去渲染，它就在这，一言不发的等你。兜兜转转又回到了百间楼，挨家问有人吗，随便帮再做个炒绣花锦吧，吃完这个菜我就走。\", \"看了一下午的燕子\", \"燕子飞过百间楼\", \"夜色里迷了路\", \"雨中漫步\", \"可能是一种“一出行铁定下雨”的体质\", \"生如夏花。整个四月都过得比较丧，想了下唯一开心的事情就是朴树的专辑了。\", \"五月\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"video\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-04\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 4,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BTvD8fCFOpY\", \"BTbS_uKF5Xx\", \"BTYKbXMFoUM\", \"BSc5TamlT16\", \"BSbA96PFiWC\", \"BSTZP6-gSaD\"],\n\t\t\t\"text\": [\"多久没去看一场日出\", \"阳光已经铺满下班的街道\", \"午睡\", \"与你跋山涉水\", \"清明晚宴，以及一个迟下楼的我\", \"一个突如其来的雨天\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-03\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 3,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BSLeDr7gDu9\", \"BSIUnyfAdQY\", \"BSAjHqkgtr9\", \"BR-0YW4gfC9\", \"BRk5uUzlAe2\", \"BRXafqQgsSY\", \"BRS_5qFA9dW\", \"BRIjntvFr5d\"],\n\t\t\t\"text\": [\"蜘蛛与落日\", \"春林初盛\", \"日光倾城\", \"夜空中最亮的路灯\", \"二月底就开始构思要拍一组日系，每天端着相机来上班，然而是连续半个月的阴雨。今天终于天放晴了，相机却没了电。\", \"车窗里雾气，车窗外水滴。想起小时候作文，写为什么喜欢雨天，因为晴天你会纠结要不要出去玩，雨天就不用想，踏实呆家里好了。但那是小时候，现在也踏实了，就是下不下雨都要去上班啊…\", \"街拍 | 七点半\", \"“又是一轮月高悬 云端那边的天 两颗星座遥望夜空 永远不能相逢”\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-02\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 2,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BRBWMaAl2h2\", \"BQfmYX5gfiy\", \"BQU0S39AetF\", \"BQFkKYIASOp\", \"BQAdVx5AOLy\"],\n\t\t\t\"text\": [\"深圳的高架有很多三角梅，这种花的优点和缺点都是太倔强\", \"最近重新把球拍拿了起来。还是会很怀念，高中那时的球馆，阳光也是这样斜斜照进来。球滚到再远的角落，还是能捡起来；人走出了球馆，可能再也回不来。不过，只要你等，也总有陌生人推开门说：加我一个。\", \"深圳\", \"离家前心血来潮，突然想再刷一遍《白鹿原》，就把书给捎上了。列车经过山洞，窗外是明灭的光影，第一次觉得黑娃横腰打白嘉轩的那一棍子这么魔幻…好像会有迷之bgm响起，佐助说我要毁了木叶\", \"近乡情怯。情怯，多好的词语\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2017-01\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2017,\n\t\t\t\"month\": 1,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BPwIWSXgQ_L\", \"BPoXK-sgC6M\", \"BPMTnMTAH_Y\", \"BPKrtVMgo9j\", \"BPAVAW5gFc7\"],\n\t\t\t\"text\": [\"城市住久了，第一次决定在乡村过年。白天开心农场，晚上拍星星，过上了谈笑无鸿儒往来有白丁的生活…\", \"稻草人的早晨\", \"列车继续加速度，水珠在最后的时光里尽情飞驰\", \"一个等车的人都没有。上一次看到这副光景，是2009年10月5日的凌晨3点半，湘潭至武汉\", \"“人呢？”“买菜去了呗，真慢”——所谓冬日的阳光\"],\n\t\t\t\"type\": [\"image\", \"image\", \"video\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-12\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 12,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BOsC8obAOwI\", \"BOpI4qsAi6c\", \"BOjCbzZAhQy\", \"BOUysuPgbXG\", \"BOTVNfYgjRt\", \"BOMjl4LATC-\", \"BOAF_bbA9H0\", \"BN9ZdHuAqL1\", \"BN30BiDAVGo\", \"BN2CjzagYQK\", \"BNyLQGUgdma\", \"BNwOJYlgAOL\", \"BNtsL5QgEts\", \"BNn5V7oA_nc\"],\n\t\t\t\"text\": [\"每年这个时候都要趴在这座天桥，拍一张照。这个世界似乎没变，但又在喧哗和前行。这年成长了挺多，也学会看淡一些事情。\\n可能是代码写多了，感觉世界的逻辑有时很简单，事情无非是let，变化历历，或者是const，永恒安息。如果一开始就想清楚，留不住的就随风去，不会变的就钉到骨子里。那你说多轻松。\", \"去看雪？\", \"“大楼诗人”\", \"又是一年岁末时\", \"say hi\", \"现在的每个日落，都会有光正巧从窗帘缝隙钻过，平行照射到我的电脑屏幕。这个时刻就感觉特别神圣和中二。披上了迷之神眷色彩，讲不好我的工位就是个宇宙中心，太阳在绕着代码转\", \"末班车\", \"树影，好似一只黄鹂和蜣螂\", \"街拍 | 晴天\", \"“望”\", \"午睡\", \"“黄昏之时”\", \"枯萎的植物，最后的光\", \"街拍 | 也许是深圳最后的夏日\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-11\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 11,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BNUaqEagioX\", \"BNTHIbUgigX\", \"BNRr9zBg0fu\", \"BNQHWSwA1Gy\", \"BNPbdVIg6gT\", \"BNOpXsKgU53\", \"BNBrozHAAV7\", \"BM8hsf-grvj\", \"BM8WO8xglvC\", \"BMy1VT3grFk\", \"BMrSxSNgpIN\", \"BMedxcZA0_g\", \"BMQLQvogqn7\"],\n\t\t\t\"text\": [\"“我是谁我爱谁我要谁我去哪”\", \"天都峰顶转一圈，站的地方巴掌大其实很慌…\", \"下了一夜雨，晚上没睡好，脑子里老想着天都峰关闭的事情。但风云变幻就在一瞬间，冥冥中必有回响，突如其来的晴天太过惊喜。峰顶走起\", \"上年没见着的雾凇突然出现，愿望兑现的感觉\", \"“不看岳”\", \"黄山行\", \"宿舍楼\", \"华科的秋天好像一条安静河流，慢慢扩散，了无声息，异常缓慢，又很具体。反正，时间还有很多，请随意\", \"又回我科，我科这个季节怎么拍都好看\", \"今夜月亮\", \"想过去改变，想过要离开，想过拍拍裤管就去远方。然后又想是不是先做出点事情，后来又突然有了点责任，再后来发现自己可以影响一些人… 它没有扼杀选择，反而让更多条路铺在我面前。所以，生日快乐，18岁。\", \"街拍 | 面对面\", \"一叶知秋\"],\n\t\t\t\"type\": [\"image\", \"video\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-10\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 10,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BL_WXdxAM1Y\", \"BL6dTmIgecl\", \"BLv6COag1M6\", \"BLlf8WWgHcJ\", \"BLfzJ7gjj-8\", \"BLbaFJDAJ1i\", \"BLVHTFJgfg-\", \"BLTvxMWgKUn\", \"BLTd_nVAFQi\", \"BLP2UMKAGcn\", \"BLJIJCegCT3\", \"BLDZyq2g7Zr\", \"BLDSZ6pAsAZ\"],\n\t\t\t\"text\": [\"这年头不做作的民谣已经很少了……\", \"很久没去看那群留守的孩子了。他们还是很容易对每个人卸下心防，情绪会很强烈，所以开心时笑得特别大声，这让我想到悲伤会不会也成正比。不敢想。这世上，不一定所有问题都要去思考去直面，因为时间能帮你们解决很多问题。起码，在一起玩的时间。\", \"深圳雨，台风。小时候问大人，为什么我的风筝飞不起来？他们说要等大风。所以我期待着台风天。等了半年，台风来了，我却只能呆在窗户里往外看，也开始理解这场空欢喜。后来发现台风不单是种天气，还可以是一件事或一个人\", \"鸽子再也看不到无名山的高，你也不再是安和桥下清澈的水\", \"降低了预期，觉得滕王阁还不错。路遇一位玩摄影的大爷，教了许多东西，也听他说了许多往事。其实人得不得意都要尽欢，白不白头都要有那么一点青云之志\", \"东四变成了超市\\n东三变成了清真\\n神剪阁还在\\n绝望坡的小吃多到绝望\\n球场都翻修了\\n计科有钱了(辅导员说的)\\nofo小黄车已占领校园\\n学弟学妹主要玩lol和王者荣耀\\n光谷门对面依旧有鸡蛋灌饼和麻辣烫\\n韵苑食堂还是不怎么好吃\\n沁苑的猫又生了许多娃…\\n\\n来去匆匆，一些照片在：http://120.24.181.238/gallery/\", \"要是一个地方能称作图书馆，不单单是因为图书，还因为它收藏了太多的心事。\\n一语一念，虽不可借阅，愿永不过期。\", \"《深夜食堂》\", \"《返校日》\", \"旧时作\", \"和奶奶在一起。把轮椅推到广场下面玩，突然问我：你们厂生产什么？我：很难说，网络你知道吗… 奶奶：哦，卖绳子的啊\", \"19年前的我，就已经学会了爱恨分明……\", \"回老家，今天正好是“圩日”。村民一家老小，从竹林深处的罗江村出发，走过这条小桥，赶往市集。买到中意的衣服，或者零食，这就是完美的一天\"],\n\t\t\t\"type\": [\"video\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2016-09\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2016,\n\t\t\t\"month\": 9,\n\t\t\t\"src\": [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\t\t\"link\": [\"BK-l0eHgWep\", \"BK3W05HgBqP\", \"BK0nQcSARek\", \"BKx6pvkg5HE\", \"BKfNILQgNAO\", \"BKdn7vEAJJW\", \"BKcdEbPAWzk\", \"BKcCulagAx1\", \"BKazUfGAFlb\", \"BKayutggosw\", \"BKTJUOdgkLm\", \"BKIiijpAvmT\"],\n\t\t\t\"text\": [\"街拍 | 回望\", \"街拍 | 深拷贝…\", \"街拍 | 拷贝\", \"街拍 | 擦肩而过\", \"苗族妹子上来敬酒。以为只是普通米酒，一饮而尽，后来才跟我说有70度。那还怎样办？不走了。\", \"满城星星点点的灯火，当作你心心念念的生日蜡烛吧。生日快乐，永远单纯。\", \"以大为美的苗族银饰，近看却有许多复杂的细节\", \"迷了路找不见甲秀楼位置。干脆坐下来吃一碗哨脆面，听到对面歌舞升平，寻路过去果然找到了。道理就是，有地标的地方就有广场，有广场的地方就有广场舞。感谢大妈，感谢广场舞。\", \"眼中仿佛藏了一个宇宙\", \"曾经想仗剑走天涯\", \"…\", \"hello，好久不见\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-12\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 12,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/12317949_812027942276002_800384968_n.jpg\"],\n\t\t\t\"link\": [\"-wSMLcI7sl\"],\n\t\t\t\"text\": [\"秦教练教学得很好，三小时已可征服中级场。滑雪真是项迷人的活动，还没回去就约好了下次再来\"],\n\t\t\t\"type\": [\"video\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-11\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 11,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/s640x640/sh0.08/e35/12269862_894338194013437_1805169379_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/s640x640/sh0.08/e35/12276891_172191463131445_911534090_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/12237527_913338585386151_2037194016_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11934646_1088170014540783_209449183_n.jpg\"],\n\t\t\t\"link\": [\"-tqoLXo7v-\", \"-qKfKxo7nw\", \"-nE5BQo7uP\", \"9qjBpWI7lk\"],\n\t\t\t\"text\": [\"雪上鸦飞\", \"行走于结了冰的松花江上，遇到一群放生的人。佛经飘扬，鱼虾入河，河面转瞬又恢复了平静。而后在饭店，服务员说我们的鱼，就来自这松花江里。\\n\\n佛的安排奇妙又令人啼笑，鱼让俩群不同的人都收获了快乐？那么我想，鱼就是佛\", \"月上枝头\", \"在天黑后的日光岩顶呆了很久，一个人看一座岛，孤单也自由。后来遇到一位姑娘，我们一同下山。带着她逛遍整条龙头路找吃的，但她什么也不愿吃，问她，她说，想吃酸辣土豆丝。\\n\\n只有笑着承认，真是意料之外的答案。我出来玩，就是为了吃平时吃不到的东西，她则是觉得家乡的菜最熟悉，在哪都是愿意吃的。\\n\\n好吧，陪你吃。因为，离开武汉这么久，我也挺想念这道菜。\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"video\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-10\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 10,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12145229_1722399741326075_2063247708_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12080493_892409564169375_1626542651_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/11849199_203248513340142_1615092499_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/12132912_162625974083441_1400003063_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12135478_1700175696879683_933151519_n.jpg\"],\n\t\t\t\"link\": [\"9VYE8YI7sk\", \"9BkX3xo7od\", \"8-Ba4MI7lt\", \"88Neujo7r2\", \"8uKqhDo7vp\"],\n\t\t\t\"text\": [\"在路上\", \"11点的时候，不想睡，借一只手电，一人夜游古村。这事情很刺激，转角遇到的神像，榕树的垂枝，摇曳的灯笼，自己投射到土楼的巨大影子，莫名的恐惧自心底升起。然而后来又不怕了，却总是想起以前去的思溪源村…with my friends\", \"古城的砖瓦年代久了，就很容易长出猫来\", \"以前吉他老师说，对于一首天空之城，听过与弹过是完全不一样的。弹过后才知道，从开始的吉他2品就一直在递增，仿佛自身也在飞翔，云层渐开，空城显现，情绪是那么容易被调动。然而我的水平只够感动自己，要抓紧时间努力学习了。不说了，玩游戏去了\", \"海上日出\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"video\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-9\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 9,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/s640x640/sh0.08/e35/11875445_885316994870904_706284789_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/s640x640/sh0.08/e35/11352715_138879086461968_2066668148_n.jpg\"],\n\t\t\t\"link\": [\"8NKC9RI7oZ\", \"8DOh_to7p0\"],\n\t\t\t\"text\": [\"沙滩总有数不完的沙子，数不完的故事。在这突然想起那本还没看完的《岛上书店》，是时候继续做些什么了\", \"陌上花开\"],\n\t\t\t\"type\": [\"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-6\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 6,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11429225_720390118073037_768409912_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11420780_1012574008772885_1569805305_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11252784_879698105429690_2109453469_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11267410_925161560884785_371811288_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11375982_491190547696110_2013240096_n.jpg\"],\n\t\t\t\"link\": [\"4T1Lfgo7gX\", \"3-mmN3o7mn\", \"3uts9do7jI\", \"3iK7kwI7j1\", \"3glBKbI7jm\"],\n\t\t\t\"text\": [\"大雨之后\", \"一脸无辜的王尼玛大哥，从肚腩来看，果然是正品？\", \"感觉迷上风筝了。有次做梦，想到一根根拉伸向上的线，像是在钓空中的鱼。而一个技术娴熟的“渔夫”，收杆时是这么干净利落。\", \"起飞\", \"小萝莉不愿回家，跟奶奶说：“再让我玩会，明天要学钢琴，后天要学跳舞，就来不了这儿玩了。”\"],\n\t\t\t\"type\": [\"image\", \"image\", \"video\", \"video\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-5\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 5,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/11252751_1444216632541093_1558227860_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11226595_701075516681953_1354085958_n.jpg\"],\n\t\t\t\"link\": [\"24-dd6o7uB\", \"2uQeuaI7nv\"],\n\t\t\t\"text\": [\"风雨欲来\", \"野生海带\"],\n\t\t\t\"type\": [\"image\", \"video\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-4\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 4,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11142212_609961145801361_1913577076_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11049421_1375007652828983_401355534_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11137852_1649834698581861_1050691792_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11055751_1573536912901494_1683773508_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11055897_1407191599597961_1763496348_n.jpg\"],\n\t\t\t\"link\": [\"1IUZByo7vP\", \"1ISKRxo7r8\", \"1GPBzpo7qW\", \"1FtGO3I7kN\", \"1C03iPI7hZ\"],\n\t\t\t\"text\": [\"要回去啦，再见北流河\", \"灵芝get√\", \"这里的清明是个很重要的节日，子孙们都会回来，跋山涉水，竹排渡江，荒山寻路，凭集体的记忆寻找列祖列宗的宝地，寄哀思，也求福德。一路上可以听他们唠叨旧事，也有超级靠谱的风水科普\", \"为了部落\", \"在清明的山路遇到了天然松香\"],\n\t\t\t\"type\": [\"video\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-3\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 3,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11123665_1542600796003839_1576473443_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008101_1593505510894691_369067449_n.jpg\"],\n\t\t\t\"link\": [\"04_8fwo7gL\", \"zzfe7Oo7uc\"],\n\t\t\t\"text\": [\"如果你飞得像月亮这么高，就不会搁浅在树上\", \"喜欢这个季节的天空，你找个草坪一躺，飞机，风筝，鸟儿就都在上边，天气好时还能看到白天的月亮\"],\n\t\t\t\"type\": [\"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-2\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 2,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10958252_1405701033068537_2023890854_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10832246_413065338853260_183697882_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10268927_436139166536328_1377561628_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008343_410508022446936_713236389_n.jpg\"],\n\t\t\t\"link\": [\"zcWez6I7uo\", \"zRPazvI7ol\", \"zPN2LtI7sT\", \"zKrDWlo7gZ\"],\n\t\t\t\"text\": [\"很多东西随着慢慢长大，变得不像小时候那样盼望热切，比如巧克力麦当劳薯片雪糕。只有对担子粉的爱永远不变的说…\", \"据说是一年一度考验演技的时候…\", \"锈迹斑斑的香炉\", \"回老家了，小时候跟我打过玻璃珠的小伙伴们呢？你们一个在北京，一个在安徽，一个在澳洲，一个我都不知道了…但你们看到玻璃珠的时候，要想起我来啊\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2015-1\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2015,\n\t\t\t\"month\": 1,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10932550_620643038062978_1729442807_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/891532_1563899373855738_1180535181_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10005439_338105566394046_854247264_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10903312_693622147425934_1766884651_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10914460_1546003772305181_1301162053_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10903277_832760670116494_255352239_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/924083_1539057536347062_2062767438_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10890944_765121966897759_2039585477_n.jpg\"],\n\t\t\t\"link\": [\"yb8uaCI7tt\", \"yKBopho7mX\", \"yAOcawI7pA\", \"x5U25kI7sN\", \"x1TTZUo7gW\", \"xeGbWuo7if\", \"xXr70fI7iD\", \"xUB4dOI7g1\"],\n\t\t\t\"text\": [\"草地上遗落的鞋子\", \"有位很久没联系的朋友寄来明信片，说：我很少看到海，正如你没见过几次雪\", \"深夜总是灵感乍现的最佳时期，只是几个设计方案都没法使自己满意。累了打开窗看到天上有个大月亮，只想用图章工具把它干掉。\", \"面朝大海冬暖花开\", \"分享日常不正常生活照一张\", \"其实我想，那些古老的渔民们，每天看着海岸线的日落日出，肯定是有人想过地球是圆的。而“想法”与“证明”之间，却跨越了一整条麦哲伦航道\", \"鱼山鱼海中，只有你，肯安静的趴在65厘米厚的亚克力板子上与我合影，大丑鱼\", \"新年单人旅行走起。其实从九洲港码头开始，珠海并没有给人很惊喜的感觉，包括盛名之下的沿海风光与渔女雕塑。倒是交通不通畅，从轮渡到公交都给我带来了许多麻烦。直到，晚上吃烤生蚝的第一口，我又觉得什么事情都是可以原谅的……\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-12\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 12,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10899183_999582293404177_745539859_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10894909_702627706517406_1277557620_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10831989_483313928477468_40906631_n.jpg\"],\n\t\t\t\"link\": [\"xRWN47I7pW\", \"xO3qREI7iW\", \"wEQykeo7tU\"],\n\t\t\t\"text\": [\"2014年最后的阳光\", \"最后一节吉他课结束后，马路上那风一直吹，才感觉南方的冬天终于是来了。其实吉他在冬天会有许多神奇的事情。比如琴弦如肌肉一样因冷而紧绷，发出比以往沉闷的低语；而空旷的大教室里，如有其他同伴拨响和弦，手中本已按灭的琴弦又会因共鸣微微颤动。像有生命一样。\", \"有棵丑树，我经常去看，又胖又歪，秃得可笑。在变冷的一天，它突然就开花了。冬天的花我知道得很少，南方没有梅花，那就是异木棉了\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-11\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 11,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10784965_1518537748403855_176956695_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10735195_1505939246340704_1984926778_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10747711_429336373885590_422028037_n.jpg\"],\n\t\t\t\"link\": [\"vP2ywuo7pq\", \"vA68BLo7tN\", \"u7zEVxo7vw\"],\n\t\t\t\"text\": [\"通灵之术！\", \"现场气氛果然不一样，马上就可以看到小伞在大哥胯下疯狂输出…是时候来首选一记薇恩了\", \"有朋友跟我说，挪威的森林根本看不下去；又有朋友说，看这书一发不可收拾。差别好大呀！我倒觉得有个简单的方法：翻到开篇的这几个字，如果心中一紧，那就说明这本书适合你，否则请弃之\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-10\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 10,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10735112_730529873702428_413107753_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10725177_573652486072155_1401604216_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10724868_302191016652312_2097904817_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10731727_461314204008708_386749273_n.jpg\"],\n\t\t\t\"link\": [\"uu70zJo7qb\", \"uQnvluo7sK\", \"uLi56Wo7oO\", \"uEv-tCo7rJ\"],\n\t\t\t\"text\": [\"天下的小饼干遇到我，貌似就只有一种下场！！\", \"一个人，一支口琴，一片海，一瓶酒\", \"《论夜归，打的，以及发票的正确用法》\", \"童年真好。我以后一定不要跟孩子说：希望你快高长大这种傻话…\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-9\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 9,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10616983_1382591478697855_2107473552_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925287_1464119273867077_427071626_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/925284_1534308033454310_855505111_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10666267_1550871771803214_2074300649_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693244_734401199942901_1572709880_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693771_1517437541834868_665867908_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693822_497709657032441_1125408654_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10683941_796597910390683_12441123_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10661142_164227523747936_1526737465_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10661182_550889531706942_2043749716_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10520334_1523531751215211_1344090061_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693390_547748238660649_761529890_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693650_837768039589771_1793184733_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/914812_1529561143923493_1662159287_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10644019_368509079979549_2085033896_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10684161_918887498139099_2081383304_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10683828_327931784041264_894089329_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10666028_872988212713750_1345360858_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10665501_1452353738387652_2075798065_n.jpg\"],\n\t\t\t\"link\": [\"tXuIHso7qK\", \"tJjQlAo7kH\", \"tDYyUeo7oX\", \"tCBULHo7sW\", \"tB_Xmao7qG\", \"s8cKzLI7pM\", \"s6-lOFo7ip\", \"s5GifkI7q7\", \"s3uZcmo7uj\", \"s2bb5io7p-\", \"s2P72tI7o6\", \"s2FPpGI7o_\", \"s1LPQPo7v8\", \"szZP5Io7lY\", \"sr9rtNo7lM\", \"sr7gXKI7h_\", \"srG7fjo7sV\", \"spAnrio7oh\", \"sj4BGgI7t_\"],\n\t\t\t\"text\": [\"我的好朋友——超级高冷超级磨人的丝瓜\", \"沉眠的店主失眠的狗。想起大学的最后时光，宿舍24小时都有人醒着，自由的人生，自由的酒和曲终人散，大家通常没有另一半，没有钱，没有忧愁，爽成狗\", \"如果他是程序员…\\nvar date = lifetime;\\rif(rotate(mountain, water, stupa)){ /*return nextLifetime;*/ return meetyou(journey);\\r}\", \"听着山寨的民谣电子乐，看着美好的姑娘。功德无量。\", \"弥里塘太宁静。在这我一直想起每一个被深圳车水马龙声吵醒的早晨，真是光辉的岁月\", \"进藏。天空挂满着云，黑的白的都有。云朵转眼飘散，它却依然是蓝色。\", \"“音浪太强不晃会被撞到地上…”\", \"陌生的朋友，愿下次再能与你们相聚在丽江love wine & half。我无法融解你悲观现实的想法，你也无法说服我旅行并不是逃避。但这都很有意思。只是想起以前有个人叫我不能喝太多的酒，一想到这个呀我就越喝越多\", \"玉龙雪山\", \"以前想去丽江，但去过的人都灌输着你也许会失望的观念，因而甚至不敢动身。这是一种“怕”。有时候真得自己去看看才会了然。第一天在丽江，民谣吉他缓缓流过商业化的街道，原来没有惊喜，也没有失望，一切刚刚好。\", \"我注定要回到老路上\", \"彩云之南\", \"云南，向往已久的地方\", \"QQ同时在线人数破2亿纪念，作为一颗小小螺丝钉，名字正好镶到企鹅的大嘴巴上。这时觉得有一丝光荣，一种努力被实化的错觉；然后又有点不舒服，感觉此时的自己，和名字身边的人一样。可我想要的就是不一样。\", \"陪伴一定得是件漫长的事呵。和奶奶在一起的中秋节。\", \"中秋和家人一起去看孔明灯，热闹而安逸，这是小城市的美好。\", \"老家的葡萄藤，从我初中时就挂在这，再见已是十一年\", \"家里橄榄熟了，盐渍，暴晒，蘸蜜，简直人间美味!\", \"在一场太阳雨里回到家中\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"video\", \"image\", \"video\", \"image\", \"video\", \"image\", \"image\", \"image\", \"image\", \"video\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-8\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 8,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10654876_610857929023752_364709543_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10644013_777642448965989_544517718_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/924456_1471485796442896_1699836323_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10607913_692632367472666_1829853902_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10611052_1466241683635233_830264506_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10617144_829548960388746_1611410337_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10453953_542161702576881_1621059386_n.jpg\"],\n\t\t\t\"link\": [\"sXa9g6I7jB\", \"sPt4u4I7kA\", \"sC18G0o7qb\", \"sAMmEWI7oC\", \"rzSow4o7lH\", \"ro28LPI7oc\", \"rR37wLo7iu\"],\n\t\t\t\"text\": [\"在书店的晚上终于把新专反复听完。太柔了…打一星两星的人肯定是真爱粉，这点有人敢怀疑？我不是，打四星！停不下来，直到书店响起:深圳即将入眠。但22点还是深圳的早晨呀\", \"慢三的华尔兹，大篇幅的爵士即兴。感觉生活得太浮躁。也太安逸。\", \"好久没看话剧，这部果然没让人失望。导演太会讲故事了，1024个赞\", \"纵有一万种悲伤的美丽，也比不过这段。\", \"在书城里看到的《后会无期》分镜图。电影那么美，分镜是这样，这就是现实~\", \"如果你从北京来看我，我会很感动;如果你像光，从太阳那头过来，我不以为然。因为光到地球只要8.3分钟。我们经常错用代价来衡量情感\", \"相聚总有时:)\"],\n\t\t\t\"type\": [\"image\", \"video\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-7\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 7,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925559_1482425071996009_1940959046_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10554006_501929086608023_917623457_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10576105_624878090953161_638111947_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10570119_332808380211109_125412512_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/926536_828142997203682_1319760676_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/923702_252705761596555_721784545_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10549755_708603639175850_2095584541_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/928307_1442957109299429_297849354_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10488451_303926969784787_1278259348_n.jpg\"],\n\t\t\t\"link\": [\"q5e2KpI7qn\", \"qyXXpNI7q5\", \"qxfUe0I7lp\", \"qq9usdo7hr\", \"qn4WCIo7hi\", \"ql0brho7vN\", \"qkiaYDo7t9\", \"qURC9fI7r-\", \"p4A8IuI7py\"],\n\t\t\t\"text\": [\"随便走走，发现世界还是很美好的。当拥有美好事物时，经常习惯性的熟视无睹;当努力抓住你想要的东西时，它又可能瞬间破碎。但依旧需要不妥协。\", \"荔枝——我心目中的水果之王（有之一）\", \"高中时代最新款的mp4，现已成了老古董\", \"台风来临时，刚好会是暑假。但我已没有暑假。\", \"看着一场雨由远及近的淋湿院子，太漂亮\", \"归来却空空的行囊  那故乡的云  那故乡的风  啦啦啦啦啦 啦啦啦。\", \"在今年第一个狂风大作的早上，回家去\", \"98年，世界杯第一次在我脑中留下记忆，和爸，围着那台很小的tcl。今天，爸还打电话给我，让我别看太晚影响到明天工作，但我知道他自己也会去看的。是的，我们爱足球，今生今世\", \"这几天深圳的天空很美，无论晴雨\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-6\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 6,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10362316_1434933843444633_1187384207_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10471930_507725875994902_393186392_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10454011_484872768311603_738380027_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/923661_248502122024084_2086692261_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10424605_774238262594769_78480252_n.jpg\"],\n\t\t\t\"link\": [\"p06uEZI7tG\", \"pytFNpo7sD\", \"poMFteI7q0\", \"pMt5tgI7vj\", \"o3eroFo7gK\"],\n\t\t\t\"text\": [\"“往事依稀浑似梦，都随风雨到心头”——梅表姐\", \"navy blue\", \"今天我遇到一朵枯玫瑰。她只是枯萎，从未凋零。\", \"上届卫冕冠军被打成筛子的…是热火…\", \"我和大神的差距——web工程师的自我修养\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-5\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 5,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xat1/t51.2885-15/e15/10387796_255697041300477_753213015_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10005623_779769878723970_627922376_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10358172_1495900567292387_640174442_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10369281_674379822637848_233362820_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/928251_430572373746575_786910314_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10358301_256481271142988_1088114034_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10296597_1413560715589179_392570057_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10299642_561366610636165_721929935_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10268965_1446530205590326_114108738_n.jpg\"],\n\t\t\t\"link\": [\"op03boo7lW\", \"ops-ZUI7t-\", \"ofqhBpI7mQ\", \"odP0cno7ue\", \"oLX-4GI7ne\", \"oBl6WtI7qC\", \"nvPChzI7vU\", \"ngAyz8o7qj\", \"ndTggdI7jn\"],\n\t\t\t\"text\": [\"突然发现我还是挺喜欢大晴天的\", \"单人旅行走起！开心\", \"不久就可以吃了\", \"黄昏时分\", \"大雨倾城\", \"今天路过公园，一朵玉兰掉在身边。想起小时候陪伴我的三棵树，两棵木棉，一棵玉兰。当然玉兰这名字是后来才知道的，记忆里的那朵永远叫做香花。三年级的某天放学，这三棵树一并倒下了。\", \"雨中深大。雨季再来不再来。\", \"say hey to may\", \"故事中的小黄花\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-4\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 4,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10261258_711820055527911_220271949_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10249356_695726313802446_881680057_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268929_597082527053970_1060360934_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268941_490697914386538_1148834228_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10254195_545488182236276_1930978882_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/917572_539124756205696_1549712749_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/927273_657564254280429_578859844_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175316_650834874981595_1358429831_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/926422_245144379006241_1254093305_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/891289_302574849898688_205313988_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175309_510867459023322_1700312549_n.jpg\"],\n\t\t\t\"link\": [\"nOGNjUI7op\", \"nGJfYAo7lW\", \"nATIxlI7tR\", \"mxsNwto7pQ\", \"mm7JTUI7p0\", \"mhER0lo7oe\", \"mfvVUYI7hu\", \"mdF-nNo7pE\", \"mcVLQzo7nl\", \"mb5cFho7sd\", \"maqYInI7if\"],\n\t\t\t\"text\": [\"谢谢亲们的蛋糕和礼物;谢谢我们始终用“同学”来称呼彼此。\", \"处女座老榕树\", \"放风筝的人们\", \"现在我的状态，像极了一只被推上战场僵尸\", \"这几天我耳边是都是这样的话语:1、“就是敲敲键盘，挺清闲的哈！”2、“别太挑剔，给个一两千就先做着”3、“什么？你那一碗粉要十二块钱？！”我回深圳了，几天的清静生活，谢谢乡亲们的招待。\", \"good luck\", \"瓦上花开\", \"好吧，这是一艘船\", \"石表山，思罗河，四年后的清明我又来到了这儿\", \"清明，一路向西\", \"清明一回到家，老妈就开始炫耀她试验种的豆芽。愿君多采撷，此物最好吃？\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-3\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 3,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10012487_604746702952671_676907736_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/1171265_389602547845527_1588547561_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11376491_1614984048759908_413209146_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11251074_365441270314698_1015057085_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11380079_1581430378786145_504181803_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11330604_837683999618217_506172540_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11273047_110162449318540_1639646034_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11375356_908792249164254_112740693_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11357539_388432694679963_1281450994_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11311124_1611430865770700_1482115931_n.jpg\"],\n\t\t\t\"link\": [\"mIgOdio7jT\", \"mIAS5lo7hb\", \"lrhVmio7lF\", \"lmADv6I7rU\", \"lhPFVeI7g6\", \"lcyrKSI7h_\", \"lSda6Ko7nG\", \"lSSxd8I7kB\", \"lK0xswI7s6\", \"lA4KaBI7go\"],\n\t\t\t\"text\": [\"转角遇到戏台，耳熟却不知道是哪一出了。想起爷爷以前的二胡与杨琴，自己精削细磨的琴竹，还有他组织的“菊山楼”粤剧队，真是一晃好些年。今年清明，一定回去。\", \"这本书超赞！好书好书好书\", \"四五点写程序太累，就不写了。不告诉任何人，跑到这个立交桥底，我已来过好几回。这里有一棵白色的紫荆花，满墙爬山虎，和刚放学的小朋友，出去，右拐，再右拐，转角可以遇到你，我的肉夹馍…\", \"越来越认生了，到步行街买衣服，找到比较适合的，却因为店员太过热情…跑了出来。闹市中居然藏有一古庙，还是这里自在，漫天神佛只是笑笑，不理物我，无论喜悲。对了我来这干嘛\", \"爬山的好处:强身健体，磨砺意志，开阔胸怀…坏处是:没有wifi。\", \"又见回南天\", \"老妈说，今天要我送个礼物！离家万里，只好迅速开发出这个app，摇后就会播放我唱的真的爱你。可惜她说摇后没反应，后来才知道，她拿的ipad在摇…但我是真的爱你\", \"今天下雨，的士司机都不肯理我。头上路灯光芒遥不可及，脚下路面棱角冰冷鲜明\", \"起风吧，明天。喜欢偏冷的日子，假如是春天，假如是风大，太完美了\", \"腾讯的凌晨四点半。第一次在此过夜，听着耳熟不能详的歌，看着平静不微笑的人。然后记起，家里打来被我按掉的电话，忘了回\"],\n\t\t\t\"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"]\n\t\t}\n\t}, {\n\t\t\"date\": \"2014-2\",\n\t\t\"arr\": {\n\t\t\t\"year\": 2014,\n\t\t\t\"month\": 2,\n\t\t\t\"src\": [\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/1737225_591794970889160_1849235580_n.jpg\", \"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/1741200_451260698337036_577792061_n.jpg\"],\n\t\t\t\"link\": [\"kv3jNgI7sw\", \"kr8sW8I7nR\"],\n\t\t\t\"text\": [\"“不能吃太胖喔，会被杀掉的！”\", \"今晚，已经看到两个小女生在问，这里有《九云梦》吗？\"],\n\t\t\t\"type\": [\"image\", \"image\"]\n\t\t}\n\t}]\n}","date":"2020-03-12T13:55:48.689Z","updated":"2020-03-12T13:55:48.689Z","path":"photos/ins.json","layout":"false","title":"","comments":1,"_id":"ck7otizqb00097gui56kiu65a","content":"{\"list\":[{\"date\":\"2017-07\",\"arr\":{\"year\":2017,\"month\":7,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BW_0-LNAEQy\",\"BWw_lTjAWvP\",\"BWl0n7ggC8d\",\"BWbyVtmgZA0\",\"BWPEL03A6QN\",\"BWJyvn_A8k1\",\"BWEqgtvgzyu\"],\"text\":[\"那天拍这张照片，是看到一个小女孩，借了妈妈的手机，边拍边赞叹“好美丽的颜色啊”。但照片最大的谎言就是定格，人们觉得美好是永恒的，至少不太会想时间之外的事情。\\n事实上这种植物一旦攀上柱子，就疯子一般往上爬，为了给顶端的小苗供给养分，下面的叶子会慢慢掉光。立交桥好高呀，小苗爬不上去，累了也枯萎了。最后只剩下光秃秃的丑陋藤条。\\n不过我还是希望小女孩过几天再看到它时，只是轻轻说“啊原来是这样”，而不是和我一样觉得它很丑。\",\"倦\",\"最光明的那个早上\",\"光芒万丈\",\"接连的雨，让高架上的三角梅窜得好高。高于路灯高于建筑物高于一切。不过它们的命运就是被剪掉，然后继续做一棵安分守己的好花\",\"天桥上汽车奔驰，天桥下静默花开。这是两个世界。\",\"用流行的话来讲，深圳现在的天气就是“一言不合就下雨”。但是天空从来就没有言语呀，也从来没有凑合谁的心意。不说话，不取悦，就很酷。\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-06\",\"arr\":{\"year\":2017,\"month\":6,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BV6WiUxgHp0\",\"BVrnb0GAIbo\",\"BVq6fMHAV8i\",\"BVUXrYtFwlA\",\"BVHdxQsFpYS\",\"BVE4dC6l-tK\",\"BVCbPn6lOqn\"],\"text\":[\"午睡\",\"分享一个甜甜圈\",\"分享一个失败的对焦\",\"雨后\",\"腾讯云\",\"黄昏的公园深处\",\"从今天开始，决定数一下一年有多少个多云的日子。\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-05\",\"arr\":{\"year\":2017,\"month\":5,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BUqBlIWFF_f\",\"BUlWsL0F5kE\",\"BUgrXBVlaJR\",\"BUdT28JFYpP\",\"BUYZzrJFfdJ\",\"BUO7nZZlWf0\",\"BUEZNOKFUK0\",\"BUB8VemFJEE\",\"BUA8KqRlF3n\",\"BT_4mkYFxc5\",\"BT_eImQF9sY\",\"BT-fITqlTiO\",\"BT27_ryFIr_\",\"BT0azZAFBIs\"],\"text\":[\"森林之晨\",\"Hello, _____\",\"水中豆\",\"雨中的公交车窗外\",\"飞机飞过天空\",\"西塘总的来说，还是挺好。就满大街唱着《成都》和《一瞬间》，感觉不是很懂…\",\"可能南浔真的是去过小镇的一个特例。没有太多的迷之传说去渲染，它就在这，一言不发的等你。兜兜转转又回到了百间楼，挨家问有人吗，随便帮再做个炒绣花锦吧，吃完这个菜我就走。\",\"看了一下午的燕子\",\"燕子飞过百间楼\",\"夜色里迷了路\",\"雨中漫步\",\"可能是一种“一出行铁定下雨”的体质\",\"生如夏花。整个四月都过得比较丧，想了下唯一开心的事情就是朴树的专辑了。\",\"五月\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"video\",\"image\",\"image\"]}},{\"date\":\"2017-04\",\"arr\":{\"year\":2017,\"month\":4,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BTvD8fCFOpY\",\"BTbS_uKF5Xx\",\"BTYKbXMFoUM\",\"BSc5TamlT16\",\"BSbA96PFiWC\",\"BSTZP6-gSaD\"],\"text\":[\"多久没去看一场日出\",\"阳光已经铺满下班的街道\",\"午睡\",\"与你跋山涉水\",\"清明晚宴，以及一个迟下楼的我\",\"一个突如其来的雨天\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-03\",\"arr\":{\"year\":2017,\"month\":3,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BSLeDr7gDu9\",\"BSIUnyfAdQY\",\"BSAjHqkgtr9\",\"BR-0YW4gfC9\",\"BRk5uUzlAe2\",\"BRXafqQgsSY\",\"BRS_5qFA9dW\",\"BRIjntvFr5d\"],\"text\":[\"蜘蛛与落日\",\"春林初盛\",\"日光倾城\",\"夜空中最亮的路灯\",\"二月底就开始构思要拍一组日系，每天端着相机来上班，然而是连续半个月的阴雨。今天终于天放晴了，相机却没了电。\",\"车窗里雾气，车窗外水滴。想起小时候作文，写为什么喜欢雨天，因为晴天你会纠结要不要出去玩，雨天就不用想，踏实呆家里好了。但那是小时候，现在也踏实了，就是下不下雨都要去上班啊…\",\"街拍 | 七点半\",\"“又是一轮月高悬 云端那边的天 两颗星座遥望夜空 永远不能相逢”\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-02\",\"arr\":{\"year\":2017,\"month\":2,\"src\":[\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BRBWMaAl2h2\",\"BQfmYX5gfiy\",\"BQU0S39AetF\",\"BQFkKYIASOp\",\"BQAdVx5AOLy\"],\"text\":[\"深圳的高架有很多三角梅，这种花的优点和缺点都是太倔强\",\"最近重新把球拍拿了起来。还是会很怀念，高中那时的球馆，阳光也是这样斜斜照进来。球滚到再远的角落，还是能捡起来；人走出了球馆，可能再也回不来。不过，只要你等，也总有陌生人推开门说：加我一个。\",\"深圳\",\"离家前心血来潮，突然想再刷一遍《白鹿原》，就把书给捎上了。列车经过山洞，窗外是明灭的光影，第一次觉得黑娃横腰打白嘉轩的那一棍子这么魔幻…好像会有迷之bgm响起，佐助说我要毁了木叶\",\"近乡情怯。情怯，多好的词语\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-01\",\"arr\":{\"year\":2017,\"month\":1,\"src\":[\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BPwIWSXgQ_L\",\"BPoXK-sgC6M\",\"BPMTnMTAH_Y\",\"BPKrtVMgo9j\",\"BPAVAW5gFc7\"],\"text\":[\"城市住久了，第一次决定在乡村过年。白天开心农场，晚上拍星星，过上了谈笑无鸿儒往来有白丁的生活…\",\"稻草人的早晨\",\"列车继续加速度，水珠在最后的时光里尽情飞驰\",\"一个等车的人都没有。上一次看到这副光景，是2009年10月5日的凌晨3点半，湘潭至武汉\",\"“人呢？”“买菜去了呗，真慢”——所谓冬日的阳光\"],\"type\":[\"image\",\"image\",\"video\",\"image\",\"image\"]}},{\"date\":\"2016-12\",\"arr\":{\"year\":2016,\"month\":12,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BOsC8obAOwI\",\"BOpI4qsAi6c\",\"BOjCbzZAhQy\",\"BOUysuPgbXG\",\"BOTVNfYgjRt\",\"BOMjl4LATC-\",\"BOAF_bbA9H0\",\"BN9ZdHuAqL1\",\"BN30BiDAVGo\",\"BN2CjzagYQK\",\"BNyLQGUgdma\",\"BNwOJYlgAOL\",\"BNtsL5QgEts\",\"BNn5V7oA_nc\"],\"text\":[\"每年这个时候都要趴在这座天桥，拍一张照。这个世界似乎没变，但又在喧哗和前行。这年成长了挺多，也学会看淡一些事情。\\n可能是代码写多了，感觉世界的逻辑有时很简单，事情无非是let，变化历历，或者是const，永恒安息。如果一开始就想清楚，留不住的就随风去，不会变的就钉到骨子里。那你说多轻松。\",\"去看雪？\",\"“大楼诗人”\",\"又是一年岁末时\",\"say hi\",\"现在的每个日落，都会有光正巧从窗帘缝隙钻过，平行照射到我的电脑屏幕。这个时刻就感觉特别神圣和中二。披上了迷之神眷色彩，讲不好我的工位就是个宇宙中心，太阳在绕着代码转\",\"末班车\",\"树影，好似一只黄鹂和蜣螂\",\"街拍 | 晴天\",\"“望”\",\"午睡\",\"“黄昏之时”\",\"枯萎的植物，最后的光\",\"街拍 | 也许是深圳最后的夏日\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2016-11\",\"arr\":{\"year\":2016,\"month\":11,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BNUaqEagioX\",\"BNTHIbUgigX\",\"BNRr9zBg0fu\",\"BNQHWSwA1Gy\",\"BNPbdVIg6gT\",\"BNOpXsKgU53\",\"BNBrozHAAV7\",\"BM8hsf-grvj\",\"BM8WO8xglvC\",\"BMy1VT3grFk\",\"BMrSxSNgpIN\",\"BMedxcZA0_g\",\"BMQLQvogqn7\"],\"text\":[\"“我是谁我爱谁我要谁我去哪”\",\"天都峰顶转一圈，站的地方巴掌大其实很慌…\",\"下了一夜雨，晚上没睡好，脑子里老想着天都峰关闭的事情。但风云变幻就在一瞬间，冥冥中必有回响，突如其来的晴天太过惊喜。峰顶走起\",\"上年没见着的雾凇突然出现，愿望兑现的感觉\",\"“不看岳”\",\"黄山行\",\"宿舍楼\",\"华科的秋天好像一条安静河流，慢慢扩散，了无声息，异常缓慢，又很具体。反正，时间还有很多，请随意\",\"又回我科，我科这个季节怎么拍都好看\",\"今夜月亮\",\"想过去改变，想过要离开，想过拍拍裤管就去远方。然后又想是不是先做出点事情，后来又突然有了点责任，再后来发现自己可以影响一些人… 它没有扼杀选择，反而让更多条路铺在我面前。所以，生日快乐，18岁。\",\"街拍 | 面对面\",\"一叶知秋\"],\"type\":[\"image\",\"video\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2016-10\",\"arr\":{\"year\":2016,\"month\":10,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BL_WXdxAM1Y\",\"BL6dTmIgecl\",\"BLv6COag1M6\",\"BLlf8WWgHcJ\",\"BLfzJ7gjj-8\",\"BLbaFJDAJ1i\",\"BLVHTFJgfg-\",\"BLTvxMWgKUn\",\"BLTd_nVAFQi\",\"BLP2UMKAGcn\",\"BLJIJCegCT3\",\"BLDZyq2g7Zr\",\"BLDSZ6pAsAZ\"],\"text\":[\"这年头不做作的民谣已经很少了……\",\"很久没去看那群留守的孩子了。他们还是很容易对每个人卸下心防，情绪会很强烈，所以开心时笑得特别大声，这让我想到悲伤会不会也成正比。不敢想。这世上，不一定所有问题都要去思考去直面，因为时间能帮你们解决很多问题。起码，在一起玩的时间。\",\"深圳雨，台风。小时候问大人，为什么我的风筝飞不起来？他们说要等大风。所以我期待着台风天。等了半年，台风来了，我却只能呆在窗户里往外看，也开始理解这场空欢喜。后来发现台风不单是种天气，还可以是一件事或一个人\",\"鸽子再也看不到无名山的高，你也不再是安和桥下清澈的水\",\"降低了预期，觉得滕王阁还不错。路遇一位玩摄影的大爷，教了许多东西，也听他说了许多往事。其实人得不得意都要尽欢，白不白头都要有那么一点青云之志\",\"东四变成了超市\\n东三变成了清真\\n神剪阁还在\\n绝望坡的小吃多到绝望\\n球场都翻修了\\n计科有钱了(辅导员说的)\\nofo小黄车已占领校园\\n学弟学妹主要玩lol和王者荣耀\\n光谷门对面依旧有鸡蛋灌饼和麻辣烫\\n韵苑食堂还是不怎么好吃\\n沁苑的猫又生了许多娃…\\n\\n来去匆匆，一些照片在：http://120.24.181.238/gallery/\",\"要是一个地方能称作图书馆，不单单是因为图书，还因为它收藏了太多的心事。\\n一语一念，虽不可借阅，愿永不过期。\",\"《深夜食堂》\",\"《返校日》\",\"旧时作\",\"和奶奶在一起。把轮椅推到广场下面玩，突然问我：你们厂生产什么？我：很难说，网络你知道吗… 奶奶：哦，卖绳子的啊\",\"19年前的我，就已经学会了爱恨分明……\",\"回老家，今天正好是“圩日”。村民一家老小，从竹林深处的罗江村出发，走过这条小桥，赶往市集。买到中意的衣服，或者零食，这就是完美的一天\"],\"type\":[\"video\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2016-09\",\"arr\":{\"year\":2016,\"month\":9,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BK-l0eHgWep\",\"BK3W05HgBqP\",\"BK0nQcSARek\",\"BKx6pvkg5HE\",\"BKfNILQgNAO\",\"BKdn7vEAJJW\",\"BKcdEbPAWzk\",\"BKcCulagAx1\",\"BKazUfGAFlb\",\"BKayutggosw\",\"BKTJUOdgkLm\",\"BKIiijpAvmT\"],\"text\":[\"街拍 | 回望\",\"街拍 | 深拷贝…\",\"街拍 | 拷贝\",\"街拍 | 擦肩而过\",\"苗族妹子上来敬酒。以为只是普通米酒，一饮而尽，后来才跟我说有70度。那还怎样办？不走了。\",\"满城星星点点的灯火，当作你心心念念的生日蜡烛吧。生日快乐，永远单纯。\",\"以大为美的苗族银饰，近看却有许多复杂的细节\",\"迷了路找不见甲秀楼位置。干脆坐下来吃一碗哨脆面，听到对面歌舞升平，寻路过去果然找到了。道理就是，有地标的地方就有广场，有广场的地方就有广场舞。感谢大妈，感谢广场舞。\",\"眼中仿佛藏了一个宇宙\",\"曾经想仗剑走天涯\",\"…\",\"hello，好久不见\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2015-12\",\"arr\":{\"year\":2015,\"month\":12,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/12317949_812027942276002_800384968_n.jpg\"],\"link\":[\"-wSMLcI7sl\"],\"text\":[\"秦教练教学得很好，三小时已可征服中级场。滑雪真是项迷人的活动，还没回去就约好了下次再来\"],\"type\":[\"video\"]}},{\"date\":\"2015-11\",\"arr\":{\"year\":2015,\"month\":11,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/s640x640/sh0.08/e35/12269862_894338194013437_1805169379_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/s640x640/sh0.08/e35/12276891_172191463131445_911534090_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/12237527_913338585386151_2037194016_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11934646_1088170014540783_209449183_n.jpg\"],\"link\":[\"-tqoLXo7v-\",\"-qKfKxo7nw\",\"-nE5BQo7uP\",\"9qjBpWI7lk\"],\"text\":[\"雪上鸦飞\",\"行走于结了冰的松花江上，遇到一群放生的人。佛经飘扬，鱼虾入河，河面转瞬又恢复了平静。而后在饭店，服务员说我们的鱼，就来自这松花江里。\\n\\n佛的安排奇妙又令人啼笑，鱼让俩群不同的人都收获了快乐？那么我想，鱼就是佛\",\"月上枝头\",\"在天黑后的日光岩顶呆了很久，一个人看一座岛，孤单也自由。后来遇到一位姑娘，我们一同下山。带着她逛遍整条龙头路找吃的，但她什么也不愿吃，问她，她说，想吃酸辣土豆丝。\\n\\n只有笑着承认，真是意料之外的答案。我出来玩，就是为了吃平时吃不到的东西，她则是觉得家乡的菜最熟悉，在哪都是愿意吃的。\\n\\n好吧，陪你吃。因为，离开武汉这么久，我也挺想念这道菜。\"],\"type\":[\"image\",\"image\",\"image\",\"video\"]}},{\"date\":\"2015-10\",\"arr\":{\"year\":2015,\"month\":10,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12145229_1722399741326075_2063247708_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12080493_892409564169375_1626542651_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/11849199_203248513340142_1615092499_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/12132912_162625974083441_1400003063_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12135478_1700175696879683_933151519_n.jpg\"],\"link\":[\"9VYE8YI7sk\",\"9BkX3xo7od\",\"8-Ba4MI7lt\",\"88Neujo7r2\",\"8uKqhDo7vp\"],\"text\":[\"在路上\",\"11点的时候，不想睡，借一只手电，一人夜游古村。这事情很刺激，转角遇到的神像，榕树的垂枝，摇曳的灯笼，自己投射到土楼的巨大影子，莫名的恐惧自心底升起。然而后来又不怕了，却总是想起以前去的思溪源村…with my friends\",\"古城的砖瓦年代久了，就很容易长出猫来\",\"以前吉他老师说，对于一首天空之城，听过与弹过是完全不一样的。弹过后才知道，从开始的吉他2品就一直在递增，仿佛自身也在飞翔，云层渐开，空城显现，情绪是那么容易被调动。然而我的水平只够感动自己，要抓紧时间努力学习了。不说了，玩游戏去了\",\"海上日出\"],\"type\":[\"image\",\"image\",\"image\",\"video\",\"image\"]}},{\"date\":\"2015-9\",\"arr\":{\"year\":2015,\"month\":9,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/s640x640/sh0.08/e35/11875445_885316994870904_706284789_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/s640x640/sh0.08/e35/11352715_138879086461968_2066668148_n.jpg\"],\"link\":[\"8NKC9RI7oZ\",\"8DOh_to7p0\"],\"text\":[\"沙滩总有数不完的沙子，数不完的故事。在这突然想起那本还没看完的《岛上书店》，是时候继续做些什么了\",\"陌上花开\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2015-6\",\"arr\":{\"year\":2015,\"month\":6,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11429225_720390118073037_768409912_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11420780_1012574008772885_1569805305_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11252784_879698105429690_2109453469_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11267410_925161560884785_371811288_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11375982_491190547696110_2013240096_n.jpg\"],\"link\":[\"4T1Lfgo7gX\",\"3-mmN3o7mn\",\"3uts9do7jI\",\"3iK7kwI7j1\",\"3glBKbI7jm\"],\"text\":[\"大雨之后\",\"一脸无辜的王尼玛大哥，从肚腩来看，果然是正品？\",\"感觉迷上风筝了。有次做梦，想到一根根拉伸向上的线，像是在钓空中的鱼。而一个技术娴熟的“渔夫”，收杆时是这么干净利落。\",\"起飞\",\"小萝莉不愿回家，跟奶奶说：“再让我玩会，明天要学钢琴，后天要学跳舞，就来不了这儿玩了。”\"],\"type\":[\"image\",\"image\",\"video\",\"video\",\"image\"]}},{\"date\":\"2015-5\",\"arr\":{\"year\":2015,\"month\":5,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/11252751_1444216632541093_1558227860_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11226595_701075516681953_1354085958_n.jpg\"],\"link\":[\"24-dd6o7uB\",\"2uQeuaI7nv\"],\"text\":[\"风雨欲来\",\"野生海带\"],\"type\":[\"image\",\"video\"]}},{\"date\":\"2015-4\",\"arr\":{\"year\":2015,\"month\":4,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11142212_609961145801361_1913577076_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11049421_1375007652828983_401355534_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11137852_1649834698581861_1050691792_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11055751_1573536912901494_1683773508_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11055897_1407191599597961_1763496348_n.jpg\"],\"link\":[\"1IUZByo7vP\",\"1ISKRxo7r8\",\"1GPBzpo7qW\",\"1FtGO3I7kN\",\"1C03iPI7hZ\"],\"text\":[\"要回去啦，再见北流河\",\"灵芝get√\",\"这里的清明是个很重要的节日，子孙们都会回来，跋山涉水，竹排渡江，荒山寻路，凭集体的记忆寻找列祖列宗的宝地，寄哀思，也求福德。一路上可以听他们唠叨旧事，也有超级靠谱的风水科普\",\"为了部落\",\"在清明的山路遇到了天然松香\"],\"type\":[\"video\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2015-3\",\"arr\":{\"year\":2015,\"month\":3,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11123665_1542600796003839_1576473443_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008101_1593505510894691_369067449_n.jpg\"],\"link\":[\"04_8fwo7gL\",\"zzfe7Oo7uc\"],\"text\":[\"如果你飞得像月亮这么高，就不会搁浅在树上\",\"喜欢这个季节的天空，你找个草坪一躺，飞机，风筝，鸟儿就都在上边，天气好时还能看到白天的月亮\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2015-2\",\"arr\":{\"year\":2015,\"month\":2,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10958252_1405701033068537_2023890854_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10832246_413065338853260_183697882_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10268927_436139166536328_1377561628_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008343_410508022446936_713236389_n.jpg\"],\"link\":[\"zcWez6I7uo\",\"zRPazvI7ol\",\"zPN2LtI7sT\",\"zKrDWlo7gZ\"],\"text\":[\"很多东西随着慢慢长大，变得不像小时候那样盼望热切，比如巧克力麦当劳薯片雪糕。只有对担子粉的爱永远不变的说…\",\"据说是一年一度考验演技的时候…\",\"锈迹斑斑的香炉\",\"回老家了，小时候跟我打过玻璃珠的小伙伴们呢？你们一个在北京，一个在安徽，一个在澳洲，一个我都不知道了…但你们看到玻璃珠的时候，要想起我来啊\"],\"type\":[\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2015-1\",\"arr\":{\"year\":2015,\"month\":1,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10932550_620643038062978_1729442807_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/891532_1563899373855738_1180535181_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10005439_338105566394046_854247264_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10903312_693622147425934_1766884651_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10914460_1546003772305181_1301162053_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10903277_832760670116494_255352239_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/924083_1539057536347062_2062767438_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10890944_765121966897759_2039585477_n.jpg\"],\"link\":[\"yb8uaCI7tt\",\"yKBopho7mX\",\"yAOcawI7pA\",\"x5U25kI7sN\",\"x1TTZUo7gW\",\"xeGbWuo7if\",\"xXr70fI7iD\",\"xUB4dOI7g1\"],\"text\":[\"草地上遗落的鞋子\",\"有位很久没联系的朋友寄来明信片，说：我很少看到海，正如你没见过几次雪\",\"深夜总是灵感乍现的最佳时期，只是几个设计方案都没法使自己满意。累了打开窗看到天上有个大月亮，只想用图章工具把它干掉。\",\"面朝大海冬暖花开\",\"分享日常不正常生活照一张\",\"其实我想，那些古老的渔民们，每天看着海岸线的日落日出，肯定是有人想过地球是圆的。而“想法”与“证明”之间，却跨越了一整条麦哲伦航道\",\"鱼山鱼海中，只有你，肯安静的趴在65厘米厚的亚克力板子上与我合影，大丑鱼\",\"新年单人旅行走起。其实从九洲港码头开始，珠海并没有给人很惊喜的感觉，包括盛名之下的沿海风光与渔女雕塑。倒是交通不通畅，从轮渡到公交都给我带来了许多麻烦。直到，晚上吃烤生蚝的第一口，我又觉得什么事情都是可以原谅的……\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-12\",\"arr\":{\"year\":2014,\"month\":12,\"src\":[\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10899183_999582293404177_745539859_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10894909_702627706517406_1277557620_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10831989_483313928477468_40906631_n.jpg\"],\"link\":[\"xRWN47I7pW\",\"xO3qREI7iW\",\"wEQykeo7tU\"],\"text\":[\"2014年最后的阳光\",\"最后一节吉他课结束后，马路上那风一直吹，才感觉南方的冬天终于是来了。其实吉他在冬天会有许多神奇的事情。比如琴弦如肌肉一样因冷而紧绷，发出比以往沉闷的低语；而空旷的大教室里，如有其他同伴拨响和弦，手中本已按灭的琴弦又会因共鸣微微颤动。像有生命一样。\",\"有棵丑树，我经常去看，又胖又歪，秃得可笑。在变冷的一天，它突然就开花了。冬天的花我知道得很少，南方没有梅花，那就是异木棉了\"],\"type\":[\"image\",\"image\",\"image\"]}},{\"date\":\"2014-11\",\"arr\":{\"year\":2014,\"month\":11,\"src\":[\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10784965_1518537748403855_176956695_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10735195_1505939246340704_1984926778_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10747711_429336373885590_422028037_n.jpg\"],\"link\":[\"vP2ywuo7pq\",\"vA68BLo7tN\",\"u7zEVxo7vw\"],\"text\":[\"通灵之术！\",\"现场气氛果然不一样，马上就可以看到小伞在大哥胯下疯狂输出…是时候来首选一记薇恩了\",\"有朋友跟我说，挪威的森林根本看不下去；又有朋友说，看这书一发不可收拾。差别好大呀！我倒觉得有个简单的方法：翻到开篇的这几个字，如果心中一紧，那就说明这本书适合你，否则请弃之\"],\"type\":[\"image\",\"image\",\"image\"]}},{\"date\":\"2014-10\",\"arr\":{\"year\":2014,\"month\":10,\"src\":[\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10735112_730529873702428_413107753_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10725177_573652486072155_1401604216_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10724868_302191016652312_2097904817_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10731727_461314204008708_386749273_n.jpg\"],\"link\":[\"uu70zJo7qb\",\"uQnvluo7sK\",\"uLi56Wo7oO\",\"uEv-tCo7rJ\"],\"text\":[\"天下的小饼干遇到我，貌似就只有一种下场！！\",\"一个人，一支口琴，一片海，一瓶酒\",\"《论夜归，打的，以及发票的正确用法》\",\"童年真好。我以后一定不要跟孩子说：希望你快高长大这种傻话…\"],\"type\":[\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-9\",\"arr\":{\"year\":2014,\"month\":9,\"src\":[\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10616983_1382591478697855_2107473552_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925287_1464119273867077_427071626_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/925284_1534308033454310_855505111_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10666267_1550871771803214_2074300649_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693244_734401199942901_1572709880_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693771_1517437541834868_665867908_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693822_497709657032441_1125408654_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10683941_796597910390683_12441123_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10661142_164227523747936_1526737465_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10661182_550889531706942_2043749716_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10520334_1523531751215211_1344090061_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693390_547748238660649_761529890_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693650_837768039589771_1793184733_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/914812_1529561143923493_1662159287_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10644019_368509079979549_2085033896_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10684161_918887498139099_2081383304_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10683828_327931784041264_894089329_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10666028_872988212713750_1345360858_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10665501_1452353738387652_2075798065_n.jpg\"],\"link\":[\"tXuIHso7qK\",\"tJjQlAo7kH\",\"tDYyUeo7oX\",\"tCBULHo7sW\",\"tB_Xmao7qG\",\"s8cKzLI7pM\",\"s6-lOFo7ip\",\"s5GifkI7q7\",\"s3uZcmo7uj\",\"s2bb5io7p-\",\"s2P72tI7o6\",\"s2FPpGI7o_\",\"s1LPQPo7v8\",\"szZP5Io7lY\",\"sr9rtNo7lM\",\"sr7gXKI7h_\",\"srG7fjo7sV\",\"spAnrio7oh\",\"sj4BGgI7t_\"],\"text\":[\"我的好朋友——超级高冷超级磨人的丝瓜\",\"沉眠的店主失眠的狗。想起大学的最后时光，宿舍24小时都有人醒着，自由的人生，自由的酒和曲终人散，大家通常没有另一半，没有钱，没有忧愁，爽成狗\",\"如果他是程序员…\\nvar date = lifetime;\\rif(rotate(mountain, water, stupa)){ /*return nextLifetime;*/ return meetyou(journey);\\r}\",\"听着山寨的民谣电子乐，看着美好的姑娘。功德无量。\",\"弥里塘太宁静。在这我一直想起每一个被深圳车水马龙声吵醒的早晨，真是光辉的岁月\",\"进藏。天空挂满着云，黑的白的都有。云朵转眼飘散，它却依然是蓝色。\",\"“音浪太强不晃会被撞到地上…”\",\"陌生的朋友，愿下次再能与你们相聚在丽江love wine & half。我无法融解你悲观现实的想法，你也无法说服我旅行并不是逃避。但这都很有意思。只是想起以前有个人叫我不能喝太多的酒，一想到这个呀我就越喝越多\",\"玉龙雪山\",\"以前想去丽江，但去过的人都灌输着你也许会失望的观念，因而甚至不敢动身。这是一种“怕”。有时候真得自己去看看才会了然。第一天在丽江，民谣吉他缓缓流过商业化的街道，原来没有惊喜，也没有失望，一切刚刚好。\",\"我注定要回到老路上\",\"彩云之南\",\"云南，向往已久的地方\",\"QQ同时在线人数破2亿纪念，作为一颗小小螺丝钉，名字正好镶到企鹅的大嘴巴上。这时觉得有一丝光荣，一种努力被实化的错觉；然后又有点不舒服，感觉此时的自己，和名字身边的人一样。可我想要的就是不一样。\",\"陪伴一定得是件漫长的事呵。和奶奶在一起的中秋节。\",\"中秋和家人一起去看孔明灯，热闹而安逸，这是小城市的美好。\",\"老家的葡萄藤，从我初中时就挂在这，再见已是十一年\",\"家里橄榄熟了，盐渍，暴晒，蘸蜜，简直人间美味!\",\"在一场太阳雨里回到家中\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"video\",\"image\",\"video\",\"image\",\"video\",\"image\",\"image\",\"image\",\"image\",\"video\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-8\",\"arr\":{\"year\":2014,\"month\":8,\"src\":[\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10654876_610857929023752_364709543_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10644013_777642448965989_544517718_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/924456_1471485796442896_1699836323_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10607913_692632367472666_1829853902_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10611052_1466241683635233_830264506_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10617144_829548960388746_1611410337_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10453953_542161702576881_1621059386_n.jpg\"],\"link\":[\"sXa9g6I7jB\",\"sPt4u4I7kA\",\"sC18G0o7qb\",\"sAMmEWI7oC\",\"rzSow4o7lH\",\"ro28LPI7oc\",\"rR37wLo7iu\"],\"text\":[\"在书店的晚上终于把新专反复听完。太柔了…打一星两星的人肯定是真爱粉，这点有人敢怀疑？我不是，打四星！停不下来，直到书店响起:深圳即将入眠。但22点还是深圳的早晨呀\",\"慢三的华尔兹，大篇幅的爵士即兴。感觉生活得太浮躁。也太安逸。\",\"好久没看话剧，这部果然没让人失望。导演太会讲故事了，1024个赞\",\"纵有一万种悲伤的美丽，也比不过这段。\",\"在书城里看到的《后会无期》分镜图。电影那么美，分镜是这样，这就是现实~\",\"如果你从北京来看我，我会很感动;如果你像光，从太阳那头过来，我不以为然。因为光到地球只要8.3分钟。我们经常错用代价来衡量情感\",\"相聚总有时:)\"],\"type\":[\"image\",\"video\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-7\",\"arr\":{\"year\":2014,\"month\":7,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925559_1482425071996009_1940959046_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10554006_501929086608023_917623457_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10576105_624878090953161_638111947_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10570119_332808380211109_125412512_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/926536_828142997203682_1319760676_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/923702_252705761596555_721784545_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10549755_708603639175850_2095584541_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/928307_1442957109299429_297849354_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10488451_303926969784787_1278259348_n.jpg\"],\"link\":[\"q5e2KpI7qn\",\"qyXXpNI7q5\",\"qxfUe0I7lp\",\"qq9usdo7hr\",\"qn4WCIo7hi\",\"ql0brho7vN\",\"qkiaYDo7t9\",\"qURC9fI7r-\",\"p4A8IuI7py\"],\"text\":[\"随便走走，发现世界还是很美好的。当拥有美好事物时，经常习惯性的熟视无睹;当努力抓住你想要的东西时，它又可能瞬间破碎。但依旧需要不妥协。\",\"荔枝——我心目中的水果之王（有之一）\",\"高中时代最新款的mp4，现已成了老古董\",\"台风来临时，刚好会是暑假。但我已没有暑假。\",\"看着一场雨由远及近的淋湿院子，太漂亮\",\"归来却空空的行囊  那故乡的云  那故乡的风  啦啦啦啦啦 啦啦啦。\",\"在今年第一个狂风大作的早上，回家去\",\"98年，世界杯第一次在我脑中留下记忆，和爸，围着那台很小的tcl。今天，爸还打电话给我，让我别看太晚影响到明天工作，但我知道他自己也会去看的。是的，我们爱足球，今生今世\",\"这几天深圳的天空很美，无论晴雨\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-6\",\"arr\":{\"year\":2014,\"month\":6,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10362316_1434933843444633_1187384207_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10471930_507725875994902_393186392_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10454011_484872768311603_738380027_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/923661_248502122024084_2086692261_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10424605_774238262594769_78480252_n.jpg\"],\"link\":[\"p06uEZI7tG\",\"pytFNpo7sD\",\"poMFteI7q0\",\"pMt5tgI7vj\",\"o3eroFo7gK\"],\"text\":[\"“往事依稀浑似梦，都随风雨到心头”——梅表姐\",\"navy blue\",\"今天我遇到一朵枯玫瑰。她只是枯萎，从未凋零。\",\"上届卫冕冠军被打成筛子的…是热火…\",\"我和大神的差距——web工程师的自我修养\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-5\",\"arr\":{\"year\":2014,\"month\":5,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xat1/t51.2885-15/e15/10387796_255697041300477_753213015_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10005623_779769878723970_627922376_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10358172_1495900567292387_640174442_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10369281_674379822637848_233362820_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/928251_430572373746575_786910314_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10358301_256481271142988_1088114034_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10296597_1413560715589179_392570057_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10299642_561366610636165_721929935_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10268965_1446530205590326_114108738_n.jpg\"],\"link\":[\"op03boo7lW\",\"ops-ZUI7t-\",\"ofqhBpI7mQ\",\"odP0cno7ue\",\"oLX-4GI7ne\",\"oBl6WtI7qC\",\"nvPChzI7vU\",\"ngAyz8o7qj\",\"ndTggdI7jn\"],\"text\":[\"突然发现我还是挺喜欢大晴天的\",\"单人旅行走起！开心\",\"不久就可以吃了\",\"黄昏时分\",\"大雨倾城\",\"今天路过公园，一朵玉兰掉在身边。想起小时候陪伴我的三棵树，两棵木棉，一棵玉兰。当然玉兰这名字是后来才知道的，记忆里的那朵永远叫做香花。三年级的某天放学，这三棵树一并倒下了。\",\"雨中深大。雨季再来不再来。\",\"say hey to may\",\"故事中的小黄花\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-4\",\"arr\":{\"year\":2014,\"month\":4,\"src\":[\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10261258_711820055527911_220271949_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10249356_695726313802446_881680057_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268929_597082527053970_1060360934_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268941_490697914386538_1148834228_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10254195_545488182236276_1930978882_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/917572_539124756205696_1549712749_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/927273_657564254280429_578859844_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175316_650834874981595_1358429831_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/926422_245144379006241_1254093305_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/891289_302574849898688_205313988_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175309_510867459023322_1700312549_n.jpg\"],\"link\":[\"nOGNjUI7op\",\"nGJfYAo7lW\",\"nATIxlI7tR\",\"mxsNwto7pQ\",\"mm7JTUI7p0\",\"mhER0lo7oe\",\"mfvVUYI7hu\",\"mdF-nNo7pE\",\"mcVLQzo7nl\",\"mb5cFho7sd\",\"maqYInI7if\"],\"text\":[\"谢谢亲们的蛋糕和礼物;谢谢我们始终用“同学”来称呼彼此。\",\"处女座老榕树\",\"放风筝的人们\",\"现在我的状态，像极了一只被推上战场僵尸\",\"这几天我耳边是都是这样的话语:1、“就是敲敲键盘，挺清闲的哈！”2、“别太挑剔，给个一两千就先做着”3、“什么？你那一碗粉要十二块钱？！”我回深圳了，几天的清静生活，谢谢乡亲们的招待。\",\"good luck\",\"瓦上花开\",\"好吧，这是一艘船\",\"石表山，思罗河，四年后的清明我又来到了这儿\",\"清明，一路向西\",\"清明一回到家，老妈就开始炫耀她试验种的豆芽。愿君多采撷，此物最好吃？\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-3\",\"arr\":{\"year\":2014,\"month\":3,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10012487_604746702952671_676907736_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/1171265_389602547845527_1588547561_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11376491_1614984048759908_413209146_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11251074_365441270314698_1015057085_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11380079_1581430378786145_504181803_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11330604_837683999618217_506172540_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11273047_110162449318540_1639646034_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11375356_908792249164254_112740693_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11357539_388432694679963_1281450994_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11311124_1611430865770700_1482115931_n.jpg\"],\"link\":[\"mIgOdio7jT\",\"mIAS5lo7hb\",\"lrhVmio7lF\",\"lmADv6I7rU\",\"lhPFVeI7g6\",\"lcyrKSI7h_\",\"lSda6Ko7nG\",\"lSSxd8I7kB\",\"lK0xswI7s6\",\"lA4KaBI7go\"],\"text\":[\"转角遇到戏台，耳熟却不知道是哪一出了。想起爷爷以前的二胡与杨琴，自己精削细磨的琴竹，还有他组织的“菊山楼”粤剧队，真是一晃好些年。今年清明，一定回去。\",\"这本书超赞！好书好书好书\",\"四五点写程序太累，就不写了。不告诉任何人，跑到这个立交桥底，我已来过好几回。这里有一棵白色的紫荆花，满墙爬山虎，和刚放学的小朋友，出去，右拐，再右拐，转角可以遇到你，我的肉夹馍…\",\"越来越认生了，到步行街买衣服，找到比较适合的，却因为店员太过热情…跑了出来。闹市中居然藏有一古庙，还是这里自在，漫天神佛只是笑笑，不理物我，无论喜悲。对了我来这干嘛\",\"爬山的好处:强身健体，磨砺意志，开阔胸怀…坏处是:没有wifi。\",\"又见回南天\",\"老妈说，今天要我送个礼物！离家万里，只好迅速开发出这个app，摇后就会播放我唱的真的爱你。可惜她说摇后没反应，后来才知道，她拿的ipad在摇…但我是真的爱你\",\"今天下雨，的士司机都不肯理我。头上路灯光芒遥不可及，脚下路面棱角冰冷鲜明\",\"起风吧，明天。喜欢偏冷的日子，假如是春天，假如是风大，太完美了\",\"腾讯的凌晨四点半。第一次在此过夜，听着耳熟不能详的歌，看着平静不微笑的人。然后记起，家里打来被我按掉的电话，忘了回\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-2\",\"arr\":{\"year\":2014,\"month\":2,\"src\":[\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/1737225_591794970889160_1849235580_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/1741200_451260698337036_577792061_n.jpg\"],\"link\":[\"kv3jNgI7sw\",\"kr8sW8I7nR\"],\"text\":[\"“不能吃太胖喔，会被杀掉的！”\",\"今晚，已经看到两个小女生在问，这里有《九云梦》吗？\"],\"type\":[\"image\",\"image\"]}}]}","site":{"data":{}},"excerpt":"","more":"{\"list\":[{\"date\":\"2017-07\",\"arr\":{\"year\":2017,\"month\":7,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BW_0-LNAEQy\",\"BWw_lTjAWvP\",\"BWl0n7ggC8d\",\"BWbyVtmgZA0\",\"BWPEL03A6QN\",\"BWJyvn_A8k1\",\"BWEqgtvgzyu\"],\"text\":[\"那天拍这张照片，是看到一个小女孩，借了妈妈的手机，边拍边赞叹“好美丽的颜色啊”。但照片最大的谎言就是定格，人们觉得美好是永恒的，至少不太会想时间之外的事情。\\n事实上这种植物一旦攀上柱子，就疯子一般往上爬，为了给顶端的小苗供给养分，下面的叶子会慢慢掉光。立交桥好高呀，小苗爬不上去，累了也枯萎了。最后只剩下光秃秃的丑陋藤条。\\n不过我还是希望小女孩过几天再看到它时，只是轻轻说“啊原来是这样”，而不是和我一样觉得它很丑。\",\"倦\",\"最光明的那个早上\",\"光芒万丈\",\"接连的雨，让高架上的三角梅窜得好高。高于路灯高于建筑物高于一切。不过它们的命运就是被剪掉，然后继续做一棵安分守己的好花\",\"天桥上汽车奔驰，天桥下静默花开。这是两个世界。\",\"用流行的话来讲，深圳现在的天气就是“一言不合就下雨”。但是天空从来就没有言语呀，也从来没有凑合谁的心意。不说话，不取悦，就很酷。\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-06\",\"arr\":{\"year\":2017,\"month\":6,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BV6WiUxgHp0\",\"BVrnb0GAIbo\",\"BVq6fMHAV8i\",\"BVUXrYtFwlA\",\"BVHdxQsFpYS\",\"BVE4dC6l-tK\",\"BVCbPn6lOqn\"],\"text\":[\"午睡\",\"分享一个甜甜圈\",\"分享一个失败的对焦\",\"雨后\",\"腾讯云\",\"黄昏的公园深处\",\"从今天开始，决定数一下一年有多少个多云的日子。\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-05\",\"arr\":{\"year\":2017,\"month\":5,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BUqBlIWFF_f\",\"BUlWsL0F5kE\",\"BUgrXBVlaJR\",\"BUdT28JFYpP\",\"BUYZzrJFfdJ\",\"BUO7nZZlWf0\",\"BUEZNOKFUK0\",\"BUB8VemFJEE\",\"BUA8KqRlF3n\",\"BT_4mkYFxc5\",\"BT_eImQF9sY\",\"BT-fITqlTiO\",\"BT27_ryFIr_\",\"BT0azZAFBIs\"],\"text\":[\"森林之晨\",\"Hello, _____\",\"水中豆\",\"雨中的公交车窗外\",\"飞机飞过天空\",\"西塘总的来说，还是挺好。就满大街唱着《成都》和《一瞬间》，感觉不是很懂…\",\"可能南浔真的是去过小镇的一个特例。没有太多的迷之传说去渲染，它就在这，一言不发的等你。兜兜转转又回到了百间楼，挨家问有人吗，随便帮再做个炒绣花锦吧，吃完这个菜我就走。\",\"看了一下午的燕子\",\"燕子飞过百间楼\",\"夜色里迷了路\",\"雨中漫步\",\"可能是一种“一出行铁定下雨”的体质\",\"生如夏花。整个四月都过得比较丧，想了下唯一开心的事情就是朴树的专辑了。\",\"五月\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"video\",\"image\",\"image\"]}},{\"date\":\"2017-04\",\"arr\":{\"year\":2017,\"month\":4,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BTvD8fCFOpY\",\"BTbS_uKF5Xx\",\"BTYKbXMFoUM\",\"BSc5TamlT16\",\"BSbA96PFiWC\",\"BSTZP6-gSaD\"],\"text\":[\"多久没去看一场日出\",\"阳光已经铺满下班的街道\",\"午睡\",\"与你跋山涉水\",\"清明晚宴，以及一个迟下楼的我\",\"一个突如其来的雨天\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-03\",\"arr\":{\"year\":2017,\"month\":3,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BSLeDr7gDu9\",\"BSIUnyfAdQY\",\"BSAjHqkgtr9\",\"BR-0YW4gfC9\",\"BRk5uUzlAe2\",\"BRXafqQgsSY\",\"BRS_5qFA9dW\",\"BRIjntvFr5d\"],\"text\":[\"蜘蛛与落日\",\"春林初盛\",\"日光倾城\",\"夜空中最亮的路灯\",\"二月底就开始构思要拍一组日系，每天端着相机来上班，然而是连续半个月的阴雨。今天终于天放晴了，相机却没了电。\",\"车窗里雾气，车窗外水滴。想起小时候作文，写为什么喜欢雨天，因为晴天你会纠结要不要出去玩，雨天就不用想，踏实呆家里好了。但那是小时候，现在也踏实了，就是下不下雨都要去上班啊…\",\"街拍 | 七点半\",\"“又是一轮月高悬 云端那边的天 两颗星座遥望夜空 永远不能相逢”\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-02\",\"arr\":{\"year\":2017,\"month\":2,\"src\":[\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BRBWMaAl2h2\",\"BQfmYX5gfiy\",\"BQU0S39AetF\",\"BQFkKYIASOp\",\"BQAdVx5AOLy\"],\"text\":[\"深圳的高架有很多三角梅，这种花的优点和缺点都是太倔强\",\"最近重新把球拍拿了起来。还是会很怀念，高中那时的球馆，阳光也是这样斜斜照进来。球滚到再远的角落，还是能捡起来；人走出了球馆，可能再也回不来。不过，只要你等，也总有陌生人推开门说：加我一个。\",\"深圳\",\"离家前心血来潮，突然想再刷一遍《白鹿原》，就把书给捎上了。列车经过山洞，窗外是明灭的光影，第一次觉得黑娃横腰打白嘉轩的那一棍子这么魔幻…好像会有迷之bgm响起，佐助说我要毁了木叶\",\"近乡情怯。情怯，多好的词语\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2017-01\",\"arr\":{\"year\":2017,\"month\":1,\"src\":[\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BPwIWSXgQ_L\",\"BPoXK-sgC6M\",\"BPMTnMTAH_Y\",\"BPKrtVMgo9j\",\"BPAVAW5gFc7\"],\"text\":[\"城市住久了，第一次决定在乡村过年。白天开心农场，晚上拍星星，过上了谈笑无鸿儒往来有白丁的生活…\",\"稻草人的早晨\",\"列车继续加速度，水珠在最后的时光里尽情飞驰\",\"一个等车的人都没有。上一次看到这副光景，是2009年10月5日的凌晨3点半，湘潭至武汉\",\"“人呢？”“买菜去了呗，真慢”——所谓冬日的阳光\"],\"type\":[\"image\",\"image\",\"video\",\"image\",\"image\"]}},{\"date\":\"2016-12\",\"arr\":{\"year\":2016,\"month\":12,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BOsC8obAOwI\",\"BOpI4qsAi6c\",\"BOjCbzZAhQy\",\"BOUysuPgbXG\",\"BOTVNfYgjRt\",\"BOMjl4LATC-\",\"BOAF_bbA9H0\",\"BN9ZdHuAqL1\",\"BN30BiDAVGo\",\"BN2CjzagYQK\",\"BNyLQGUgdma\",\"BNwOJYlgAOL\",\"BNtsL5QgEts\",\"BNn5V7oA_nc\"],\"text\":[\"每年这个时候都要趴在这座天桥，拍一张照。这个世界似乎没变，但又在喧哗和前行。这年成长了挺多，也学会看淡一些事情。\\n可能是代码写多了，感觉世界的逻辑有时很简单，事情无非是let，变化历历，或者是const，永恒安息。如果一开始就想清楚，留不住的就随风去，不会变的就钉到骨子里。那你说多轻松。\",\"去看雪？\",\"“大楼诗人”\",\"又是一年岁末时\",\"say hi\",\"现在的每个日落，都会有光正巧从窗帘缝隙钻过，平行照射到我的电脑屏幕。这个时刻就感觉特别神圣和中二。披上了迷之神眷色彩，讲不好我的工位就是个宇宙中心，太阳在绕着代码转\",\"末班车\",\"树影，好似一只黄鹂和蜣螂\",\"街拍 | 晴天\",\"“望”\",\"午睡\",\"“黄昏之时”\",\"枯萎的植物，最后的光\",\"街拍 | 也许是深圳最后的夏日\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2016-11\",\"arr\":{\"year\":2016,\"month\":11,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BNUaqEagioX\",\"BNTHIbUgigX\",\"BNRr9zBg0fu\",\"BNQHWSwA1Gy\",\"BNPbdVIg6gT\",\"BNOpXsKgU53\",\"BNBrozHAAV7\",\"BM8hsf-grvj\",\"BM8WO8xglvC\",\"BMy1VT3grFk\",\"BMrSxSNgpIN\",\"BMedxcZA0_g\",\"BMQLQvogqn7\"],\"text\":[\"“我是谁我爱谁我要谁我去哪”\",\"天都峰顶转一圈，站的地方巴掌大其实很慌…\",\"下了一夜雨，晚上没睡好，脑子里老想着天都峰关闭的事情。但风云变幻就在一瞬间，冥冥中必有回响，突如其来的晴天太过惊喜。峰顶走起\",\"上年没见着的雾凇突然出现，愿望兑现的感觉\",\"“不看岳”\",\"黄山行\",\"宿舍楼\",\"华科的秋天好像一条安静河流，慢慢扩散，了无声息，异常缓慢，又很具体。反正，时间还有很多，请随意\",\"又回我科，我科这个季节怎么拍都好看\",\"今夜月亮\",\"想过去改变，想过要离开，想过拍拍裤管就去远方。然后又想是不是先做出点事情，后来又突然有了点责任，再后来发现自己可以影响一些人… 它没有扼杀选择，反而让更多条路铺在我面前。所以，生日快乐，18岁。\",\"街拍 | 面对面\",\"一叶知秋\"],\"type\":[\"image\",\"video\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2016-10\",\"arr\":{\"year\":2016,\"month\":10,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BL_WXdxAM1Y\",\"BL6dTmIgecl\",\"BLv6COag1M6\",\"BLlf8WWgHcJ\",\"BLfzJ7gjj-8\",\"BLbaFJDAJ1i\",\"BLVHTFJgfg-\",\"BLTvxMWgKUn\",\"BLTd_nVAFQi\",\"BLP2UMKAGcn\",\"BLJIJCegCT3\",\"BLDZyq2g7Zr\",\"BLDSZ6pAsAZ\"],\"text\":[\"这年头不做作的民谣已经很少了……\",\"很久没去看那群留守的孩子了。他们还是很容易对每个人卸下心防，情绪会很强烈，所以开心时笑得特别大声，这让我想到悲伤会不会也成正比。不敢想。这世上，不一定所有问题都要去思考去直面，因为时间能帮你们解决很多问题。起码，在一起玩的时间。\",\"深圳雨，台风。小时候问大人，为什么我的风筝飞不起来？他们说要等大风。所以我期待着台风天。等了半年，台风来了，我却只能呆在窗户里往外看，也开始理解这场空欢喜。后来发现台风不单是种天气，还可以是一件事或一个人\",\"鸽子再也看不到无名山的高，你也不再是安和桥下清澈的水\",\"降低了预期，觉得滕王阁还不错。路遇一位玩摄影的大爷，教了许多东西，也听他说了许多往事。其实人得不得意都要尽欢，白不白头都要有那么一点青云之志\",\"东四变成了超市\\n东三变成了清真\\n神剪阁还在\\n绝望坡的小吃多到绝望\\n球场都翻修了\\n计科有钱了(辅导员说的)\\nofo小黄车已占领校园\\n学弟学妹主要玩lol和王者荣耀\\n光谷门对面依旧有鸡蛋灌饼和麻辣烫\\n韵苑食堂还是不怎么好吃\\n沁苑的猫又生了许多娃…\\n\\n来去匆匆，一些照片在：http://120.24.181.238/gallery/\",\"要是一个地方能称作图书馆，不单单是因为图书，还因为它收藏了太多的心事。\\n一语一念，虽不可借阅，愿永不过期。\",\"《深夜食堂》\",\"《返校日》\",\"旧时作\",\"和奶奶在一起。把轮椅推到广场下面玩，突然问我：你们厂生产什么？我：很难说，网络你知道吗… 奶奶：哦，卖绳子的啊\",\"19年前的我，就已经学会了爱恨分明……\",\"回老家，今天正好是“圩日”。村民一家老小，从竹林深处的罗江村出发，走过这条小桥，赶往市集。买到中意的衣服，或者零食，这就是完美的一天\"],\"type\":[\"video\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2016-09\",\"arr\":{\"year\":2016,\"month\":9,\"src\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"link\":[\"BK-l0eHgWep\",\"BK3W05HgBqP\",\"BK0nQcSARek\",\"BKx6pvkg5HE\",\"BKfNILQgNAO\",\"BKdn7vEAJJW\",\"BKcdEbPAWzk\",\"BKcCulagAx1\",\"BKazUfGAFlb\",\"BKayutggosw\",\"BKTJUOdgkLm\",\"BKIiijpAvmT\"],\"text\":[\"街拍 | 回望\",\"街拍 | 深拷贝…\",\"街拍 | 拷贝\",\"街拍 | 擦肩而过\",\"苗族妹子上来敬酒。以为只是普通米酒，一饮而尽，后来才跟我说有70度。那还怎样办？不走了。\",\"满城星星点点的灯火，当作你心心念念的生日蜡烛吧。生日快乐，永远单纯。\",\"以大为美的苗族银饰，近看却有许多复杂的细节\",\"迷了路找不见甲秀楼位置。干脆坐下来吃一碗哨脆面，听到对面歌舞升平，寻路过去果然找到了。道理就是，有地标的地方就有广场，有广场的地方就有广场舞。感谢大妈，感谢广场舞。\",\"眼中仿佛藏了一个宇宙\",\"曾经想仗剑走天涯\",\"…\",\"hello，好久不见\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2015-12\",\"arr\":{\"year\":2015,\"month\":12,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/12317949_812027942276002_800384968_n.jpg\"],\"link\":[\"-wSMLcI7sl\"],\"text\":[\"秦教练教学得很好，三小时已可征服中级场。滑雪真是项迷人的活动，还没回去就约好了下次再来\"],\"type\":[\"video\"]}},{\"date\":\"2015-11\",\"arr\":{\"year\":2015,\"month\":11,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/s640x640/sh0.08/e35/12269862_894338194013437_1805169379_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/s640x640/sh0.08/e35/12276891_172191463131445_911534090_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/12237527_913338585386151_2037194016_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11934646_1088170014540783_209449183_n.jpg\"],\"link\":[\"-tqoLXo7v-\",\"-qKfKxo7nw\",\"-nE5BQo7uP\",\"9qjBpWI7lk\"],\"text\":[\"雪上鸦飞\",\"行走于结了冰的松花江上，遇到一群放生的人。佛经飘扬，鱼虾入河，河面转瞬又恢复了平静。而后在饭店，服务员说我们的鱼，就来自这松花江里。\\n\\n佛的安排奇妙又令人啼笑，鱼让俩群不同的人都收获了快乐？那么我想，鱼就是佛\",\"月上枝头\",\"在天黑后的日光岩顶呆了很久，一个人看一座岛，孤单也自由。后来遇到一位姑娘，我们一同下山。带着她逛遍整条龙头路找吃的，但她什么也不愿吃，问她，她说，想吃酸辣土豆丝。\\n\\n只有笑着承认，真是意料之外的答案。我出来玩，就是为了吃平时吃不到的东西，她则是觉得家乡的菜最熟悉，在哪都是愿意吃的。\\n\\n好吧，陪你吃。因为，离开武汉这么久，我也挺想念这道菜。\"],\"type\":[\"image\",\"image\",\"image\",\"video\"]}},{\"date\":\"2015-10\",\"arr\":{\"year\":2015,\"month\":10,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12145229_1722399741326075_2063247708_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12080493_892409564169375_1626542651_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/s640x640/sh0.08/e35/11849199_203248513340142_1615092499_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/12132912_162625974083441_1400003063_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/s640x640/sh0.08/e35/12135478_1700175696879683_933151519_n.jpg\"],\"link\":[\"9VYE8YI7sk\",\"9BkX3xo7od\",\"8-Ba4MI7lt\",\"88Neujo7r2\",\"8uKqhDo7vp\"],\"text\":[\"在路上\",\"11点的时候，不想睡，借一只手电，一人夜游古村。这事情很刺激，转角遇到的神像，榕树的垂枝，摇曳的灯笼，自己投射到土楼的巨大影子，莫名的恐惧自心底升起。然而后来又不怕了，却总是想起以前去的思溪源村…with my friends\",\"古城的砖瓦年代久了，就很容易长出猫来\",\"以前吉他老师说，对于一首天空之城，听过与弹过是完全不一样的。弹过后才知道，从开始的吉他2品就一直在递增，仿佛自身也在飞翔，云层渐开，空城显现，情绪是那么容易被调动。然而我的水平只够感动自己，要抓紧时间努力学习了。不说了，玩游戏去了\",\"海上日出\"],\"type\":[\"image\",\"image\",\"image\",\"video\",\"image\"]}},{\"date\":\"2015-9\",\"arr\":{\"year\":2015,\"month\":9,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/s640x640/sh0.08/e35/11875445_885316994870904_706284789_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/s640x640/sh0.08/e35/11352715_138879086461968_2066668148_n.jpg\"],\"link\":[\"8NKC9RI7oZ\",\"8DOh_to7p0\"],\"text\":[\"沙滩总有数不完的沙子，数不完的故事。在这突然想起那本还没看完的《岛上书店》，是时候继续做些什么了\",\"陌上花开\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2015-6\",\"arr\":{\"year\":2015,\"month\":6,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11429225_720390118073037_768409912_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11420780_1012574008772885_1569805305_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11252784_879698105429690_2109453469_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11267410_925161560884785_371811288_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11375982_491190547696110_2013240096_n.jpg\"],\"link\":[\"4T1Lfgo7gX\",\"3-mmN3o7mn\",\"3uts9do7jI\",\"3iK7kwI7j1\",\"3glBKbI7jm\"],\"text\":[\"大雨之后\",\"一脸无辜的王尼玛大哥，从肚腩来看，果然是正品？\",\"感觉迷上风筝了。有次做梦，想到一根根拉伸向上的线，像是在钓空中的鱼。而一个技术娴熟的“渔夫”，收杆时是这么干净利落。\",\"起飞\",\"小萝莉不愿回家，跟奶奶说：“再让我玩会，明天要学钢琴，后天要学跳舞，就来不了这儿玩了。”\"],\"type\":[\"image\",\"image\",\"video\",\"video\",\"image\"]}},{\"date\":\"2015-5\",\"arr\":{\"year\":2015,\"month\":5,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/11252751_1444216632541093_1558227860_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11226595_701075516681953_1354085958_n.jpg\"],\"link\":[\"24-dd6o7uB\",\"2uQeuaI7nv\"],\"text\":[\"风雨欲来\",\"野生海带\"],\"type\":[\"image\",\"video\"]}},{\"date\":\"2015-4\",\"arr\":{\"year\":2015,\"month\":4,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11142212_609961145801361_1913577076_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11049421_1375007652828983_401355534_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/11137852_1649834698581861_1050691792_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11055751_1573536912901494_1683773508_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11055897_1407191599597961_1763496348_n.jpg\"],\"link\":[\"1IUZByo7vP\",\"1ISKRxo7r8\",\"1GPBzpo7qW\",\"1FtGO3I7kN\",\"1C03iPI7hZ\"],\"text\":[\"要回去啦，再见北流河\",\"灵芝get√\",\"这里的清明是个很重要的节日，子孙们都会回来，跋山涉水，竹排渡江，荒山寻路，凭集体的记忆寻找列祖列宗的宝地，寄哀思，也求福德。一路上可以听他们唠叨旧事，也有超级靠谱的风水科普\",\"为了部落\",\"在清明的山路遇到了天然松香\"],\"type\":[\"video\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2015-3\",\"arr\":{\"year\":2015,\"month\":3,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11123665_1542600796003839_1576473443_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008101_1593505510894691_369067449_n.jpg\"],\"link\":[\"04_8fwo7gL\",\"zzfe7Oo7uc\"],\"text\":[\"如果你飞得像月亮这么高，就不会搁浅在树上\",\"喜欢这个季节的天空，你找个草坪一躺，飞机，风筝，鸟儿就都在上边，天气好时还能看到白天的月亮\"],\"type\":[\"image\",\"image\"]}},{\"date\":\"2015-2\",\"arr\":{\"year\":2015,\"month\":2,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10958252_1405701033068537_2023890854_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10832246_413065338853260_183697882_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10268927_436139166536328_1377561628_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11008343_410508022446936_713236389_n.jpg\"],\"link\":[\"zcWez6I7uo\",\"zRPazvI7ol\",\"zPN2LtI7sT\",\"zKrDWlo7gZ\"],\"text\":[\"很多东西随着慢慢长大，变得不像小时候那样盼望热切，比如巧克力麦当劳薯片雪糕。只有对担子粉的爱永远不变的说…\",\"据说是一年一度考验演技的时候…\",\"锈迹斑斑的香炉\",\"回老家了，小时候跟我打过玻璃珠的小伙伴们呢？你们一个在北京，一个在安徽，一个在澳洲，一个我都不知道了…但你们看到玻璃珠的时候，要想起我来啊\"],\"type\":[\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2015-1\",\"arr\":{\"year\":2015,\"month\":1,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10932550_620643038062978_1729442807_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/891532_1563899373855738_1180535181_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10005439_338105566394046_854247264_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10903312_693622147425934_1766884651_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10914460_1546003772305181_1301162053_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10903277_832760670116494_255352239_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/924083_1539057536347062_2062767438_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10890944_765121966897759_2039585477_n.jpg\"],\"link\":[\"yb8uaCI7tt\",\"yKBopho7mX\",\"yAOcawI7pA\",\"x5U25kI7sN\",\"x1TTZUo7gW\",\"xeGbWuo7if\",\"xXr70fI7iD\",\"xUB4dOI7g1\"],\"text\":[\"草地上遗落的鞋子\",\"有位很久没联系的朋友寄来明信片，说：我很少看到海，正如你没见过几次雪\",\"深夜总是灵感乍现的最佳时期，只是几个设计方案都没法使自己满意。累了打开窗看到天上有个大月亮，只想用图章工具把它干掉。\",\"面朝大海冬暖花开\",\"分享日常不正常生活照一张\",\"其实我想，那些古老的渔民们，每天看着海岸线的日落日出，肯定是有人想过地球是圆的。而“想法”与“证明”之间，却跨越了一整条麦哲伦航道\",\"鱼山鱼海中，只有你，肯安静的趴在65厘米厚的亚克力板子上与我合影，大丑鱼\",\"新年单人旅行走起。其实从九洲港码头开始，珠海并没有给人很惊喜的感觉，包括盛名之下的沿海风光与渔女雕塑。倒是交通不通畅，从轮渡到公交都给我带来了许多麻烦。直到，晚上吃烤生蚝的第一口，我又觉得什么事情都是可以原谅的……\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-12\",\"arr\":{\"year\":2014,\"month\":12,\"src\":[\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10899183_999582293404177_745539859_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10894909_702627706517406_1277557620_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10831989_483313928477468_40906631_n.jpg\"],\"link\":[\"xRWN47I7pW\",\"xO3qREI7iW\",\"wEQykeo7tU\"],\"text\":[\"2014年最后的阳光\",\"最后一节吉他课结束后，马路上那风一直吹，才感觉南方的冬天终于是来了。其实吉他在冬天会有许多神奇的事情。比如琴弦如肌肉一样因冷而紧绷，发出比以往沉闷的低语；而空旷的大教室里，如有其他同伴拨响和弦，手中本已按灭的琴弦又会因共鸣微微颤动。像有生命一样。\",\"有棵丑树，我经常去看，又胖又歪，秃得可笑。在变冷的一天，它突然就开花了。冬天的花我知道得很少，南方没有梅花，那就是异木棉了\"],\"type\":[\"image\",\"image\",\"image\"]}},{\"date\":\"2014-11\",\"arr\":{\"year\":2014,\"month\":11,\"src\":[\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10784965_1518537748403855_176956695_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10735195_1505939246340704_1984926778_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10747711_429336373885590_422028037_n.jpg\"],\"link\":[\"vP2ywuo7pq\",\"vA68BLo7tN\",\"u7zEVxo7vw\"],\"text\":[\"通灵之术！\",\"现场气氛果然不一样，马上就可以看到小伞在大哥胯下疯狂输出…是时候来首选一记薇恩了\",\"有朋友跟我说，挪威的森林根本看不下去；又有朋友说，看这书一发不可收拾。差别好大呀！我倒觉得有个简单的方法：翻到开篇的这几个字，如果心中一紧，那就说明这本书适合你，否则请弃之\"],\"type\":[\"image\",\"image\",\"image\"]}},{\"date\":\"2014-10\",\"arr\":{\"year\":2014,\"month\":10,\"src\":[\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10735112_730529873702428_413107753_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10725177_573652486072155_1401604216_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10724868_302191016652312_2097904817_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10731727_461314204008708_386749273_n.jpg\"],\"link\":[\"uu70zJo7qb\",\"uQnvluo7sK\",\"uLi56Wo7oO\",\"uEv-tCo7rJ\"],\"text\":[\"天下的小饼干遇到我，貌似就只有一种下场！！\",\"一个人，一支口琴，一片海，一瓶酒\",\"《论夜归，打的，以及发票的正确用法》\",\"童年真好。我以后一定不要跟孩子说：希望你快高长大这种傻话…\"],\"type\":[\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-9\",\"arr\":{\"year\":2014,\"month\":9,\"src\":[\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10616983_1382591478697855_2107473552_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925287_1464119273867077_427071626_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/925284_1534308033454310_855505111_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10666267_1550871771803214_2074300649_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693244_734401199942901_1572709880_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693771_1517437541834868_665867908_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693822_497709657032441_1125408654_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10683941_796597910390683_12441123_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10661142_164227523747936_1526737465_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10661182_550889531706942_2043749716_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10520334_1523531751215211_1344090061_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693390_547748238660649_761529890_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10693650_837768039589771_1793184733_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/914812_1529561143923493_1662159287_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfp1/t51.2885-15/e15/10644019_368509079979549_2085033896_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10684161_918887498139099_2081383304_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10683828_327931784041264_894089329_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10666028_872988212713750_1345360858_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10665501_1452353738387652_2075798065_n.jpg\"],\"link\":[\"tXuIHso7qK\",\"tJjQlAo7kH\",\"tDYyUeo7oX\",\"tCBULHo7sW\",\"tB_Xmao7qG\",\"s8cKzLI7pM\",\"s6-lOFo7ip\",\"s5GifkI7q7\",\"s3uZcmo7uj\",\"s2bb5io7p-\",\"s2P72tI7o6\",\"s2FPpGI7o_\",\"s1LPQPo7v8\",\"szZP5Io7lY\",\"sr9rtNo7lM\",\"sr7gXKI7h_\",\"srG7fjo7sV\",\"spAnrio7oh\",\"sj4BGgI7t_\"],\"text\":[\"我的好朋友——超级高冷超级磨人的丝瓜\",\"沉眠的店主失眠的狗。想起大学的最后时光，宿舍24小时都有人醒着，自由的人生，自由的酒和曲终人散，大家通常没有另一半，没有钱，没有忧愁，爽成狗\",\"如果他是程序员…\\nvar date = lifetime;\\rif(rotate(mountain, water, stupa)){ /*return nextLifetime;*/ return meetyou(journey);\\r}\",\"听着山寨的民谣电子乐，看着美好的姑娘。功德无量。\",\"弥里塘太宁静。在这我一直想起每一个被深圳车水马龙声吵醒的早晨，真是光辉的岁月\",\"进藏。天空挂满着云，黑的白的都有。云朵转眼飘散，它却依然是蓝色。\",\"“音浪太强不晃会被撞到地上…”\",\"陌生的朋友，愿下次再能与你们相聚在丽江love wine & half。我无法融解你悲观现实的想法，你也无法说服我旅行并不是逃避。但这都很有意思。只是想起以前有个人叫我不能喝太多的酒，一想到这个呀我就越喝越多\",\"玉龙雪山\",\"以前想去丽江，但去过的人都灌输着你也许会失望的观念，因而甚至不敢动身。这是一种“怕”。有时候真得自己去看看才会了然。第一天在丽江，民谣吉他缓缓流过商业化的街道，原来没有惊喜，也没有失望，一切刚刚好。\",\"我注定要回到老路上\",\"彩云之南\",\"云南，向往已久的地方\",\"QQ同时在线人数破2亿纪念，作为一颗小小螺丝钉，名字正好镶到企鹅的大嘴巴上。这时觉得有一丝光荣，一种努力被实化的错觉；然后又有点不舒服，感觉此时的自己，和名字身边的人一样。可我想要的就是不一样。\",\"陪伴一定得是件漫长的事呵。和奶奶在一起的中秋节。\",\"中秋和家人一起去看孔明灯，热闹而安逸，这是小城市的美好。\",\"老家的葡萄藤，从我初中时就挂在这，再见已是十一年\",\"家里橄榄熟了，盐渍，暴晒，蘸蜜，简直人间美味!\",\"在一场太阳雨里回到家中\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"video\",\"image\",\"video\",\"image\",\"video\",\"image\",\"image\",\"image\",\"image\",\"video\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-8\",\"arr\":{\"year\":2014,\"month\":8,\"src\":[\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10654876_610857929023752_364709543_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10644013_777642448965989_544517718_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/924456_1471485796442896_1699836323_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10607913_692632367472666_1829853902_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10611052_1466241683635233_830264506_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10617144_829548960388746_1611410337_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10453953_542161702576881_1621059386_n.jpg\"],\"link\":[\"sXa9g6I7jB\",\"sPt4u4I7kA\",\"sC18G0o7qb\",\"sAMmEWI7oC\",\"rzSow4o7lH\",\"ro28LPI7oc\",\"rR37wLo7iu\"],\"text\":[\"在书店的晚上终于把新专反复听完。太柔了…打一星两星的人肯定是真爱粉，这点有人敢怀疑？我不是，打四星！停不下来，直到书店响起:深圳即将入眠。但22点还是深圳的早晨呀\",\"慢三的华尔兹，大篇幅的爵士即兴。感觉生活得太浮躁。也太安逸。\",\"好久没看话剧，这部果然没让人失望。导演太会讲故事了，1024个赞\",\"纵有一万种悲伤的美丽，也比不过这段。\",\"在书城里看到的《后会无期》分镜图。电影那么美，分镜是这样，这就是现实~\",\"如果你从北京来看我，我会很感动;如果你像光，从太阳那头过来，我不以为然。因为光到地球只要8.3分钟。我们经常错用代价来衡量情感\",\"相聚总有时:)\"],\"type\":[\"image\",\"video\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-7\",\"arr\":{\"year\":2014,\"month\":7,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/925559_1482425071996009_1940959046_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10554006_501929086608023_917623457_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10576105_624878090953161_638111947_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10570119_332808380211109_125412512_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/926536_828142997203682_1319760676_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/923702_252705761596555_721784545_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10549755_708603639175850_2095584541_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/928307_1442957109299429_297849354_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10488451_303926969784787_1278259348_n.jpg\"],\"link\":[\"q5e2KpI7qn\",\"qyXXpNI7q5\",\"qxfUe0I7lp\",\"qq9usdo7hr\",\"qn4WCIo7hi\",\"ql0brho7vN\",\"qkiaYDo7t9\",\"qURC9fI7r-\",\"p4A8IuI7py\"],\"text\":[\"随便走走，发现世界还是很美好的。当拥有美好事物时，经常习惯性的熟视无睹;当努力抓住你想要的东西时，它又可能瞬间破碎。但依旧需要不妥协。\",\"荔枝——我心目中的水果之王（有之一）\",\"高中时代最新款的mp4，现已成了老古董\",\"台风来临时，刚好会是暑假。但我已没有暑假。\",\"看着一场雨由远及近的淋湿院子，太漂亮\",\"归来却空空的行囊  那故乡的云  那故乡的风  啦啦啦啦啦 啦啦啦。\",\"在今年第一个狂风大作的早上，回家去\",\"98年，世界杯第一次在我脑中留下记忆，和爸，围着那台很小的tcl。今天，爸还打电话给我，让我别看太晚影响到明天工作，但我知道他自己也会去看的。是的，我们爱足球，今生今世\",\"这几天深圳的天空很美，无论晴雨\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-6\",\"arr\":{\"year\":2014,\"month\":6,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10362316_1434933843444633_1187384207_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/10471930_507725875994902_393186392_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/10454011_484872768311603_738380027_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/923661_248502122024084_2086692261_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/10424605_774238262594769_78480252_n.jpg\"],\"link\":[\"p06uEZI7tG\",\"pytFNpo7sD\",\"poMFteI7q0\",\"pMt5tgI7vj\",\"o3eroFo7gK\"],\"text\":[\"“往事依稀浑似梦，都随风雨到心头”——梅表姐\",\"navy blue\",\"今天我遇到一朵枯玫瑰。她只是枯萎，从未凋零。\",\"上届卫冕冠军被打成筛子的…是热火…\",\"我和大神的差距——web工程师的自我修养\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-5\",\"arr\":{\"year\":2014,\"month\":5,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xat1/t51.2885-15/e15/10387796_255697041300477_753213015_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10005623_779769878723970_627922376_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpf1/t51.2885-15/e15/10358172_1495900567292387_640174442_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xta1/t51.2885-15/e15/10369281_674379822637848_233362820_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/928251_430572373746575_786910314_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10358301_256481271142988_1088114034_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/10296597_1413560715589179_392570057_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10299642_561366610636165_721929935_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/10268965_1446530205590326_114108738_n.jpg\"],\"link\":[\"op03boo7lW\",\"ops-ZUI7t-\",\"ofqhBpI7mQ\",\"odP0cno7ue\",\"oLX-4GI7ne\",\"oBl6WtI7qC\",\"nvPChzI7vU\",\"ngAyz8o7qj\",\"ndTggdI7jn\"],\"text\":[\"突然发现我还是挺喜欢大晴天的\",\"单人旅行走起！开心\",\"不久就可以吃了\",\"黄昏时分\",\"大雨倾城\",\"今天路过公园，一朵玉兰掉在身边。想起小时候陪伴我的三棵树，两棵木棉，一棵玉兰。当然玉兰这名字是后来才知道的，记忆里的那朵永远叫做香花。三年级的某天放学，这三棵树一并倒下了。\",\"雨中深大。雨季再来不再来。\",\"say hey to may\",\"故事中的小黄花\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-4\",\"arr\":{\"year\":2014,\"month\":4,\"src\":[\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10261258_711820055527911_220271949_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpt1/t51.2885-15/e15/10249356_695726313802446_881680057_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268929_597082527053970_1060360934_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/10268941_490697914386538_1148834228_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/10254195_545488182236276_1930978882_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtp1/t51.2885-15/e15/917572_539124756205696_1549712749_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/927273_657564254280429_578859844_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175316_650834874981595_1358429831_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/926422_245144379006241_1254093305_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/e15/891289_302574849898688_205313988_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-frc/t51.2885-15/e15/10175309_510867459023322_1700312549_n.jpg\"],\"link\":[\"nOGNjUI7op\",\"nGJfYAo7lW\",\"nATIxlI7tR\",\"mxsNwto7pQ\",\"mm7JTUI7p0\",\"mhER0lo7oe\",\"mfvVUYI7hu\",\"mdF-nNo7pE\",\"mcVLQzo7nl\",\"mb5cFho7sd\",\"maqYInI7if\"],\"text\":[\"谢谢亲们的蛋糕和礼物;谢谢我们始终用“同学”来称呼彼此。\",\"处女座老榕树\",\"放风筝的人们\",\"现在我的状态，像极了一只被推上战场僵尸\",\"这几天我耳边是都是这样的话语:1、“就是敲敲键盘，挺清闲的哈！”2、“别太挑剔，给个一两千就先做着”3、“什么？你那一碗粉要十二块钱？！”我回深圳了，几天的清静生活，谢谢乡亲们的招待。\",\"good luck\",\"瓦上花开\",\"好吧，这是一艘船\",\"石表山，思罗河，四年后的清明我又来到了这儿\",\"清明，一路向西\",\"清明一回到家，老妈就开始炫耀她试验种的豆芽。愿君多采撷，此物最好吃？\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-3\",\"arr\":{\"year\":2014,\"month\":3,\"src\":[\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/10012487_604746702952671_676907736_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/1171265_389602547845527_1588547561_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11376491_1614984048759908_413209146_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11251074_365441270314698_1015057085_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xft1/t51.2885-15/e15/11380079_1581430378786145_504181803_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xtf1/t51.2885-15/e15/11330604_837683999618217_506172540_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11273047_110162449318540_1639646034_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xap1/t51.2885-15/e15/11375356_908792249164254_112740693_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xfa1/t51.2885-15/e15/11357539_388432694679963_1281450994_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-xpa1/t51.2885-15/e15/11311124_1611430865770700_1482115931_n.jpg\"],\"link\":[\"mIgOdio7jT\",\"mIAS5lo7hb\",\"lrhVmio7lF\",\"lmADv6I7rU\",\"lhPFVeI7g6\",\"lcyrKSI7h_\",\"lSda6Ko7nG\",\"lSSxd8I7kB\",\"lK0xswI7s6\",\"lA4KaBI7go\"],\"text\":[\"转角遇到戏台，耳熟却不知道是哪一出了。想起爷爷以前的二胡与杨琴，自己精削细磨的琴竹，还有他组织的“菊山楼”粤剧队，真是一晃好些年。今年清明，一定回去。\",\"这本书超赞！好书好书好书\",\"四五点写程序太累，就不写了。不告诉任何人，跑到这个立交桥底，我已来过好几回。这里有一棵白色的紫荆花，满墙爬山虎，和刚放学的小朋友，出去，右拐，再右拐，转角可以遇到你，我的肉夹馍…\",\"越来越认生了，到步行街买衣服，找到比较适合的，却因为店员太过热情…跑了出来。闹市中居然藏有一古庙，还是这里自在，漫天神佛只是笑笑，不理物我，无论喜悲。对了我来这干嘛\",\"爬山的好处:强身健体，磨砺意志，开阔胸怀…坏处是:没有wifi。\",\"又见回南天\",\"老妈说，今天要我送个礼物！离家万里，只好迅速开发出这个app，摇后就会播放我唱的真的爱你。可惜她说摇后没反应，后来才知道，她拿的ipad在摇…但我是真的爱你\",\"今天下雨，的士司机都不肯理我。头上路灯光芒遥不可及，脚下路面棱角冰冷鲜明\",\"起风吧，明天。喜欢偏冷的日子，假如是春天，假如是风大，太完美了\",\"腾讯的凌晨四点半。第一次在此过夜，听着耳熟不能详的歌，看着平静不微笑的人。然后记起，家里打来被我按掉的电话，忘了回\"],\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"]}},{\"date\":\"2014-2\",\"arr\":{\"year\":2014,\"month\":2,\"src\":[\"https://scontent.cdninstagram.com/hphotos-ash/t51.2885-15/e15/1737225_591794970889160_1849235580_n.jpg\",\"https://scontent.cdninstagram.com/hphotos-prn/t51.2885-15/e15/1741200_451260698337036_577792061_n.jpg\"],\"link\":[\"kv3jNgI7sw\",\"kr8sW8I7nR\"],\"text\":[\"“不能吃太胖喔，会被杀掉的！”\",\"今晚，已经看到两个小女生在问，这里有《九云梦》吗？\"],\"type\":[\"image\",\"image\"]}}]}"},{"_content":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n    <title>日语50音</title>\n    <style type=\"text/css\">\n    /*main*/              html{color:#000;background:#FFF}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,menu{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:before,q:after{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit}input,textarea,select{*font-size:100%}legend{color:#000}html,body{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}header,.header{width:215px;height:58px;background:url(http://3.url.cn/qun/create_iphone/img/sprite.png) no-repeat transparent 0 0;color:#fff;line-height:58px;padding-left:64px;font-size:24px;-webkit-transform:scale(0.82) scale(0.82);-webkit-transform-origin:0 50%}.input-group{overflow:hidden;vertical-align:middle;line-height:16px;background-color:#fff;}#main-section{position:relative;height:100%;min-height:370px;overflow:hidden;}.input-group label{width:100px;padding:10px 0 10px 12px;display:inline-block;border-right:0;float:left;color:gray;-webkit-appearance:none;height:24px;line-height:24px;}.input-group .ui-select{margin-left:115px;padding:10px 24px 10px 15px;position:relative;}.input-group .select-btn{width:100%;height:24px;line-height:24px;color:#aaa;}.input-group .select-btn span.ui-text{text-align:right;display:inline-block;width:100%;white-space:nowrap;overflow:inherit;text-overflow:ellipsis;pointer-events:none;}.input-group .select-btn span.ui-icon{display:inline-block;position:absolute;top:50%;margin:-10px 0 0 -3px;width:18px;height:20px;right:7px;}.input-group .select-btn span.ui-icon .arrow{width:18px;height:18px;position:relative;display:inline-block;float:right;background:transparent;margin-right:-5px;margin-top:1px;}.input-group .select-btn span.ui-icon .arrow div{background:#ccc;position:absolute;width:3px;height:12px;}.input-group .select-btn span.ui-icon .arrow div.arrow1{left:19px;top:12px;-webkit-transform:rotate(-45deg) translate(0,-142%);}.input-group .select-btn span.ui-icon .arrow div.arrow2{left:-5px;top:19px;-webkit-transform:rotate(45deg) translate(0,-142%);}.seg-words{color:#6d6d72;height:20px;font-size:1em;text-shadow:0 1px #fff;padding:3px 0 6px 14px;}\n                \n         /*border-1px 部分*/\n         .border-1px{\n              position: relative;\n         }\n        .border-1px:before, .border-1px:after{\n            border-top: 1px solid #c8c7cc;\n            content: ' ';\n            display: block;\n            width: 100%;\n            position: absolute;\n            left: 0;\n        }\n        .border-1px:before{\n            top: 0;\n            display: none;\n        }\n        .border-1px:after{\n            bottom: 0;\n        }\n         @media (-webkit-min-device-pixel-ratio:1.5), (min-device-pixel-ratio: 1.5){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.7);\n              -webkit-transform-origin: 0 0;\n              transform: scaleY(.7);\n            }\n             .border-1px:after{\n              -webkit-transform-origin: left bottom;\n            }\n        }\n\n        @media (-webkit-min-device-pixel-ratio:2), (min-device-pixel-ratio: 2){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.5);\n              transform: scaleY(.5);\n          }\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"main\">\n        <div id=\"main-section\">\n            <p class=\"seg-words\">あ行</p>\n            <!-- あ行 -->\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">あ ア</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(a)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">お オ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(o)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <!-- か行 -->\n            <p class=\"seg-words\">か行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">か カ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ka)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">き キ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ki)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">く ク</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ku)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">け ケ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ke)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">こ コ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ko)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- さ行 -->\n            <p class=\"seg-words\">さ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">さ サ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(sa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">し シ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(shi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">す ス</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(su)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">せ セ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(se)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">そ ソ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(so)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- た行 -->\n            <p class=\"seg-words\">た行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">た タ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ta)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ち チ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(chi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">つ ツ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(tsu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">て テ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(te)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">と ト</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(to)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- な行 -->\n            <p class=\"seg-words\">な行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">な ナ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(na)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">に ニ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ni)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ぬ ヌ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(nu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ね ネ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ne)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">の ノ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(no)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- は行 -->\n            <p class=\"seg-words\">は行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">は ハ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ha)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ひ ヒ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(hi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ふ フ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(fu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">へ ヘ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(he)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ほ ホ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ho)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ま行 -->\n            <p class=\"seg-words\">ま行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ま マ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ma)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">み ミ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">む ム</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">め メ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(me)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">も モ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- や行 -->\n            <p class=\"seg-words\">や行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">や ヤ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ya)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ゆ ユ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">よ ヨ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ら行 -->\n            <p class=\"seg-words\">ら行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ら ラ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ra)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">り リ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ri)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">る ル</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ru)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">れ レ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(re)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ろ ロ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ro)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- わ行 -->\n            <p class=\"seg-words\">わ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">わ ワ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">を ヲ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ン行 -->\n            <p class=\"seg-words\">ん</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ん ン</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(n)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n\n</html>","source":"assets/demo/border1px.html","raw":"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n    <title>日语50音</title>\n    <style type=\"text/css\">\n    /*main*/              html{color:#000;background:#FFF}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,menu{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:before,q:after{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit}input,textarea,select{*font-size:100%}legend{color:#000}html,body{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}header,.header{width:215px;height:58px;background:url(http://3.url.cn/qun/create_iphone/img/sprite.png) no-repeat transparent 0 0;color:#fff;line-height:58px;padding-left:64px;font-size:24px;-webkit-transform:scale(0.82) scale(0.82);-webkit-transform-origin:0 50%}.input-group{overflow:hidden;vertical-align:middle;line-height:16px;background-color:#fff;}#main-section{position:relative;height:100%;min-height:370px;overflow:hidden;}.input-group label{width:100px;padding:10px 0 10px 12px;display:inline-block;border-right:0;float:left;color:gray;-webkit-appearance:none;height:24px;line-height:24px;}.input-group .ui-select{margin-left:115px;padding:10px 24px 10px 15px;position:relative;}.input-group .select-btn{width:100%;height:24px;line-height:24px;color:#aaa;}.input-group .select-btn span.ui-text{text-align:right;display:inline-block;width:100%;white-space:nowrap;overflow:inherit;text-overflow:ellipsis;pointer-events:none;}.input-group .select-btn span.ui-icon{display:inline-block;position:absolute;top:50%;margin:-10px 0 0 -3px;width:18px;height:20px;right:7px;}.input-group .select-btn span.ui-icon .arrow{width:18px;height:18px;position:relative;display:inline-block;float:right;background:transparent;margin-right:-5px;margin-top:1px;}.input-group .select-btn span.ui-icon .arrow div{background:#ccc;position:absolute;width:3px;height:12px;}.input-group .select-btn span.ui-icon .arrow div.arrow1{left:19px;top:12px;-webkit-transform:rotate(-45deg) translate(0,-142%);}.input-group .select-btn span.ui-icon .arrow div.arrow2{left:-5px;top:19px;-webkit-transform:rotate(45deg) translate(0,-142%);}.seg-words{color:#6d6d72;height:20px;font-size:1em;text-shadow:0 1px #fff;padding:3px 0 6px 14px;}\n                \n         /*border-1px 部分*/\n         .border-1px{\n              position: relative;\n         }\n        .border-1px:before, .border-1px:after{\n            border-top: 1px solid #c8c7cc;\n            content: ' ';\n            display: block;\n            width: 100%;\n            position: absolute;\n            left: 0;\n        }\n        .border-1px:before{\n            top: 0;\n            display: none;\n        }\n        .border-1px:after{\n            bottom: 0;\n        }\n         @media (-webkit-min-device-pixel-ratio:1.5), (min-device-pixel-ratio: 1.5){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.7);\n              -webkit-transform-origin: 0 0;\n              transform: scaleY(.7);\n            }\n             .border-1px:after{\n              -webkit-transform-origin: left bottom;\n            }\n        }\n\n        @media (-webkit-min-device-pixel-ratio:2), (min-device-pixel-ratio: 2){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.5);\n              transform: scaleY(.5);\n          }\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"main\">\n        <div id=\"main-section\">\n            <p class=\"seg-words\">あ行</p>\n            <!-- あ行 -->\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">あ ア</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(a)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">お オ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(o)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <!-- か行 -->\n            <p class=\"seg-words\">か行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">か カ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ka)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">き キ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ki)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">く ク</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ku)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">け ケ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ke)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">こ コ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ko)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- さ行 -->\n            <p class=\"seg-words\">さ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">さ サ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(sa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">し シ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(shi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">す ス</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(su)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">せ セ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(se)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">そ ソ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(so)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- た行 -->\n            <p class=\"seg-words\">た行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">た タ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ta)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ち チ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(chi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">つ ツ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(tsu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">て テ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(te)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">と ト</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(to)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- な行 -->\n            <p class=\"seg-words\">な行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">な ナ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(na)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">に ニ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ni)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ぬ ヌ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(nu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ね ネ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ne)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">の ノ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(no)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- は行 -->\n            <p class=\"seg-words\">は行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">は ハ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ha)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ひ ヒ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(hi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ふ フ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(fu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">へ ヘ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(he)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ほ ホ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ho)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ま行 -->\n            <p class=\"seg-words\">ま行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ま マ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ma)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">み ミ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">む ム</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">め メ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(me)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">も モ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- や行 -->\n            <p class=\"seg-words\">や行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">や ヤ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ya)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ゆ ユ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">よ ヨ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ら行 -->\n            <p class=\"seg-words\">ら行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ら ラ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ra)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">り リ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ri)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">る ル</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ru)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">れ レ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(re)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ろ ロ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ro)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- わ行 -->\n            <p class=\"seg-words\">わ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">わ ワ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">を ヲ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ン行 -->\n            <p class=\"seg-words\">ん</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ん ン</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(n)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n\n</html>","date":"2020-03-12T13:55:48.641Z","updated":"2020-03-12T13:55:48.641Z","path":"assets/demo/border1px.html","title":"","comments":1,"layout":"page","_id":"ck7otizrd00127guibg1ig3lz","content":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n    <meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n    <title>日语50音</title>\n    <style type=\"text/css\">\n    /*main*/              html{color:#000;background:#FFF}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,menu{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:before,q:after{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit}input,textarea,select{*font-size:100%}legend{color:#000}html,body{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}header,.header{width:215px;height:58px;background:url(http://3.url.cn/qun/create_iphone/img/sprite.png) no-repeat transparent 0 0;color:#fff;line-height:58px;padding-left:64px;font-size:24px;-webkit-transform:scale(0.82) scale(0.82);-webkit-transform-origin:0 50%}.input-group{overflow:hidden;vertical-align:middle;line-height:16px;background-color:#fff;}#main-section{position:relative;height:100%;min-height:370px;overflow:hidden;}.input-group label{width:100px;padding:10px 0 10px 12px;display:inline-block;border-right:0;float:left;color:gray;-webkit-appearance:none;height:24px;line-height:24px;}.input-group .ui-select{margin-left:115px;padding:10px 24px 10px 15px;position:relative;}.input-group .select-btn{width:100%;height:24px;line-height:24px;color:#aaa;}.input-group .select-btn span.ui-text{text-align:right;display:inline-block;width:100%;white-space:nowrap;overflow:inherit;text-overflow:ellipsis;pointer-events:none;}.input-group .select-btn span.ui-icon{display:inline-block;position:absolute;top:50%;margin:-10px 0 0 -3px;width:18px;height:20px;right:7px;}.input-group .select-btn span.ui-icon .arrow{width:18px;height:18px;position:relative;display:inline-block;float:right;background:transparent;margin-right:-5px;margin-top:1px;}.input-group .select-btn span.ui-icon .arrow div{background:#ccc;position:absolute;width:3px;height:12px;}.input-group .select-btn span.ui-icon .arrow div.arrow1{left:19px;top:12px;-webkit-transform:rotate(-45deg) translate(0,-142%);}.input-group .select-btn span.ui-icon .arrow div.arrow2{left:-5px;top:19px;-webkit-transform:rotate(45deg) translate(0,-142%);}.seg-words{color:#6d6d72;height:20px;font-size:1em;text-shadow:0 1px #fff;padding:3px 0 6px 14px;}\n                \n         /*border-1px 部分*/\n         .border-1px{\n              position: relative;\n         }\n        .border-1px:before, .border-1px:after{\n            border-top: 1px solid #c8c7cc;\n            content: ' ';\n            display: block;\n            width: 100%;\n            position: absolute;\n            left: 0;\n        }\n        .border-1px:before{\n            top: 0;\n            display: none;\n        }\n        .border-1px:after{\n            bottom: 0;\n        }\n         @media (-webkit-min-device-pixel-ratio:1.5), (min-device-pixel-ratio: 1.5){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.7);\n              -webkit-transform-origin: 0 0;\n              transform: scaleY(.7);\n            }\n             .border-1px:after{\n              -webkit-transform-origin: left bottom;\n            }\n        }\n\n        @media (-webkit-min-device-pixel-ratio:2), (min-device-pixel-ratio: 2){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.5);\n              transform: scaleY(.5);\n          }\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"main\">\n        <div id=\"main-section\">\n            <p class=\"seg-words\">あ行</p>\n            <!-- あ行 -->\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">あ ア</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(a)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">お オ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(o)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <!-- か行 -->\n            <p class=\"seg-words\">か行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">か カ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ka)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">き キ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ki)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">く ク</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ku)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">け ケ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ke)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">こ コ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ko)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- さ行 -->\n            <p class=\"seg-words\">さ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">さ サ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(sa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">し シ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(shi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">す ス</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(su)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">せ セ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(se)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">そ ソ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(so)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- た行 -->\n            <p class=\"seg-words\">た行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">た タ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ta)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ち チ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(chi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">つ ツ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(tsu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">て テ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(te)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">と ト</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(to)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- な行 -->\n            <p class=\"seg-words\">な行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">な ナ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(na)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">に ニ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ni)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ぬ ヌ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(nu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ね ネ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ne)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">の ノ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(no)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- は行 -->\n            <p class=\"seg-words\">は行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">は ハ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ha)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ひ ヒ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(hi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ふ フ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(fu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">へ ヘ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(he)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ほ ホ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ho)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ま行 -->\n            <p class=\"seg-words\">ま行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ま マ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ma)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">み ミ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">む ム</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">め メ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(me)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">も モ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- や行 -->\n            <p class=\"seg-words\">や行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">や ヤ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ya)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ゆ ユ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">よ ヨ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ら行 -->\n            <p class=\"seg-words\">ら行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ら ラ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ra)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">り リ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ri)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">る ル</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ru)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">れ レ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(re)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ろ ロ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ro)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- わ行 -->\n            <p class=\"seg-words\">わ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">わ ワ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">を ヲ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ン行 -->\n            <p class=\"seg-words\">ん</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ん ン</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(n)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n    <meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n    <title>日语50音</title>\n    <style type=\"text/css\">\n    /*main*/              html{color:#000;background:#FFF}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,menu{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:before,q:after{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit}input,textarea,select{*font-size:100%}legend{color:#000}html,body{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}header,.header{width:215px;height:58px;background:url(http://3.url.cn/qun/create_iphone/img/sprite.png) no-repeat transparent 0 0;color:#fff;line-height:58px;padding-left:64px;font-size:24px;-webkit-transform:scale(0.82) scale(0.82);-webkit-transform-origin:0 50%}.input-group{overflow:hidden;vertical-align:middle;line-height:16px;background-color:#fff;}#main-section{position:relative;height:100%;min-height:370px;overflow:hidden;}.input-group label{width:100px;padding:10px 0 10px 12px;display:inline-block;border-right:0;float:left;color:gray;-webkit-appearance:none;height:24px;line-height:24px;}.input-group .ui-select{margin-left:115px;padding:10px 24px 10px 15px;position:relative;}.input-group .select-btn{width:100%;height:24px;line-height:24px;color:#aaa;}.input-group .select-btn span.ui-text{text-align:right;display:inline-block;width:100%;white-space:nowrap;overflow:inherit;text-overflow:ellipsis;pointer-events:none;}.input-group .select-btn span.ui-icon{display:inline-block;position:absolute;top:50%;margin:-10px 0 0 -3px;width:18px;height:20px;right:7px;}.input-group .select-btn span.ui-icon .arrow{width:18px;height:18px;position:relative;display:inline-block;float:right;background:transparent;margin-right:-5px;margin-top:1px;}.input-group .select-btn span.ui-icon .arrow div{background:#ccc;position:absolute;width:3px;height:12px;}.input-group .select-btn span.ui-icon .arrow div.arrow1{left:19px;top:12px;-webkit-transform:rotate(-45deg) translate(0,-142%);}.input-group .select-btn span.ui-icon .arrow div.arrow2{left:-5px;top:19px;-webkit-transform:rotate(45deg) translate(0,-142%);}.seg-words{color:#6d6d72;height:20px;font-size:1em;text-shadow:0 1px #fff;padding:3px 0 6px 14px;}\n                \n         /*border-1px 部分*/\n         .border-1px{\n              position: relative;\n         }\n        .border-1px:before, .border-1px:after{\n            border-top: 1px solid #c8c7cc;\n            content: ' ';\n            display: block;\n            width: 100%;\n            position: absolute;\n            left: 0;\n        }\n        .border-1px:before{\n            top: 0;\n            display: none;\n        }\n        .border-1px:after{\n            bottom: 0;\n        }\n         @media (-webkit-min-device-pixel-ratio:1.5), (min-device-pixel-ratio: 1.5){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.7);\n              -webkit-transform-origin: 0 0;\n              transform: scaleY(.7);\n            }\n             .border-1px:after{\n              -webkit-transform-origin: left bottom;\n            }\n        }\n\n        @media (-webkit-min-device-pixel-ratio:2), (min-device-pixel-ratio: 2){\n          .border-1px:after,.border-1px:before{\n              -webkit-transform: scaleY(.5);\n              transform: scaleY(.5);\n          }\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"main\">\n        <div id=\"main-section\">\n            <p class=\"seg-words\">あ行</p>\n            <!-- あ行 -->\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">あ ア</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(a)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">お オ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(o)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <!-- か行 -->\n            <p class=\"seg-words\">か行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">か カ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ka)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">き キ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ki)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">く ク</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ku)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">け ケ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ke)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">こ コ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ko)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- さ行 -->\n            <p class=\"seg-words\">さ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">さ サ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(sa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">し シ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(shi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">す ス</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(su)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">せ セ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(se)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">そ ソ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(so)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- た行 -->\n            <p class=\"seg-words\">た行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">た タ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ta)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ち チ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(chi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">つ ツ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(tsu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">て テ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(te)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">と ト</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(to)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- な行 -->\n            <p class=\"seg-words\">な行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">な ナ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(na)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">に ニ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ni)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ぬ ヌ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(nu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ね ネ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ne)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">の ノ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(no)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- は行 -->\n            <p class=\"seg-words\">は行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">は ハ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ha)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ひ ヒ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(hi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ふ フ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(fu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">へ ヘ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(he)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ほ ホ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ho)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ま行 -->\n            <p class=\"seg-words\">ま行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ま マ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ma)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">み ミ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mi)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">む ム</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">め メ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(me)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">も モ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(mo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- や行 -->\n            <p class=\"seg-words\">や行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">や ヤ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ya)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ゆ ユ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yu)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">よ ヨ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(yo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ら行 -->\n            <p class=\"seg-words\">ら行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ら ラ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ra)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">り リ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ri)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">る ル</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ru)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">れ レ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(re)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ろ ロ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(ro)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- わ行 -->\n            <p class=\"seg-words\">わ行</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">わ ワ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wa)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">い イ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(i)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">う ウ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(u)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">え エ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(e)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">を ヲ</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(wo)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n\n            <!-- ン行 -->\n            <p class=\"seg-words\">ん</p>\n            <div class=\"input-group border-1px\">\n                <label for=\"group-class\">ん ン</label>\n                <div class=\"ui-select\">\n                    <div class=\"select-btn\">\n                        <span class=\"ui-text\">(n)</span>\n                        <span class=\"ui-icon\">\n                            <div class=\"arrow\">\n                                <div class=\"arrow1\"></div>\n                                <div class=\"arrow2\"></div>\n                            </div>\n                        </span>\n                    </div>\n                    <div id=\"group-class\" class=\"ui-select-holder\" data-catalog=\"0\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n\n</html>"},{"_content":"<!doctype html>\n<html>\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>九宫格（二）demo</title>\n\t<style>\n\t\t#main{\n\t\t\twidth: 170px;\n\t\t\theight:170px;\n\t\t\tbackground: blue;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth: 50px;\n\t\t\tline-height: 50px;\n\t\t\ttext-align:center;\n\t\t\tbackground: #AAA;\n\t\t\tmargin:5px 5px 0 0;\n\t\t}\n\t\t#main a{\n\t\t\twidth: 55px;\n\t\t\tline-height: 55px;\n\t\t\tfloat: left;\n\t\t\tpadding: 0 0 5px 5px;\n\t\t\tmargin: 0 -5px -5px 0;\n\t\t\ttext-decoration: none;\n\t\t}\n\t\t#main a:hover{\n\t\t\tbackground: red;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<div id=\"main\">\n\t\t<a href=\"\"><div>1</div></a>\n\t\t<a href=\"\"><div>2</div></a>\n\t\t<a href=\"\"><div>3</div></a>\n\t\t<a href=\"\"><div>4</div></a>\n\t\t<a href=\"\"><div>5</div></a>\n\t\t<a href=\"\"><div>6</div></a>\n\t\t<a href=\"\"><div>7</div></a>\n\t\t<a href=\"\"><div>8</div></a>\n\t\t<a href=\"\"><div>9</div></a>\n\t</div>\n</body>\n</html>","source":"assets/demo/jiugongge_demo2.html","raw":"<!doctype html>\n<html>\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>九宫格（二）demo</title>\n\t<style>\n\t\t#main{\n\t\t\twidth: 170px;\n\t\t\theight:170px;\n\t\t\tbackground: blue;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth: 50px;\n\t\t\tline-height: 50px;\n\t\t\ttext-align:center;\n\t\t\tbackground: #AAA;\n\t\t\tmargin:5px 5px 0 0;\n\t\t}\n\t\t#main a{\n\t\t\twidth: 55px;\n\t\t\tline-height: 55px;\n\t\t\tfloat: left;\n\t\t\tpadding: 0 0 5px 5px;\n\t\t\tmargin: 0 -5px -5px 0;\n\t\t\ttext-decoration: none;\n\t\t}\n\t\t#main a:hover{\n\t\t\tbackground: red;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<div id=\"main\">\n\t\t<a href=\"\"><div>1</div></a>\n\t\t<a href=\"\"><div>2</div></a>\n\t\t<a href=\"\"><div>3</div></a>\n\t\t<a href=\"\"><div>4</div></a>\n\t\t<a href=\"\"><div>5</div></a>\n\t\t<a href=\"\"><div>6</div></a>\n\t\t<a href=\"\"><div>7</div></a>\n\t\t<a href=\"\"><div>8</div></a>\n\t\t<a href=\"\"><div>9</div></a>\n\t</div>\n</body>\n</html>","date":"2020-03-12T13:55:48.655Z","updated":"2020-03-12T13:55:48.655Z","path":"assets/demo/jiugongge_demo2.html","title":"","comments":1,"layout":"page","_id":"ck7otizre00137guiju28nf2l","content":"<!doctype html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta charset=\"UTF-8\">\n\t<title>九宫格（二）demo</title>\n\t<style>\n\t\t#main{\n\t\t\twidth: 170px;\n\t\t\theight:170px;\n\t\t\tbackground: blue;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth: 50px;\n\t\t\tline-height: 50px;\n\t\t\ttext-align:center;\n\t\t\tbackground: #AAA;\n\t\t\tmargin:5px 5px 0 0;\n\t\t}\n\t\t#main a{\n\t\t\twidth: 55px;\n\t\t\tline-height: 55px;\n\t\t\tfloat: left;\n\t\t\tpadding: 0 0 5px 5px;\n\t\t\tmargin: 0 -5px -5px 0;\n\t\t\ttext-decoration: none;\n\t\t}\n\t\t#main a:hover{\n\t\t\tbackground: red;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<div id=\"main\">\n\t\t<a href><div>1</div></a>\n\t\t<a href><div>2</div></a>\n\t\t<a href><div>3</div></a>\n\t\t<a href><div>4</div></a>\n\t\t<a href><div>5</div></a>\n\t\t<a href><div>6</div></a>\n\t\t<a href><div>7</div></a>\n\t\t<a href><div>8</div></a>\n\t\t<a href><div>9</div></a>\n\t</div>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!doctype html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta charset=\"UTF-8\">\n\t<title>九宫格（二）demo</title>\n\t<style>\n\t\t#main{\n\t\t\twidth: 170px;\n\t\t\theight:170px;\n\t\t\tbackground: blue;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth: 50px;\n\t\t\tline-height: 50px;\n\t\t\ttext-align:center;\n\t\t\tbackground: #AAA;\n\t\t\tmargin:5px 5px 0 0;\n\t\t}\n\t\t#main a{\n\t\t\twidth: 55px;\n\t\t\tline-height: 55px;\n\t\t\tfloat: left;\n\t\t\tpadding: 0 0 5px 5px;\n\t\t\tmargin: 0 -5px -5px 0;\n\t\t\ttext-decoration: none;\n\t\t}\n\t\t#main a:hover{\n\t\t\tbackground: red;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<div id=\"main\">\n\t\t<a href><div>1</div></a>\n\t\t<a href><div>2</div></a>\n\t\t<a href><div>3</div></a>\n\t\t<a href><div>4</div></a>\n\t\t<a href><div>5</div></a>\n\t\t<a href><div>6</div></a>\n\t\t<a href><div>7</div></a>\n\t\t<a href><div>8</div></a>\n\t\t<a href><div>9</div></a>\n\t</div>\n</body>\n</html>"},{"_content":"\n<!DOCTYPE HTML>\n<html>\n<head>\n\t<meta charset=\"utf-8\">\n\t<title>jiugongge_demo</title>\n\t<style>\n\t\t*{\n\t\t\tmargin:0;\n\t\t\tpadding: 0;\n\t\t}\n\t\ttable{\n\t\t\tmargin: 30px;\n\t\t\tborder-collapse: collapse;\n\t\t}\n\t\t#test0{\n\t\t\tmargin: 30px;\n\t\t\twidth: 200px;\n\t\t\theight: 200px;\n\t\t}\n\t\t#test0 div{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tfloat: left;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tcolor: #090;\n\t\t\tposition: relative;\n\t\t}\n\t\t#test0 .lr_indent{\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-right: -5px;\n\t\t}\n\t\t#test0 .tb_indent{\n\t\t\tmargin-top: -5px;\n\t\t\tmargin-bottom: -5px;\n\t\t}\n\t\t#test0 div:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tz-index: 999;\n\t\t\tbackground: #eee;\n\t\t}\n\t\t#test1 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tposition: relative;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t}\n\t\t#test1 td span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test1 td span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-top:-5px;\n\t\t\tmargin-left: -5px;\n\t\t}\n\n\t\t#test2 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tvertical-align: top;\n\t\t}\n\t\t#test2 td div{\n\t\t\tposition:relative;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t}\n\t\t#test2 td div span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test2 td div span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-top: -5px;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h2>1) div+负margin实现</h2>\n\t<div id=\"test0\">\n\t\t<div>1</div>\n\t\t<div class=\"lr_indent\">2</div>\n\t\t<div>3</div>\n\t\t<div class=\"tb_indent\">4</div>\n\t\t<div class=\"lr_indent tb_indent\">5</div>\n\t\t<div class=\"tb_indent\">6</div>\n\t\t<div>7</div>\n\t\t<div class=\"lr_indent\">8</div>\n\t\t<div>9</div>\n\t</div>\n\t<h2>2.1) table border-collapse: collapse实现</h2>\n\t<div id=\"test1\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><span>1</span></td>\n\t\t\t\t<td><span>2</span></td>\n\t\t\t\t<td><span>3</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>4</span></td>\n\t\t\t\t<td><span>5</span></td>\n\t\t\t\t<td><span>6</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>7</span></td>\n\t\t\t\t<td><span>8</span></td>\n\t\t\t\t<td><span>9</span></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\t<h2>2.2) table思路改进</h2>\n\t<div id=\"test2\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>1</span></div></td>\n\t\t\t\t<td><div><span>2</span></div></td>\n\t\t\t\t<td><div><span>3</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>4</span></div></td>\n\t\t\t\t<td><div><span>5</span></div></td>\n\t\t\t\t<td><div><span>6</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>7</span></div></td>\n\t\t\t\t<td><div><span>8</span></div></td>\n\t\t\t\t<td><div><span>9</span></div></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</body>\n</html>","source":"assets/demo/jiugongge_demo.html","raw":"\n<!DOCTYPE HTML>\n<html>\n<head>\n\t<meta charset=\"utf-8\">\n\t<title>jiugongge_demo</title>\n\t<style>\n\t\t*{\n\t\t\tmargin:0;\n\t\t\tpadding: 0;\n\t\t}\n\t\ttable{\n\t\t\tmargin: 30px;\n\t\t\tborder-collapse: collapse;\n\t\t}\n\t\t#test0{\n\t\t\tmargin: 30px;\n\t\t\twidth: 200px;\n\t\t\theight: 200px;\n\t\t}\n\t\t#test0 div{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tfloat: left;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tcolor: #090;\n\t\t\tposition: relative;\n\t\t}\n\t\t#test0 .lr_indent{\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-right: -5px;\n\t\t}\n\t\t#test0 .tb_indent{\n\t\t\tmargin-top: -5px;\n\t\t\tmargin-bottom: -5px;\n\t\t}\n\t\t#test0 div:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tz-index: 999;\n\t\t\tbackground: #eee;\n\t\t}\n\t\t#test1 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tposition: relative;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t}\n\t\t#test1 td span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test1 td span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-top:-5px;\n\t\t\tmargin-left: -5px;\n\t\t}\n\n\t\t#test2 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tvertical-align: top;\n\t\t}\n\t\t#test2 td div{\n\t\t\tposition:relative;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t}\n\t\t#test2 td div span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test2 td div span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-top: -5px;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h2>1) div+负margin实现</h2>\n\t<div id=\"test0\">\n\t\t<div>1</div>\n\t\t<div class=\"lr_indent\">2</div>\n\t\t<div>3</div>\n\t\t<div class=\"tb_indent\">4</div>\n\t\t<div class=\"lr_indent tb_indent\">5</div>\n\t\t<div class=\"tb_indent\">6</div>\n\t\t<div>7</div>\n\t\t<div class=\"lr_indent\">8</div>\n\t\t<div>9</div>\n\t</div>\n\t<h2>2.1) table border-collapse: collapse实现</h2>\n\t<div id=\"test1\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><span>1</span></td>\n\t\t\t\t<td><span>2</span></td>\n\t\t\t\t<td><span>3</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>4</span></td>\n\t\t\t\t<td><span>5</span></td>\n\t\t\t\t<td><span>6</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>7</span></td>\n\t\t\t\t<td><span>8</span></td>\n\t\t\t\t<td><span>9</span></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\t<h2>2.2) table思路改进</h2>\n\t<div id=\"test2\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>1</span></div></td>\n\t\t\t\t<td><div><span>2</span></div></td>\n\t\t\t\t<td><div><span>3</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>4</span></div></td>\n\t\t\t\t<td><div><span>5</span></div></td>\n\t\t\t\t<td><div><span>6</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>7</span></div></td>\n\t\t\t\t<td><div><span>8</span></div></td>\n\t\t\t\t<td><div><span>9</span></div></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</body>\n</html>","date":"2020-03-12T13:55:48.654Z","updated":"2020-03-12T13:55:48.654Z","path":"assets/demo/jiugongge_demo.html","title":"","comments":1,"layout":"page","_id":"ck7otizrg00147guingrcn8ae","content":"\n<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta charset=\"utf-8\">\n\t<title>jiugongge_demo</title>\n\t<style>\n\t\t*{\n\t\t\tmargin:0;\n\t\t\tpadding: 0;\n\t\t}\n\t\ttable{\n\t\t\tmargin: 30px;\n\t\t\tborder-collapse: collapse;\n\t\t}\n\t\t#test0{\n\t\t\tmargin: 30px;\n\t\t\twidth: 200px;\n\t\t\theight: 200px;\n\t\t}\n\t\t#test0 div{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tfloat: left;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tcolor: #090;\n\t\t\tposition: relative;\n\t\t}\n\t\t#test0 .lr_indent{\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-right: -5px;\n\t\t}\n\t\t#test0 .tb_indent{\n\t\t\tmargin-top: -5px;\n\t\t\tmargin-bottom: -5px;\n\t\t}\n\t\t#test0 div:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tz-index: 999;\n\t\t\tbackground: #eee;\n\t\t}\n\t\t#test1 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tposition: relative;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t}\n\t\t#test1 td span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test1 td span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-top:-5px;\n\t\t\tmargin-left: -5px;\n\t\t}\n\n\t\t#test2 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tvertical-align: top;\n\t\t}\n\t\t#test2 td div{\n\t\t\tposition:relative;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t}\n\t\t#test2 td div span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test2 td div span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-top: -5px;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h2>1) div+负margin实现</h2>\n\t<div id=\"test0\">\n\t\t<div>1</div>\n\t\t<div class=\"lr_indent\">2</div>\n\t\t<div>3</div>\n\t\t<div class=\"tb_indent\">4</div>\n\t\t<div class=\"lr_indent tb_indent\">5</div>\n\t\t<div class=\"tb_indent\">6</div>\n\t\t<div>7</div>\n\t\t<div class=\"lr_indent\">8</div>\n\t\t<div>9</div>\n\t</div>\n\t<h2>2.1) table border-collapse: collapse实现</h2>\n\t<div id=\"test1\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><span>1</span></td>\n\t\t\t\t<td><span>2</span></td>\n\t\t\t\t<td><span>3</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>4</span></td>\n\t\t\t\t<td><span>5</span></td>\n\t\t\t\t<td><span>6</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>7</span></td>\n\t\t\t\t<td><span>8</span></td>\n\t\t\t\t<td><span>9</span></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\t<h2>2.2) table思路改进</h2>\n\t<div id=\"test2\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>1</span></div></td>\n\t\t\t\t<td><div><span>2</span></div></td>\n\t\t\t\t<td><div><span>3</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>4</span></div></td>\n\t\t\t\t<td><div><span>5</span></div></td>\n\t\t\t\t<td><div><span>6</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>7</span></div></td>\n\t\t\t\t<td><div><span>8</span></div></td>\n\t\t\t\t<td><div><span>9</span></div></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"\n<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta charset=\"utf-8\">\n\t<title>jiugongge_demo</title>\n\t<style>\n\t\t*{\n\t\t\tmargin:0;\n\t\t\tpadding: 0;\n\t\t}\n\t\ttable{\n\t\t\tmargin: 30px;\n\t\t\tborder-collapse: collapse;\n\t\t}\n\t\t#test0{\n\t\t\tmargin: 30px;\n\t\t\twidth: 200px;\n\t\t\theight: 200px;\n\t\t}\n\t\t#test0 div{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tfloat: left;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tcolor: #090;\n\t\t\tposition: relative;\n\t\t}\n\t\t#test0 .lr_indent{\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-right: -5px;\n\t\t}\n\t\t#test0 .tb_indent{\n\t\t\tmargin-top: -5px;\n\t\t\tmargin-bottom: -5px;\n\t\t}\n\t\t#test0 div:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tz-index: 999;\n\t\t\tbackground: #eee;\n\t\t}\n\t\t#test1 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tposition: relative;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t}\n\t\t#test1 td span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test1 td span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-top:-5px;\n\t\t\tmargin-left: -5px;\n\t\t}\n\n\t\t#test2 td{\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #eee;\n\t\t\tborder: 5px solid #00f;\n\t\t\ttext-align: center;\n\t\t\tvertical-align: top;\n\t\t}\n\t\t#test2 td div{\n\t\t\tposition:relative;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t}\n\t\t#test2 td div span{\n\t\t\tcolor: #090;\n\t\t\tdisplay:block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tline-height: 50px;\n\t\t}\n\t\t#test2 td div span:hover{\n\t\t\tborder: 5px solid #f00;\n\t\t\tmargin-left: -5px;\n\t\t\tmargin-top: -5px;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h2>1) div+负margin实现</h2>\n\t<div id=\"test0\">\n\t\t<div>1</div>\n\t\t<div class=\"lr_indent\">2</div>\n\t\t<div>3</div>\n\t\t<div class=\"tb_indent\">4</div>\n\t\t<div class=\"lr_indent tb_indent\">5</div>\n\t\t<div class=\"tb_indent\">6</div>\n\t\t<div>7</div>\n\t\t<div class=\"lr_indent\">8</div>\n\t\t<div>9</div>\n\t</div>\n\t<h2>2.1) table border-collapse: collapse实现</h2>\n\t<div id=\"test1\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><span>1</span></td>\n\t\t\t\t<td><span>2</span></td>\n\t\t\t\t<td><span>3</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>4</span></td>\n\t\t\t\t<td><span>5</span></td>\n\t\t\t\t<td><span>6</span></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><span>7</span></td>\n\t\t\t\t<td><span>8</span></td>\n\t\t\t\t<td><span>9</span></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n\t<h2>2.2) table思路改进</h2>\n\t<div id=\"test2\">\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>1</span></div></td>\n\t\t\t\t<td><div><span>2</span></div></td>\n\t\t\t\t<td><div><span>3</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>4</span></div></td>\n\t\t\t\t<td><div><span>5</span></div></td>\n\t\t\t\t<td><div><span>6</span></div></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><div><span>7</span></div></td>\n\t\t\t\t<td><div><span>8</span></div></td>\n\t\t\t\t<td><div><span>9</span></div></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</body>\n</html>"},{"_content":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n<html lang=\"en\">\n<head>\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\">\n\t<title></title>\n\t<style type=\"text/css\">\n\t\th3,h4{\n\t\t\ttext-align: center;\n\t\t}\n\t\t#main{\n\t\t\twidth: 350px;\n\t\t\theight: 100px;\n\t\t\tborder: 1px solid #000;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main .box{\n\t\t\twidth: 100px;\n\t\t\theight: 100px;\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\tfloat: left;\n\t\t\tbackground: #333;\n\t\t\tcolor:#ddd;\n\t\t}\n\t\t#main .task1:hover{\n\t\t\tz-index: 999;\n\t\t}\n\t\t#main .task2:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #999;\n\t\t}\n\t\t#main .task3:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #333;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h3>三个background为#333的box</h3>\n\t<h4>- 请在IE6，IE7中触发hover -</h4>\n\t<div id=\"main\">\n\t\t<div class=\"box task1\">box1 - 未设置backgorund</div>\n\t\t<div class=\"box task2\">box2 - background: #999</div>\n\t\t<div class=\"box task3\">box3 - background: #333</div>\n\t</div>\n</body>\n</html>","source":"assets/demo/hack_demo.html","raw":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n<html lang=\"en\">\n<head>\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\">\n\t<title></title>\n\t<style type=\"text/css\">\n\t\th3,h4{\n\t\t\ttext-align: center;\n\t\t}\n\t\t#main{\n\t\t\twidth: 350px;\n\t\t\theight: 100px;\n\t\t\tborder: 1px solid #000;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main .box{\n\t\t\twidth: 100px;\n\t\t\theight: 100px;\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\tfloat: left;\n\t\t\tbackground: #333;\n\t\t\tcolor:#ddd;\n\t\t}\n\t\t#main .task1:hover{\n\t\t\tz-index: 999;\n\t\t}\n\t\t#main .task2:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #999;\n\t\t}\n\t\t#main .task3:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #333;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h3>三个background为#333的box</h3>\n\t<h4>- 请在IE6，IE7中触发hover -</h4>\n\t<div id=\"main\">\n\t\t<div class=\"box task1\">box1 - 未设置backgorund</div>\n\t\t<div class=\"box task2\">box2 - background: #999</div>\n\t\t<div class=\"box task3\">box3 - background: #333</div>\n\t</div>\n</body>\n</html>","date":"2020-03-12T13:55:48.653Z","updated":"2020-03-12T13:55:48.653Z","path":"assets/demo/hack_demo.html","title":"","comments":1,"layout":"page","_id":"ck7otizri00157gui5j2tuos0","content":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n<html lang=\"en\">\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\">\n\t<title></title>\n\t<style type=\"text/css\">\n\t\th3,h4{\n\t\t\ttext-align: center;\n\t\t}\n\t\t#main{\n\t\t\twidth: 350px;\n\t\t\theight: 100px;\n\t\t\tborder: 1px solid #000;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main .box{\n\t\t\twidth: 100px;\n\t\t\theight: 100px;\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\tfloat: left;\n\t\t\tbackground: #333;\n\t\t\tcolor:#ddd;\n\t\t}\n\t\t#main .task1:hover{\n\t\t\tz-index: 999;\n\t\t}\n\t\t#main .task2:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #999;\n\t\t}\n\t\t#main .task3:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #333;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h3>三个background为#333的box</h3>\n\t<h4>- 请在IE6，IE7中触发hover -</h4>\n\t<div id=\"main\">\n\t\t<div class=\"box task1\">box1 - 未设置backgorund</div>\n\t\t<div class=\"box task2\">box2 - background: #999</div>\n\t\t<div class=\"box task3\">box3 - background: #333</div>\n\t</div>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n<html lang=\"en\">\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\">\n\t<title></title>\n\t<style type=\"text/css\">\n\t\th3,h4{\n\t\t\ttext-align: center;\n\t\t}\n\t\t#main{\n\t\t\twidth: 350px;\n\t\t\theight: 100px;\n\t\t\tborder: 1px solid #000;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t#main .box{\n\t\t\twidth: 100px;\n\t\t\theight: 100px;\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\tfloat: left;\n\t\t\tbackground: #333;\n\t\t\tcolor:#ddd;\n\t\t}\n\t\t#main .task1:hover{\n\t\t\tz-index: 999;\n\t\t}\n\t\t#main .task2:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #999;\n\t\t}\n\t\t#main .task3:hover{\n\t\t\tz-index: 999;\n\t\t\tbackground: #333;\n\t\t}\n\t</style>\n</head>\n<body>\n\t<h3>三个background为#333的box</h3>\n\t<h4>- 请在IE6，IE7中触发hover -</h4>\n\t<div id=\"main\">\n\t\t<div class=\"box task1\">box1 - 未设置backgorund</div>\n\t\t<div class=\"box task2\">box2 - background: #999</div>\n\t\t<div class=\"box task3\">box3 - background: #333</div>\n\t</div>\n</body>\n</html>"},{"_content":"/*! jQuery v@1.8.0 jquery.com | jquery.org/license */\n(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e=\"data-\"+c.replace(I,\"-$1\").toLowerCase();d=a.getAttribute(e);if(typeof d==\"string\"){try{d=d===\"true\"?!0:d===\"false\"?!1:d===\"null\"?null:+d+\"\"===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b===\"data\"&&p.isEmptyObject(a[b]))continue;if(b!==\"toJSON\")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b==\"string\"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split(\"|\"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c===\"object\"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c===\"input\"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c===\"option\"?b.selected=a.defaultSelected:c===\"input\"||c===\"textarea\"?b.defaultValue=a.defaultValue:c===\"script\"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!=\"undefined\"?a.getElementsByTagName(\"*\"):typeof a.querySelectorAll!=\"undefined\"?a.querySelectorAll(\"*\"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bX(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bV.length;while(e--){b=bV[e]+c;if(b in a)return b}return d}function bY(a,b){return a=b||a,p.css(a,\"display\")===\"none\"||!p.contains(a.ownerDocument,a)}function bZ(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,\"olddisplay\"),b?(!e[f]&&c.style.display===\"none\"&&(c.style.display=\"\"),c.style.display===\"\"&&bY(c)&&(e[f]=p._data(c,\"olddisplay\",cb(c.nodeName)))):(d=bH(c,\"display\"),!e[f]&&d!==\"none\"&&p._data(c,\"olddisplay\",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display===\"none\"||c.style.display===\"\")c.style.display=b?e[f]||\"\":\"none\"}return a}function b$(a,b,c){var d=bO.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||\"px\"):b}function b_(a,b,c,d){var e=c===(d?\"border\":\"content\")?4:b===\"width\"?1:0,f=0;for(;e<4;e+=2)c===\"margin\"&&(f+=p.css(a,c+bU[e],!0)),d?(c===\"content\"&&(f-=parseFloat(bH(a,\"padding\"+bU[e]))||0),c!==\"margin\"&&(f-=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0)):(f+=parseFloat(bH(a,\"padding\"+bU[e]))||0,c!==\"padding\"&&(f+=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0));return f}function ca(a,b,c){var d=b===\"width\"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,\"boxSizing\")===\"border-box\";if(d<=0){d=bH(a,b);if(d<0||d==null)d=a.style[b];if(bP.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+b_(a,b,c||(f?\"border\":\"content\"),e)+\"px\"}function cb(a){if(bR[a])return bR[a];var b=p(\"<\"+a+\">\").appendTo(e.body),c=b.css(\"display\");b.remove();if(c===\"none\"||c===\"\"){bI=e.body.appendChild(bI||p.extend(e.createElement(\"iframe\"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write(\"<!doctype html><html><body>\"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,\"display\"),e.body.removeChild(bI)}return bR[a]=c,c}function ch(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||cd.test(a)?d(a,e):ch(a+\"[\"+(typeof e==\"object\"?b:\"\")+\"]\",e,c,d)});else if(!c&&p.type(b)===\"object\")for(e in b)ch(a+\"[\"+e+\"]\",b[e],c,d);else d(a,b)}function cy(a){return function(b,c){typeof b!=\"string\"&&(c=b,b=\"*\");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f=/^\\+/.test(d),f&&(d=d.substr(1)||\"*\"),e=a[d]=a[d]||[],e[f?\"unshift\":\"push\"](c)}}function cz(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cu;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof h==\"string\"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cz(a,c,d,e,h,g)));return(l||!h)&&!g[\"*\"]&&(h=cz(a,c,d,e,\"*\",g)),h}function cA(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function cB(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);while(j[0]===\"*\")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader(\"content-type\"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+\" \"+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function cC(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if(e!==\"*\"){if(h!==\"*\"&&h!==e){c=i[h+\" \"+e]||i[\"* \"+e];if(!c)for(d in i){f=d.split(\" \");if(f[1]===e){c=i[h+\" \"+f[0]]||i[\"* \"+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a[\"throws\"])b=c(b);else try{b=c(b)}catch(k){return{state:\"parsererror\",error:c?k:\"No conversion from \"+h+\" to \"+e}}}h=e}return{state:\"success\",data:b}}function cK(){try{return new a.XMLHttpRequest}catch(b){}}function cL(){try{return new a.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b){}}function cT(){return setTimeout(function(){cM=b},0),cM=p.now()}function cU(a,b){p.each(b,function(b,c){var d=(cS[b]||[]).concat(cS[\"*\"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function cV(a,b,c){var d,e=0,f=0,g=cR.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cM||cT(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cM||cT(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cW(k,j.opts.specialEasing);for(;e<g;e++){d=cR[e].call(j,a,k,j.opts);if(d)return d}return cU(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cW(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&\"expand\"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function cX(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bY(a);c.queue||(j=p._queueHooks(a,\"fx\"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,\"fx\").length||j.empty.fire()})})),a.nodeType===1&&(\"height\"in b||\"width\"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,\"display\")===\"inline\"&&p.css(a,\"float\")===\"none\"&&(!p.support.inlineBlockNeedsLayout||cb(a.nodeName)===\"inline\"?m.display=\"inline-block\":m.zoom=1)),c.overflow&&(m.overflow=\"hidden\",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cO.exec(f)){delete b[d];if(f===(q?\"hide\":\"show\"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,\"fxshow\")||p._data(a,\"fxshow\",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,\"fxshow\",!0);for(b in n)p.style(a,b,n[b])});for(d=0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e===\"width\"||e===\"height\"?1:0))}}function cY(a,b,c,d,e){return new cY.prototype.init(a,b,c,d,e)}function cZ(a,b){var c,d={height:a},e=0;for(;e<4;e+=2-b)c=bU[e],d[\"margin\"+c]=d[\"padding\"+c]=a;return b&&(d.opacity=d.width=a),d}function c_(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source,r=/\\S/,s=/\\s+/,t=r.test(\" \")?/^[\\s\\xA0]+|[\\s\\xA0]+$/g:/^\\s+|\\s+$/g,u=/^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/,v=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,w=/^[\\],:{}\\s]*$/,x=/(?:^|:|,)(?:\\s*\\[)+/g,y=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,z=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/g,A=/^-ms-/,B=/-([\\da-z])/gi,C=function(a,b){return(b+\"\").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener(\"DOMContentLoaded\",D,!1),p.ready()):e.readyState===\"complete\"&&(e.detachEvent(\"onreadystatechange\",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a==\"string\"){a.charAt(0)===\"<\"&&a.charAt(a.length-1)===\">\"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:\"\",jquery:\"1.8.0\",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b===\"find\"?d.selector=this.selector+(this.selector?\" \":\"\")+c:b&&(d.selector=this.selector+\".\"+b+\"(\"+c+\")\"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),\"slice\",k.call(arguments).join(\",\"))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h==\"boolean\"&&(k=h,h=arguments[1]||{},i=2),typeof h!=\"object\"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return setTimeout(p.ready,1);p.isReady=!0;if(a!==!0&&--p.readyWait>0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger(\"ready\").off(\"ready\")},isFunction:function(a){return p.type(a)===\"function\"},isArray:Array.isArray||function(a){return p.type(a)===\"array\"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||\"object\"},isPlainObject:function(a){if(!a||p.type(a)!==\"object\"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,\"constructor\")&&!n.call(a.constructor.prototype,\"isPrototypeOf\"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!=\"string\"?null:(typeof b==\"boolean\"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!=\"string\")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,\"@\").replace(z,\"]\").replace(x,\"\")))return(new Function(\"return \"+b))();p.error(\"Invalid JSON: \"+b)},parseXML:function(c){var d,e;if(!c||typeof c!=\"string\")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,\"text/xml\")):(d=new ActiveXObject(\"Microsoft.XMLDOM\"),d.async=\"false\",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName(\"parsererror\").length)&&p.error(\"Invalid XML: \"+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,\"ms-\").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(c.call(a[f],f,a[f++])===!1)break;return a},trim:o?function(a){return a==null?\"\":o.call(a)}:function(a){return a==null?\"\":a.toString().replace(t,\"\")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c===\"string\"||c===\"function\"||c===\"regexp\"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l)return l.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d==\"number\")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i==\"number\"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),e!=null&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c==\"string\"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d==\"object\"){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState===\"complete\"||e.readyState!==\"loading\"&&e.addEventListener)setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener(\"DOMContentLoaded\",D,!1),a.addEventListener(\"load\",p.ready,!1);else{e.attachEvent(\"onreadystatechange\",D),a.attachEvent(\"onload\",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll(\"left\")}catch(a){return setTimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each(\"Boolean Number String Function Array Date RegExp Object\".split(\" \"),function(a,b){E[\"[object \"+b+\"]\"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a==\"string\"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){p.isFunction(c)&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[[\"resolve\",\"done\",p.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",p.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",p.Callbacks(\"memory\")]],c=\"pending\",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+\"With\"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return typeof a==\"object\"?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+\"With\"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement(\"div\");n.setAttribute(\"className\",\"t\"),n.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",c=n.getElementsByTagName(\"*\"),d=n.getElementsByTagName(\"a\")[0],d.style.cssText=\"top:1px;float:left;opacity:.5\";if(!c||!c.length||!d)return{};f=e.createElement(\"select\"),g=f.appendChild(e.createElement(\"option\")),h=n.getElementsByTagName(\"input\")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName(\"tbody\").length,htmlSerialize:!!n.getElementsByTagName(\"link\").length,style:/top/.test(d.getAttribute(\"style\")),hrefNormalized:d.getAttribute(\"href\")===\"/a\",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value===\"on\",optSelected:g.selected,getSetAttribute:n.className!==\"t\",enctype:!!e.createElement(\"form\").enctype,html5Clone:e.createElement(\"nav\").cloneNode(!0).outerHTML!==\"<:nav></:nav>\",boxModel:e.compatMode===\"CSS1Compat\",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent(\"onclick\",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent(\"onclick\"),n.detachEvent(\"onclick\",m)),h=e.createElement(\"input\"),h.value=\"t\",h.setAttribute(\"type\",\"radio\"),b.radioValue=h.value===\"t\",h.setAttribute(\"checked\",\"checked\"),h.setAttribute(\"name\",\"t\"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j=\"on\"+k,l=j in n,l||(n.setAttribute(j,\"return;\"),l=typeof n[j]==\"function\"),b[k+\"Bubbles\"]=l;return p(function(){var c,d,f,g,h=\"padding:0;margin:0;border:0;display:block;overflow:hidden;\",i=e.getElementsByTagName(\"body\")[0];if(!i)return;c=e.createElement(\"div\"),c.style.cssText=\"visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px\",i.insertBefore(c,i.firstChild),d=e.createElement(\"div\"),c.appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",f=d.getElementsByTagName(\"td\"),f[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",l=f[0].offsetHeight===0,f[0].style.display=\"\",f[1].style.display=\"none\",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!==\"1%\",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:\"4px\"}).width===\"4px\",g=e.createElement(\"div\"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width=\"0\",d.style.width=\"1px\",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!=\"undefined\"&&(d.innerHTML=\"\",d.style.cssText=h+\"width:1px;padding:1px;display:inline;zoom:1\",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display=\"block\",d.style.overflow=\"visible\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/^(?:\\{.*\\}|\\[.*\\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:\"jQuery\"+(p.fn.jquery+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c==\"string\",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c==\"object\"||typeof c==\"function\")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(\" \")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}}if(!c){delete h[i].data;if(!K(h[i]))return}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute(\"classid\")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,\"parsedAttrs\")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf(\"data-\")===0&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,\"parsedAttrs\",!0)}}return k}return typeof a==\"object\"?this.each(function(){p.data(this,a)}):(d=a.split(\".\",2),d[1]=d[1]?\".\"+d[1]:\"\",e=d[1]+\"!\",p.access(this,function(c){if(c===b)return k=this.triggerHandler(\"getData\"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=p(this);b.triggerHandler(\"setData\"+e,d),p.data(this,a,c),b.triggerHandler(\"changeData\"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||\"fx\")+\"queue\",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||\"fx\";var c=p.queue(a,b),d=c.shift(),e=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};d===\"inprogress\"&&(d=c.shift()),d&&(b===\"fx\"&&c.unshift(\"inprogress\"),delete e.stop,d.call(a,f,e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+\"queueHooks\";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks(\"once memory\").add(function(){p.removeData(a,b+\"queue\",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!=\"string\"&&(c=a,a=\"fx\",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a===\"fx\"&&b[0]!==\"inprogress\"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||\"fx\",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||\"fx\",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!=\"string\"&&(c=a,a=b),a=a||\"fx\";while(h--)(d=p._data(g[h],a+\"queueHooks\"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\\t\\r\\n]/g,P=/\\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=\" \"+e.className+\" \";for(g=0,h=b.length;g<h;g++)~f.indexOf(\" \"+b[g]+\" \")||(f+=b[g]+\" \");e.className=p.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"||a===b){c=(a||\"\").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(\" \"+e.className+\" \").replace(O,\" \");for(f=0,g=c.length;f<g;f++)while(d.indexOf(\" \"+c[f]+\" \")>-1)d=d.replace(\" \"+c[f]+\" \",\" \");e.className=a?p.trim(d):\"\"}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==\"boolean\";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c===\"string\"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?\"addClass\":\"removeClass\"](e)}else if(c===\"undefined\"||c===\"boolean\")this.className&&p._data(this,\"__className__\",this.className),this.className=this.className||a===!1?\"\":p._data(this,\"__className__\")||\"\"})},hasClass:function(a){var b=\" \"+a+\" \",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(\" \"+this[c].className+\" \").replace(O,\" \").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&\"get\"in c&&(d=c.get(f,\"value\"))!==b?d:(d=f.value,typeof d==\"string\"?d.replace(P,\"\"):d==null?\"\":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f=\"\":typeof f==\"number\"?f+=\"\":p.isArray(f)&&(f=p.map(f,function(a){return a==null?\"\":a+\"\"})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!(\"set\"in c)||c.set(this,f,\"value\")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type===\"select-one\";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute(\"disabled\")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,\"optgroup\"))){b=p(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find(\"option\").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute==\"undefined\")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&\"set\"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,\"\"+d),d)}return g&&\"get\"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,\"\"),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error(\"type property can't be changed\");else if(!p.support.radioValue&&b===\"radio\"&&p.nodeName(a,\"input\")){var c=a.value;return a.setAttribute(\"type\",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,\"button\")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,\"button\"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&\"set\"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&\"get\"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode(\"tabindex\");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!=\"boolean\"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!==\"\":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+\"\"}},p.each([\"width\",\"height\"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===\"\")return a.setAttribute(b,\"auto\"),c}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===\"\"&&(b=\"false\"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each([\"href\",\"src\",\"width\",\"height\"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=\"\"+b}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype=\"encoding\"),p.support.checkOn||p.each([\"radio\",\"checkbox\"],function(){p.valHooks[this]={get:function(a){return a.getAttribute(\"value\")===null?\"on\":a.value}}}),p.each([\"radio\",\"checkbox\"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=p.inArray(p(a).val(),b)>=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\\.]*|)(?:\\.(.+)|)$/,X=/(?:^|\\s)hover(\\.\\S+|)\\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,\"mouseenter$1 mouseleave$1\")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!=\"undefined\"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(\" \");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||\"\").split(\".\").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(\".\")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent(\"on\"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||\"\")).split(\" \");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp(\"(^|\\\\.)\"+j.split(\".\").sort().join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null;for(l=0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d===\"**\"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,\"events\",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf(\"!\")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(\".\")>=0&&(t=s.split(\".\"),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c==\"object\"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join(\".\"),c.namespace_re=c.namespace?new RegExp(\"(^|\\\\.)\"+t.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,m=s.indexOf(\":\")<0?\"on\"+s:\"\";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,\"events\")||{})[c.type]&&p._data(k,\"handle\"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault();return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!==\"click\"||!p.nodeName(f,\"a\"))&&p.acceptData(f)&&m&&f[s]&&(s!==\"focus\"&&s!==\"blur\"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n,o=(p._data(this,\"events\")||{})[c.type]||[],q=o.delegateCount,r=[].slice.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1)return;if(q&&(!c.button||c.type!==\"click\")){g=p(this),g.context=this;for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!==\"click\"){i={},k=[],g[0]=f;for(d=0;d<q;d++)l=o[d],m=l.selector,i[m]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);k.length&&u.push({elem:f,matches:k})}}o.length>q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.isPropagationStopped();d++){j=u[d],c.currentTarget=j.elem;for(e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++){l=j.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleObj=l,h=((p.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation()))}}return t.postDispatch&&t.postDispatch.call(this,c),c.result},props:\"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:\"focusin\"},blur:{delegateType:\"focusout\"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d=\"on\"+b;a.detachEvent&&(typeof a[d]==\"undefined\"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else return new p.Event(a,b)},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,\"form\"))return!1;p.event.add(this,\"click._submit keypress._submit\",function(a){var c=a.target,d=p.nodeName(c,\"input\")||p.nodeName(c,\"button\")?c.form:b;d&&!p._data(d,\"_submit_attached\")&&(p.event.add(d,\"submit._submit\",function(a){a._submit_bubble=!0}),p._data(d,\"_submit_attached\",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate(\"submit\",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,\"form\"))return!1;p.event.remove(this,\"._submit\")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type===\"checkbox\"||this.type===\"radio\")p.event.add(this,\"propertychange._change\",function(a){a.originalEvent.propertyName===\"checked\"&&(this._just_changed=!0)}),p.event.add(this,\"click._change\",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate(\"change\",this,a,!0)});return!1}p.event.add(this,\"beforeactivate._change\",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,\"_change_attached\")&&(p.event.add(b,\"change._change\",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate(\"change\",this.parentNode,a,!0)}),p._data(b,\"_change_attached\",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!==\"radio\"&&b.type!==\"checkbox\")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,\"._change\"),V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:\"focusin\",blur:\"focusout\"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a==\"object\"){typeof c!=\"string\"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c==\"string\"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=ba;else if(!e)return this;return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+\".\"+e.namespace:e.origType,e.selector,e.handler),this;if(typeof a==\"object\"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c==\"function\")d=c,c=b;return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||\"**\",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,\"**\"):this.off(b,a||\"**\",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,\"lastToggle\"+a.guid)||0)%d;return p._data(this,\"lastToggle\"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bd(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)Z(a,b[e],c,d)}function be(a,b,c,d,e,f){var g,h=$.setFilters[b.toLowerCase()];return h||Z.error(b),(a||!(g=e))&&bd(a||\"*\",d,g=[],e),g.length>0?h(g,c,f):[]}function bf(a,c,d,e,f){var g,h,i,j,k,l,m,n,p=0,q=f.length,s=L.POS,t=new RegExp(\"^\"+s.source+\"(?!\"+r+\")\",\"i\"),u=function(){var a=1,c=arguments.length-2;for(;a<c;a++)arguments[a]===b&&(g[a]=b)};for(;p<q;p++){s.exec(\"\"),a=f[p],j=[],i=0,k=e;while(g=s.exec(a)){n=s.lastIndex=g.index+g[0].length;if(n>i){m=a.slice(i,g.index),i=n,l=[c],B.test(m)&&(k&&(l=k),k=e);if(h=H.test(m))m=m.slice(0,-5).replace(B,\"$&*\");g.length>1&&g[0].replace(t,u),k=be(m,g[1],g[2],l,k,h)}}k?(j=j.concat(k),(m=a.slice(i))&&m!==\")\"?B.test(m)?bd(m,j,d,e):Z(m,c,d,e?e.concat(k):k):o.apply(d,j)):Z(a,c,d,e)}return q===1?d:Z.uniqueSort(d)}function bg(a,b,c){var d,e,f,g=[],i=0,j=D.exec(a),k=!j.pop()&&!j.pop(),l=k&&a.match(C)||[\"\"],m=$.preFilter,n=$.filter,o=!c&&b!==h;for(;(e=l[i])!=null&&k;i++){g.push(d=[]),o&&(e=\" \"+e);while(e){k=!1;if(j=B.exec(e))e=e.slice(j[0].length),k=d.push({part:j.pop().replace(A,\" \"),captures:j});for(f in n)(j=L[f].exec(e))&&(!m[f]||(j=m[f](j,b,c)))&&(e=e.slice(j.shift().length),k=d.push({part:f,captures:j}));if(!k)break}}return k||Z.error(a),g}function bh(a,b,e){var f=b.dir,g=m++;return a||(a=function(a){return a===e}),b.first?function(b,c){while(b=b[f])if(b.nodeType===1)return a(b,c)&&b}:function(b,e){var h,i=g+\".\"+d,j=i+\".\"+c;while(b=b[f])if(b.nodeType===1){if((h=b[q])===j)return b.sizset;if(typeof h==\"string\"&&h.indexOf(i)===0){if(b.sizset)return b}else{b[q]=j;if(a(b,e))return b.sizset=!0,b;b.sizset=!1}}}}function bi(a,b){return a?function(c,d){var e=b(c,d);return e&&a(e===!0?c:e,d)}:b}function bj(a,b,c){var d,e,f=0;for(;d=a[f];f++)$.relative[d.part]?e=bh(e,$.relative[d.part],b):(d.captures.push(b,c),e=bi(e,$.filter[d.part].apply(null,d.captures)));return e}function bk(a){return function(b,c){var d,e=0;for(;d=a[e];e++)if(d(b,c))return!0;return!1}}var c,d,e,f,g,h=a.document,i=h.documentElement,j=\"undefined\",k=!1,l=!0,m=0,n=[].slice,o=[].push,q=(\"sizcache\"+Math.random()).replace(\".\",\"\"),r=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",s=\"(?:\\\\\\\\.|[-\\\\w]|[^\\\\x00-\\\\xa0])+\",t=s.replace(\"w\",\"w#\"),u=\"([*^$|!~]?=)\",v=\"\\\\[\"+r+\"*(\"+s+\")\"+r+\"*(?:\"+u+r+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+t+\")|)|)\"+r+\"*\\\\]\",w=\":(\"+s+\")(?:\\\\((?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\2|((?:[^,]|\\\\\\\\,|(?:,(?=[^\\\\[]*\\\\]))|(?:,(?=[^\\\\(]*\\\\))))*))\\\\)|)\",x=\":(nth|eq|gt|lt|first|last|even|odd)(?:\\\\((\\\\d*)\\\\)|)(?=[^-]|$)\",y=r+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+r+\"*\",z=\"(?=[^\\\\x20\\\\t\\\\r\\\\n\\\\f])(?:\\\\\\\\.|\"+v+\"|\"+w.replace(2,7)+\"|[^\\\\\\\\(),])+\",A=new RegExp(\"^\"+r+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+r+\"+$\",\"g\"),B=new RegExp(\"^\"+y),C=new RegExp(z+\"?(?=\"+r+\"*,|$)\",\"g\"),D=new RegExp(\"^(?:(?!,)(?:(?:^|,)\"+r+\"*\"+z+\")*?|\"+r+\"*(.*?))(\\\\)|$)\"),E=new RegExp(z.slice(19,-6)+\"\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])+|\"+y,\"g\"),F=/^(?:#([\\w\\-]+)|(\\w+)|\\.([\\w\\-]+))$/,G=/[\\x20\\t\\r\\n\\f]*[+~]/,H=/:not\\($/,I=/h\\d/i,J=/input|select|textarea|button/i,K=/\\\\(?!\\\\)/g,L={ID:new RegExp(\"^#(\"+s+\")\"),CLASS:new RegExp(\"^\\\\.(\"+s+\")\"),NAME:new RegExp(\"^\\\\[name=['\\\"]?(\"+s+\")['\\\"]?\\\\]\"),TAG:new RegExp(\"^(\"+s.replace(\"[-\",\"[-\\\\*\")+\")\"),ATTR:new RegExp(\"^\"+v),PSEUDO:new RegExp(\"^\"+w),CHILD:new RegExp(\"^:(only|nth|last|first)-child(?:\\\\(\"+r+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+r+\"*(?:([+-]|)\"+r+\"*(\\\\d+)|))\"+r+\"*\\\\)|)\",\"i\"),POS:new RegExp(x,\"ig\"),needsContext:new RegExp(\"^\"+r+\"*[>+~]|\"+x,\"i\")},M={},N=[],O={},P=[],Q=function(a){return a.sizzleFilter=!0,a},R=function(a){return function(b){return b.nodeName.toLowerCase()===\"input\"&&b.type===a}},S=function(a){return function(b){var c=b.nodeName.toLowerCase();return(c===\"input\"||c===\"button\")&&b.type===a}},T=function(a){var b=!1,c=h.createElement(\"div\");try{b=a(c)}catch(d){}return c=null,b},U=T(function(a){a.innerHTML=\"<select></select>\";var b=typeof a.lastChild.getAttribute(\"multiple\");return b!==\"boolean\"&&b!==\"string\"}),V=T(function(a){a.id=q+0,a.innerHTML=\"<a name='\"+q+\"'></a><div name='\"+q+\"'></div>\",i.insertBefore(a,i.firstChild);var b=h.getElementsByName&&h.getElementsByName(q).length===2+h.getElementsByName(q+0).length;return g=!h.getElementById(q),i.removeChild(a),b}),W=T(function(a){return a.appendChild(h.createComment(\"\")),a.getElementsByTagName(\"*\").length===0}),X=T(function(a){return a.innerHTML=\"<a href='#'></a>\",a.firstChild&&typeof a.firstChild.getAttribute!==j&&a.firstChild.getAttribute(\"href\")===\"#\"}),Y=T(function(a){return a.innerHTML=\"<div class='hidden e'></div><div class='hidden'></div>\",!a.getElementsByClassName||a.getElementsByClassName(\"e\").length===0?!1:(a.lastChild.className=\"e\",a.getElementsByClassName(\"e\").length!==1)}),Z=function(a,b,c,d){c=c||[],b=b||h;var e,f,g,i,j=b.nodeType;if(j!==1&&j!==9)return[];if(!a||typeof a!=\"string\")return c;g=ba(b);if(!g&&!d)if(e=F.exec(a))if(i=e[1]){if(j===9){f=b.getElementById(i);if(!f||!f.parentNode)return c;if(f.id===i)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(i))&&bb(b,f)&&f.id===i)return c.push(f),c}else{if(e[2])return o.apply(c,n.call(b.getElementsByTagName(a),0)),c;if((i=e[3])&&Y&&b.getElementsByClassName)return o.apply(c,n.call(b.getElementsByClassName(i),0)),c}return bm(a,b,c,d,g)},$=Z.selectors={cacheLength:50,match:L,order:[\"ID\",\"TAG\"],attrHandle:{},createPseudo:Q,find:{ID:g?function(a,b,c){if(typeof b.getElementById!==j&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==j&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==j&&e.getAttributeNode(\"id\").value===a?[e]:b:[]}},TAG:W?function(a,b){if(typeof b.getElementsByTagName!==j)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a===\"*\"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c}},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(K,\"\"),a[3]=(a[4]||a[5]||\"\").replace(K,\"\"),a[2]===\"~=\"&&(a[3]=\" \"+a[3]+\" \"),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]===\"nth\"?(a[2]||Z.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]===\"even\"||a[2]===\"odd\")),a[4]=+(a[6]+a[7]||a[2]===\"odd\")):a[2]&&Z.error(a[0]),a},PSEUDO:function(a){var b,c=a[4];return L.CHILD.test(a[0])?null:(c&&(b=D.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:g?function(a){return a=a.replace(K,\"\"),function(b){return b.getAttribute(\"id\")===a}}:function(a){return a=a.replace(K,\"\"),function(b){var c=typeof b.getAttributeNode!==j&&b.getAttributeNode(\"id\");return c&&c.value===a}},TAG:function(a){return a===\"*\"?function(){return!0}:(a=a.replace(K,\"\").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=M[a];return b||(b=M[a]=new RegExp(\"(^|\"+r+\")\"+a+\"(\"+r+\"|$)\"),N.push(a),N.length>$.cacheLength&&delete M[N.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==j&&a.getAttribute(\"class\")||\"\")}},ATTR:function(a,b,c){return b?function(d){var e=Z.attr(d,a),f=e+\"\";if(e==null)return b===\"!=\";switch(b){case\"=\":return f===c;case\"!=\":return f!==c;case\"^=\":return c&&f.indexOf(c)===0;case\"*=\":return c&&f.indexOf(c)>-1;case\"$=\":return c&&f.substr(f.length-c.length)===c;case\"~=\":return(\" \"+f+\" \").indexOf(c)>-1;case\"|=\":return f===c||f.substr(0,c.length+1)===c+\"-\"}}:function(b){return Z.attr(b,a)!=null}},CHILD:function(a,b,c,d){if(a===\"nth\"){var e=m++;return function(a){var b,f,g=0,h=a;if(c===1&&d===0)return!0;b=a.parentNode;if(b&&(b[q]!==e||!a.sizset)){for(h=b.firstChild;h;h=h.nextSibling)if(h.nodeType===1){h.sizset=++g;if(h===a)break}b[q]=e}return f=a.sizset-d,c===0?f===0:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case\"only\":case\"first\":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a===\"first\")return!0;c=b;case\"last\":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e=$.pseudos[a]||$.pseudos[a.toLowerCase()];return e||Z.error(\"unsupported pseudo: \"+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:Q(function(a,b,c){var d=bl(a.replace(A,\"$1\"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&!!a.checked||b===\"option\"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!$.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>\"@\"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},contains:Q(function(a){return function(b){return(b.textContent||b.innerText||bc(b)).indexOf(a)>-1}}),has:Q(function(a){return function(b){return Z(a,b).length>0}}),header:function(a){return I.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()===\"input\"&&(b=a.type)===\"text\"&&((c=a.getAttribute(\"type\"))==null||c.toLowerCase()===b)},radio:R(\"radio\"),checkbox:R(\"checkbox\"),file:R(\"file\"),password:R(\"password\"),image:R(\"image\"),submit:S(\"submit\"),reset:S(\"reset\"),button:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&a.type===\"button\"||b===\"button\"},input:function(a){return J.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){var d=[],e=c?1:0,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},odd:function(a,b,c){var d=[],e=c?0:1,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}};$.setFilters.nth=$.setFilters.eq,$.filters=$.pseudos,X||($.attrHandle={href:function(a){return a.getAttribute(\"href\",2)},type:function(a){return a.getAttribute(\"type\")}}),V&&($.order.push(\"NAME\"),$.find.NAME=function(a,b){if(typeof b.getElementsByName!==j)return b.getElementsByName(a)}),Y&&($.order.splice(1,0,\"CLASS\"),$.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!==j&&!c)return b.getElementsByClassName(a)});try{n.call(i.childNodes,0)[0].nodeType}catch(_){n=function(a){var b,c=[];for(;b=this[a];a++)c.push(b);return c}}var ba=Z.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!==\"HTML\":!1},bb=Z.contains=i.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:i.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bc=Z.getText=function(a){var b,c=\"\",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent==\"string\")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=bc(a)}else if(e===3||e===4)return a.nodeValue}else for(;b=a[d];d++)c+=bc(b);return c};Z.attr=function(a,b){var c,d=ba(a);return d||(b=b.toLowerCase()),$.attrHandle[b]?$.attrHandle[b](a):U||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]==\"boolean\"?a[b]?b:null:c.specified?c.value:null:null)},Z.error=function(a){throw new Error(\"Syntax error, unrecognized expression: \"+a)},[0,0].sort(function(){return l=0}),i.compareDocumentPosition?e=function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:(e=function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return f(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var l=0;l<c&&l<d;l++)if(e[l]!==g[l])return f(e[l],g[l]);return l===c?f(a,g[l],-1):f(e[l],b,1)},f=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),Z.uniqueSort=function(a){var b,c=1;if(e){k=l,a.sort(e);if(k)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1)}return a};var bl=Z.compile=function(a,b,c){var d,e,f,g=O[a];if(g&&g.context===b)return g;e=bg(a,b,c);for(f=0;d=e[f];f++)e[f]=bj(d,b,c);return g=O[a]=bk(e),g.context=b,g.runs=g.dirruns=0,P.push(a),P.length>$.cacheLength&&delete O[P.shift()],g};Z.matches=function(a,b){return Z(a,null,null,b)},Z.matchesSelector=function(a,b){return Z(b,null,null,[a]).length>0};var bm=function(a,b,e,f,g){a=a.replace(A,\"$1\");var h,i,j,k,l,m,p,q,r,s=a.match(C),t=a.match(E),u=b.nodeType;if(L.POS.test(a))return bf(a,b,e,f,s);if(f)h=n.call(f,0);else if(s&&s.length===1){if(t.length>1&&u===9&&!g&&(s=L.ID.exec(t[0]))){b=$.find.ID(s[1],b,g)[0];if(!b)return e;a=a.slice(t.shift().length)}q=(s=G.exec(t[0]))&&!s.index&&b.parentNode||b,r=t.pop(),m=r.split(\":not\")[0];for(j=0,k=$.order.length;j<k;j++){p=$.order[j];if(s=L[p].exec(m)){h=$.find[p]((s[1]||\"\").replace(K,\"\"),q,g);if(h==null)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(L[p],\"\"),a||o.apply(e,n.call(h,0)));break}}}if(a){i=bl(a,b,g),d=i.dirruns++,h==null&&(h=$.find.TAG(\"*\",G.test(a)&&b.parentNode||b));for(j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l)}return e};h.querySelectorAll&&function(){var a,b=bm,c=/'|\\\\/g,d=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,e=[],f=[\":active\"],g=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;T(function(a){a.innerHTML=\"<select><option selected></option></select>\",a.querySelectorAll(\"[selected]\").length||e.push(\"\\\\[\"+r+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),a.querySelectorAll(\":checked\").length||e.push(\":checked\")}),T(function(a){a.innerHTML=\"<p test=''></p>\",a.querySelectorAll(\"[test^='']\").length&&e.push(\"[*^$]=\"+r+\"*(?:\\\"\\\"|'')\"),a.innerHTML=\"<input type='hidden'>\",a.querySelectorAll(\":enabled\").length||e.push(\":enabled\",\":disabled\")}),e=e.length&&new RegExp(e.join(\"|\")),bm=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a)))if(d.nodeType===9)try{return o.apply(f,n.call(d.querySelectorAll(a),0)),f}catch(i){}else if(d.nodeType===1&&d.nodeName.toLowerCase()!==\"object\"){var j=d.getAttribute(\"id\"),k=j||q,l=G.test(a)&&d.parentNode||d;j?k=k.replace(c,\"\\\\$&\"):d.setAttribute(\"id\",k);try{return o.apply(f,n.call(l.querySelectorAll(a.replace(C,\"[id='\"+k+\"'] $&\")),0)),f}catch(i){}finally{j||d.removeAttribute(\"id\")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,\"div\");try{g.call(b,\"[test!='']:sizzle\"),f.push($.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join(\"|\")),Z.matchesSelector=function(b,c){c=c.replace(d,\"='$1']\");if(!ba(b)&&!f.test(c)&&(!e||!e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&b.document.nodeType!==11)return h}catch(i){}return Z(c,null,null,[b]).length>0})}(),Z.attr=p.attr,p.find=Z,p.expr=Z.selectors,p.expr[\":\"]=p.expr.pseudos,p.unique=Z.uniqueSort,p.text=Z.getText,p.isXMLDoc=Z.isXML,p.contains=Z.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\\[\\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!=\"string\")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushStack(\"\",\"find\",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(bj(this,a,!1),\"not\",a)},filter:function(a){return this.pushStack(bj(this,a,!0),\"filter\",a)},is:function(a){return!!a&&(typeof a==\"string\"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!=\"string\"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,\"closest\",a)},index:function(a){return a?typeof a==\"string\"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a==\"string\"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,\"parentNode\")},parentsUntil:function(a,b,c){return p.dir(a,\"parentNode\",c)},next:function(a){return bi(a,\"nextSibling\")},prev:function(a){return bi(a,\"previousSibling\")},nextAll:function(a){return p.dir(a,\"nextSibling\")},prevAll:function(a){return p.dir(a,\"previousSibling\")},nextUntil:function(a,b,c){return p.dir(a,\"nextSibling\",c)},prevUntil:function(a,b,c){return p.dir(a,\"previousSibling\",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,\"iframe\")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d==\"string\"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(\",\"))}}),p.extend({filter:function(a,b,c){return c&&(a=\":not(\"+a+\")\"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",bm=/ jQuery\\d+=\"(?:null|\\d+)\"/g,bn=/^\\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bp=/<([\\w:]+)/,bq=/<tbody/i,br=/<|&#?\\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp(\"<(?:\"+bl+\")[\\\\s/>]\",\"i\"),bv=/^(?:checkbox|radio)$/,bw=/checked\\s*(?:[^=]|=\\s*.checked.)/i,bx=/\\/(java|ecma)script/i,by=/^\\s*<!(?:\\[CDATA\\[|\\-\\-)|[\\]\\-]{2}>\\s*$/g,bz={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],area:[1,\"<map>\",\"</map>\"],_default:[0,\"\",\"\"]},bA=bk(e),bB=bA.appendChild(e.createElement(\"div\"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,\"X<div>\",\"</div>\"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,\"body\")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),\"before\",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),\"after\",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName(\"*\")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName(\"*\"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,\"\"):b;if(typeof a==\"string\"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||[\"\",\"\"])[1].toLowerCase()]){a=a.replace(bo,\"<$1></$2>\");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName(\"*\")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),\"replaceWith\",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!=\"string\"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j==\"string\"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,\"tr\");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodeName(this[i],\"table\")?bC(this[i],\"tbody\"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0}):p.error(\"no ajax\"):p.globalEval((b.text||b.textContent||b.innerHTML||\"\").replace(by,\"\")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=(c[0]||c).ownerDocument||c[0]||c,typeof c.createDocumentFragment==\"undefined\"&&(c=e),a.length===1&&typeof i==\"string\"&&i.length<512&&c===e&&i.charAt(0)===\"<\"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test(\"<\"+a.nodeName+\">\")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=0,t=[];if(!b||typeof b.createDocumentFragment==\"undefined\")b=e;for(g=b===e&&bA;(h=a[s])!=null;s++){typeof h==\"number\"&&(h+=\"\");if(!h)continue;if(typeof h==\"string\")if(!br.test(h))h=b.createTextNode(h);else{g=g||bk(b),l=l||g.appendChild(b.createElement(\"div\")),h=h.replace(bo,\"<$1></$2>\"),i=(bp.exec(h)||[\"\",\"\"])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i===\"table\"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]===\"<table>\"&&!m?l.childNodes:[];for(f=n.length-1;f>=0;--f)p.nodeName(n[f],\"tbody\")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l=g.lastChild}h.nodeType?t.push(h):t=p.merge(t,h)}l&&(g.removeChild(l),h=l=g=null);if(!p.support.appendChecked)for(s=0;(h=t[s])!=null;s++)p.nodeName(h,\"input\")?bG(h):typeof h.getElementsByTagName!=\"undefined\"&&p.grep(h.getElementsByTagName(\"input\"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(s=0;(h=t[s])!=null;s++)if(!p.nodeName(h,\"script\")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!=\"undefined\"&&(r=p.grep(p.merge([],h.getElementsByTagName(\"script\")),q),t.splice.apply(t,[s+1,0].concat(r)),s+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \\/]([\\w.]+)/.exec(a)||/(webkit)[ \\/]([\\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(a)||/(msie) ([\\w.]+)/.exec(a)||a.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(a)||[];return{browser:b[1]||\"\",version:b[2]||\"0\"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\\([^)]*\\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^margin/,bO=new RegExp(\"^(\"+q+\")(.*)$\",\"i\"),bP=new RegExp(\"^(\"+q+\")(?!px)[a-z%]+$\",\"i\"),bQ=new RegExp(\"^([-+])=(\"+q+\")\",\"i\"),bR={},bS={position:\"absolute\",visibility:\"hidden\",display:\"block\"},bT={letterSpacing:0,fontWeight:400,lineHeight:1},bU=[\"Top\",\"Right\",\"Bottom\",\"Left\"],bV=[\"Webkit\",\"O\",\"Moz\",\"ms\"],bW=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return bZ(this,!0)},hide:function(){return bZ(this)},toggle:function(a,b){var c=typeof a==\"boolean\";return p.isFunction(a)&&p.isFunction(b)?bW.apply(this,arguments):this.each(function(){(c?a:bY(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,\"opacity\");return c===\"\"?\"1\":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":p.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bX(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&\"get\"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g===\"string\"&&(f=bQ.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g=\"number\");if(d==null||g===\"number\"&&isNaN(d))return;g===\"number\"&&!p.cssNumber[i]&&(d+=\"px\");if(!h||!(\"set\"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bX(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&\"get\"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f===\"normal\"&&c in bT&&(f=bT[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(c=g[b],c===\"\"&&!p.contains(a.ownerDocument.documentElement,a)&&(c=p.style(a,b)),bP.test(c)&&bN.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bP.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b===\"fontSize\"?\"1em\":e,e=f.pixelLeft+\"px\",f.left=c,d&&(a.runtimeStyle.left=d)),e===\"\"?\"auto\":e}),p.each([\"height\",\"width\"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0||bH(a,\"display\")!==\"none\"?ca(a,b,d):p.swap(a,bS,function(){return ca(a,b,d)})},set:function(a,c,d){return b$(a,c,d?b_(a,b,d,p.support.boxSizing&&p.css(a,\"boxSizing\")===\"border-box\"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":b?\"1\":\"\"},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?\"alpha(opacity=\"+b*100+\")\":\"\",f=d&&d.filter||c.filter||\"\";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,\"\"))===\"\"&&c.removeAttribute){c.removeAttribute(\"filter\");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+\" \"+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:\"inline-block\"},function(){if(b)return bH(a,\"marginRight\")})}}),!p.support.pixelPosition&&p.fn.position&&p.each([\"top\",\"left\"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bP.test(d)?p(a).position()[b]+\"px\":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,\"display\"))===\"none\"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:\"\",padding:\"\",border:\"Width\"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c==\"string\"?c.split(\" \"):[c],f={};for(d=0;d<4;d++)f[a+bU[d]+b]=e[d]||e[d-2]||e[0];return f}},bN.test(a)||(p.cssHooks[a+b].set=b$)});var cc=/%20/g,cd=/\\[\\]$/,ce=/\\r?\\n/g,cf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,cg=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cg.test(this.nodeName)||cf.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(ce,\"\\r\\n\")}}):{name:b.name,value:c.replace(ce,\"\\r\\n\")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?\"\":b,e[e.length]=encodeURIComponent(a)+\"=\"+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)ch(d,a[d],c,f);return e.join(\"&\").replace(cc,\"+\")};var ci,cj,ck=/#.*$/,cl=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg,cm=/^(?:about|app|app\\-storage|.+\\-extension|file|res|widget):$/,cn=/^(?:GET|HEAD)$/,co=/^\\/\\//,cp=/\\?/,cq=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,cr=/([?&])_=[^&]*/,cs=/^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,ct=p.fn.load,cu={},cv={},cw=[\"*/\"]+[\"*\"];try{ci=f.href}catch(cx){ci=e.createElement(\"a\"),ci.href=\"\",ci=ci.href}cj=cs.exec(ci.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!=\"string\"&&ct)return ct.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(\" \");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):typeof c==\"object\"&&(f=\"POST\"),p.ajax({url:a,type:f,dataType:\"html\",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p(\"<div>\").append(a.replace(cq,\"\")).find(e):a)}),this},p.each(\"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend\".split(\" \"),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each([\"get\",\"post\"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,\"script\")},getJSON:function(a,b,c){return p.get(a,b,c,\"json\")},ajaxSetup:function(a,b){return b?cA(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cA(a,b),a},ajaxSettings:{url:ci,isLocal:cm.test(cj[1]),global:!0,type:\"GET\",contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",processData:!0,async:!0,accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",\"*\":cw},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":a.String,\"text html\":!0,\"text json\":p.parseJSON,\"text xml\":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cy(cu),ajaxTransport:cy(cv),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||\"\",x.readyState=a>0?4:0,f&&(u=cB(l,x,f));if(a>=200&&a<300||a===304)l.ifModified&&(w=x.getResponseHeader(\"Last-Modified\"),w&&(p.lastModified[d]=w),w=x.getResponseHeader(\"Etag\"),w&&(p.etag[d]=w)),a===304?(y=\"notmodified\",k=!0):(k=cC(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y=\"error\",a<0&&(a=0)}x.status=a,x.statusText=\"\"+(c||y),k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger(\"ajax\"+(k?\"Success\":\"Error\"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger(\"ajaxComplete\",[x,l]),--p.active||p.event.trigger(\"ajaxStop\"))}typeof a==\"object\"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks(\"once memory\"),r=l.statusCode||{},t={},u={},v=0,w=\"canceled\",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cl.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this},l.url=((a||l.url)+\"\").replace(ck,\"\").replace(co,cj[1]+\"//\"),l.dataTypes=p.trim(l.dataType||\"*\").toLowerCase().split(s),l.crossDomain==null&&(i=cs.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==cj[1]&&i[2]==cj[2]&&(i[3]||(i[1]===\"http:\"?80:443))==(cj[3]||(cj[1]===\"http:\"?80:443)))),l.data&&l.processData&&typeof l.data!=\"string\"&&(l.data=p.param(l.data,l.traditional)),cz(cu,l,c,x);if(v===2)return x;j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!cn.test(l.type),j&&p.active++===0&&p.event.trigger(\"ajaxStart\");if(!l.hasContent){l.data&&(l.url+=(cp.test(l.url)?\"&\":\"?\")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cr,\"$1_=\"+z);l.url=A+(A===l.url?(cp.test(l.url)?\"&\":\"?\")+\"_=\"+z:\"\")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader(\"Content-Type\",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader(\"If-Modified-Since\",p.lastModified[d]),p.etag[d]&&x.setRequestHeader(\"If-None-Match\",p.etag[d])),x.setRequestHeader(\"Accept\",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!==\"*\"?\", \"+cw+\"; q=0.01\":\"\"):l.accepts[\"*\"]);for(k in l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w=\"abort\";for(k in{success:1,error:1,complete:1})x[k](l[k]);g=cz(cv,l,c,x);if(!g)y(-1,\"No Transport\");else{x.readyState=1,j&&n.trigger(\"ajaxSend\",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort(\"timeout\")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,B);else throw B}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cD=[],cE=/\\?/,cF=/(=)\\?(?=&|$)|\\?\\?/,cG=p.now();p.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var a=cD.pop()||p.expando+\"_\"+cG++;return this[a]=!0,a}}),p.ajaxPrefilter(\"json jsonp\",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cF.test(j),m=k&&!l&&typeof i==\"string\"&&!(c.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&cF.test(i);if(c.dataTypes[0]===\"jsonp\"||l||m)return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cF,\"$1\"+f):m?c.data=i.replace(cF,\"$1\"+f):k&&(c.url+=(cE.test(j)?\"&\":\"?\")+c.jsonp+\"=\"+f),c.converters[\"script json\"]=function(){return h||p.error(f+\" was not called\"),h[0]},c.dataTypes[0]=\"json\",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cD.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),\"script\"}),p.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/javascript|ecmascript/},converters:{\"text script\":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter(\"script\",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type=\"GET\",a.global=!1)}),p.ajaxTransport(\"script\",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName(\"head\")[0]||e.documentElement;return{send:function(f,g){c=e.createElement(\"script\"),c.async=\"async\",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,\"success\")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cH,cI=a.ActiveXObject?function(){for(var a in cH)cH[a](0,1)}:!1,cJ=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cK()||cL()}:cK,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&\"withCredentials\"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e[\"X-Requested-With\"]&&(e[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cI&&delete cH[g]);if(e)i.readyState!==4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=\"\"}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cJ,cI&&(cH||(cH={},p(a).unload(cI)),cH[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cM,cN,cO=/^(?:toggle|show|hide)$/,cP=new RegExp(\"^(?:([-+])=|)(\"+q+\")([a-z%]*)$\",\"i\"),cQ=/queueHooks$/,cR=[cX],cS={\"*\":[function(a,b){var c,d,e,f=this.createTween(a,b),g=cP.exec(b),h=f.cur(),i=+h||0,j=1;if(g){c=+g[2],d=g[3]||(p.cssNumber[a]?\"\":\"px\");if(d!==\"px\"&&i){i=p.css(f.elem,a,!0)||c||1;do e=j=j||\".5\",i=i/j,p.style(f.elem,a,i+d),j=f.cur()/h;while(j!==1&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};p.Animation=p.extend(cV,{tweener:function(a,b){p.isFunction(a)?(b=a,a=[\"*\"]):a=a.split(\" \");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],cS[c]=cS[c]||[],cS[c].unshift(b)},prefilter:function(a,b){b?cR.unshift(a):cR.push(a)}}),p.Tween=cY,cY.prototype={constructor:cY,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||\"swing\",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?\"\":\"px\")},cur:function(){var a=cY.propHooks[this.prop];return a&&a.get?a.get(this):cY.propHooks._default.get(this)},run:function(a){var b,c=cY.propHooks[this.prop];return this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cY.propHooks._default.set(this),this}},cY.prototype.init.prototype=cY.prototype,cY.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,\"\"),!b||b===\"auto\"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cY.propHooks.scrollTop=cY.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each([\"toggle\",\"show\",\"hide\"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d==\"boolean\"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(cZ(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bY).css(\"opacity\",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cV(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!=\"string\"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||\"fx\",[]),this.each(function(){var b=!0,c=a!=null&&a+\"queueHooks\",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cQ.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:cZ(\"show\"),slideUp:cZ(\"hide\"),slideToggle:cZ(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a==\"object\"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration==\"number\"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue=\"fx\";return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cY.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cN&&(cN=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cN),cN=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c$=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j,k,l,m=this[0],n=m&&m.ownerDocument;if(!n)return;return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=c_(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,\"marginTop\"))||0,c+=parseFloat(p.css(a,\"marginLeft\"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,\"position\");d===\"static\"&&(a.style.position=\"relative\");var e=p(a),f=e.offset(),g=p.css(a,\"top\"),h=p.css(a,\"left\"),i=(d===\"absolute\"||d===\"fixed\")&&p.inArray(\"auto\",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),\"using\"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c$.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,\"marginTop\"))||0,c.left-=parseFloat(p.css(a,\"marginLeft\"))||0,d.top+=parseFloat(p.css(b[0],\"borderTopWidth\"))||0,d.left+=parseFloat(p.css(b[0],\"borderLeftWidth\"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c$.test(a.nodeName)&&p.css(a,\"position\")===\"static\")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=c_(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:\"height\",Width:\"width\"},function(a,c){p.each({padding:\"inner\"+a,content:c,\"\":\"outer\"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!=\"boolean\"),h=d||(e===!0||f===!0?\"margin\":\"border\");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement[\"client\"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body[\"scroll\"+a],f[\"scroll\"+a],c.body[\"offset\"+a],f[\"offset\"+a],f[\"client\"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g)}})}),a.jQuery=a.$=p,typeof define==\"function\"&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return p})})(window);","source":"assets/demo/jquery.js","raw":"/*! jQuery v@1.8.0 jquery.com | jquery.org/license */\n(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e=\"data-\"+c.replace(I,\"-$1\").toLowerCase();d=a.getAttribute(e);if(typeof d==\"string\"){try{d=d===\"true\"?!0:d===\"false\"?!1:d===\"null\"?null:+d+\"\"===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b===\"data\"&&p.isEmptyObject(a[b]))continue;if(b!==\"toJSON\")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b==\"string\"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split(\"|\"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c===\"object\"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c===\"input\"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c===\"option\"?b.selected=a.defaultSelected:c===\"input\"||c===\"textarea\"?b.defaultValue=a.defaultValue:c===\"script\"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!=\"undefined\"?a.getElementsByTagName(\"*\"):typeof a.querySelectorAll!=\"undefined\"?a.querySelectorAll(\"*\"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bX(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bV.length;while(e--){b=bV[e]+c;if(b in a)return b}return d}function bY(a,b){return a=b||a,p.css(a,\"display\")===\"none\"||!p.contains(a.ownerDocument,a)}function bZ(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,\"olddisplay\"),b?(!e[f]&&c.style.display===\"none\"&&(c.style.display=\"\"),c.style.display===\"\"&&bY(c)&&(e[f]=p._data(c,\"olddisplay\",cb(c.nodeName)))):(d=bH(c,\"display\"),!e[f]&&d!==\"none\"&&p._data(c,\"olddisplay\",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display===\"none\"||c.style.display===\"\")c.style.display=b?e[f]||\"\":\"none\"}return a}function b$(a,b,c){var d=bO.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||\"px\"):b}function b_(a,b,c,d){var e=c===(d?\"border\":\"content\")?4:b===\"width\"?1:0,f=0;for(;e<4;e+=2)c===\"margin\"&&(f+=p.css(a,c+bU[e],!0)),d?(c===\"content\"&&(f-=parseFloat(bH(a,\"padding\"+bU[e]))||0),c!==\"margin\"&&(f-=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0)):(f+=parseFloat(bH(a,\"padding\"+bU[e]))||0,c!==\"padding\"&&(f+=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0));return f}function ca(a,b,c){var d=b===\"width\"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,\"boxSizing\")===\"border-box\";if(d<=0){d=bH(a,b);if(d<0||d==null)d=a.style[b];if(bP.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+b_(a,b,c||(f?\"border\":\"content\"),e)+\"px\"}function cb(a){if(bR[a])return bR[a];var b=p(\"<\"+a+\">\").appendTo(e.body),c=b.css(\"display\");b.remove();if(c===\"none\"||c===\"\"){bI=e.body.appendChild(bI||p.extend(e.createElement(\"iframe\"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write(\"<!doctype html><html><body>\"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,\"display\"),e.body.removeChild(bI)}return bR[a]=c,c}function ch(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||cd.test(a)?d(a,e):ch(a+\"[\"+(typeof e==\"object\"?b:\"\")+\"]\",e,c,d)});else if(!c&&p.type(b)===\"object\")for(e in b)ch(a+\"[\"+e+\"]\",b[e],c,d);else d(a,b)}function cy(a){return function(b,c){typeof b!=\"string\"&&(c=b,b=\"*\");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f=/^\\+/.test(d),f&&(d=d.substr(1)||\"*\"),e=a[d]=a[d]||[],e[f?\"unshift\":\"push\"](c)}}function cz(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cu;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof h==\"string\"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cz(a,c,d,e,h,g)));return(l||!h)&&!g[\"*\"]&&(h=cz(a,c,d,e,\"*\",g)),h}function cA(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function cB(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);while(j[0]===\"*\")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader(\"content-type\"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+\" \"+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function cC(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if(e!==\"*\"){if(h!==\"*\"&&h!==e){c=i[h+\" \"+e]||i[\"* \"+e];if(!c)for(d in i){f=d.split(\" \");if(f[1]===e){c=i[h+\" \"+f[0]]||i[\"* \"+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a[\"throws\"])b=c(b);else try{b=c(b)}catch(k){return{state:\"parsererror\",error:c?k:\"No conversion from \"+h+\" to \"+e}}}h=e}return{state:\"success\",data:b}}function cK(){try{return new a.XMLHttpRequest}catch(b){}}function cL(){try{return new a.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b){}}function cT(){return setTimeout(function(){cM=b},0),cM=p.now()}function cU(a,b){p.each(b,function(b,c){var d=(cS[b]||[]).concat(cS[\"*\"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function cV(a,b,c){var d,e=0,f=0,g=cR.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cM||cT(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cM||cT(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cW(k,j.opts.specialEasing);for(;e<g;e++){d=cR[e].call(j,a,k,j.opts);if(d)return d}return cU(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cW(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&\"expand\"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function cX(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bY(a);c.queue||(j=p._queueHooks(a,\"fx\"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,\"fx\").length||j.empty.fire()})})),a.nodeType===1&&(\"height\"in b||\"width\"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,\"display\")===\"inline\"&&p.css(a,\"float\")===\"none\"&&(!p.support.inlineBlockNeedsLayout||cb(a.nodeName)===\"inline\"?m.display=\"inline-block\":m.zoom=1)),c.overflow&&(m.overflow=\"hidden\",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cO.exec(f)){delete b[d];if(f===(q?\"hide\":\"show\"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,\"fxshow\")||p._data(a,\"fxshow\",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,\"fxshow\",!0);for(b in n)p.style(a,b,n[b])});for(d=0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e===\"width\"||e===\"height\"?1:0))}}function cY(a,b,c,d,e){return new cY.prototype.init(a,b,c,d,e)}function cZ(a,b){var c,d={height:a},e=0;for(;e<4;e+=2-b)c=bU[e],d[\"margin\"+c]=d[\"padding\"+c]=a;return b&&(d.opacity=d.width=a),d}function c_(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source,r=/\\S/,s=/\\s+/,t=r.test(\" \")?/^[\\s\\xA0]+|[\\s\\xA0]+$/g:/^\\s+|\\s+$/g,u=/^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/,v=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,w=/^[\\],:{}\\s]*$/,x=/(?:^|:|,)(?:\\s*\\[)+/g,y=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,z=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/g,A=/^-ms-/,B=/-([\\da-z])/gi,C=function(a,b){return(b+\"\").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener(\"DOMContentLoaded\",D,!1),p.ready()):e.readyState===\"complete\"&&(e.detachEvent(\"onreadystatechange\",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a==\"string\"){a.charAt(0)===\"<\"&&a.charAt(a.length-1)===\">\"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:\"\",jquery:\"1.8.0\",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b===\"find\"?d.selector=this.selector+(this.selector?\" \":\"\")+c:b&&(d.selector=this.selector+\".\"+b+\"(\"+c+\")\"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),\"slice\",k.call(arguments).join(\",\"))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h==\"boolean\"&&(k=h,h=arguments[1]||{},i=2),typeof h!=\"object\"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return setTimeout(p.ready,1);p.isReady=!0;if(a!==!0&&--p.readyWait>0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger(\"ready\").off(\"ready\")},isFunction:function(a){return p.type(a)===\"function\"},isArray:Array.isArray||function(a){return p.type(a)===\"array\"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||\"object\"},isPlainObject:function(a){if(!a||p.type(a)!==\"object\"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,\"constructor\")&&!n.call(a.constructor.prototype,\"isPrototypeOf\"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!=\"string\"?null:(typeof b==\"boolean\"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!=\"string\")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,\"@\").replace(z,\"]\").replace(x,\"\")))return(new Function(\"return \"+b))();p.error(\"Invalid JSON: \"+b)},parseXML:function(c){var d,e;if(!c||typeof c!=\"string\")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,\"text/xml\")):(d=new ActiveXObject(\"Microsoft.XMLDOM\"),d.async=\"false\",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName(\"parsererror\").length)&&p.error(\"Invalid XML: \"+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,\"ms-\").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(c.call(a[f],f,a[f++])===!1)break;return a},trim:o?function(a){return a==null?\"\":o.call(a)}:function(a){return a==null?\"\":a.toString().replace(t,\"\")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c===\"string\"||c===\"function\"||c===\"regexp\"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l)return l.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d==\"number\")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i==\"number\"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),e!=null&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c==\"string\"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d==\"object\"){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState===\"complete\"||e.readyState!==\"loading\"&&e.addEventListener)setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener(\"DOMContentLoaded\",D,!1),a.addEventListener(\"load\",p.ready,!1);else{e.attachEvent(\"onreadystatechange\",D),a.attachEvent(\"onload\",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll(\"left\")}catch(a){return setTimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each(\"Boolean Number String Function Array Date RegExp Object\".split(\" \"),function(a,b){E[\"[object \"+b+\"]\"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a==\"string\"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){p.isFunction(c)&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[[\"resolve\",\"done\",p.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",p.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",p.Callbacks(\"memory\")]],c=\"pending\",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+\"With\"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return typeof a==\"object\"?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+\"With\"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement(\"div\");n.setAttribute(\"className\",\"t\"),n.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",c=n.getElementsByTagName(\"*\"),d=n.getElementsByTagName(\"a\")[0],d.style.cssText=\"top:1px;float:left;opacity:.5\";if(!c||!c.length||!d)return{};f=e.createElement(\"select\"),g=f.appendChild(e.createElement(\"option\")),h=n.getElementsByTagName(\"input\")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName(\"tbody\").length,htmlSerialize:!!n.getElementsByTagName(\"link\").length,style:/top/.test(d.getAttribute(\"style\")),hrefNormalized:d.getAttribute(\"href\")===\"/a\",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value===\"on\",optSelected:g.selected,getSetAttribute:n.className!==\"t\",enctype:!!e.createElement(\"form\").enctype,html5Clone:e.createElement(\"nav\").cloneNode(!0).outerHTML!==\"<:nav></:nav>\",boxModel:e.compatMode===\"CSS1Compat\",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent(\"onclick\",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent(\"onclick\"),n.detachEvent(\"onclick\",m)),h=e.createElement(\"input\"),h.value=\"t\",h.setAttribute(\"type\",\"radio\"),b.radioValue=h.value===\"t\",h.setAttribute(\"checked\",\"checked\"),h.setAttribute(\"name\",\"t\"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j=\"on\"+k,l=j in n,l||(n.setAttribute(j,\"return;\"),l=typeof n[j]==\"function\"),b[k+\"Bubbles\"]=l;return p(function(){var c,d,f,g,h=\"padding:0;margin:0;border:0;display:block;overflow:hidden;\",i=e.getElementsByTagName(\"body\")[0];if(!i)return;c=e.createElement(\"div\"),c.style.cssText=\"visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px\",i.insertBefore(c,i.firstChild),d=e.createElement(\"div\"),c.appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",f=d.getElementsByTagName(\"td\"),f[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",l=f[0].offsetHeight===0,f[0].style.display=\"\",f[1].style.display=\"none\",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!==\"1%\",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:\"4px\"}).width===\"4px\",g=e.createElement(\"div\"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width=\"0\",d.style.width=\"1px\",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!=\"undefined\"&&(d.innerHTML=\"\",d.style.cssText=h+\"width:1px;padding:1px;display:inline;zoom:1\",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display=\"block\",d.style.overflow=\"visible\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/^(?:\\{.*\\}|\\[.*\\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:\"jQuery\"+(p.fn.jquery+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c==\"string\",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c==\"object\"||typeof c==\"function\")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(\" \")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}}if(!c){delete h[i].data;if(!K(h[i]))return}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute(\"classid\")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,\"parsedAttrs\")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf(\"data-\")===0&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,\"parsedAttrs\",!0)}}return k}return typeof a==\"object\"?this.each(function(){p.data(this,a)}):(d=a.split(\".\",2),d[1]=d[1]?\".\"+d[1]:\"\",e=d[1]+\"!\",p.access(this,function(c){if(c===b)return k=this.triggerHandler(\"getData\"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=p(this);b.triggerHandler(\"setData\"+e,d),p.data(this,a,c),b.triggerHandler(\"changeData\"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||\"fx\")+\"queue\",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||\"fx\";var c=p.queue(a,b),d=c.shift(),e=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};d===\"inprogress\"&&(d=c.shift()),d&&(b===\"fx\"&&c.unshift(\"inprogress\"),delete e.stop,d.call(a,f,e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+\"queueHooks\";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks(\"once memory\").add(function(){p.removeData(a,b+\"queue\",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!=\"string\"&&(c=a,a=\"fx\",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a===\"fx\"&&b[0]!==\"inprogress\"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||\"fx\",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||\"fx\",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!=\"string\"&&(c=a,a=b),a=a||\"fx\";while(h--)(d=p._data(g[h],a+\"queueHooks\"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\\t\\r\\n]/g,P=/\\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=\" \"+e.className+\" \";for(g=0,h=b.length;g<h;g++)~f.indexOf(\" \"+b[g]+\" \")||(f+=b[g]+\" \");e.className=p.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"||a===b){c=(a||\"\").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(\" \"+e.className+\" \").replace(O,\" \");for(f=0,g=c.length;f<g;f++)while(d.indexOf(\" \"+c[f]+\" \")>-1)d=d.replace(\" \"+c[f]+\" \",\" \");e.className=a?p.trim(d):\"\"}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==\"boolean\";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c===\"string\"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?\"addClass\":\"removeClass\"](e)}else if(c===\"undefined\"||c===\"boolean\")this.className&&p._data(this,\"__className__\",this.className),this.className=this.className||a===!1?\"\":p._data(this,\"__className__\")||\"\"})},hasClass:function(a){var b=\" \"+a+\" \",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(\" \"+this[c].className+\" \").replace(O,\" \").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&\"get\"in c&&(d=c.get(f,\"value\"))!==b?d:(d=f.value,typeof d==\"string\"?d.replace(P,\"\"):d==null?\"\":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f=\"\":typeof f==\"number\"?f+=\"\":p.isArray(f)&&(f=p.map(f,function(a){return a==null?\"\":a+\"\"})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!(\"set\"in c)||c.set(this,f,\"value\")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type===\"select-one\";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute(\"disabled\")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,\"optgroup\"))){b=p(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find(\"option\").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute==\"undefined\")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&\"set\"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,\"\"+d),d)}return g&&\"get\"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,\"\"),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error(\"type property can't be changed\");else if(!p.support.radioValue&&b===\"radio\"&&p.nodeName(a,\"input\")){var c=a.value;return a.setAttribute(\"type\",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,\"button\")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,\"button\"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&\"set\"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&\"get\"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode(\"tabindex\");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!=\"boolean\"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!==\"\":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+\"\"}},p.each([\"width\",\"height\"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===\"\")return a.setAttribute(b,\"auto\"),c}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===\"\"&&(b=\"false\"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each([\"href\",\"src\",\"width\",\"height\"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=\"\"+b}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype=\"encoding\"),p.support.checkOn||p.each([\"radio\",\"checkbox\"],function(){p.valHooks[this]={get:function(a){return a.getAttribute(\"value\")===null?\"on\":a.value}}}),p.each([\"radio\",\"checkbox\"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=p.inArray(p(a).val(),b)>=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\\.]*|)(?:\\.(.+)|)$/,X=/(?:^|\\s)hover(\\.\\S+|)\\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,\"mouseenter$1 mouseleave$1\")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!=\"undefined\"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(\" \");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||\"\").split(\".\").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(\".\")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent(\"on\"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||\"\")).split(\" \");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp(\"(^|\\\\.)\"+j.split(\".\").sort().join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null;for(l=0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d===\"**\"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,\"events\",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf(\"!\")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(\".\")>=0&&(t=s.split(\".\"),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c==\"object\"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join(\".\"),c.namespace_re=c.namespace?new RegExp(\"(^|\\\\.)\"+t.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,m=s.indexOf(\":\")<0?\"on\"+s:\"\";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,\"events\")||{})[c.type]&&p._data(k,\"handle\"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault();return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!==\"click\"||!p.nodeName(f,\"a\"))&&p.acceptData(f)&&m&&f[s]&&(s!==\"focus\"&&s!==\"blur\"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n,o=(p._data(this,\"events\")||{})[c.type]||[],q=o.delegateCount,r=[].slice.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1)return;if(q&&(!c.button||c.type!==\"click\")){g=p(this),g.context=this;for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!==\"click\"){i={},k=[],g[0]=f;for(d=0;d<q;d++)l=o[d],m=l.selector,i[m]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);k.length&&u.push({elem:f,matches:k})}}o.length>q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.isPropagationStopped();d++){j=u[d],c.currentTarget=j.elem;for(e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++){l=j.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleObj=l,h=((p.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation()))}}return t.postDispatch&&t.postDispatch.call(this,c),c.result},props:\"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:\"focusin\"},blur:{delegateType:\"focusout\"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d=\"on\"+b;a.detachEvent&&(typeof a[d]==\"undefined\"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else return new p.Event(a,b)},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,\"form\"))return!1;p.event.add(this,\"click._submit keypress._submit\",function(a){var c=a.target,d=p.nodeName(c,\"input\")||p.nodeName(c,\"button\")?c.form:b;d&&!p._data(d,\"_submit_attached\")&&(p.event.add(d,\"submit._submit\",function(a){a._submit_bubble=!0}),p._data(d,\"_submit_attached\",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate(\"submit\",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,\"form\"))return!1;p.event.remove(this,\"._submit\")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type===\"checkbox\"||this.type===\"radio\")p.event.add(this,\"propertychange._change\",function(a){a.originalEvent.propertyName===\"checked\"&&(this._just_changed=!0)}),p.event.add(this,\"click._change\",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate(\"change\",this,a,!0)});return!1}p.event.add(this,\"beforeactivate._change\",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,\"_change_attached\")&&(p.event.add(b,\"change._change\",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate(\"change\",this.parentNode,a,!0)}),p._data(b,\"_change_attached\",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!==\"radio\"&&b.type!==\"checkbox\")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,\"._change\"),V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:\"focusin\",blur:\"focusout\"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a==\"object\"){typeof c!=\"string\"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c==\"string\"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=ba;else if(!e)return this;return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+\".\"+e.namespace:e.origType,e.selector,e.handler),this;if(typeof a==\"object\"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c==\"function\")d=c,c=b;return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||\"**\",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,\"**\"):this.off(b,a||\"**\",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,\"lastToggle\"+a.guid)||0)%d;return p._data(this,\"lastToggle\"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bd(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)Z(a,b[e],c,d)}function be(a,b,c,d,e,f){var g,h=$.setFilters[b.toLowerCase()];return h||Z.error(b),(a||!(g=e))&&bd(a||\"*\",d,g=[],e),g.length>0?h(g,c,f):[]}function bf(a,c,d,e,f){var g,h,i,j,k,l,m,n,p=0,q=f.length,s=L.POS,t=new RegExp(\"^\"+s.source+\"(?!\"+r+\")\",\"i\"),u=function(){var a=1,c=arguments.length-2;for(;a<c;a++)arguments[a]===b&&(g[a]=b)};for(;p<q;p++){s.exec(\"\"),a=f[p],j=[],i=0,k=e;while(g=s.exec(a)){n=s.lastIndex=g.index+g[0].length;if(n>i){m=a.slice(i,g.index),i=n,l=[c],B.test(m)&&(k&&(l=k),k=e);if(h=H.test(m))m=m.slice(0,-5).replace(B,\"$&*\");g.length>1&&g[0].replace(t,u),k=be(m,g[1],g[2],l,k,h)}}k?(j=j.concat(k),(m=a.slice(i))&&m!==\")\"?B.test(m)?bd(m,j,d,e):Z(m,c,d,e?e.concat(k):k):o.apply(d,j)):Z(a,c,d,e)}return q===1?d:Z.uniqueSort(d)}function bg(a,b,c){var d,e,f,g=[],i=0,j=D.exec(a),k=!j.pop()&&!j.pop(),l=k&&a.match(C)||[\"\"],m=$.preFilter,n=$.filter,o=!c&&b!==h;for(;(e=l[i])!=null&&k;i++){g.push(d=[]),o&&(e=\" \"+e);while(e){k=!1;if(j=B.exec(e))e=e.slice(j[0].length),k=d.push({part:j.pop().replace(A,\" \"),captures:j});for(f in n)(j=L[f].exec(e))&&(!m[f]||(j=m[f](j,b,c)))&&(e=e.slice(j.shift().length),k=d.push({part:f,captures:j}));if(!k)break}}return k||Z.error(a),g}function bh(a,b,e){var f=b.dir,g=m++;return a||(a=function(a){return a===e}),b.first?function(b,c){while(b=b[f])if(b.nodeType===1)return a(b,c)&&b}:function(b,e){var h,i=g+\".\"+d,j=i+\".\"+c;while(b=b[f])if(b.nodeType===1){if((h=b[q])===j)return b.sizset;if(typeof h==\"string\"&&h.indexOf(i)===0){if(b.sizset)return b}else{b[q]=j;if(a(b,e))return b.sizset=!0,b;b.sizset=!1}}}}function bi(a,b){return a?function(c,d){var e=b(c,d);return e&&a(e===!0?c:e,d)}:b}function bj(a,b,c){var d,e,f=0;for(;d=a[f];f++)$.relative[d.part]?e=bh(e,$.relative[d.part],b):(d.captures.push(b,c),e=bi(e,$.filter[d.part].apply(null,d.captures)));return e}function bk(a){return function(b,c){var d,e=0;for(;d=a[e];e++)if(d(b,c))return!0;return!1}}var c,d,e,f,g,h=a.document,i=h.documentElement,j=\"undefined\",k=!1,l=!0,m=0,n=[].slice,o=[].push,q=(\"sizcache\"+Math.random()).replace(\".\",\"\"),r=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",s=\"(?:\\\\\\\\.|[-\\\\w]|[^\\\\x00-\\\\xa0])+\",t=s.replace(\"w\",\"w#\"),u=\"([*^$|!~]?=)\",v=\"\\\\[\"+r+\"*(\"+s+\")\"+r+\"*(?:\"+u+r+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+t+\")|)|)\"+r+\"*\\\\]\",w=\":(\"+s+\")(?:\\\\((?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\2|((?:[^,]|\\\\\\\\,|(?:,(?=[^\\\\[]*\\\\]))|(?:,(?=[^\\\\(]*\\\\))))*))\\\\)|)\",x=\":(nth|eq|gt|lt|first|last|even|odd)(?:\\\\((\\\\d*)\\\\)|)(?=[^-]|$)\",y=r+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+r+\"*\",z=\"(?=[^\\\\x20\\\\t\\\\r\\\\n\\\\f])(?:\\\\\\\\.|\"+v+\"|\"+w.replace(2,7)+\"|[^\\\\\\\\(),])+\",A=new RegExp(\"^\"+r+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+r+\"+$\",\"g\"),B=new RegExp(\"^\"+y),C=new RegExp(z+\"?(?=\"+r+\"*,|$)\",\"g\"),D=new RegExp(\"^(?:(?!,)(?:(?:^|,)\"+r+\"*\"+z+\")*?|\"+r+\"*(.*?))(\\\\)|$)\"),E=new RegExp(z.slice(19,-6)+\"\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])+|\"+y,\"g\"),F=/^(?:#([\\w\\-]+)|(\\w+)|\\.([\\w\\-]+))$/,G=/[\\x20\\t\\r\\n\\f]*[+~]/,H=/:not\\($/,I=/h\\d/i,J=/input|select|textarea|button/i,K=/\\\\(?!\\\\)/g,L={ID:new RegExp(\"^#(\"+s+\")\"),CLASS:new RegExp(\"^\\\\.(\"+s+\")\"),NAME:new RegExp(\"^\\\\[name=['\\\"]?(\"+s+\")['\\\"]?\\\\]\"),TAG:new RegExp(\"^(\"+s.replace(\"[-\",\"[-\\\\*\")+\")\"),ATTR:new RegExp(\"^\"+v),PSEUDO:new RegExp(\"^\"+w),CHILD:new RegExp(\"^:(only|nth|last|first)-child(?:\\\\(\"+r+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+r+\"*(?:([+-]|)\"+r+\"*(\\\\d+)|))\"+r+\"*\\\\)|)\",\"i\"),POS:new RegExp(x,\"ig\"),needsContext:new RegExp(\"^\"+r+\"*[>+~]|\"+x,\"i\")},M={},N=[],O={},P=[],Q=function(a){return a.sizzleFilter=!0,a},R=function(a){return function(b){return b.nodeName.toLowerCase()===\"input\"&&b.type===a}},S=function(a){return function(b){var c=b.nodeName.toLowerCase();return(c===\"input\"||c===\"button\")&&b.type===a}},T=function(a){var b=!1,c=h.createElement(\"div\");try{b=a(c)}catch(d){}return c=null,b},U=T(function(a){a.innerHTML=\"<select></select>\";var b=typeof a.lastChild.getAttribute(\"multiple\");return b!==\"boolean\"&&b!==\"string\"}),V=T(function(a){a.id=q+0,a.innerHTML=\"<a name='\"+q+\"'></a><div name='\"+q+\"'></div>\",i.insertBefore(a,i.firstChild);var b=h.getElementsByName&&h.getElementsByName(q).length===2+h.getElementsByName(q+0).length;return g=!h.getElementById(q),i.removeChild(a),b}),W=T(function(a){return a.appendChild(h.createComment(\"\")),a.getElementsByTagName(\"*\").length===0}),X=T(function(a){return a.innerHTML=\"<a href='#'></a>\",a.firstChild&&typeof a.firstChild.getAttribute!==j&&a.firstChild.getAttribute(\"href\")===\"#\"}),Y=T(function(a){return a.innerHTML=\"<div class='hidden e'></div><div class='hidden'></div>\",!a.getElementsByClassName||a.getElementsByClassName(\"e\").length===0?!1:(a.lastChild.className=\"e\",a.getElementsByClassName(\"e\").length!==1)}),Z=function(a,b,c,d){c=c||[],b=b||h;var e,f,g,i,j=b.nodeType;if(j!==1&&j!==9)return[];if(!a||typeof a!=\"string\")return c;g=ba(b);if(!g&&!d)if(e=F.exec(a))if(i=e[1]){if(j===9){f=b.getElementById(i);if(!f||!f.parentNode)return c;if(f.id===i)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(i))&&bb(b,f)&&f.id===i)return c.push(f),c}else{if(e[2])return o.apply(c,n.call(b.getElementsByTagName(a),0)),c;if((i=e[3])&&Y&&b.getElementsByClassName)return o.apply(c,n.call(b.getElementsByClassName(i),0)),c}return bm(a,b,c,d,g)},$=Z.selectors={cacheLength:50,match:L,order:[\"ID\",\"TAG\"],attrHandle:{},createPseudo:Q,find:{ID:g?function(a,b,c){if(typeof b.getElementById!==j&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==j&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==j&&e.getAttributeNode(\"id\").value===a?[e]:b:[]}},TAG:W?function(a,b){if(typeof b.getElementsByTagName!==j)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a===\"*\"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c}},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(K,\"\"),a[3]=(a[4]||a[5]||\"\").replace(K,\"\"),a[2]===\"~=\"&&(a[3]=\" \"+a[3]+\" \"),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]===\"nth\"?(a[2]||Z.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]===\"even\"||a[2]===\"odd\")),a[4]=+(a[6]+a[7]||a[2]===\"odd\")):a[2]&&Z.error(a[0]),a},PSEUDO:function(a){var b,c=a[4];return L.CHILD.test(a[0])?null:(c&&(b=D.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:g?function(a){return a=a.replace(K,\"\"),function(b){return b.getAttribute(\"id\")===a}}:function(a){return a=a.replace(K,\"\"),function(b){var c=typeof b.getAttributeNode!==j&&b.getAttributeNode(\"id\");return c&&c.value===a}},TAG:function(a){return a===\"*\"?function(){return!0}:(a=a.replace(K,\"\").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=M[a];return b||(b=M[a]=new RegExp(\"(^|\"+r+\")\"+a+\"(\"+r+\"|$)\"),N.push(a),N.length>$.cacheLength&&delete M[N.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==j&&a.getAttribute(\"class\")||\"\")}},ATTR:function(a,b,c){return b?function(d){var e=Z.attr(d,a),f=e+\"\";if(e==null)return b===\"!=\";switch(b){case\"=\":return f===c;case\"!=\":return f!==c;case\"^=\":return c&&f.indexOf(c)===0;case\"*=\":return c&&f.indexOf(c)>-1;case\"$=\":return c&&f.substr(f.length-c.length)===c;case\"~=\":return(\" \"+f+\" \").indexOf(c)>-1;case\"|=\":return f===c||f.substr(0,c.length+1)===c+\"-\"}}:function(b){return Z.attr(b,a)!=null}},CHILD:function(a,b,c,d){if(a===\"nth\"){var e=m++;return function(a){var b,f,g=0,h=a;if(c===1&&d===0)return!0;b=a.parentNode;if(b&&(b[q]!==e||!a.sizset)){for(h=b.firstChild;h;h=h.nextSibling)if(h.nodeType===1){h.sizset=++g;if(h===a)break}b[q]=e}return f=a.sizset-d,c===0?f===0:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case\"only\":case\"first\":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a===\"first\")return!0;c=b;case\"last\":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e=$.pseudos[a]||$.pseudos[a.toLowerCase()];return e||Z.error(\"unsupported pseudo: \"+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:Q(function(a,b,c){var d=bl(a.replace(A,\"$1\"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&!!a.checked||b===\"option\"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!$.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>\"@\"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},contains:Q(function(a){return function(b){return(b.textContent||b.innerText||bc(b)).indexOf(a)>-1}}),has:Q(function(a){return function(b){return Z(a,b).length>0}}),header:function(a){return I.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()===\"input\"&&(b=a.type)===\"text\"&&((c=a.getAttribute(\"type\"))==null||c.toLowerCase()===b)},radio:R(\"radio\"),checkbox:R(\"checkbox\"),file:R(\"file\"),password:R(\"password\"),image:R(\"image\"),submit:S(\"submit\"),reset:S(\"reset\"),button:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&a.type===\"button\"||b===\"button\"},input:function(a){return J.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){var d=[],e=c?1:0,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},odd:function(a,b,c){var d=[],e=c?0:1,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}};$.setFilters.nth=$.setFilters.eq,$.filters=$.pseudos,X||($.attrHandle={href:function(a){return a.getAttribute(\"href\",2)},type:function(a){return a.getAttribute(\"type\")}}),V&&($.order.push(\"NAME\"),$.find.NAME=function(a,b){if(typeof b.getElementsByName!==j)return b.getElementsByName(a)}),Y&&($.order.splice(1,0,\"CLASS\"),$.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!==j&&!c)return b.getElementsByClassName(a)});try{n.call(i.childNodes,0)[0].nodeType}catch(_){n=function(a){var b,c=[];for(;b=this[a];a++)c.push(b);return c}}var ba=Z.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!==\"HTML\":!1},bb=Z.contains=i.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:i.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bc=Z.getText=function(a){var b,c=\"\",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent==\"string\")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=bc(a)}else if(e===3||e===4)return a.nodeValue}else for(;b=a[d];d++)c+=bc(b);return c};Z.attr=function(a,b){var c,d=ba(a);return d||(b=b.toLowerCase()),$.attrHandle[b]?$.attrHandle[b](a):U||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]==\"boolean\"?a[b]?b:null:c.specified?c.value:null:null)},Z.error=function(a){throw new Error(\"Syntax error, unrecognized expression: \"+a)},[0,0].sort(function(){return l=0}),i.compareDocumentPosition?e=function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:(e=function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return f(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var l=0;l<c&&l<d;l++)if(e[l]!==g[l])return f(e[l],g[l]);return l===c?f(a,g[l],-1):f(e[l],b,1)},f=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),Z.uniqueSort=function(a){var b,c=1;if(e){k=l,a.sort(e);if(k)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1)}return a};var bl=Z.compile=function(a,b,c){var d,e,f,g=O[a];if(g&&g.context===b)return g;e=bg(a,b,c);for(f=0;d=e[f];f++)e[f]=bj(d,b,c);return g=O[a]=bk(e),g.context=b,g.runs=g.dirruns=0,P.push(a),P.length>$.cacheLength&&delete O[P.shift()],g};Z.matches=function(a,b){return Z(a,null,null,b)},Z.matchesSelector=function(a,b){return Z(b,null,null,[a]).length>0};var bm=function(a,b,e,f,g){a=a.replace(A,\"$1\");var h,i,j,k,l,m,p,q,r,s=a.match(C),t=a.match(E),u=b.nodeType;if(L.POS.test(a))return bf(a,b,e,f,s);if(f)h=n.call(f,0);else if(s&&s.length===1){if(t.length>1&&u===9&&!g&&(s=L.ID.exec(t[0]))){b=$.find.ID(s[1],b,g)[0];if(!b)return e;a=a.slice(t.shift().length)}q=(s=G.exec(t[0]))&&!s.index&&b.parentNode||b,r=t.pop(),m=r.split(\":not\")[0];for(j=0,k=$.order.length;j<k;j++){p=$.order[j];if(s=L[p].exec(m)){h=$.find[p]((s[1]||\"\").replace(K,\"\"),q,g);if(h==null)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(L[p],\"\"),a||o.apply(e,n.call(h,0)));break}}}if(a){i=bl(a,b,g),d=i.dirruns++,h==null&&(h=$.find.TAG(\"*\",G.test(a)&&b.parentNode||b));for(j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l)}return e};h.querySelectorAll&&function(){var a,b=bm,c=/'|\\\\/g,d=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,e=[],f=[\":active\"],g=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;T(function(a){a.innerHTML=\"<select><option selected></option></select>\",a.querySelectorAll(\"[selected]\").length||e.push(\"\\\\[\"+r+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),a.querySelectorAll(\":checked\").length||e.push(\":checked\")}),T(function(a){a.innerHTML=\"<p test=''></p>\",a.querySelectorAll(\"[test^='']\").length&&e.push(\"[*^$]=\"+r+\"*(?:\\\"\\\"|'')\"),a.innerHTML=\"<input type='hidden'>\",a.querySelectorAll(\":enabled\").length||e.push(\":enabled\",\":disabled\")}),e=e.length&&new RegExp(e.join(\"|\")),bm=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a)))if(d.nodeType===9)try{return o.apply(f,n.call(d.querySelectorAll(a),0)),f}catch(i){}else if(d.nodeType===1&&d.nodeName.toLowerCase()!==\"object\"){var j=d.getAttribute(\"id\"),k=j||q,l=G.test(a)&&d.parentNode||d;j?k=k.replace(c,\"\\\\$&\"):d.setAttribute(\"id\",k);try{return o.apply(f,n.call(l.querySelectorAll(a.replace(C,\"[id='\"+k+\"'] $&\")),0)),f}catch(i){}finally{j||d.removeAttribute(\"id\")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,\"div\");try{g.call(b,\"[test!='']:sizzle\"),f.push($.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join(\"|\")),Z.matchesSelector=function(b,c){c=c.replace(d,\"='$1']\");if(!ba(b)&&!f.test(c)&&(!e||!e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&b.document.nodeType!==11)return h}catch(i){}return Z(c,null,null,[b]).length>0})}(),Z.attr=p.attr,p.find=Z,p.expr=Z.selectors,p.expr[\":\"]=p.expr.pseudos,p.unique=Z.uniqueSort,p.text=Z.getText,p.isXMLDoc=Z.isXML,p.contains=Z.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\\[\\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!=\"string\")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushStack(\"\",\"find\",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(bj(this,a,!1),\"not\",a)},filter:function(a){return this.pushStack(bj(this,a,!0),\"filter\",a)},is:function(a){return!!a&&(typeof a==\"string\"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!=\"string\"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,\"closest\",a)},index:function(a){return a?typeof a==\"string\"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a==\"string\"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,\"parentNode\")},parentsUntil:function(a,b,c){return p.dir(a,\"parentNode\",c)},next:function(a){return bi(a,\"nextSibling\")},prev:function(a){return bi(a,\"previousSibling\")},nextAll:function(a){return p.dir(a,\"nextSibling\")},prevAll:function(a){return p.dir(a,\"previousSibling\")},nextUntil:function(a,b,c){return p.dir(a,\"nextSibling\",c)},prevUntil:function(a,b,c){return p.dir(a,\"previousSibling\",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,\"iframe\")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d==\"string\"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(\",\"))}}),p.extend({filter:function(a,b,c){return c&&(a=\":not(\"+a+\")\"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",bm=/ jQuery\\d+=\"(?:null|\\d+)\"/g,bn=/^\\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bp=/<([\\w:]+)/,bq=/<tbody/i,br=/<|&#?\\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp(\"<(?:\"+bl+\")[\\\\s/>]\",\"i\"),bv=/^(?:checkbox|radio)$/,bw=/checked\\s*(?:[^=]|=\\s*.checked.)/i,bx=/\\/(java|ecma)script/i,by=/^\\s*<!(?:\\[CDATA\\[|\\-\\-)|[\\]\\-]{2}>\\s*$/g,bz={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],area:[1,\"<map>\",\"</map>\"],_default:[0,\"\",\"\"]},bA=bk(e),bB=bA.appendChild(e.createElement(\"div\"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,\"X<div>\",\"</div>\"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,\"body\")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),\"before\",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),\"after\",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName(\"*\")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName(\"*\"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,\"\"):b;if(typeof a==\"string\"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||[\"\",\"\"])[1].toLowerCase()]){a=a.replace(bo,\"<$1></$2>\");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName(\"*\")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),\"replaceWith\",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!=\"string\"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j==\"string\"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,\"tr\");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodeName(this[i],\"table\")?bC(this[i],\"tbody\"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0}):p.error(\"no ajax\"):p.globalEval((b.text||b.textContent||b.innerHTML||\"\").replace(by,\"\")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=(c[0]||c).ownerDocument||c[0]||c,typeof c.createDocumentFragment==\"undefined\"&&(c=e),a.length===1&&typeof i==\"string\"&&i.length<512&&c===e&&i.charAt(0)===\"<\"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test(\"<\"+a.nodeName+\">\")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=0,t=[];if(!b||typeof b.createDocumentFragment==\"undefined\")b=e;for(g=b===e&&bA;(h=a[s])!=null;s++){typeof h==\"number\"&&(h+=\"\");if(!h)continue;if(typeof h==\"string\")if(!br.test(h))h=b.createTextNode(h);else{g=g||bk(b),l=l||g.appendChild(b.createElement(\"div\")),h=h.replace(bo,\"<$1></$2>\"),i=(bp.exec(h)||[\"\",\"\"])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i===\"table\"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]===\"<table>\"&&!m?l.childNodes:[];for(f=n.length-1;f>=0;--f)p.nodeName(n[f],\"tbody\")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l=g.lastChild}h.nodeType?t.push(h):t=p.merge(t,h)}l&&(g.removeChild(l),h=l=g=null);if(!p.support.appendChecked)for(s=0;(h=t[s])!=null;s++)p.nodeName(h,\"input\")?bG(h):typeof h.getElementsByTagName!=\"undefined\"&&p.grep(h.getElementsByTagName(\"input\"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(s=0;(h=t[s])!=null;s++)if(!p.nodeName(h,\"script\")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!=\"undefined\"&&(r=p.grep(p.merge([],h.getElementsByTagName(\"script\")),q),t.splice.apply(t,[s+1,0].concat(r)),s+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \\/]([\\w.]+)/.exec(a)||/(webkit)[ \\/]([\\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(a)||/(msie) ([\\w.]+)/.exec(a)||a.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(a)||[];return{browser:b[1]||\"\",version:b[2]||\"0\"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\\([^)]*\\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^margin/,bO=new RegExp(\"^(\"+q+\")(.*)$\",\"i\"),bP=new RegExp(\"^(\"+q+\")(?!px)[a-z%]+$\",\"i\"),bQ=new RegExp(\"^([-+])=(\"+q+\")\",\"i\"),bR={},bS={position:\"absolute\",visibility:\"hidden\",display:\"block\"},bT={letterSpacing:0,fontWeight:400,lineHeight:1},bU=[\"Top\",\"Right\",\"Bottom\",\"Left\"],bV=[\"Webkit\",\"O\",\"Moz\",\"ms\"],bW=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return bZ(this,!0)},hide:function(){return bZ(this)},toggle:function(a,b){var c=typeof a==\"boolean\";return p.isFunction(a)&&p.isFunction(b)?bW.apply(this,arguments):this.each(function(){(c?a:bY(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,\"opacity\");return c===\"\"?\"1\":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":p.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bX(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&\"get\"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g===\"string\"&&(f=bQ.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g=\"number\");if(d==null||g===\"number\"&&isNaN(d))return;g===\"number\"&&!p.cssNumber[i]&&(d+=\"px\");if(!h||!(\"set\"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bX(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&\"get\"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f===\"normal\"&&c in bT&&(f=bT[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(c=g[b],c===\"\"&&!p.contains(a.ownerDocument.documentElement,a)&&(c=p.style(a,b)),bP.test(c)&&bN.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bP.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b===\"fontSize\"?\"1em\":e,e=f.pixelLeft+\"px\",f.left=c,d&&(a.runtimeStyle.left=d)),e===\"\"?\"auto\":e}),p.each([\"height\",\"width\"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0||bH(a,\"display\")!==\"none\"?ca(a,b,d):p.swap(a,bS,function(){return ca(a,b,d)})},set:function(a,c,d){return b$(a,c,d?b_(a,b,d,p.support.boxSizing&&p.css(a,\"boxSizing\")===\"border-box\"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":b?\"1\":\"\"},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?\"alpha(opacity=\"+b*100+\")\":\"\",f=d&&d.filter||c.filter||\"\";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,\"\"))===\"\"&&c.removeAttribute){c.removeAttribute(\"filter\");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+\" \"+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:\"inline-block\"},function(){if(b)return bH(a,\"marginRight\")})}}),!p.support.pixelPosition&&p.fn.position&&p.each([\"top\",\"left\"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bP.test(d)?p(a).position()[b]+\"px\":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,\"display\"))===\"none\"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:\"\",padding:\"\",border:\"Width\"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c==\"string\"?c.split(\" \"):[c],f={};for(d=0;d<4;d++)f[a+bU[d]+b]=e[d]||e[d-2]||e[0];return f}},bN.test(a)||(p.cssHooks[a+b].set=b$)});var cc=/%20/g,cd=/\\[\\]$/,ce=/\\r?\\n/g,cf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,cg=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cg.test(this.nodeName)||cf.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(ce,\"\\r\\n\")}}):{name:b.name,value:c.replace(ce,\"\\r\\n\")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?\"\":b,e[e.length]=encodeURIComponent(a)+\"=\"+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)ch(d,a[d],c,f);return e.join(\"&\").replace(cc,\"+\")};var ci,cj,ck=/#.*$/,cl=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg,cm=/^(?:about|app|app\\-storage|.+\\-extension|file|res|widget):$/,cn=/^(?:GET|HEAD)$/,co=/^\\/\\//,cp=/\\?/,cq=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,cr=/([?&])_=[^&]*/,cs=/^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,ct=p.fn.load,cu={},cv={},cw=[\"*/\"]+[\"*\"];try{ci=f.href}catch(cx){ci=e.createElement(\"a\"),ci.href=\"\",ci=ci.href}cj=cs.exec(ci.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!=\"string\"&&ct)return ct.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(\" \");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):typeof c==\"object\"&&(f=\"POST\"),p.ajax({url:a,type:f,dataType:\"html\",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p(\"<div>\").append(a.replace(cq,\"\")).find(e):a)}),this},p.each(\"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend\".split(\" \"),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each([\"get\",\"post\"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,\"script\")},getJSON:function(a,b,c){return p.get(a,b,c,\"json\")},ajaxSetup:function(a,b){return b?cA(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cA(a,b),a},ajaxSettings:{url:ci,isLocal:cm.test(cj[1]),global:!0,type:\"GET\",contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",processData:!0,async:!0,accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",\"*\":cw},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":a.String,\"text html\":!0,\"text json\":p.parseJSON,\"text xml\":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cy(cu),ajaxTransport:cy(cv),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||\"\",x.readyState=a>0?4:0,f&&(u=cB(l,x,f));if(a>=200&&a<300||a===304)l.ifModified&&(w=x.getResponseHeader(\"Last-Modified\"),w&&(p.lastModified[d]=w),w=x.getResponseHeader(\"Etag\"),w&&(p.etag[d]=w)),a===304?(y=\"notmodified\",k=!0):(k=cC(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y=\"error\",a<0&&(a=0)}x.status=a,x.statusText=\"\"+(c||y),k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger(\"ajax\"+(k?\"Success\":\"Error\"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger(\"ajaxComplete\",[x,l]),--p.active||p.event.trigger(\"ajaxStop\"))}typeof a==\"object\"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks(\"once memory\"),r=l.statusCode||{},t={},u={},v=0,w=\"canceled\",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cl.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this},l.url=((a||l.url)+\"\").replace(ck,\"\").replace(co,cj[1]+\"//\"),l.dataTypes=p.trim(l.dataType||\"*\").toLowerCase().split(s),l.crossDomain==null&&(i=cs.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==cj[1]&&i[2]==cj[2]&&(i[3]||(i[1]===\"http:\"?80:443))==(cj[3]||(cj[1]===\"http:\"?80:443)))),l.data&&l.processData&&typeof l.data!=\"string\"&&(l.data=p.param(l.data,l.traditional)),cz(cu,l,c,x);if(v===2)return x;j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!cn.test(l.type),j&&p.active++===0&&p.event.trigger(\"ajaxStart\");if(!l.hasContent){l.data&&(l.url+=(cp.test(l.url)?\"&\":\"?\")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cr,\"$1_=\"+z);l.url=A+(A===l.url?(cp.test(l.url)?\"&\":\"?\")+\"_=\"+z:\"\")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader(\"Content-Type\",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader(\"If-Modified-Since\",p.lastModified[d]),p.etag[d]&&x.setRequestHeader(\"If-None-Match\",p.etag[d])),x.setRequestHeader(\"Accept\",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!==\"*\"?\", \"+cw+\"; q=0.01\":\"\"):l.accepts[\"*\"]);for(k in l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w=\"abort\";for(k in{success:1,error:1,complete:1})x[k](l[k]);g=cz(cv,l,c,x);if(!g)y(-1,\"No Transport\");else{x.readyState=1,j&&n.trigger(\"ajaxSend\",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort(\"timeout\")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,B);else throw B}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cD=[],cE=/\\?/,cF=/(=)\\?(?=&|$)|\\?\\?/,cG=p.now();p.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var a=cD.pop()||p.expando+\"_\"+cG++;return this[a]=!0,a}}),p.ajaxPrefilter(\"json jsonp\",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cF.test(j),m=k&&!l&&typeof i==\"string\"&&!(c.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&cF.test(i);if(c.dataTypes[0]===\"jsonp\"||l||m)return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cF,\"$1\"+f):m?c.data=i.replace(cF,\"$1\"+f):k&&(c.url+=(cE.test(j)?\"&\":\"?\")+c.jsonp+\"=\"+f),c.converters[\"script json\"]=function(){return h||p.error(f+\" was not called\"),h[0]},c.dataTypes[0]=\"json\",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cD.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),\"script\"}),p.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/javascript|ecmascript/},converters:{\"text script\":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter(\"script\",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type=\"GET\",a.global=!1)}),p.ajaxTransport(\"script\",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName(\"head\")[0]||e.documentElement;return{send:function(f,g){c=e.createElement(\"script\"),c.async=\"async\",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,\"success\")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cH,cI=a.ActiveXObject?function(){for(var a in cH)cH[a](0,1)}:!1,cJ=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cK()||cL()}:cK,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&\"withCredentials\"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e[\"X-Requested-With\"]&&(e[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cI&&delete cH[g]);if(e)i.readyState!==4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=\"\"}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cJ,cI&&(cH||(cH={},p(a).unload(cI)),cH[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cM,cN,cO=/^(?:toggle|show|hide)$/,cP=new RegExp(\"^(?:([-+])=|)(\"+q+\")([a-z%]*)$\",\"i\"),cQ=/queueHooks$/,cR=[cX],cS={\"*\":[function(a,b){var c,d,e,f=this.createTween(a,b),g=cP.exec(b),h=f.cur(),i=+h||0,j=1;if(g){c=+g[2],d=g[3]||(p.cssNumber[a]?\"\":\"px\");if(d!==\"px\"&&i){i=p.css(f.elem,a,!0)||c||1;do e=j=j||\".5\",i=i/j,p.style(f.elem,a,i+d),j=f.cur()/h;while(j!==1&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};p.Animation=p.extend(cV,{tweener:function(a,b){p.isFunction(a)?(b=a,a=[\"*\"]):a=a.split(\" \");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],cS[c]=cS[c]||[],cS[c].unshift(b)},prefilter:function(a,b){b?cR.unshift(a):cR.push(a)}}),p.Tween=cY,cY.prototype={constructor:cY,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||\"swing\",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?\"\":\"px\")},cur:function(){var a=cY.propHooks[this.prop];return a&&a.get?a.get(this):cY.propHooks._default.get(this)},run:function(a){var b,c=cY.propHooks[this.prop];return this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cY.propHooks._default.set(this),this}},cY.prototype.init.prototype=cY.prototype,cY.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,\"\"),!b||b===\"auto\"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cY.propHooks.scrollTop=cY.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each([\"toggle\",\"show\",\"hide\"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d==\"boolean\"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(cZ(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bY).css(\"opacity\",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cV(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!=\"string\"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||\"fx\",[]),this.each(function(){var b=!0,c=a!=null&&a+\"queueHooks\",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cQ.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:cZ(\"show\"),slideUp:cZ(\"hide\"),slideToggle:cZ(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a==\"object\"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration==\"number\"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue=\"fx\";return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cY.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cN&&(cN=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cN),cN=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c$=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j,k,l,m=this[0],n=m&&m.ownerDocument;if(!n)return;return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=c_(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,\"marginTop\"))||0,c+=parseFloat(p.css(a,\"marginLeft\"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,\"position\");d===\"static\"&&(a.style.position=\"relative\");var e=p(a),f=e.offset(),g=p.css(a,\"top\"),h=p.css(a,\"left\"),i=(d===\"absolute\"||d===\"fixed\")&&p.inArray(\"auto\",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),\"using\"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c$.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,\"marginTop\"))||0,c.left-=parseFloat(p.css(a,\"marginLeft\"))||0,d.top+=parseFloat(p.css(b[0],\"borderTopWidth\"))||0,d.left+=parseFloat(p.css(b[0],\"borderLeftWidth\"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c$.test(a.nodeName)&&p.css(a,\"position\")===\"static\")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=c_(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:\"height\",Width:\"width\"},function(a,c){p.each({padding:\"inner\"+a,content:c,\"\":\"outer\"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!=\"boolean\"),h=d||(e===!0||f===!0?\"margin\":\"border\");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement[\"client\"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body[\"scroll\"+a],f[\"scroll\"+a],c.body[\"offset\"+a],f[\"offset\"+a],f[\"client\"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g)}})}),a.jQuery=a.$=p,typeof define==\"function\"&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return p})})(window);","date":"2020-03-12T13:55:48.656Z","updated":"2020-03-12T13:55:48.656Z","path":"assets/demo/jquery.js","layout":"false","title":"","comments":1,"_id":"ck7otizrv00167gui14lo48xj","content":"/*! jQuery v@1.8.0 jquery.com | jquery.org/license */\n(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e=\"data-\"+c.replace(I,\"-$1\").toLowerCase();d=a.getAttribute(e);if(typeof d==\"string\"){try{d=d===\"true\"?!0:d===\"false\"?!1:d===\"null\"?null:+d+\"\"===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b===\"data\"&&p.isEmptyObject(a[b]))continue;if(b!==\"toJSON\")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b==\"string\"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split(\"|\"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function be(a,b){var c;if(b.nodetype!=\"=1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c===\"object\"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c===\"input\"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c===\"option\"?b.selected=a.defaultSelected:c===\"input\"||c===\"textarea\"?b.defaultValue=a.defaultValue:c===\"script\"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function\" bf(a){return typeof a.getelementsbytagname!=\"undefined\" ?a.getelementsbytagname(\"*\"):typeof a.queryselectorall!=\"undefined\" ?a.queryselectorall(\"*\"):[]}function bg(a){bv.test(a.type)&&(a.defaultchecked=\"a.checked)}function\" bx(a,b){if(b in a)return b;var c=\"b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bV.length;while(e--){b=bV[e]+c;if(b\" b}return d}function by(a,b){return a=\"b||a,p.css(a,\"display\")===\"none\"||!p.contains(a.ownerDocument,a)}function\" bz(a,b){var c,d,e=\"[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,\"olddisplay\"),b?(!e[f]&&c.style.display===\"none\"&&(c.style.display=\"\"),c.style.display===\"\"&&bY(c)&&(e[f]=p._data(c,\"olddisplay\",cb(c.nodeName)))):(d=bH(c,\"display\"),!e[f]&&d!==\"none\"&&p._data(c,\"olddisplay\",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display===\"none\"||c.style.display===\"\")c.style.display=b?e[f]||\"\":\"none\"}return\" a}function b$(a,b,c){var d=\"bO.exec(b);return\" d?math.max(0,d[1]-(c||0))+(d[2]||\"px\"):b}function b_(a,b,c,d){var e=\"c===(d?\"border\":\"content\")?4:b===\"width\"?1:0,f=0;for(;e<4;e+=2)c===\"margin\"&&(f+=p.css(a,c+bU[e],!0)),d?(c===\"content\"&&(f-=parseFloat(bH(a,\"padding\"+bU[e]))||0),c!==\"margin\"&&(f-=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0)):(f+=parseFloat(bH(a,\"padding\"+bU[e]))||0,c!==\"padding\"&&(f+=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0));return\" f}function ca(a,b,c){var d;e=\"f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return\" d+b_(a,b,c||(f?\"border\":\"content\"),e)+\"px\"}function cb(a){if(br[a])return br[a];var b=\"p(\"<\"+a+\"\">\").appendTo(e.body),c=b.css(\"display\");b.remove();if(c===\"none\"||c===\"\"){bI=e.body.appendChild(bI||p.extend(e.createElement(\"iframe\"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write(\"<!doctype html><html><body>\"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,\"display\"),e.body.removeChild(bI)}return bR[a]=c,c}function ch(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||cd.test(a)?d(a,e):ch(a+\"[\"+(typeof e==\"object\"?b:\"\")+\"]\",e,c,d)});else if(!c&&p.type(b)===\"object\")for(e in b)ch(a+\"[\"+e+\"]\",b[e],c,d);else d(a,b)}function cy(a){return function(b,c){typeof b!=\"string\"&&(c=b,b=\"*\");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f= ^\\+ .test(d),f&&(d=\"d.substr(1)||\"*\"),e=a[d]=a[d]||[],e[f?\"unshift\":\"push\"](c)}}function\" cz(a,c,d,e,f,g){f=\"f||c.dataTypes[0],g=g||{},g[f]=!0;var\" h,i=\"a[f],j=0,k=i?i.length:0,l=a===cu;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof\" h=\"=\"string\"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cz(a,c,d,e,h,g)));return(l||!h)&&!g[\"*\"]&&(h=cz(a,c,d,e,\"*\",g)),h}function\" ca(a,c){var d,e,f=\"p.ajaxSettings.flatOptions||{};for(d\" in c)c[d]!=\"=b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function\" cb(a,c,d){var e,f,g,h,i=\"a.contents,j=a.dataTypes,k=a.responseFields;for(f\" k)f d&&(c[k[f]]=\"d[f]);while(j[0]===\"*\")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader(\"content-type\"));if(e)for(f\" i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=\"j[0];else{for(f\" d){if(!j[0]||a.converters[f+\" \"+j[0]]){g=\"f;break}h||(h=f)}g=g||h}if(g)return\" g!=\"=j[0]&&j.unshift(g),d[g]}function\" cc(a,b){var c,d,e,f,g=\"a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c\" a.converters)i[c.tolowercase()]=\"a.converters[c];for(;e=g[++j];)if(e!==\"*\"){if(h!==\"*\"&&h!==e){c=i[h+\"\" \"+e]||i[\"* \"+e];if(!c)for(d i){f=\"d.split(\"\" \");if(f[1]=\"==e){c=i[h+\"\" \"+f[0]]||i[\"* \"+f[0]];if(c){c=\"==!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a[\"throws\"])b=c(b);else\" try{b=\"c(b)}catch(k){return{state:\"parsererror\",error:c?k:\"No\" conversion from \"+h+\" to \"+e}}}h=\"e}return{state:\"success\",data:b}}function\" ck(){try{return new a.xmlhttprequest}catch(b){}}function cl(){try{return a.activexobject(\"microsoft.xmlhttp\")}catch(b){}}function ct(){return settimeout(function(){cm=\"b},0),cM=p.now()}function\" cu(a,b){p.each(b,function(b,c){var d=\"(cS[b]||[]).concat(cS[\"*\"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function\" cv(a,b,c){var d,e=\"0,f=0,g=cR.length,h=p.Deferred().always(function(){delete\" i.elem}),i=\"function(){var\" b=\"cM||cT(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return\" h.notifywith(a,[j,d,c]),d<1&&f?c:(h.resolvewith(a,[j]),!1)},j=\"h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cM||cT(),duration:c.duration,tweens:[],createTween:function(b,c,d){var\" e=\"p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return\" j.tweens.push(e),e},stop:function(b){var c=\"0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return\" b?h.resolvewith(a,[j,b]):h.rejectwith(a,[j,b]),this}}),k=\"j.props;cW(k,j.opts.specialEasing);for(;e<g;e++){d=cR[e].call(j,a,k,j.opts);if(d)return\" d}return cu(j,k),p.isfunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cw(a,b){var c,d,e,f,g;for(c a){d=\"p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete\" a[c]),g=\"p.cssHooks[d];if(g&&\"expand\"in\" g){f=\"g.expand(f),delete\" a[d];for(c f)c a||(a[c]=\"f[c],b[c]=e)}else\" b[d]=\"e}}function\" cx(a,b,c){var d,e,f,g,h,i,j,k,l=\"this,m=a.style,n={},o=[],q=a.nodeType&&bY(a);c.queue||(j=p._queueHooks(a,\"fx\"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,\"fx\").length||j.empty.fire()})})),a.nodeType===1&&(\"height\"in\" b||\"width\"in b)&&(c.overflow=\"[m.overflow,m.overflowX,m.overflowY],p.css(a,\"display\")===\"inline\"&&p.css(a,\"float\")===\"none\"&&(!p.support.inlineBlockNeedsLayout||cb(a.nodeName)===\"inline\"?m.display=\"inline-block\":m.zoom=1)),c.overflow&&(m.overflow=\"hidden\",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d\" b){f=\"b[d];if(cO.exec(f)){delete\" b[d];if(f=\"==(q?\"hide\":\"show\"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,\"fxshow\")||p._data(a,\"fxshow\",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var\" b;p.removedata(a,\"fxshow\",!0);for(b n)p.style(a,b,n[b])});for(d=\"0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e\" h||(h[e]=\"i.start,q&&(i.end=i.start,i.start=e===\"width\"||e===\"height\"?1:0))}}function\" cy(a,b,c,d,e){return cy.prototype.init(a,b,c,d,e)}function cz(a,b){var c,d=\"{height:a},e=0;for(;e<4;e+=2-b)c=bU[e],d[\"margin\"+c]=d[\"padding\"+c]=a;return\" b&&(d.opacity=\"d.width=a),d}function\" c_(a){return p.iswindow(a)?a:a.nodetype=\"==9?a.defaultView||a.parentWindow:!1}var\" c,d,e=\"a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return\" p.fn.init(a,b,c)},q=\"/[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source,r=/\\S/,s=/\\s+/,t=r.test(\" \")?/^[\\s\\xA0]+|[\\s\\xA0]+$/g:/^\\s+|\\s+$/g,u=/^(?:[^#<]*(<[\\w\\W]+\">)[^>]*$|#([\\w\\-]*)$)/,v=/^<(\\w+)\\s*\\ ?>(?:<\\ \\1>|)$/,w=/^[\\],:{}\\s]*$/,x=/(?:^|:|,)(?:\\s*\\[)+/g,y=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,z=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/g,A=/^-ms-/,B=/-([\\da-z])/gi,C=function(a,b){return(b+\"\").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener(\"DOMContentLoaded\",D,!1),p.ready()):e.readyState===\"complete\"&&(e.detachEvent(\"onreadystatechange\",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a==\"string\"){a.charAt(0)===\"<\"&&a.charat(a.length-1)===\">\"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:\"\",jquery:\"1.8.0\",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushstack:function(a,b,c){var d=\"p.merge(this.constructor(),a);return\" d.prevobject=\"this,d.context=this.context,b===\"find\"?d.selector=this.selector+(this.selector?\"\" \":\"\")+c:b&&(d.selector=\"this.selector+\".\"+b+\"(\"+c+\")\"),d},each:function(a,b){return\" p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=\"+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return\" this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushstack(k.apply(this,arguments),\"slice\",k.call(arguments).join(\",\"))},map:function(a){return this.pushstack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevobject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=\"p.fn,p.extend=p.fn.extend=function(){var\" a,c,d,e,f,g,h=\"arguments[0]||{},i=1,j=arguments.length,k=!1;typeof\" h=\"=\"boolean\"&&(k=h,h=arguments[1]||{},i=2),typeof\" h!=\"object\" &&!p.isfunction(h)&&(h=\"{}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c\" in a){d=\"h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return\" h},p.extend({noconflict:function(b){return a.$=\"==p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return\" settimeout(p.ready,1);p.isready=\"!0;if(a!==!0&&--p.readyWait\">0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger(\"ready\").off(\"ready\")},isFunction:function(a){return p.type(a)===\"function\"},isArray:Array.isArray||function(a){return p.type(a)===\"array\"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||\"object\"},isPlainObject:function(a){if(!a||p.type(a)!==\"object\"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,\"constructor\")&&!n.call(a.constructor.prototype,\"isPrototypeOf\"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!=\"string\"?null:(typeof b==\"boolean\"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!=\"string\")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,\"@\").replace(z,\"]\").replace(x,\"\")))return(new Function(\"return \"+b))();p.error(\"Invalid JSON: \"+b)},parseXML:function(c){var d,e;if(!c||typeof c!=\"string\")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,\"text/xml\")):(d=new ActiveXObject(\"Microsoft.XMLDOM\"),d.async=\"false\",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName(\"parsererror\").length)&&p.error(\"Invalid XML: \"+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,\"ms-\").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])=\"==!1)break}else\" for(;f<g;)if(c.call(a[f],f,a[f++])=\"==!1)break;return\" a},trim:o?function(a){return a=\"=null?\"\":o.call(a)}:function(a){return\" c,d=\"b||[];return\" a!=\"null&&(c=p.type(a),a.length==null||c===\"string\"||c===\"function\"||c===\"regexp\"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var\" d;if(b){if(l)return l.call(b,a,c);d=\"b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c\" b&&b[c]=\"==a)return\" c}return-1},merge:function(a,c){var d=\"c.length,e=a.length,f=0;if(typeof\" while(c[f]!=\"=b)a[e++]=c[f++];return\" a.length=\"e,a},grep:function(a,b,c){var\" d,e=\"[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return\" e},map:function(a,c,d){var e,f,g=\"[],h=0,i=a.length,j=a\" instanceof p||i!=\"=b&&typeof\" i=\"=\"number\"&&(i\">0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=\"c(a[f],f,d),e!=null&&(g[g.length]=e);return\" g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=\"=\"string\"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return\" a.apply(c,e.concat(k.call(arguments)))},f.guid=\"a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var\" i,j=\"d==null,k=0,l=a.length;if(d&&typeof\" d=\"=\"object\"){for(k\" d)p.access(a,c,k,d[k],1,g,e);f=\"1}else\" if(e!=\"=b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return\" i.call(p(a),c)}):(c.call(a,e),c=\"null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return\" f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new date).gettime()}}),p.ready.promise=\"function(b){if(!d){d=p.Deferred();if(e.readyState===\"complete\"||e.readyState!==\"loading\"&&e.addEventListener)setTimeout(p.ready,1);else\" if(e.addeventlistener)e.addeventlistener(\"domcontentloaded\",d,!1),a.addeventlistener(\"load\",p.ready,!1);else{e.attachevent(\"onreadystatechange\",d),a.attachevent(\"onload\",p.ready);var g(){if(!p.isready){try{c.doscroll(\"left\")}catch(a){return settimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each(\"boolean number string function array date regexp object\".split(\" \"),function(a,b){e[\"[object \"+b+\"]\"]=\"b.toLowerCase()}),c=p(e);var\" f=\"{};p.Callbacks=function(a){a=typeof\" a=\"=\"string\"?F[a]||G(a):p.extend({},a);var\" c,d,e,f,g,h,i=\"[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var\" b=\"i.length;(function\" d(b){p.each(b,function(b,c){p.isfunction(c)&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&d(c)})})(arguments),e?g=\"i.length:c&&(f=b,k(c))}return\" this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=\"p.inArray(b,i,c))\">-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inarray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[[\"resolve\",\"done\",p.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",p.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",p.Callbacks(\"memory\")]],c=\"pending\",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+\"With\"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return typeof a==\"object\"?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+\"With\"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isfunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolvewith(j,c),f.promise()}}),p.support=\"function(){var\" b,c,d,f,g,h,i,j,k,l,m,n=\"e.createElement(\"div\");n.setAttribute(\"className\",\"t\"),n.innerHTML=\"\" <link><table></table><a href=\"/a\">a</a><input type=\"checkbox\">\",c=n.getElementsByTagName(\"*\"),d=n.getElementsByTagName(\"a\")[0],d.style.cssText=\"top:1px;float:left;opacity:.5\";if(!c||!c.length||!d)return{};f=e.createElement(\"select\"),g=f.appendChild(e.createElement(\"option\")),h=n.getElementsByTagName(\"input\")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName(\"tbody\").length,htmlSerialize:!!n.getElementsByTagName(\"link\").length,style:/top/.test(d.getAttribute(\"style\")),hrefNormalized:d.getAttribute(\"href\")===\"/a\",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value===\"on\",optSelected:g.selected,getSetAttribute:n.className!==\"t\",enctype:!!e.createElement(\"form\").enctype,html5Clone:e.createElement(\"nav\").cloneNode(!0).outerHTML!==\"<:nav></:nav>\",boxModel:e.compatMode===\"CSS1Compat\",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent(\"onclick\",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent(\"onclick\"),n.detachEvent(\"onclick\",m)),h=e.createElement(\"input\"),h.value=\"t\",h.setAttribute(\"type\",\"radio\"),b.radioValue=h.value===\"t\",h.setAttribute(\"checked\",\"checked\"),h.setAttribute(\"name\",\"t\"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j=\"on\"+k,l=j in n,l||(n.setAttribute(j,\"return;\"),l=typeof n[j]==\"function\"),b[k+\"Bubbles\"]=l;return p(function(){var c,d,f,g,h=\"padding:0;margin:0;border:0;display:block;overflow:hidden;\",i=e.getElementsByTagName(\"body\")[0];if(!i)return;c=e.createElement(\"div\"),c.style.cssText=\"visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px\",i.insertBefore(c,i.firstChild),d=e.createElement(\"div\"),c.appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",f=d.getElementsByTagName(\"td\"),f[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",l=f[0].offsetHeight===0,f[0].style.display=\"\",f[1].style.display=\"none\",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!==\"1%\",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:\"4px\"}).width===\"4px\",g=e.createElement(\"div\"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width=\"0\",d.style.width=\"1px\",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!=\"undefined\"&&(d.innerHTML=\"\",d.style.cssText=h+\"width:1px;padding:1px;display:inline;zoom:1\",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display=\"block\",d.style.overflow=\"visible\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/^(?:\\{.*\\}|\\[.*\\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:\"jQuery\"+(p.fn.jquery+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c==\"string\",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c==\"object\"||typeof c==\"function\")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(\" \")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?k:p.isemptyobject)(d))return}}if(!c){delete h[i].data;if(!k(h[i]))return}g?p.cleandata([a],!0):p.support.deleteexpando||h!=\"h.window?delete\" h[i]:h[i]=\"null},_data:function(a,b,c){return\" p.data(a,b,c,!0)},acceptdata:function(a){var b=\"a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute(\"classid\")===b}}),p.fn.extend({data:function(a,c){var\" d,e,f,g,h,i=\"this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,\"parsedAttrs\")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf(\"data-\")===0&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,\"parsedAttrs\",!0)}}return\" k}return typeof a=\"=\"object\"?this.each(function(){p.data(this,a)}):(d=a.split(\".\",2),d[1]=d[1]?\".\"+d[1]:\"\",e=d[1]+\"!\",p.access(this,function(c){if(c===b)return\" k=\"this.triggerHandler(\"getData\"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var\">1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||\"fx\")+\"queue\",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||\"fx\";var c=p.queue(a,b),d=c.shift(),e=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};d===\"inprogress\"&&(d=c.shift()),d&&(b===\"fx\"&&c.unshift(\"inprogress\"),delete e.stop,d.call(a,f,e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+\"queueHooks\";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks(\"once memory\").add(function(){p.removeData(a,b+\"queue\",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!=\"string\"&&(c=a,a=\"fx\",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=\"p.queue(this,a,c);p._queueHooks(this,a),a===\"fx\"&&b[0]!==\"inprogress\"&&p.dequeue(this,a)})},dequeue:function(a){return\" this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=\"p.fx?p.fx.speeds[a]||a:a,b=b||\"fx\",this.queue(b,function(b,c){var\" d=\"setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return\" this.queue(a||\"fx\",[])},promise:function(a,c){var d,e=\"1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof\" a!=\"string\" &&(c=\"a,a=b),a=a||\"fx\";while(h--)(d=p._data(g[h],a+\"queueHooks\"))&&d.empty&&(e++,d.empty.add(i));return\" i(),f.promise(c)}});var l,m,n,o=\"/[\\t\\r\\n]/g,P=/\\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return\" p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodetype===1)if(!e.classname&&b.length===1)e.classname=a;else{f=\" \"+e.classname+\" \";for(g=\"0,h=b.length;g<h;g++)~f.indexOf(\"\" \"+b[g]+\" \")||(f+=\"b[g]+\"\" \");e.classname=\"p.trim(f)}}}return\" this},removeclass:function(a){var c,d,e,f,g,h,i;if(p.isfunction(a))return this.each(function(b){p(this).removeclass(a.call(this,b,this.classname))});if(a&&typeof a=\"=\"string\"||a===b){c=(a||\"\").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(\"\" \").replace(o,\" \");for(f=\"0,g=c.length;f<g;f++)while(d.indexOf(\"\" \"+c[f]+\" \")>-1)d=d.replace(\" \"+c[f]+\" \",\" \");e.className=a?p.trim(d):\"\"}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==\"boolean\";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c===\"string\"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?\"addClass\":\"removeClass\"](e)}else if(c===\"undefined\"||c===\"boolean\")this.className&&p._data(this,\"__className__\",this.className),this.className=this.className||a===!1?\"\":p._data(this,\"__className__\")||\"\"})},hasClass:function(a){var b=\" \"+a+\" \",c=0,d=this.length;for(;c<d;c++)if(this[c].nodetype===1&&(\" \"+this[c].classname+\" \").replace(o,\" \").indexof(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&\"get\"in c&&(d=c.get(f,\"value\"))!==b?d:(d=f.value,typeof d==\"string\"?d.replace(P,\"\"):d==null?\"\":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f=\"\":typeof f==\"number\"?f+=\"\":p.isArray(f)&&(f=p.map(f,function(a){return a==null?\"\":a+\"\"})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!(\"set\"in c)||c.set(this,f,\"value\")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type===\"select-one\";if(f<0)return null;c=\"i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute(\"disabled\")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,\"optgroup\"))){b=p(e).val();if(i)return\" b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=\"p.makeArray(b);return\" p(a).find(\"option\").each(function(){this.selected=\"p.inArray(p(this).val(),c)\">=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute==\"undefined\")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&\"set\"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,\"\"+d),d)}return g&&\"get\"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propfix[e]||e,f=t.test(e),f||p.attr(a,e,\"\"),a.removeattribute(u?e:c),f&&c in a&&(a[c]=\"!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error(\"type\" property can't be changed\");else if(!p.support.radiovalue&&b=\"==\"radio\"&&p.nodeName(a,\"input\")){var\" c=\"a.value;return\" a.setattribute(\"type\",b),c&&(a.value=\"c),b}}},value:{get:function(a,b){return\" l&&p.nodename(a,\"button\")?l.get(a,b):b a?a.value:null},set:function(a,b,c){if(l&&p.nodename(a,\"button\"))return l.set(a,b,c);a.value=\"b}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(a,c,d){var\" e,f,g,h=\"a.nodeType;if(!a||h===3||h===8||h===2)return;return\" g=\"h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&\"set\"in\" f&&(e=\"f.set(a,d,c))!==b?e:a[c]=d:f&&\"get\"in\" c&&c.specified?parseint(c.value,10):r.test(a.nodename)||s.test(a.nodename)&&a.href?0:b}}}}),m=\"{get:function(a,c){var\" d,e=\"p.prop(a,c);return\" e=\"==!0||typeof\" e!=\"boolean\" &&(d=\"a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var\" d;return b=\"==!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d\" a&&(a[d]=\"!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var\" d=\"a.getAttributeNode(c),d&&(N[c]?d.value!==\"\":d.specified)?d.value:b},set:function(a,b,c){var\" d||(d=\"e.createAttribute(c),a.setAttributeNode(d)),d.value=b+\"\"}},p.each([\"width\",\"height\"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===\"\")return\" a.setattribute(b,\"auto\"),c}})}),p.attrhooks.contenteditable=\"{get:L.get,set:function(a,b,c){b===\"\"&&(b=\"false\"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each([\"href\",\"src\",\"width\",\"height\"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var\" a.style.csstext.tolowercase()||b},set:function(a,b){return a.style.csstext +b}}),p.support.optselected||(p.prophooks.selected=\"p.extend(p.propHooks.selected,{get:function(a){var\" b&&(b.selectedindex,b.parentnode&&b.parentnode.selectedindex),null}})),p.support.enctype||(p.propfix.enctype=\"encoding\" ),p.support.checkon||p.each([\"radio\",\"checkbox\"],function(){p.valhooks[this]=\"{get:function(a){return\" a.getattribute(\"value\")=\"==null?\"on\":a.value}}}),p.each([\"radio\",\"checkbox\"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return\" a.checked=\"p.inArray(p(a).val(),b)\">=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\\.]*|)(?:\\.(.+)|)$/,X=/(?:^|\\s)hover(\\.\\S+|)\\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,\"mouseenter$1 mouseleave$1\")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!=\"undefined\"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(\" \");for(j=0;j<c.length;j++){k=w.exec(c[j])||[],l=k[1],m=(k[2]||\"\").split(\".\").sort(),r=p.event.special[l]||{},l=(f?r.delegatetype:r.bindtype)||l,r=p.event.special[l]||{},n=p.extend({type:l,origtype:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(\".\")},o),q=i[l];if(!q){q=i[l]=[],q.delegatecount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addeventlistener?a.addeventlistener(l,h,!1):a.attachevent&&a.attachevent(\"on\"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegatecount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=\"p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||\"\")).split(\"\" \");for(f=\"0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h\" in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=\"p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new\" regexp(\"(^|\\\\.)\"+j.split(\".\").sort().join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null;for(l=\"0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d===\"**\"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete\" m[h])}p.isemptyobject(m)&&(delete r.handle,p.removedata(a,\"events\",!0))},customevent:{getdata:!0,setdata:!0,changedata:!0},trigger:function(c,d,f,g){if(!f||f.nodetype!=\"=3&&f.nodeType!==8){var\" h,i,j,k,l,m,n,o,q,r,s=\"c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf(\"!\")\">=0&&(s=s.slice(0,-1),i=!0),s.indexOf(\".\")>=0&&(t=s.split(\".\"),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c==\"object\"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join(\".\"),c.namespace_re=c.namespace?new RegExp(\"(^|\\\\.)\"+t.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,m=s.indexOf(\":\")<0?\"on\"+s:\"\";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=\"b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,\"events\")||{})[c.type]&&p._data(k,\"handle\"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault();return\" c.type=\"s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!==\"click\"||!p.nodeName(f,\"a\"))&&p.acceptData(f)&&m&&f[s]&&(s!==\"focus\"&&s!==\"blur\"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var\" d,e,f,g,h,i,j,k,l,m,n,o=\"(p._data(this,\"events\")||{})[c.type]||[],q=o.delegateCount,r=[].slice.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1)return;if(q&&(!c.button||c.type!==\"click\")){g=p(this),g.context=this;for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!==\"click\"){i={},k=[],g[0]=f;for(d=0;d<q;d++)l=o[d],m=l.selector,i[m]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);k.length&&u.push({elem:f,matches:k})}}o.length\">q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.ispropagationstopped();d++){j=u[d],c.currenttarget=j.elem;for(e=0;e<j.matches.length&&!c.isimmediatepropagationstopped();e++){l=j.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleobj=l,h=((p.event.special[l.origtype]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventdefault(),c.stoppropagation()))}}return t.postdispatch&&t.postdispatch.call(this,c),c.result},props:\"attrchange attrname relatednode srcelement altkey bubbles cancelable ctrlkey currenttarget eventphase metakey relatedtarget shiftkey target timestamp view which\".split(\" \"),fixhooks:{},keyhooks:{props:\"char charcode key keycode\".split(\" \"),filter:function(a,b){return a.which=\"=null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:\"button\" buttons clientx clienty fromelement offsetx offsety pagex pagey screenx screeny toelement\".split(\" \"),filter:function(a,c){var d,f,g,h=\"c.button,i=c.fromElement;return\" a.pagex=\"=null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return\" a;var b,c,d=\"a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return\" a.target||(a.target=\"d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:\"focusin\"},blur:{delegateType:\"focusout\"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var\" e=\"p.extend(new\" p.event,c,{type:a,issimulated:!0,originalevent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isdefaultprevented()&&c.preventdefault()}},p.event.handle=\"p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var\" d=\"on\" +b;a.detachevent&&(typeof a[d]=\"=\"undefined\"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this\" instanceof p.event)a&&a.type?(this.originalevent=\"a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else\" return new p.event(a,b)},p.event.prototype=\"{preventDefault:function(){this.isDefaultPrevented=bb;var\" a=\"this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var\" c,d=\"this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return\" c}}}),p.support.submitbubbles||(p.event.special.submit=\"{setup:function(){if(p.nodeName(this,\"form\"))return!1;p.event.add(this,\"click._submit\" keypress._submit\",function(a){var c=\"a.target,d=p.nodeName(c,\"input\")||p.nodeName(c,\"button\")?c.form:b;d&&!p._data(d,\"_submit_attached\")&&(p.event.add(d,\"submit._submit\",function(a){a._submit_bubble=!0}),p._data(d,\"_submit_attached\",!0))})},postDispatch:function(a){a._submit_bubble&&(delete\" a._submit_bubble,this.parentnode&&!a.istrigger&&p.event.simulate(\"submit\",this.parentnode,a,!0))},teardown:function(){if(p.nodename(this,\"form\"))return!1;p.event.remove(this,\"._submit\")}}),p.support.changebubbles||(p.event.special.change=\"{setup:function(){if(V.test(this.nodeName)){if(this.type===\"checkbox\"||this.type===\"radio\")p.event.add(this,\"propertychange._change\",function(a){a.originalEvent.propertyName===\"checked\"&&(this._just_changed=!0)}),p.event.add(this,\"click._change\",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate(\"change\",this,a,!0)});return!1}p.event.add(this,\"beforeactivate._change\",function(a){var\" b=\"a.target;V.test(b.nodeName)&&!p._data(b,\"_change_attached\")&&(p.event.add(b,\"change._change\",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate(\"change\",this.parentNode,a,!0)}),p._data(b,\"_change_attached\",!0))})},handle:function(a){var\" a.handleobj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,\"._change\"),v.test(this.nodename)}}),p.support.focusinbubbles||p.each({focus:\"focusin\",blur:\"focusout\"},function(a,b){var g,h;if(typeof c!=\"string\" &&(d=\"d||c,c=b);for(h\" in a)this.on(h,c,d,a[h],f);return this}d=\"=null&&e==null?(e=c,d=c=b):e==null&&(typeof\" if(!e)return this;return f=\"==1&&(g=e,e=function(a){return\" p().off(a),g.apply(this,arguments)},e.guid=\"g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return\" this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventdefault&&a.handleobj)return a)this.off(f,c,a[f]);return this}if(c=\"==!1||typeof\" this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||\"**\",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length=\"=1?this.off(a,\"**\"):this.off(b,a||\"**\",c)},trigger:function(a,b){return\" this.each(function(){p.event.trigger(a,b,this)})},triggerhandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var p._data(this,\"lasttoggle\"+a.guid,e+1),c.preventdefault(),b[e].apply(this,arguments)||!1};e.guid=\"c;while(d<b.length)b[d++].guid=c;return\" this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(a,b){p.fn[b]=\"function(a,c){return\">0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bd(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)z(a,b[e],c,d)}function be(a,b,c,d,e,f){var g,h=\"$.setFilters[b.toLowerCase()];return\" h||z.error(b),(a||!(g=\"e))&&bd(a||\"*\",d,g=[],e),g.length\">0?h(g,c,f):[]}function bf(a,c,d,e,f){var g,h,i,j,k,l,m,n,p=0,q=f.length,s=L.POS,t=new RegExp(\"^\"+s.source+\"(?!\"+r+\")\",\"i\"),u=function(){var a=1,c=arguments.length-2;for(;a<c;a++)arguments[a]===b&&(g[a]=b)};for(;p<q;p++){s.exec(\"\"),a=f[p],j=[],i=0,k=e;while(g=s.exec(a)){n=s.lastindex=g.index+g[0].length;if(n>i){m=a.slice(i,g.index),i=n,l=[c],B.test(m)&&(k&&(l=k),k=e);if(h=H.test(m))m=m.slice(0,-5).replace(B,\"$&*\");g.length>1&&g[0].replace(t,u),k=be(m,g[1],g[2],l,k,h)}}k?(j=j.concat(k),(m=a.slice(i))&&m!==\")\"?B.test(m)?bd(m,j,d,e):Z(m,c,d,e?e.concat(k):k):o.apply(d,j)):Z(a,c,d,e)}return q===1?d:Z.uniqueSort(d)}function bg(a,b,c){var d,e,f,g=[],i=0,j=D.exec(a),k=!j.pop()&&!j.pop(),l=k&&a.match(C)||[\"\"],m=$.preFilter,n=$.filter,o=!c&&b!==h;for(;(e=l[i])!=null&&k;i++){g.push(d=[]),o&&(e=\" \"+e);while(e){k=!1;if(j=B.exec(e))e=e.slice(j[0].length),k=d.push({part:j.pop().replace(A,\" \"),captures:j});for(f in n)(j=L[f].exec(e))&&(!m[f]||(j=m[f](j,b,c)))&&(e=e.slice(j.shift().length),k=d.push({part:f,captures:j}));if(!k)break}}return k||Z.error(a),g}function bh(a,b,e){var f=b.dir,g=m++;return a||(a=function(a){return a===e}),b.first?function(b,c){while(b=b[f])if(b.nodeType===1)return a(b,c)&&b}:function(b,e){var h,i=g+\".\"+d,j=i+\".\"+c;while(b=b[f])if(b.nodeType===1){if((h=b[q])===j)return b.sizset;if(typeof h==\"string\"&&h.indexOf(i)===0){if(b.sizset)return b}else{b[q]=j;if(a(b,e))return b.sizset=!0,b;b.sizset=!1}}}}function bi(a,b){return a?function(c,d){var e=b(c,d);return e&&a(e===!0?c:e,d)}:b}function bj(a,b,c){var d,e,f=0;for(;d=a[f];f++)$.relative[d.part]?e=bh(e,$.relative[d.part],b):(d.captures.push(b,c),e=bi(e,$.filter[d.part].apply(null,d.captures)));return e}function bk(a){return function(b,c){var d,e=0;for(;d=a[e];e++)if(d(b,c))return!0;return!1}}var c,d,e,f,g,h=a.document,i=h.documentElement,j=\"undefined\",k=!1,l=!0,m=0,n=[].slice,o=[].push,q=(\"sizcache\"+Math.random()).replace(\".\",\"\"),r=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",s=\"(?:\\\\\\\\.|[-\\\\w]|[^\\\\x00-\\\\xa0])+\",t=s.replace(\"w\",\"w#\"),u=\"([*^$|!~]?=)\",v=\"\\\\[\"+r+\"*(\"+s+\")\"+r+\"*(?:\"+u+r+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+t+\")|)|)\"+r+\"*\\\\]\",w=\":(\"+s+\")(?:\\\\((?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\2|((?:[^,]|\\\\\\\\,|(?:,(?=[^\\\\[]*\\\\]))|(?:,(?=[^\\\\(]*\\\\))))*))\\\\)|)\",x=\":(nth|eq|gt|lt|first|last|even|odd)(?:\\\\((\\\\d*)\\\\)|)(?=[^-]|$)\",y=r+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+r+\"*\",z=\"(?=[^\\\\x20\\\\t\\\\r\\\\n\\\\f])(?:\\\\\\\\.|\"+v+\"|\"+w.replace(2,7)+\"|[^\\\\\\\\(),])+\",A=new RegExp(\"^\"+r+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+r+\"+$\",\"g\"),B=new RegExp(\"^\"+y),C=new RegExp(z+\"?(?=\"+r+\"*,|$)\",\"g\"),D=new RegExp(\"^(?:(?!,)(?:(?:^|,)\"+r+\"*\"+z+\")*?|\"+r+\"*(.*?))(\\\\)|$)\"),E=new RegExp(z.slice(19,-6)+\"\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])+|\"+y,\"g\"),F=/^(?:#([\\w\\-]+)|(\\w+)|\\.([\\w\\-]+))$/,G=/[\\x20\\t\\r\\n\\f]*[+~]/,H=/:not\\($/,I=/h\\d/i,J=/input|select|textarea|button/i,K=/\\\\(?!\\\\)/g,L={ID:new RegExp(\"^#(\"+s+\")\"),CLASS:new RegExp(\"^\\\\.(\"+s+\")\"),NAME:new RegExp(\"^\\\\[name=['\\\"]?(\"+s+\")['\\\"]?\\\\]\"),TAG:new RegExp(\"^(\"+s.replace(\"[-\",\"[-\\\\*\")+\")\"),ATTR:new RegExp(\"^\"+v),PSEUDO:new RegExp(\"^\"+w),CHILD:new RegExp(\"^:(only|nth|last|first)-child(?:\\\\(\"+r+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+r+\"*(?:([+-]|)\"+r+\"*(\\\\d+)|))\"+r+\"*\\\\)|)\",\"i\"),POS:new RegExp(x,\"ig\"),needsContext:new RegExp(\"^\"+r+\"*[>+~]|\"+x,\"i\")},M={},N=[],O={},P=[],Q=function(a){return a.sizzleFilter=!0,a},R=function(a){return function(b){return b.nodeName.toLowerCase()===\"input\"&&b.type===a}},S=function(a){return function(b){var c=b.nodeName.toLowerCase();return(c===\"input\"||c===\"button\")&&b.type===a}},T=function(a){var b=!1,c=h.createElement(\"div\");try{b=a(c)}catch(d){}return c=null,b},U=T(function(a){a.innerHTML=\"<select></select>\";var b=typeof a.lastChild.getAttribute(\"multiple\");return b!==\"boolean\"&&b!==\"string\"}),V=T(function(a){a.id=q+0,a.innerHTML=\"<a name=\"\"+q+\"\"></a><div name=\"\"+q+\"\"></div>\",i.insertBefore(a,i.firstChild);var b=h.getElementsByName&&h.getElementsByName(q).length===2+h.getElementsByName(q+0).length;return g=!h.getElementById(q),i.removeChild(a),b}),W=T(function(a){return a.appendChild(h.createComment(\"\")),a.getElementsByTagName(\"*\").length===0}),X=T(function(a){return a.innerHTML=\"<a href=\"#\"></a>\",a.firstChild&&typeof a.firstChild.getAttribute!==j&&a.firstChild.getAttribute(\"href\")===\"#\"}),Y=T(function(a){return a.innerHTML=\"<div class=\"hidden e\"></div><div class=\"hidden\"></div>\",!a.getElementsByClassName||a.getElementsByClassName(\"e\").length===0?!1:(a.lastChild.className=\"e\",a.getElementsByClassName(\"e\").length!==1)}),Z=function(a,b,c,d){c=c||[],b=b||h;var e,f,g,i,j=b.nodeType;if(j!==1&&j!==9)return[];if(!a||typeof a!=\"string\")return c;g=ba(b);if(!g&&!d)if(e=F.exec(a))if(i=e[1]){if(j===9){f=b.getElementById(i);if(!f||!f.parentNode)return c;if(f.id===i)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(i))&&bb(b,f)&&f.id===i)return c.push(f),c}else{if(e[2])return o.apply(c,n.call(b.getElementsByTagName(a),0)),c;if((i=e[3])&&Y&&b.getElementsByClassName)return o.apply(c,n.call(b.getElementsByClassName(i),0)),c}return bm(a,b,c,d,g)},$=Z.selectors={cacheLength:50,match:L,order:[\"ID\",\"TAG\"],attrHandle:{},createPseudo:Q,find:{ID:g?function(a,b,c){if(typeof b.getElementById!==j&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==j&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==j&&e.getAttributeNode(\"id\").value===a?[e]:b:[]}},TAG:W?function(a,b){if(typeof b.getElementsByTagName!==j)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a===\"*\"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c}},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(K,\"\"),a[3]=(a[4]||a[5]||\"\").replace(K,\"\"),a[2]===\"~=\"&&(a[3]=\" \"+a[3]+\" \"),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]===\"nth\"?(a[2]||Z.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]===\"even\"||a[2]===\"odd\")),a[4]=+(a[6]+a[7]||a[2]===\"odd\")):a[2]&&Z.error(a[0]),a},PSEUDO:function(a){var b,c=a[4];return L.CHILD.test(a[0])?null:(c&&(b=D.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:g?function(a){return a=a.replace(K,\"\"),function(b){return b.getAttribute(\"id\")===a}}:function(a){return a=a.replace(K,\"\"),function(b){var c=typeof b.getAttributeNode!==j&&b.getAttributeNode(\"id\");return c&&c.value===a}},TAG:function(a){return a===\"*\"?function(){return!0}:(a=a.replace(K,\"\").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=M[a];return b||(b=M[a]=new RegExp(\"(^|\"+r+\")\"+a+\"(\"+r+\"|$)\"),N.push(a),N.length>$.cacheLength&&delete M[N.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==j&&a.getAttribute(\"class\")||\"\")}},ATTR:function(a,b,c){return b?function(d){var e=Z.attr(d,a),f=e+\"\";if(e==null)return b===\"!=\";switch(b){case\"=\":return f===c;case\"!=\":return f!==c;case\"^=\":return c&&f.indexOf(c)===0;case\"*=\":return c&&f.indexOf(c)>-1;case\"$=\":return c&&f.substr(f.length-c.length)===c;case\"~=\":return(\" \"+f+\" \").indexOf(c)>-1;case\"|=\":return f===c||f.substr(0,c.length+1)===c+\"-\"}}:function(b){return Z.attr(b,a)!=null}},CHILD:function(a,b,c,d){if(a===\"nth\"){var e=m++;return function(a){var b,f,g=0,h=a;if(c===1&&d===0)return!0;b=a.parentNode;if(b&&(b[q]!==e||!a.sizset)){for(h=b.firstChild;h;h=h.nextSibling)if(h.nodeType===1){h.sizset=++g;if(h===a)break}b[q]=e}return f=a.sizset-d,c===0?f===0:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case\"only\":case\"first\":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a===\"first\")return!0;c=b;case\"last\":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e=$.pseudos[a]||$.pseudos[a.toLowerCase()];return e||Z.error(\"unsupported pseudo: \"+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:Q(function(a,b,c){var d=bl(a.replace(A,\"$1\"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&!!a.checked||b===\"option\"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!$.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>\"@\"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},contains:Q(function(a){return function(b){return(b.textContent||b.innerText||bc(b)).indexOf(a)>-1}}),has:Q(function(a){return function(b){return Z(a,b).length>0}}),header:function(a){return I.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()===\"input\"&&(b=a.type)===\"text\"&&((c=a.getAttribute(\"type\"))==null||c.toLowerCase()===b)},radio:R(\"radio\"),checkbox:R(\"checkbox\"),file:R(\"file\"),password:R(\"password\"),image:R(\"image\"),submit:S(\"submit\"),reset:S(\"reset\"),button:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&a.type===\"button\"||b===\"button\"},input:function(a){return J.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){var d=[],e=c?1:0,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},odd:function(a,b,c){var d=\"[],e=c?0:1,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return\" d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var c?a:d}}};$.setfilters.nth=\"$.setFilters.eq,$.filters=$.pseudos,X||($.attrHandle={href:function(a){return\" a.getattribute(\"href\",2)},type:function(a){return a.getattribute(\"type\")}}),v&&($.order.push(\"name\"),$.find.name=\"function(a,b){if(typeof\" b.getelementsbyname!=\"=j)return\" b.getelementsbyname(a)}),y&&($.order.splice(1,0,\"class\"),$.find.class=\"function(a,b,c){if(typeof\" b.getelementsbyclassname!=\"=j&&!c)return\" b.getelementsbyclassname(a)});try{n.call(i.childnodes,0)[0].nodetype}catch(_){n=\"function(a){var\" b,c=\"[];for(;b=this[a];a++)c.push(b);return\" c}}var ba=\"Z.isXML=function(a){var\" b=\"a&&(a.ownerDocument||a).documentElement;return\" b?b.nodename!=\"=\"HTML\":!1},bb=Z.contains=i.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:i.contains?function(a,b){var\" c=\"a.nodeType===9?a.documentElement:a,d=b.parentNode;return\" a=\"==d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bc=Z.getText=function(a){var\" ,d=\"0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof\" a.textcontent=\"=\"string\")return\" a.textcontent;for(a=\"a.firstChild;a;a=a.nextSibling)c+=bc(a)}else\" if(e=\"==3||e===4)return\" a.nodevalue}else for(;b=\"a[d];d++)c+=bc(b);return\" c};z.attr=\"function(a,b){var\" c,d=\"ba(a);return\" d||(b=\"b.toLowerCase()),$.attrHandle[b]?$.attrHandle[b](a):U||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof\" a[b]=\"=\"boolean\"?a[b]?b:null:c.specified?c.value:null:null)},Z.error=function(a){throw\" new error(\"syntax error, unrecognized expression: \"+a)},[0,0].sort(function(){return l=\"0}),i.compareDocumentPosition?e=function(a,b){return\" k=\"!0,0;if(a.sourceIndex&&b.sourceIndex)return\" a.sourceindex-b.sourceindex;var c,d,e=\"[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return\" f(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=\"j.parentNode;j=i;while(j)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var\" f(e[l],g[l]);return c;var 1}),z.uniquesort=\"function(a){var\" a};var bl=\"Z.compile=function(a,b,c){var\" d,e,f,g=\"O[a];if(g&&g.context===b)return\" g;e=\"bg(a,b,c);for(f=0;d=e[f];f++)e[f]=bj(d,b,c);return\" g=\"O[a]=bk(e),g.context=b,g.runs=g.dirruns=0,P.push(a),P.length\">$.cacheLength&&delete O[P.shift()],g};Z.matches=function(a,b){return Z(a,null,null,b)},Z.matchesSelector=function(a,b){return Z(b,null,null,[a]).length>0};var bm=function(a,b,e,f,g){a=a.replace(A,\"$1\");var h,i,j,k,l,m,p,q,r,s=a.match(C),t=a.match(E),u=b.nodeType;if(L.POS.test(a))return bf(a,b,e,f,s);if(f)h=n.call(f,0);else if(s&&s.length===1){if(t.length>1&&u===9&&!g&&(s=L.ID.exec(t[0]))){b=$.find.ID(s[1],b,g)[0];if(!b)return e;a=a.slice(t.shift().length)}q=(s=G.exec(t[0]))&&!s.index&&b.parentNode||b,r=t.pop(),m=r.split(\":not\")[0];for(j=0,k=$.order.length;j<k;j++){p=$.order[j];if(s=l[p].exec(m)){h=$.find[p]((s[1]||\"\").replace(k,\"\"),q,g);if(h==null)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(l[p],\"\"),a||o.apply(e,n.call(h,0)));break}}}if(a){i=bl(a,b,g),d=i.dirruns++,h==null&&(h=$.find.tag(\"*\",g.test(a)&&b.parentnode||b));for(j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l)}return e};h.queryselectorall&&function(){var a,b=\"bm,c=/'|\\\\/g,d=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,e=[],f=[\":active\"],g=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;T(function(a){a.innerHTML=\"<select\"><option selected></option>\",a.querySelectorAll(\"[selected]\").length||e.push(\"\\\\[\"+r+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),a.querySelectorAll(\":checked\").length||e.push(\":checked\")}),T(function(a){a.innerHTML=\"<p test></p>\",a.querySelectorAll(\"[test^='']\").length&&e.push(\"[*^$]=\"+r+\"*(?:\\\"\\\"|'')\"),a.innerHTML=\"<input type=\"hidden\">\",a.querySelectorAll(\":enabled\").length||e.push(\":enabled\",\":disabled\")}),e=e.length&&new RegExp(e.join(\"|\")),bm=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a)))if(d.nodeType===9)try{return o.apply(f,n.call(d.querySelectorAll(a),0)),f}catch(i){}else if(d.nodeType===1&&d.nodeName.toLowerCase()!==\"object\"){var j=d.getAttribute(\"id\"),k=j||q,l=G.test(a)&&d.parentNode||d;j?k=k.replace(c,\"\\\\$&\"):d.setAttribute(\"id\",k);try{return o.apply(f,n.call(l.querySelectorAll(a.replace(C,\"[id='\"+k+\"'] $&\")),0)),f}catch(i){}finally{j||d.removeAttribute(\"id\")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,\"div\");try{g.call(b,\"[test!='']:sizzle\"),f.push($.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join(\"|\")),Z.matchesSelector=function(b,c){c=c.replace(d,\"='$1']\");if(!ba(b)&&!f.test(c)&&(!e||!e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&b.document.nodeType!==11)return h}catch(i){}return Z(c,null,null,[b]).length>0})}(),Z.attr=p.attr,p.find=Z,p.expr=Z.selectors,p.expr[\":\"]=p.expr.pseudos,p.unique=Z.uniqueSort,p.text=Z.getText,p.isXMLDoc=Z.isXML,p.contains=Z.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\\[\\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!=\"string\")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushstack(\"\",\"find\",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=\"p(a,this),d=c.length;return\" this.filter(function(){for(b=\"0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return\" this.pushstack(bj(this,a,!1),\"not\",a)},filter:function(a){return this.pushstack(bj(this,a,!0),\"filter\",a)},is:function(a){return!!a&&(typeof a=\"=\"string\"?bf.test(a)?p(a,this.context).index(this[0])\">=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!=\"string\"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerdocument&&c!==b&&c.nodetype!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,\"closest\",a)},index:function(a){return a?typeof a==\"string\"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a==\"string\"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,\"parentNode\")},parentsUntil:function(a,b,c){return p.dir(a,\"parentNode\",c)},next:function(a){return bi(a,\"nextSibling\")},prev:function(a){return bi(a,\"previousSibling\")},nextAll:function(a){return p.dir(a,\"nextSibling\")},prevAll:function(a){return p.dir(a,\"previousSibling\")},nextUntil:function(a,b,c){return p.dir(a,\"nextSibling\",c)},prevUntil:function(a,b,c){return p.dir(a,\"previousSibling\",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,\"iframe\")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d==\"string\"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(\",\"))}}),p.extend({filter:function(a,b,c){return c&&(a=\":not(\"+a+\")\"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",bm=/ jQuery\\d+=\"(?:null|\\d+)\"/g,bn=/^\\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bp=/<([\\w:]+) ,bq=\"/<tbody/i,br=/<|&#?\\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new\" regexp(\"<(?:\"+bl+\")[\\\\s>]\",\"i\"),bv=/^(?:checkbox|radio)$/,bw=/checked\\s*(?:[^=]|=\\s*.checked.)/i,bx=/\\/(java|ecma)script/i,by=/^\\s*<!(?:\\[CDATA\\[|\\-\\-)|[\\]\\-]{2}>\\s*$/g,bz={option:[1,\"<select multiple=\"multiple\">\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],area:[1,\"<map>\",\"</map>\"],_default:[0,\"\",\"\"]},bA=bk(e),bB=bA.appendChild(e.createElement(\"div\"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,\"X<div>\",\"</div>\"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,\"body\")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),\"before\",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),\"after\",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName(\"*\")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName(\"*\"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,\"\"):b;if(typeof a==\"string\"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||[\"\",\"\"])[1].toLowerCase()]){a=a.replace(bo,\"<$1>\");try{for(;d<e;d++)c=this[d]||{},c.nodetype===1&&(p.cleandata(c.getelementsbytagname(\"*\")),c.innerhtml=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replacewith:function(a){return bh(this[0])?this.length?this.pushstack(p(p.isfunction(a)?a():a),\"replacewith\",a):this:p.isfunction(a)?this.each(function(b){var c=\"p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof\" a!=\"string\" &&(a=\"p(a).detach()),this.each(function(){var\" b=\"this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return\" this.remove(a,!0)},dommanip:function(a,c,d){a=\"[].concat.apply([],a);var\" e,f,g,h,i=\"0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l\">1&&typeof j==\"string\"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,\"tr\");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodename(this[i],\"table\")?bc(this[i],\"tbody\"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:\"get\",datatype:\"script\",async:!1,global:!1,\"throws\":!0}):p.error(\"no ajax\"):p.globaleval((b.text||b.textcontent||b.innerhtml||\"\").replace(by,\"\")),b.parentnode&&b.parentnode.removechild(b)})}return this}}),p.buildfragment=\"function(a,c,d){var\" f,g,h,i=\"a[0];return\" c=\"c||e,c=(c[0]||c).ownerDocument||c[0]||c,typeof\" c.createdocumentfragment=\"=\"undefined\"&&(c=e),a.length===1&&typeof\" i=\"=\"string\"&&i.length<512&&c===e&&i.charAt(0)===\"<\"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(a,b){p.fn[a]=function(c){var\" d,e=\"0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return\" g[b](this[0]),this;for(;e<h;e++)d=\"(e\">0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test(\"<\"+a.nodename+\">\")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=0,t=[];if(!b||typeof b.createDocumentFragment==\"undefined\")b=e;for(g=b===e&&bA;(h=a[s])!=null;s++){typeof h==\"number\"&&(h+=\"\");if(!h)continue;if(typeof h==\"string\")if(!br.test(h))h=b.createTextNode(h);else{g=g||bk(b),l=l||g.appendChild(b.createElement(\"div\")),h=h.replace(bo,\"<$1>\"),i=(bp.exec(h)||[\"\",\"\"])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i===\"table\"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]===\"<table>\"&&!m?l.childNodes:[];for(f=n.length-1;f>=0;--f)p.nodeName(n[f],\"tbody\")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l=g.lastChild}h.nodeType?t.push(h):t=p.merge(t,h)}l&&(g.removeChild(l),h=l=g=null);if(!p.support.appendChecked)for(s=0;(h=t[s])!=null;s++)p.nodeName(h,\"input\")?bG(h):typeof h.getElementsByTagName!=\"undefined\"&&p.grep(h.getElementsByTagName(\"input\"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(s=0;(h=t[s])!=null;s++)if(!p.nodeName(h,\"script\")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!=\"undefined\"&&(r=p.grep(p.merge([],h.getElementsByTagName(\"script\")),q),t.splice.apply(t,[s+1,0].concat(r)),s+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \\/]([\\w.]+)/.exec(a)||/(webkit)[ \\/]([\\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(a)||/(msie) ([\\w.]+)/.exec(a)||a.indexOf(\"compatible\")<0&& (mozilla)(?:.*? rv:([\\w.]+)|) .exec(a)||[];return{browser:b[1]||\"\",version:b[2]||\"0\"}},a=\"p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function\" a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=\"this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function\" c(c,d){return d&&d instanceof p&&!(d a)&&(d=\"a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var\" b=\"a(e);return\" a}}();var bh,bi,bj,bk=\"/alpha\\([^)]*\\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^margin/,bO=new\" regexp(\"^(\"+q+\")(.*)$\",\"i\"),bp=\"new\" regexp(\"^(\"+q+\")(?!px)[a-z%]+$\",\"i\"),bq=\"new\" regexp(\"^([-+])=\"(\"+q+\")\",\"i\"),bR={},bS={position:\"absolute\",visibility:\"hidden\",display:\"block\"},bT={letterSpacing:0,fontWeight:400,lineHeight:1},bU=[\"Top\",\"Right\",\"Bottom\",\"Left\"],bV=[\"Webkit\",\"O\",\"Moz\",\"ms\"],bW=p.fn.toggle;p.fn.extend({css:function(a,c){return\" p.access(this,function(a,c,d){return d!=\"=b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length\">1)},show:function(){return bZ(this,!0)},hide:function(){return bZ(this)},toggle:function(a,b){var c=typeof a==\"boolean\";return p.isFunction(a)&&p.isFunction(b)?bW.apply(this,arguments):this.each(function(){(c?a:bY(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,\"opacity\");return c===\"\"?\"1\":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":p.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bX(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&\"get\"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g===\"string\"&&(f=bQ.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g=\"number\");if(d==null||g===\"number\"&&isNaN(d))return;g===\"number\"&&!p.cssNumber[i]&&(d+=\"px\");if(!h||!(\"set\"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bX(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&\"get\"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f===\"normal\"&&c in bT&&(f=bT[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(c=g[b],c===\"\"&&!p.contains(a.ownerDocument.documentElement,a)&&(c=p.style(a,b)),bP.test(c)&&bN.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bP.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b===\"fontSize\"?\"1em\":e,e=f.pixelLeft+\"px\",f.left=c,d&&(a.runtimeStyle.left=d)),e===\"\"?\"auto\":e}),p.each([\"height\",\"width\"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0||bH(a,\"display\")!==\"none\"?ca(a,b,d):p.swap(a,bS,function(){return ca(a,b,d)})},set:function(a,c,d){return b$(a,c,d?b_(a,b,d,p.support.boxSizing&&p.css(a,\"boxSizing\")===\"border-box\"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":b?\"1\":\"\"},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?\"alpha(opacity=\"+b*100+\")\":\"\",f=d&&d.filter||c.filter||\"\";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,\"\"))===\"\"&&c.removeAttribute){c.removeAttribute(\"filter\");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+\" \"+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:\"inline-block\"},function(){if(b)return bH(a,\"marginRight\")})}}),!p.support.pixelPosition&&p.fn.position&&p.each([\"top\",\"left\"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bP.test(d)?p(a).position()[b]+\"px\":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,\"display\"))===\"none\"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:\"\",padding:\"\",border:\"Width\"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c==\"string\"?c.split(\" \"):[c],f={};for(d=0;d<4;d++)f[a+bu[d]+b]=e[d]||e[d-2]||e[0];return f}},bn.test(a)||(p.csshooks[a+b].set=\"b$)});var\" cc=\"/%20/g,cd=/\\[\\]$/,ce=/\\r?\\n/g,cf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,cg=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return\" p.param(this.serializearray())},serializearray:function(){return this.map(function(){return this.elements?p.makearray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cg.test(this.nodename)||cf.test(this.type))}).map(function(a,b){var c=\"p(this).val();return\" d,e=\"[],f=function(a,b){b=p.isFunction(b)?b():b==null?\"\":b,e[e.length]=encodeURIComponent(a)+\"=\"+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else\" for(d in a)ch(d,a[d],c,f);return e.join(\"&\").replace(cc,\"+\")};var ci,cj,ck=\"/#.*$/,cl=/^(.*?):[\" \\t]*([^\\r\\n]*)\\r?$ mg,cm=\"/^(?:about|app|app\\-storage|.+\\-extension|file|res|widget):$/,cn=/^(?:GET|HEAD)$/,co=/^\\/\\//,cp=/\\?/,cq=/<script\\b[^<]*(?:(?!<\\/script\">)<[^<]*)*<\\ script>/gi,cr=/([?&])_=[^&]*/,cs=/^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,ct=p.fn.load,cu={},cv={},cw=[\"*/\"]+[\"*\"];try{ci=f.href}catch(cx){ci=e.createElement(\"a\"),ci.href=\"\",ci=ci.href}cj=cs.exec(ci.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!=\"string\"&&ct)return ct.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(\" \");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):typeof c==\"object\"&&(f=\"POST\"),p.ajax({url:a,type:f,dataType:\"html\",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p(\"<div>\").append(a.replace(cq,\"\")).find(e):a)}),this},p.each(\"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend\".split(\" \"),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each([\"get\",\"post\"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,\"script\")},getJSON:function(a,b,c){return p.get(a,b,c,\"json\")},ajaxSetup:function(a,b){return b?cA(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cA(a,b),a},ajaxSettings:{url:ci,isLocal:cm.test(cj[1]),global:!0,type:\"GET\",contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",processData:!0,async:!0,accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",\"*\":cw},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":a.String,\"text html\":!0,\"text json\":p.parseJSON,\"text xml\":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cy(cu),ajaxTransport:cy(cv),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||\"\",x.readyState=a>0?4:0,f&&(u=cB(l,x,f));if(a>=200&&a<300||a===304)l.ifmodified&&(w=x.getresponseheader(\"last-modified\"),w&&(p.lastmodified[d]=w),w=x.getresponseheader(\"etag\"),w&&(p.etag[d]=w)),a===304?(y=\"notmodified\",k=!0):(k=cc(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y=\"error\",a<0&&(a=0)}x.status=a,x.statustext=\"\"+(c||y),k?o.resolvewith(m,[s,y,x]):o.rejectwith(m,[x,y,t]),x.statuscode(r),r=b,j&&n.trigger(\"ajax\"+(k?\"success\":\"error\"),[x,l,k?s:t]),q.firewith(m,[x,y]),j&&(n.trigger(\"ajaxcomplete\",[x,l]),--p.active||p.event.trigger(\"ajaxstop\"))}typeof a=\"=\"object\"&&(c=a,a=b),c=c||{};var\" d,e,f,g,h,i,j,k,l=\"p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m\" instanceof p)?p(m):p.event,o=\"p.Deferred(),q=p.Callbacks(\"once\" memory\"),r=\"l.statusCode||{},t={},u={},v=0,w=\"canceled\",x={readyState:0,setRequestHeader:function(a,b){if(!v){var\" c=\"a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return\" this},getallresponseheaders:function(){return v=\"==2?e:null},getResponseHeader:function(a){var\" c;if(v=\"==2){if(!f){f={};while(c=cl.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return\" v||(l.mimetype=\"a),this},abort:function(a){return\" b;if(v<2)for(b in a)r[b]=\"[r[b],a[b]];else\" b=\"a[x.status],x.always(b)}return\" this},l.url=\"((a||l.url)+\"\").replace(ck,\"\").replace(co,cj[1]+\"//\"),l.dataTypes=p.trim(l.dataType||\"*\").toLowerCase().split(s),l.crossDomain==null&&(i=cs.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==cj[1]&&i[2]==cj[2]&&(i[3]||(i[1]===\"http:\"?80:443))==(cj[3]||(cj[1]===\"http:\"?80:443)))),l.data&&l.processData&&typeof\" l.data!=\"string\" &&(l.data=\"p.param(l.data,l.traditional)),cz(cu,l,c,x);if(v===2)return\" x;j=\"l.global,l.type=l.type.toUpperCase(),l.hasContent=!cn.test(l.type),j&&p.active++===0&&p.event.trigger(\"ajaxStart\");if(!l.hasContent){l.data&&(l.url+=(cp.test(l.url)?\"&\":\"?\")+l.data,delete\" l.data),d=\"l.url;if(l.cache===!1){var\" z=\"p.now(),A=l.url.replace(cr,\"$1_=\"+z);l.url=A+(A===l.url?(cp.test(l.url)?\"&\":\"?\")+\"_=\"+z:\"\")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader(\"Content-Type\",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader(\"If-Modified-Since\",p.lastModified[d]),p.etag[d]&&x.setRequestHeader(\"If-None-Match\",p.etag[d])),x.setRequestHeader(\"Accept\",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!==\"*\"?\",\" \"+cw+\"; q=\"0.01\":\"\"):l.accepts[\"*\"]);for(k\" l.headers)x.setrequestheader(k,l.headers[k]);if(!l.beforesend||l.beforesend.call(m,x,l)!=\"=!1&&v!==2){w=\"abort\";for(k\" in{success:1,error:1,complete:1})x[k](l[k]);g=\"cz(cv,l,c,x);if(!g)y(-1,\"No\" transport\");else{x.readystate=\"1,j&&n.trigger(\"ajaxSend\",[x,l]),l.async&&l.timeout\">0&&(h=setTimeout(function(){x.abort(\"timeout\")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,b);else throw b}}return x}return x.abort()},active:0,lastmodified:{},etag:{}});var cd=\"[],cE=/\\?/,cF=/(=)\\?(?=&|$)|\\?\\?/,cG=p.now();p.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var\" a=\"cD.pop()||p.expando+\"_\"+cG++;return\" this[a]=\"!0,a}}),p.ajaxPrefilter(\"json\" jsonp\",function(c,d,e){var f,g,h,i=\"c.data,j=c.url,k=c.jsonp!==!1,l=k&&cF.test(j),m=k&&!l&&typeof\" i=\"=\"string\"&&!(c.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&cF.test(i);if(c.dataTypes[0]===\"jsonp\"||l||m)return\" f=\"c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cF,\"$1\"+f):m?c.data=i.replace(cF,\"$1\"+f):k&&(c.url+=(cE.test(j)?\"&\":\"?\")+c.jsonp+\"=\"+f),c.converters[\"script\" json\"]=\"function(){return\" h||p.error(f+\" was not called\"),h[0]},c.datatypes[0]=\"json\" ,a[f]=\"function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cD.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),\"script\"}),p.ajaxSetup({accepts:{script:\"text/javascript,\" application javascript, ecmascript, x-ecmascript\"},contents:{script: javascript|ecmascript },converters:{\"text script\":function(a){return p.globaleval(a),a}}}),p.ajaxprefilter(\"script\",function(a){a.cache=\"==b&&(a.cache=!1),a.crossDomain&&(a.type=\"GET\",a.global=!1)}),p.ajaxTransport(\"script\",function(a){if(a.crossDomain){var\" c,d=\"e.head||e.getElementsByTagName(\"head\")[0]||e.documentElement;return{send:function(f,g){c=e.createElement(\"script\"),c.async=\"async\",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,\"success\")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var\" ch,ci=\"a.ActiveXObject?function(){for(var\" in ch)ch[a](0,1)}:!1,cj=\"0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cK()||cL()}:cK,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&\"withCredentials\"in\" a})}(p.ajaxsettings.xhr()),p.support.ajax&&p.ajaxtransport(function(c){if(!c.crossdomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=\"c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h\" c.xhrfields)i[h]=\"c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e[\"X-Requested-With\"]&&(e[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(h\" e)i.setrequestheader(h,e[h])}catch(j){}i.send(c.hascontent&&c.data||null),d=\"function(a,e){var\" h,j,k,l,m;try{if(d&&(e||i.readystate=\"==4)){d=b,g&&(i.onreadystatechange=p.noop,cI&&delete\" ch[g]);if(e)i.readystate!=\"=4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=\"\"}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cJ,cI&&(cH||(cH={},p(a).unload(cI)),cH[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var\" cm,cn,co=\"/^(?:toggle|show|hide)$/,cP=new\" regexp(\"^(?:([-+])=\"|)(\"+q+\")([a-z%]*)$\",\"i\"),cQ=/queueHooks$/,cR=[cX],cS={\"*\":[function(a,b){var\" c,d,e,f=\"this.createTween(a,b),g=cP.exec(b),h=f.cur(),i=+h||0,j=1;if(g){c=+g[2],d=g[3]||(p.cssNumber[a]?\"\":\"px\");if(d!==\"px\"&&i){i=p.css(f.elem,a,!0)||c||1;do\" e=\"j=j||\".5\",i=i/j,p.style(f.elem,a,i+d),j=f.cur()/h;while(j!==1&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return\" f}]};p.animation=\"p.extend(cV,{tweener:function(a,b){p.isFunction(a)?(b=a,a=[\"*\"]):a=a.split(\"\" \");var a&&a.get?a.get(this):cy.prophooks._default.get(this)},run:function(a){var b,c=\"cY.propHooks[this.prop];return\" this.pos=\"b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cY.propHooks._default.set(this),this}},cY.prototype.init.prototype=cY.prototype,cY.propHooks={_default:{get:function(a){var\" b;return a.elem[a.prop]=\"=null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,\"\"),!b||b===\"auto\"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cY.propHooks.scrollTop=cY.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each([\"toggle\",\"show\",\"hide\"],function(a,b){var\" c=\"p.fn[b];p.fn[b]=function(d,e,f){return\" d=\"=null||typeof\" this.filter(by).css(\"opacity\",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var b=\"cV(this,p.extend({},a),f);e&&b.stop(!0)};return\" e||f.queue=\"==!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var\" a.stop,b(d)};return typeof a!=\"string\" &&(d=\"c,c=a,a=b),c&&a!==!1&&this.queue(a||\"fx\",[]),this.each(function(){var\" for(c g)g[c]&&g[c].stop&&cq.test(c)&&e(g[c]);for(c=\"f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:cZ(\"show\"),slideUp:cZ(\"hide\"),slideToggle:cZ(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(a,b){p.fn[a]=function(a,c,d){return\" this.animate(b,a,c,d)}}),p.speed=\"function(a,b,c){var\" d.duration=\"=\"number\"?d.duration:d.duration\" p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue=\"=null||d.queue===!0)d.queue=\"fx\";return\" d.old=\"d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return\" a},swing:function(a){return.5-math.cos(a*math.pi) 2}},p.timers=\"[],p.fx=cY.prototype.init,p.fx.tick=function(){var\" a,b=\"p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cN&&(cN=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cN),cN=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return\" p.grep(p.timers,function(b){return c$=\"/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return\" c,d,e,f,g,h,i,j,k,l,m=\"this[0],n=m&&m.ownerDocument;if(!n)return;return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=c_(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},p.offset={bodyOffset:function(a){var\" p.support.doesnotincludemargininbodyoffset&&(b+=\"parseFloat(p.css(a,\"marginTop\"))||0,c+=parseFloat(p.css(a,\"marginLeft\"))||0),{top:b,left:c}},setOffset:function(a,b,c){var\">-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),\"using\"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c$.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,\"marginTop\"))||0,c.left-=parseFloat(p.css(a,\"marginLeft\"))||0,d.top+=parseFloat(p.css(b[0],\"borderTopWidth\"))||0,d.left+=parseFloat(p.css(b[0],\"borderLeftWidth\"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c$.test(a.nodeName)&&p.css(a,\"position\")===\"static\")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=c_(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:\"height\",Width:\"width\"},function(a,c){p.each({padding:\"inner\"+a,content:c,\"\":\"outer\"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!=\"boolean\"),h=d||(e===!0||f===!0?\"margin\":\"border\");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement[\"client\"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body[\"scroll\"+a],f[\"scroll\"+a],c.body[\"offset\"+a],f[\"offset\"+a],f[\"client\"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g)}})}),a.jQuery=a.$=p,typeof define==\"function\"&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return p})})(window);</2)y(-1,b);else></300||a===304)l.ifmodified&&(w=x.getresponseheader(\"last-modified\"),w&&(p.lastmodified[d]=w),w=x.getresponseheader(\"etag\"),w&&(p.etag[d]=w)),a===304?(y=\"notmodified\",k=!0):(k=cc(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y=\"error\",a<0&&(a=0)}x.status=a,x.statustext=\"\"+(c||y),k?o.resolvewith(m,[s,y,x]):o.rejectwith(m,[x,y,t]),x.statuscode(r),r=b,j&&n.trigger(\"ajax\"+(k?\"success\":\"error\"),[x,l,k?s:t]),q.firewith(m,[x,y]),j&&(n.trigger(\"ajaxcomplete\",[x,l]),--p.active||p.event.trigger(\"ajaxstop\"))}typeof></div></[^<]*)*<\\></4;d++)f[a+bu[d]+b]=e[d]||e[d-2]||e[0];return></0&&></table></$1></\"+a.nodename+\"></l;i++)d.call(c&&p.nodename(this[i],\"table\")?bc(this[i],\"tbody\"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:\"get\",datatype:\"script\",async:!1,global:!1,\"throws\":!0}):p.error(\"no></e;d++)c=this[d]||{},c.nodetype===1&&(p.cleandata(c.getelementsbytagname(\"*\")),c.innerhtml=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replacewith:function(a){return></$1></([\\w:]+)></(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^></e;d++){c=this[d];while(c&&c.ownerdocument&&c!==b&&c.nodetype!==11){if(g?g.index(c)></g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return></c;b++)if(p.contains(h[b],this))return!0});g=this.pushstack(\"\",\"find\",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b></k;j++){p=$.order[j];if(s=l[p].exec(m)){h=$.find[p]((s[1]||\"\").replace(k,\"\"),q,g);if(h==null)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(l[p],\"\"),a||o.apply(e,n.call(h,0)));break}}}if(a){i=bl(a,b,g),d=i.dirruns++,h==null&&(h=$.find.tag(\"*\",g.test(a)&&b.parentnode||b));for(j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l)}return></f;e=e+2)d.push(a[e]);return></c;a++)arguments[a]===b&&(g[a]=b)};for(;p<q;p++){s.exec(\"\"),a=f[p],j=[],i=0,k=e;while(g=s.exec(a)){n=s.lastindex=g.index+g[0].length;if(n></f;e++)z(a,b[e],c,d)}function></u.length&&!c.ispropagationstopped();d++){j=u[d],c.currenttarget=j.elem;for(e=0;e<j.matches.length&&!c.isimmediatepropagationstopped();e++){l=j.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleobj=l,h=((p.event.special[l.origtype]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventdefault(),c.stoppropagation()))}}return></0?\"on\"+s:\"\";if(!f){h=p.cache;for(j></c.length;j++){k=w.exec(c[j])||[],l=k[1],m=(k[2]||\"\").split(\".\").sort(),r=p.event.special[l]||{},l=(f?r.delegatetype:r.bindtype)||l,r=p.event.special[l]||{},n=p.extend({type:l,origtype:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(\".\")},o),q=i[l];if(!q){q=i[l]=[],q.delegatecount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addeventlistener?a.addeventlistener(l,h,!1):a.attachevent&&a.attachevent(\"on\"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegatecount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var></d.length;g++)e=d[g],e&&(c=p.propfix[e]||e,f=t.test(e),f||p.attr(a,e,\"\"),a.removeattribute(u?e:c),f&&c></0)return></d;c++)if(this[c].nodetype===1&&(\"></d;c++){e=this[c];if(e.nodetype===1)if(!e.classname&&b.length===1)e.classname=a;else{f=\"></d?p.queue(this[0],a):c===b?this:this.each(function(){var></f;e++)delete></d;b++)c[b]&&p.isfunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return></=g&&g--,c<=h&&h--)}),this},has:function(a){return></i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else></g;)if(c.apply(a[f++],d)===!1)break}else></0?this[this.length+a]:this[a]},pushstack:function(a,b,c){var></\"&&a.charat(a.length-1)===\"></\\></(\\w+)\\s*\\></i;h++)d=g[h],f=></body></html></e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function>","site":{"data":{}},"excerpt":"","more":"/*! jQuery v@1.8.0 jquery.com | jquery.org/license */\n(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e=\"data-\"+c.replace(I,\"-$1\").toLowerCase();d=a.getAttribute(e);if(typeof d==\"string\"){try{d=d===\"true\"?!0:d===\"false\"?!1:d===\"null\"?null:+d+\"\"===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b===\"data\"&&p.isEmptyObject(a[b]))continue;if(b!==\"toJSON\")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b==\"string\"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split(\"|\"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function be(a,b){var c;if(b.nodetype!=\"=1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c===\"object\"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c===\"input\"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c===\"option\"?b.selected=a.defaultSelected:c===\"input\"||c===\"textarea\"?b.defaultValue=a.defaultValue:c===\"script\"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function\" bf(a){return typeof a.getelementsbytagname!=\"undefined\" ?a.getelementsbytagname(\"*\"):typeof a.queryselectorall!=\"undefined\" ?a.queryselectorall(\"*\"):[]}function bg(a){bv.test(a.type)&&(a.defaultchecked=\"a.checked)}function\" bx(a,b){if(b in a)return b;var c=\"b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bV.length;while(e--){b=bV[e]+c;if(b\" b}return d}function by(a,b){return a=\"b||a,p.css(a,\"display\")===\"none\"||!p.contains(a.ownerDocument,a)}function\" bz(a,b){var c,d,e=\"[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,\"olddisplay\"),b?(!e[f]&&c.style.display===\"none\"&&(c.style.display=\"\"),c.style.display===\"\"&&bY(c)&&(e[f]=p._data(c,\"olddisplay\",cb(c.nodeName)))):(d=bH(c,\"display\"),!e[f]&&d!==\"none\"&&p._data(c,\"olddisplay\",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display===\"none\"||c.style.display===\"\")c.style.display=b?e[f]||\"\":\"none\"}return\" a}function b$(a,b,c){var d=\"bO.exec(b);return\" d?math.max(0,d[1]-(c||0))+(d[2]||\"px\"):b}function b_(a,b,c,d){var e=\"c===(d?\"border\":\"content\")?4:b===\"width\"?1:0,f=0;for(;e<4;e+=2)c===\"margin\"&&(f+=p.css(a,c+bU[e],!0)),d?(c===\"content\"&&(f-=parseFloat(bH(a,\"padding\"+bU[e]))||0),c!==\"margin\"&&(f-=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0)):(f+=parseFloat(bH(a,\"padding\"+bU[e]))||0,c!==\"padding\"&&(f+=parseFloat(bH(a,\"border\"+bU[e]+\"Width\"))||0));return\" f}function ca(a,b,c){var d;e=\"f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return\" d+b_(a,b,c||(f?\"border\":\"content\"),e)+\"px\"}function cb(a){if(br[a])return br[a];var b=\"p(\"<\"+a+\"\">\").appendTo(e.body),c=b.css(\"display\");b.remove();if(c===\"none\"||c===\"\"){bI=e.body.appendChild(bI||p.extend(e.createElement(\"iframe\"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write(\"<!doctype html><html><body>\"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,\"display\"),e.body.removeChild(bI)}return bR[a]=c,c}function ch(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||cd.test(a)?d(a,e):ch(a+\"[\"+(typeof e==\"object\"?b:\"\")+\"]\",e,c,d)});else if(!c&&p.type(b)===\"object\")for(e in b)ch(a+\"[\"+e+\"]\",b[e],c,d);else d(a,b)}function cy(a){return function(b,c){typeof b!=\"string\"&&(c=b,b=\"*\");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f= ^\\+ .test(d),f&&(d=\"d.substr(1)||\"*\"),e=a[d]=a[d]||[],e[f?\"unshift\":\"push\"](c)}}function\" cz(a,c,d,e,f,g){f=\"f||c.dataTypes[0],g=g||{},g[f]=!0;var\" h,i=\"a[f],j=0,k=i?i.length:0,l=a===cu;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof\" h=\"=\"string\"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cz(a,c,d,e,h,g)));return(l||!h)&&!g[\"*\"]&&(h=cz(a,c,d,e,\"*\",g)),h}function\" ca(a,c){var d,e,f=\"p.ajaxSettings.flatOptions||{};for(d\" in c)c[d]!=\"=b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function\" cb(a,c,d){var e,f,g,h,i=\"a.contents,j=a.dataTypes,k=a.responseFields;for(f\" k)f d&&(c[k[f]]=\"d[f]);while(j[0]===\"*\")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader(\"content-type\"));if(e)for(f\" i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=\"j[0];else{for(f\" d){if(!j[0]||a.converters[f+\" \"+j[0]]){g=\"f;break}h||(h=f)}g=g||h}if(g)return\" g!=\"=j[0]&&j.unshift(g),d[g]}function\" cc(a,b){var c,d,e,f,g=\"a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c\" a.converters)i[c.tolowercase()]=\"a.converters[c];for(;e=g[++j];)if(e!==\"*\"){if(h!==\"*\"&&h!==e){c=i[h+\"\" \"+e]||i[\"* \"+e];if(!c)for(d i){f=\"d.split(\"\" \");if(f[1]=\"==e){c=i[h+\"\" \"+f[0]]||i[\"* \"+f[0]];if(c){c=\"==!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a[\"throws\"])b=c(b);else\" try{b=\"c(b)}catch(k){return{state:\"parsererror\",error:c?k:\"No\" conversion from \"+h+\" to \"+e}}}h=\"e}return{state:\"success\",data:b}}function\" ck(){try{return new a.xmlhttprequest}catch(b){}}function cl(){try{return a.activexobject(\"microsoft.xmlhttp\")}catch(b){}}function ct(){return settimeout(function(){cm=\"b},0),cM=p.now()}function\" cu(a,b){p.each(b,function(b,c){var d=\"(cS[b]||[]).concat(cS[\"*\"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function\" cv(a,b,c){var d,e=\"0,f=0,g=cR.length,h=p.Deferred().always(function(){delete\" i.elem}),i=\"function(){var\" b=\"cM||cT(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return\" h.notifywith(a,[j,d,c]),d<1&&f?c:(h.resolvewith(a,[j]),!1)},j=\"h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cM||cT(),duration:c.duration,tweens:[],createTween:function(b,c,d){var\" e=\"p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return\" j.tweens.push(e),e},stop:function(b){var c=\"0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return\" b?h.resolvewith(a,[j,b]):h.rejectwith(a,[j,b]),this}}),k=\"j.props;cW(k,j.opts.specialEasing);for(;e<g;e++){d=cR[e].call(j,a,k,j.opts);if(d)return\" d}return cu(j,k),p.isfunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cw(a,b){var c,d,e,f,g;for(c a){d=\"p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete\" a[c]),g=\"p.cssHooks[d];if(g&&\"expand\"in\" g){f=\"g.expand(f),delete\" a[d];for(c f)c a||(a[c]=\"f[c],b[c]=e)}else\" b[d]=\"e}}function\" cx(a,b,c){var d,e,f,g,h,i,j,k,l=\"this,m=a.style,n={},o=[],q=a.nodeType&&bY(a);c.queue||(j=p._queueHooks(a,\"fx\"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,\"fx\").length||j.empty.fire()})})),a.nodeType===1&&(\"height\"in\" b||\"width\"in b)&&(c.overflow=\"[m.overflow,m.overflowX,m.overflowY],p.css(a,\"display\")===\"inline\"&&p.css(a,\"float\")===\"none\"&&(!p.support.inlineBlockNeedsLayout||cb(a.nodeName)===\"inline\"?m.display=\"inline-block\":m.zoom=1)),c.overflow&&(m.overflow=\"hidden\",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d\" b){f=\"b[d];if(cO.exec(f)){delete\" b[d];if(f=\"==(q?\"hide\":\"show\"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,\"fxshow\")||p._data(a,\"fxshow\",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var\" b;p.removedata(a,\"fxshow\",!0);for(b n)p.style(a,b,n[b])});for(d=\"0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e\" h||(h[e]=\"i.start,q&&(i.end=i.start,i.start=e===\"width\"||e===\"height\"?1:0))}}function\" cy(a,b,c,d,e){return cy.prototype.init(a,b,c,d,e)}function cz(a,b){var c,d=\"{height:a},e=0;for(;e<4;e+=2-b)c=bU[e],d[\"margin\"+c]=d[\"padding\"+c]=a;return\" b&&(d.opacity=\"d.width=a),d}function\" c_(a){return p.iswindow(a)?a:a.nodetype=\"==9?a.defaultView||a.parentWindow:!1}var\" c,d,e=\"a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return\" p.fn.init(a,b,c)},q=\"/[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source,r=/\\S/,s=/\\s+/,t=r.test(\" \")?/^[\\s\\xA0]+|[\\s\\xA0]+$/g:/^\\s+|\\s+$/g,u=/^(?:[^#<]*(<[\\w\\W]+\">)[^>]*$|#([\\w\\-]*)$)/,v=/^<(\\w+)\\s*\\ ?>(?:<\\ \\1>|)$/,w=/^[\\],:{}\\s]*$/,x=/(?:^|:|,)(?:\\s*\\[)+/g,y=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,z=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/g,A=/^-ms-/,B=/-([\\da-z])/gi,C=function(a,b){return(b+\"\").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener(\"DOMContentLoaded\",D,!1),p.ready()):e.readyState===\"complete\"&&(e.detachEvent(\"onreadystatechange\",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a==\"string\"){a.charAt(0)===\"<\"&&a.charat(a.length-1)===\">\"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:\"\",jquery:\"1.8.0\",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushstack:function(a,b,c){var d=\"p.merge(this.constructor(),a);return\" d.prevobject=\"this,d.context=this.context,b===\"find\"?d.selector=this.selector+(this.selector?\"\" \":\"\")+c:b&&(d.selector=\"this.selector+\".\"+b+\"(\"+c+\")\"),d},each:function(a,b){return\" p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=\"+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return\" this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushstack(k.apply(this,arguments),\"slice\",k.call(arguments).join(\",\"))},map:function(a){return this.pushstack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevobject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=\"p.fn,p.extend=p.fn.extend=function(){var\" a,c,d,e,f,g,h=\"arguments[0]||{},i=1,j=arguments.length,k=!1;typeof\" h=\"=\"boolean\"&&(k=h,h=arguments[1]||{},i=2),typeof\" h!=\"object\" &&!p.isfunction(h)&&(h=\"{}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c\" in a){d=\"h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return\" h},p.extend({noconflict:function(b){return a.$=\"==p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return\" settimeout(p.ready,1);p.isready=\"!0;if(a!==!0&&--p.readyWait\">0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger(\"ready\").off(\"ready\")},isFunction:function(a){return p.type(a)===\"function\"},isArray:Array.isArray||function(a){return p.type(a)===\"array\"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||\"object\"},isPlainObject:function(a){if(!a||p.type(a)!==\"object\"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,\"constructor\")&&!n.call(a.constructor.prototype,\"isPrototypeOf\"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!=\"string\"?null:(typeof b==\"boolean\"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!=\"string\")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,\"@\").replace(z,\"]\").replace(x,\"\")))return(new Function(\"return \"+b))();p.error(\"Invalid JSON: \"+b)},parseXML:function(c){var d,e;if(!c||typeof c!=\"string\")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,\"text/xml\")):(d=new ActiveXObject(\"Microsoft.XMLDOM\"),d.async=\"false\",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName(\"parsererror\").length)&&p.error(\"Invalid XML: \"+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,\"ms-\").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])=\"==!1)break}else\" for(;f<g;)if(c.call(a[f],f,a[f++])=\"==!1)break;return\" a},trim:o?function(a){return a=\"=null?\"\":o.call(a)}:function(a){return\" c,d=\"b||[];return\" a!=\"null&&(c=p.type(a),a.length==null||c===\"string\"||c===\"function\"||c===\"regexp\"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var\" d;if(b){if(l)return l.call(b,a,c);d=\"b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c\" b&&b[c]=\"==a)return\" c}return-1},merge:function(a,c){var d=\"c.length,e=a.length,f=0;if(typeof\" while(c[f]!=\"=b)a[e++]=c[f++];return\" a.length=\"e,a},grep:function(a,b,c){var\" d,e=\"[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return\" e},map:function(a,c,d){var e,f,g=\"[],h=0,i=a.length,j=a\" instanceof p||i!=\"=b&&typeof\" i=\"=\"number\"&&(i\">0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=\"c(a[f],f,d),e!=null&&(g[g.length]=e);return\" g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=\"=\"string\"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return\" a.apply(c,e.concat(k.call(arguments)))},f.guid=\"a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var\" i,j=\"d==null,k=0,l=a.length;if(d&&typeof\" d=\"=\"object\"){for(k\" d)p.access(a,c,k,d[k],1,g,e);f=\"1}else\" if(e!=\"=b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return\" i.call(p(a),c)}):(c.call(a,e),c=\"null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return\" f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new date).gettime()}}),p.ready.promise=\"function(b){if(!d){d=p.Deferred();if(e.readyState===\"complete\"||e.readyState!==\"loading\"&&e.addEventListener)setTimeout(p.ready,1);else\" if(e.addeventlistener)e.addeventlistener(\"domcontentloaded\",d,!1),a.addeventlistener(\"load\",p.ready,!1);else{e.attachevent(\"onreadystatechange\",d),a.attachevent(\"onload\",p.ready);var g(){if(!p.isready){try{c.doscroll(\"left\")}catch(a){return settimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each(\"boolean number string function array date regexp object\".split(\" \"),function(a,b){e[\"[object \"+b+\"]\"]=\"b.toLowerCase()}),c=p(e);var\" f=\"{};p.Callbacks=function(a){a=typeof\" a=\"=\"string\"?F[a]||G(a):p.extend({},a);var\" c,d,e,f,g,h,i=\"[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var\" b=\"i.length;(function\" d(b){p.each(b,function(b,c){p.isfunction(c)&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&d(c)})})(arguments),e?g=\"i.length:c&&(f=b,k(c))}return\" this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=\"p.inArray(b,i,c))\">-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inarray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[[\"resolve\",\"done\",p.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",p.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",p.Callbacks(\"memory\")]],c=\"pending\",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+\"With\"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return typeof a==\"object\"?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+\"With\"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isfunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolvewith(j,c),f.promise()}}),p.support=\"function(){var\" b,c,d,f,g,h,i,j,k,l,m,n=\"e.createElement(\"div\");n.setAttribute(\"className\",\"t\"),n.innerHTML=\"\" <link><table></table><a href=\"/a\">a</a><input type=\"checkbox\">\",c=n.getElementsByTagName(\"*\"),d=n.getElementsByTagName(\"a\")[0],d.style.cssText=\"top:1px;float:left;opacity:.5\";if(!c||!c.length||!d)return{};f=e.createElement(\"select\"),g=f.appendChild(e.createElement(\"option\")),h=n.getElementsByTagName(\"input\")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName(\"tbody\").length,htmlSerialize:!!n.getElementsByTagName(\"link\").length,style:/top/.test(d.getAttribute(\"style\")),hrefNormalized:d.getAttribute(\"href\")===\"/a\",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value===\"on\",optSelected:g.selected,getSetAttribute:n.className!==\"t\",enctype:!!e.createElement(\"form\").enctype,html5Clone:e.createElement(\"nav\").cloneNode(!0).outerHTML!==\"<:nav></:nav>\",boxModel:e.compatMode===\"CSS1Compat\",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent(\"onclick\",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent(\"onclick\"),n.detachEvent(\"onclick\",m)),h=e.createElement(\"input\"),h.value=\"t\",h.setAttribute(\"type\",\"radio\"),b.radioValue=h.value===\"t\",h.setAttribute(\"checked\",\"checked\"),h.setAttribute(\"name\",\"t\"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j=\"on\"+k,l=j in n,l||(n.setAttribute(j,\"return;\"),l=typeof n[j]==\"function\"),b[k+\"Bubbles\"]=l;return p(function(){var c,d,f,g,h=\"padding:0;margin:0;border:0;display:block;overflow:hidden;\",i=e.getElementsByTagName(\"body\")[0];if(!i)return;c=e.createElement(\"div\"),c.style.cssText=\"visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px\",i.insertBefore(c,i.firstChild),d=e.createElement(\"div\"),c.appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",f=d.getElementsByTagName(\"td\"),f[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",l=f[0].offsetHeight===0,f[0].style.display=\"\",f[1].style.display=\"none\",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!==\"1%\",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:\"4px\"}).width===\"4px\",g=e.createElement(\"div\"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width=\"0\",d.style.width=\"1px\",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!=\"undefined\"&&(d.innerHTML=\"\",d.style.cssText=h+\"width:1px;padding:1px;display:inline;zoom:1\",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display=\"block\",d.style.overflow=\"visible\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/^(?:\\{.*\\}|\\[.*\\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:\"jQuery\"+(p.fn.jquery+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c==\"string\",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c==\"object\"||typeof c==\"function\")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(\" \")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?k:p.isemptyobject)(d))return}}if(!c){delete h[i].data;if(!k(h[i]))return}g?p.cleandata([a],!0):p.support.deleteexpando||h!=\"h.window?delete\" h[i]:h[i]=\"null},_data:function(a,b,c){return\" p.data(a,b,c,!0)},acceptdata:function(a){var b=\"a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute(\"classid\")===b}}),p.fn.extend({data:function(a,c){var\" d,e,f,g,h,i=\"this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,\"parsedAttrs\")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf(\"data-\")===0&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,\"parsedAttrs\",!0)}}return\" k}return typeof a=\"=\"object\"?this.each(function(){p.data(this,a)}):(d=a.split(\".\",2),d[1]=d[1]?\".\"+d[1]:\"\",e=d[1]+\"!\",p.access(this,function(c){if(c===b)return\" k=\"this.triggerHandler(\"getData\"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var\">1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||\"fx\")+\"queue\",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||\"fx\";var c=p.queue(a,b),d=c.shift(),e=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};d===\"inprogress\"&&(d=c.shift()),d&&(b===\"fx\"&&c.unshift(\"inprogress\"),delete e.stop,d.call(a,f,e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+\"queueHooks\";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks(\"once memory\").add(function(){p.removeData(a,b+\"queue\",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!=\"string\"&&(c=a,a=\"fx\",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=\"p.queue(this,a,c);p._queueHooks(this,a),a===\"fx\"&&b[0]!==\"inprogress\"&&p.dequeue(this,a)})},dequeue:function(a){return\" this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=\"p.fx?p.fx.speeds[a]||a:a,b=b||\"fx\",this.queue(b,function(b,c){var\" d=\"setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return\" this.queue(a||\"fx\",[])},promise:function(a,c){var d,e=\"1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof\" a!=\"string\" &&(c=\"a,a=b),a=a||\"fx\";while(h--)(d=p._data(g[h],a+\"queueHooks\"))&&d.empty&&(e++,d.empty.add(i));return\" i(),f.promise(c)}});var l,m,n,o=\"/[\\t\\r\\n]/g,P=/\\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return\" p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodetype===1)if(!e.classname&&b.length===1)e.classname=a;else{f=\" \"+e.classname+\" \";for(g=\"0,h=b.length;g<h;g++)~f.indexOf(\"\" \"+b[g]+\" \")||(f+=\"b[g]+\"\" \");e.classname=\"p.trim(f)}}}return\" this},removeclass:function(a){var c,d,e,f,g,h,i;if(p.isfunction(a))return this.each(function(b){p(this).removeclass(a.call(this,b,this.classname))});if(a&&typeof a=\"=\"string\"||a===b){c=(a||\"\").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(\"\" \").replace(o,\" \");for(f=\"0,g=c.length;f<g;f++)while(d.indexOf(\"\" \"+c[f]+\" \")>-1)d=d.replace(\" \"+c[f]+\" \",\" \");e.className=a?p.trim(d):\"\"}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==\"boolean\";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c===\"string\"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?\"addClass\":\"removeClass\"](e)}else if(c===\"undefined\"||c===\"boolean\")this.className&&p._data(this,\"__className__\",this.className),this.className=this.className||a===!1?\"\":p._data(this,\"__className__\")||\"\"})},hasClass:function(a){var b=\" \"+a+\" \",c=0,d=this.length;for(;c<d;c++)if(this[c].nodetype===1&&(\" \"+this[c].classname+\" \").replace(o,\" \").indexof(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&\"get\"in c&&(d=c.get(f,\"value\"))!==b?d:(d=f.value,typeof d==\"string\"?d.replace(P,\"\"):d==null?\"\":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f=\"\":typeof f==\"number\"?f+=\"\":p.isArray(f)&&(f=p.map(f,function(a){return a==null?\"\":a+\"\"})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!(\"set\"in c)||c.set(this,f,\"value\")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type===\"select-one\";if(f<0)return null;c=\"i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute(\"disabled\")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,\"optgroup\"))){b=p(e).val();if(i)return\" b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=\"p.makeArray(b);return\" p(a).find(\"option\").each(function(){this.selected=\"p.inArray(p(this).val(),c)\">=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute==\"undefined\")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&\"set\"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,\"\"+d),d)}return g&&\"get\"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propfix[e]||e,f=t.test(e),f||p.attr(a,e,\"\"),a.removeattribute(u?e:c),f&&c in a&&(a[c]=\"!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error(\"type\" property can't be changed\");else if(!p.support.radiovalue&&b=\"==\"radio\"&&p.nodeName(a,\"input\")){var\" c=\"a.value;return\" a.setattribute(\"type\",b),c&&(a.value=\"c),b}}},value:{get:function(a,b){return\" l&&p.nodename(a,\"button\")?l.get(a,b):b a?a.value:null},set:function(a,b,c){if(l&&p.nodename(a,\"button\"))return l.set(a,b,c);a.value=\"b}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(a,c,d){var\" e,f,g,h=\"a.nodeType;if(!a||h===3||h===8||h===2)return;return\" g=\"h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&\"set\"in\" f&&(e=\"f.set(a,d,c))!==b?e:a[c]=d:f&&\"get\"in\" c&&c.specified?parseint(c.value,10):r.test(a.nodename)||s.test(a.nodename)&&a.href?0:b}}}}),m=\"{get:function(a,c){var\" d,e=\"p.prop(a,c);return\" e=\"==!0||typeof\" e!=\"boolean\" &&(d=\"a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var\" d;return b=\"==!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d\" a&&(a[d]=\"!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var\" d=\"a.getAttributeNode(c),d&&(N[c]?d.value!==\"\":d.specified)?d.value:b},set:function(a,b,c){var\" d||(d=\"e.createAttribute(c),a.setAttributeNode(d)),d.value=b+\"\"}},p.each([\"width\",\"height\"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===\"\")return\" a.setattribute(b,\"auto\"),c}})}),p.attrhooks.contenteditable=\"{get:L.get,set:function(a,b,c){b===\"\"&&(b=\"false\"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each([\"href\",\"src\",\"width\",\"height\"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var\" a.style.csstext.tolowercase()||b},set:function(a,b){return a.style.csstext +b}}),p.support.optselected||(p.prophooks.selected=\"p.extend(p.propHooks.selected,{get:function(a){var\" b&&(b.selectedindex,b.parentnode&&b.parentnode.selectedindex),null}})),p.support.enctype||(p.propfix.enctype=\"encoding\" ),p.support.checkon||p.each([\"radio\",\"checkbox\"],function(){p.valhooks[this]=\"{get:function(a){return\" a.getattribute(\"value\")=\"==null?\"on\":a.value}}}),p.each([\"radio\",\"checkbox\"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return\" a.checked=\"p.inArray(p(a).val(),b)\">=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\\.]*|)(?:\\.(.+)|)$/,X=/(?:^|\\s)hover(\\.\\S+|)\\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,\"mouseenter$1 mouseleave$1\")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!=\"undefined\"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(\" \");for(j=0;j<c.length;j++){k=w.exec(c[j])||[],l=k[1],m=(k[2]||\"\").split(\".\").sort(),r=p.event.special[l]||{},l=(f?r.delegatetype:r.bindtype)||l,r=p.event.special[l]||{},n=p.extend({type:l,origtype:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(\".\")},o),q=i[l];if(!q){q=i[l]=[],q.delegatecount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addeventlistener?a.addeventlistener(l,h,!1):a.attachevent&&a.attachevent(\"on\"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegatecount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=\"p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||\"\")).split(\"\" \");for(f=\"0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h\" in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=\"p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new\" regexp(\"(^|\\\\.)\"+j.split(\".\").sort().join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null;for(l=\"0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d===\"**\"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete\" m[h])}p.isemptyobject(m)&&(delete r.handle,p.removedata(a,\"events\",!0))},customevent:{getdata:!0,setdata:!0,changedata:!0},trigger:function(c,d,f,g){if(!f||f.nodetype!=\"=3&&f.nodeType!==8){var\" h,i,j,k,l,m,n,o,q,r,s=\"c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf(\"!\")\">=0&&(s=s.slice(0,-1),i=!0),s.indexOf(\".\")>=0&&(t=s.split(\".\"),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c==\"object\"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join(\".\"),c.namespace_re=c.namespace?new RegExp(\"(^|\\\\.)\"+t.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,m=s.indexOf(\":\")<0?\"on\"+s:\"\";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=\"b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,\"events\")||{})[c.type]&&p._data(k,\"handle\"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault();return\" c.type=\"s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!==\"click\"||!p.nodeName(f,\"a\"))&&p.acceptData(f)&&m&&f[s]&&(s!==\"focus\"&&s!==\"blur\"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var\" d,e,f,g,h,i,j,k,l,m,n,o=\"(p._data(this,\"events\")||{})[c.type]||[],q=o.delegateCount,r=[].slice.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1)return;if(q&&(!c.button||c.type!==\"click\")){g=p(this),g.context=this;for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!==\"click\"){i={},k=[],g[0]=f;for(d=0;d<q;d++)l=o[d],m=l.selector,i[m]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);k.length&&u.push({elem:f,matches:k})}}o.length\">q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.ispropagationstopped();d++){j=u[d],c.currenttarget=j.elem;for(e=0;e<j.matches.length&&!c.isimmediatepropagationstopped();e++){l=j.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleobj=l,h=((p.event.special[l.origtype]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventdefault(),c.stoppropagation()))}}return t.postdispatch&&t.postdispatch.call(this,c),c.result},props:\"attrchange attrname relatednode srcelement altkey bubbles cancelable ctrlkey currenttarget eventphase metakey relatedtarget shiftkey target timestamp view which\".split(\" \"),fixhooks:{},keyhooks:{props:\"char charcode key keycode\".split(\" \"),filter:function(a,b){return a.which=\"=null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:\"button\" buttons clientx clienty fromelement offsetx offsety pagex pagey screenx screeny toelement\".split(\" \"),filter:function(a,c){var d,f,g,h=\"c.button,i=c.fromElement;return\" a.pagex=\"=null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return\" a;var b,c,d=\"a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return\" a.target||(a.target=\"d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:\"focusin\"},blur:{delegateType:\"focusout\"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var\" e=\"p.extend(new\" p.event,c,{type:a,issimulated:!0,originalevent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isdefaultprevented()&&c.preventdefault()}},p.event.handle=\"p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var\" d=\"on\" +b;a.detachevent&&(typeof a[d]=\"=\"undefined\"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this\" instanceof p.event)a&&a.type?(this.originalevent=\"a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else\" return new p.event(a,b)},p.event.prototype=\"{preventDefault:function(){this.isDefaultPrevented=bb;var\" a=\"this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var\" c,d=\"this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return\" c}}}),p.support.submitbubbles||(p.event.special.submit=\"{setup:function(){if(p.nodeName(this,\"form\"))return!1;p.event.add(this,\"click._submit\" keypress._submit\",function(a){var c=\"a.target,d=p.nodeName(c,\"input\")||p.nodeName(c,\"button\")?c.form:b;d&&!p._data(d,\"_submit_attached\")&&(p.event.add(d,\"submit._submit\",function(a){a._submit_bubble=!0}),p._data(d,\"_submit_attached\",!0))})},postDispatch:function(a){a._submit_bubble&&(delete\" a._submit_bubble,this.parentnode&&!a.istrigger&&p.event.simulate(\"submit\",this.parentnode,a,!0))},teardown:function(){if(p.nodename(this,\"form\"))return!1;p.event.remove(this,\"._submit\")}}),p.support.changebubbles||(p.event.special.change=\"{setup:function(){if(V.test(this.nodeName)){if(this.type===\"checkbox\"||this.type===\"radio\")p.event.add(this,\"propertychange._change\",function(a){a.originalEvent.propertyName===\"checked\"&&(this._just_changed=!0)}),p.event.add(this,\"click._change\",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate(\"change\",this,a,!0)});return!1}p.event.add(this,\"beforeactivate._change\",function(a){var\" b=\"a.target;V.test(b.nodeName)&&!p._data(b,\"_change_attached\")&&(p.event.add(b,\"change._change\",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate(\"change\",this.parentNode,a,!0)}),p._data(b,\"_change_attached\",!0))})},handle:function(a){var\" a.handleobj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,\"._change\"),v.test(this.nodename)}}),p.support.focusinbubbles||p.each({focus:\"focusin\",blur:\"focusout\"},function(a,b){var g,h;if(typeof c!=\"string\" &&(d=\"d||c,c=b);for(h\" in a)this.on(h,c,d,a[h],f);return this}d=\"=null&&e==null?(e=c,d=c=b):e==null&&(typeof\" if(!e)return this;return f=\"==1&&(g=e,e=function(a){return\" p().off(a),g.apply(this,arguments)},e.guid=\"g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return\" this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventdefault&&a.handleobj)return a)this.off(f,c,a[f]);return this}if(c=\"==!1||typeof\" this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||\"**\",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length=\"=1?this.off(a,\"**\"):this.off(b,a||\"**\",c)},trigger:function(a,b){return\" this.each(function(){p.event.trigger(a,b,this)})},triggerhandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var p._data(this,\"lasttoggle\"+a.guid,e+1),c.preventdefault(),b[e].apply(this,arguments)||!1};e.guid=\"c;while(d<b.length)b[d++].guid=c;return\" this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(a,b){p.fn[b]=\"function(a,c){return\">0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bd(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)z(a,b[e],c,d)}function be(a,b,c,d,e,f){var g,h=\"$.setFilters[b.toLowerCase()];return\" h||z.error(b),(a||!(g=\"e))&&bd(a||\"*\",d,g=[],e),g.length\">0?h(g,c,f):[]}function bf(a,c,d,e,f){var g,h,i,j,k,l,m,n,p=0,q=f.length,s=L.POS,t=new RegExp(\"^\"+s.source+\"(?!\"+r+\")\",\"i\"),u=function(){var a=1,c=arguments.length-2;for(;a<c;a++)arguments[a]===b&&(g[a]=b)};for(;p<q;p++){s.exec(\"\"),a=f[p],j=[],i=0,k=e;while(g=s.exec(a)){n=s.lastindex=g.index+g[0].length;if(n>i){m=a.slice(i,g.index),i=n,l=[c],B.test(m)&&(k&&(l=k),k=e);if(h=H.test(m))m=m.slice(0,-5).replace(B,\"$&*\");g.length>1&&g[0].replace(t,u),k=be(m,g[1],g[2],l,k,h)}}k?(j=j.concat(k),(m=a.slice(i))&&m!==\")\"?B.test(m)?bd(m,j,d,e):Z(m,c,d,e?e.concat(k):k):o.apply(d,j)):Z(a,c,d,e)}return q===1?d:Z.uniqueSort(d)}function bg(a,b,c){var d,e,f,g=[],i=0,j=D.exec(a),k=!j.pop()&&!j.pop(),l=k&&a.match(C)||[\"\"],m=$.preFilter,n=$.filter,o=!c&&b!==h;for(;(e=l[i])!=null&&k;i++){g.push(d=[]),o&&(e=\" \"+e);while(e){k=!1;if(j=B.exec(e))e=e.slice(j[0].length),k=d.push({part:j.pop().replace(A,\" \"),captures:j});for(f in n)(j=L[f].exec(e))&&(!m[f]||(j=m[f](j,b,c)))&&(e=e.slice(j.shift().length),k=d.push({part:f,captures:j}));if(!k)break}}return k||Z.error(a),g}function bh(a,b,e){var f=b.dir,g=m++;return a||(a=function(a){return a===e}),b.first?function(b,c){while(b=b[f])if(b.nodeType===1)return a(b,c)&&b}:function(b,e){var h,i=g+\".\"+d,j=i+\".\"+c;while(b=b[f])if(b.nodeType===1){if((h=b[q])===j)return b.sizset;if(typeof h==\"string\"&&h.indexOf(i)===0){if(b.sizset)return b}else{b[q]=j;if(a(b,e))return b.sizset=!0,b;b.sizset=!1}}}}function bi(a,b){return a?function(c,d){var e=b(c,d);return e&&a(e===!0?c:e,d)}:b}function bj(a,b,c){var d,e,f=0;for(;d=a[f];f++)$.relative[d.part]?e=bh(e,$.relative[d.part],b):(d.captures.push(b,c),e=bi(e,$.filter[d.part].apply(null,d.captures)));return e}function bk(a){return function(b,c){var d,e=0;for(;d=a[e];e++)if(d(b,c))return!0;return!1}}var c,d,e,f,g,h=a.document,i=h.documentElement,j=\"undefined\",k=!1,l=!0,m=0,n=[].slice,o=[].push,q=(\"sizcache\"+Math.random()).replace(\".\",\"\"),r=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",s=\"(?:\\\\\\\\.|[-\\\\w]|[^\\\\x00-\\\\xa0])+\",t=s.replace(\"w\",\"w#\"),u=\"([*^$|!~]?=)\",v=\"\\\\[\"+r+\"*(\"+s+\")\"+r+\"*(?:\"+u+r+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+t+\")|)|)\"+r+\"*\\\\]\",w=\":(\"+s+\")(?:\\\\((?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\2|((?:[^,]|\\\\\\\\,|(?:,(?=[^\\\\[]*\\\\]))|(?:,(?=[^\\\\(]*\\\\))))*))\\\\)|)\",x=\":(nth|eq|gt|lt|first|last|even|odd)(?:\\\\((\\\\d*)\\\\)|)(?=[^-]|$)\",y=r+\"*([\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])\"+r+\"*\",z=\"(?=[^\\\\x20\\\\t\\\\r\\\\n\\\\f])(?:\\\\\\\\.|\"+v+\"|\"+w.replace(2,7)+\"|[^\\\\\\\\(),])+\",A=new RegExp(\"^\"+r+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+r+\"+$\",\"g\"),B=new RegExp(\"^\"+y),C=new RegExp(z+\"?(?=\"+r+\"*,|$)\",\"g\"),D=new RegExp(\"^(?:(?!,)(?:(?:^|,)\"+r+\"*\"+z+\")*?|\"+r+\"*(.*?))(\\\\)|$)\"),E=new RegExp(z.slice(19,-6)+\"\\\\x20\\\\t\\\\r\\\\n\\\\f>+~])+|\"+y,\"g\"),F=/^(?:#([\\w\\-]+)|(\\w+)|\\.([\\w\\-]+))$/,G=/[\\x20\\t\\r\\n\\f]*[+~]/,H=/:not\\($/,I=/h\\d/i,J=/input|select|textarea|button/i,K=/\\\\(?!\\\\)/g,L={ID:new RegExp(\"^#(\"+s+\")\"),CLASS:new RegExp(\"^\\\\.(\"+s+\")\"),NAME:new RegExp(\"^\\\\[name=['\\\"]?(\"+s+\")['\\\"]?\\\\]\"),TAG:new RegExp(\"^(\"+s.replace(\"[-\",\"[-\\\\*\")+\")\"),ATTR:new RegExp(\"^\"+v),PSEUDO:new RegExp(\"^\"+w),CHILD:new RegExp(\"^:(only|nth|last|first)-child(?:\\\\(\"+r+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+r+\"*(?:([+-]|)\"+r+\"*(\\\\d+)|))\"+r+\"*\\\\)|)\",\"i\"),POS:new RegExp(x,\"ig\"),needsContext:new RegExp(\"^\"+r+\"*[>+~]|\"+x,\"i\")},M={},N=[],O={},P=[],Q=function(a){return a.sizzleFilter=!0,a},R=function(a){return function(b){return b.nodeName.toLowerCase()===\"input\"&&b.type===a}},S=function(a){return function(b){var c=b.nodeName.toLowerCase();return(c===\"input\"||c===\"button\")&&b.type===a}},T=function(a){var b=!1,c=h.createElement(\"div\");try{b=a(c)}catch(d){}return c=null,b},U=T(function(a){a.innerHTML=\"<select></select>\";var b=typeof a.lastChild.getAttribute(\"multiple\");return b!==\"boolean\"&&b!==\"string\"}),V=T(function(a){a.id=q+0,a.innerHTML=\"<a name=\"\"+q+\"\"></a><div name=\"\"+q+\"\"></div>\",i.insertBefore(a,i.firstChild);var b=h.getElementsByName&&h.getElementsByName(q).length===2+h.getElementsByName(q+0).length;return g=!h.getElementById(q),i.removeChild(a),b}),W=T(function(a){return a.appendChild(h.createComment(\"\")),a.getElementsByTagName(\"*\").length===0}),X=T(function(a){return a.innerHTML=\"<a href=\"#\"></a>\",a.firstChild&&typeof a.firstChild.getAttribute!==j&&a.firstChild.getAttribute(\"href\")===\"#\"}),Y=T(function(a){return a.innerHTML=\"<div class=\"hidden e\"></div><div class=\"hidden\"></div>\",!a.getElementsByClassName||a.getElementsByClassName(\"e\").length===0?!1:(a.lastChild.className=\"e\",a.getElementsByClassName(\"e\").length!==1)}),Z=function(a,b,c,d){c=c||[],b=b||h;var e,f,g,i,j=b.nodeType;if(j!==1&&j!==9)return[];if(!a||typeof a!=\"string\")return c;g=ba(b);if(!g&&!d)if(e=F.exec(a))if(i=e[1]){if(j===9){f=b.getElementById(i);if(!f||!f.parentNode)return c;if(f.id===i)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(i))&&bb(b,f)&&f.id===i)return c.push(f),c}else{if(e[2])return o.apply(c,n.call(b.getElementsByTagName(a),0)),c;if((i=e[3])&&Y&&b.getElementsByClassName)return o.apply(c,n.call(b.getElementsByClassName(i),0)),c}return bm(a,b,c,d,g)},$=Z.selectors={cacheLength:50,match:L,order:[\"ID\",\"TAG\"],attrHandle:{},createPseudo:Q,find:{ID:g?function(a,b,c){if(typeof b.getElementById!==j&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==j&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==j&&e.getAttributeNode(\"id\").value===a?[e]:b:[]}},TAG:W?function(a,b){if(typeof b.getElementsByTagName!==j)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a===\"*\"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c}},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(K,\"\"),a[3]=(a[4]||a[5]||\"\").replace(K,\"\"),a[2]===\"~=\"&&(a[3]=\" \"+a[3]+\" \"),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]===\"nth\"?(a[2]||Z.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]===\"even\"||a[2]===\"odd\")),a[4]=+(a[6]+a[7]||a[2]===\"odd\")):a[2]&&Z.error(a[0]),a},PSEUDO:function(a){var b,c=a[4];return L.CHILD.test(a[0])?null:(c&&(b=D.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:g?function(a){return a=a.replace(K,\"\"),function(b){return b.getAttribute(\"id\")===a}}:function(a){return a=a.replace(K,\"\"),function(b){var c=typeof b.getAttributeNode!==j&&b.getAttributeNode(\"id\");return c&&c.value===a}},TAG:function(a){return a===\"*\"?function(){return!0}:(a=a.replace(K,\"\").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=M[a];return b||(b=M[a]=new RegExp(\"(^|\"+r+\")\"+a+\"(\"+r+\"|$)\"),N.push(a),N.length>$.cacheLength&&delete M[N.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==j&&a.getAttribute(\"class\")||\"\")}},ATTR:function(a,b,c){return b?function(d){var e=Z.attr(d,a),f=e+\"\";if(e==null)return b===\"!=\";switch(b){case\"=\":return f===c;case\"!=\":return f!==c;case\"^=\":return c&&f.indexOf(c)===0;case\"*=\":return c&&f.indexOf(c)>-1;case\"$=\":return c&&f.substr(f.length-c.length)===c;case\"~=\":return(\" \"+f+\" \").indexOf(c)>-1;case\"|=\":return f===c||f.substr(0,c.length+1)===c+\"-\"}}:function(b){return Z.attr(b,a)!=null}},CHILD:function(a,b,c,d){if(a===\"nth\"){var e=m++;return function(a){var b,f,g=0,h=a;if(c===1&&d===0)return!0;b=a.parentNode;if(b&&(b[q]!==e||!a.sizset)){for(h=b.firstChild;h;h=h.nextSibling)if(h.nodeType===1){h.sizset=++g;if(h===a)break}b[q]=e}return f=a.sizset-d,c===0?f===0:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case\"only\":case\"first\":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a===\"first\")return!0;c=b;case\"last\":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e=$.pseudos[a]||$.pseudos[a.toLowerCase()];return e||Z.error(\"unsupported pseudo: \"+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:Q(function(a,b,c){var d=bl(a.replace(A,\"$1\"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&!!a.checked||b===\"option\"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!$.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>\"@\"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},contains:Q(function(a){return function(b){return(b.textContent||b.innerText||bc(b)).indexOf(a)>-1}}),has:Q(function(a){return function(b){return Z(a,b).length>0}}),header:function(a){return I.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()===\"input\"&&(b=a.type)===\"text\"&&((c=a.getAttribute(\"type\"))==null||c.toLowerCase()===b)},radio:R(\"radio\"),checkbox:R(\"checkbox\"),file:R(\"file\"),password:R(\"password\"),image:R(\"image\"),submit:S(\"submit\"),reset:S(\"reset\"),button:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&a.type===\"button\"||b===\"button\"},input:function(a){return J.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){var d=[],e=c?1:0,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},odd:function(a,b,c){var d=\"[],e=c?0:1,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return\" d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var c?a:d}}};$.setfilters.nth=\"$.setFilters.eq,$.filters=$.pseudos,X||($.attrHandle={href:function(a){return\" a.getattribute(\"href\",2)},type:function(a){return a.getattribute(\"type\")}}),v&&($.order.push(\"name\"),$.find.name=\"function(a,b){if(typeof\" b.getelementsbyname!=\"=j)return\" b.getelementsbyname(a)}),y&&($.order.splice(1,0,\"class\"),$.find.class=\"function(a,b,c){if(typeof\" b.getelementsbyclassname!=\"=j&&!c)return\" b.getelementsbyclassname(a)});try{n.call(i.childnodes,0)[0].nodetype}catch(_){n=\"function(a){var\" b,c=\"[];for(;b=this[a];a++)c.push(b);return\" c}}var ba=\"Z.isXML=function(a){var\" b=\"a&&(a.ownerDocument||a).documentElement;return\" b?b.nodename!=\"=\"HTML\":!1},bb=Z.contains=i.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:i.contains?function(a,b){var\" c=\"a.nodeType===9?a.documentElement:a,d=b.parentNode;return\" a=\"==d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bc=Z.getText=function(a){var\" ,d=\"0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof\" a.textcontent=\"=\"string\")return\" a.textcontent;for(a=\"a.firstChild;a;a=a.nextSibling)c+=bc(a)}else\" if(e=\"==3||e===4)return\" a.nodevalue}else for(;b=\"a[d];d++)c+=bc(b);return\" c};z.attr=\"function(a,b){var\" c,d=\"ba(a);return\" d||(b=\"b.toLowerCase()),$.attrHandle[b]?$.attrHandle[b](a):U||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof\" a[b]=\"=\"boolean\"?a[b]?b:null:c.specified?c.value:null:null)},Z.error=function(a){throw\" new error(\"syntax error, unrecognized expression: \"+a)},[0,0].sort(function(){return l=\"0}),i.compareDocumentPosition?e=function(a,b){return\" k=\"!0,0;if(a.sourceIndex&&b.sourceIndex)return\" a.sourceindex-b.sourceindex;var c,d,e=\"[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return\" f(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=\"j.parentNode;j=i;while(j)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var\" f(e[l],g[l]);return c;var 1}),z.uniquesort=\"function(a){var\" a};var bl=\"Z.compile=function(a,b,c){var\" d,e,f,g=\"O[a];if(g&&g.context===b)return\" g;e=\"bg(a,b,c);for(f=0;d=e[f];f++)e[f]=bj(d,b,c);return\" g=\"O[a]=bk(e),g.context=b,g.runs=g.dirruns=0,P.push(a),P.length\">$.cacheLength&&delete O[P.shift()],g};Z.matches=function(a,b){return Z(a,null,null,b)},Z.matchesSelector=function(a,b){return Z(b,null,null,[a]).length>0};var bm=function(a,b,e,f,g){a=a.replace(A,\"$1\");var h,i,j,k,l,m,p,q,r,s=a.match(C),t=a.match(E),u=b.nodeType;if(L.POS.test(a))return bf(a,b,e,f,s);if(f)h=n.call(f,0);else if(s&&s.length===1){if(t.length>1&&u===9&&!g&&(s=L.ID.exec(t[0]))){b=$.find.ID(s[1],b,g)[0];if(!b)return e;a=a.slice(t.shift().length)}q=(s=G.exec(t[0]))&&!s.index&&b.parentNode||b,r=t.pop(),m=r.split(\":not\")[0];for(j=0,k=$.order.length;j<k;j++){p=$.order[j];if(s=l[p].exec(m)){h=$.find[p]((s[1]||\"\").replace(k,\"\"),q,g);if(h==null)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(l[p],\"\"),a||o.apply(e,n.call(h,0)));break}}}if(a){i=bl(a,b,g),d=i.dirruns++,h==null&&(h=$.find.tag(\"*\",g.test(a)&&b.parentnode||b));for(j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l)}return e};h.queryselectorall&&function(){var a,b=\"bm,c=/'|\\\\/g,d=/\\=[\\x20\\t\\r\\n\\f]*([^'\"\\]]*)[\\x20\\t\\r\\n\\f]*\\]/g,e=[],f=[\":active\"],g=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;T(function(a){a.innerHTML=\"<select\"><option selected></option>\",a.querySelectorAll(\"[selected]\").length||e.push(\"\\\\[\"+r+\"*(?:checked|disabled|ismap|multiple|readonly|selected|value)\"),a.querySelectorAll(\":checked\").length||e.push(\":checked\")}),T(function(a){a.innerHTML=\"<p test></p>\",a.querySelectorAll(\"[test^='']\").length&&e.push(\"[*^$]=\"+r+\"*(?:\\\"\\\"|'')\"),a.innerHTML=\"<input type=\"hidden\">\",a.querySelectorAll(\":enabled\").length||e.push(\":enabled\",\":disabled\")}),e=e.length&&new RegExp(e.join(\"|\")),bm=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a)))if(d.nodeType===9)try{return o.apply(f,n.call(d.querySelectorAll(a),0)),f}catch(i){}else if(d.nodeType===1&&d.nodeName.toLowerCase()!==\"object\"){var j=d.getAttribute(\"id\"),k=j||q,l=G.test(a)&&d.parentNode||d;j?k=k.replace(c,\"\\\\$&\"):d.setAttribute(\"id\",k);try{return o.apply(f,n.call(l.querySelectorAll(a.replace(C,\"[id='\"+k+\"'] $&\")),0)),f}catch(i){}finally{j||d.removeAttribute(\"id\")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,\"div\");try{g.call(b,\"[test!='']:sizzle\"),f.push($.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join(\"|\")),Z.matchesSelector=function(b,c){c=c.replace(d,\"='$1']\");if(!ba(b)&&!f.test(c)&&(!e||!e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&b.document.nodeType!==11)return h}catch(i){}return Z(c,null,null,[b]).length>0})}(),Z.attr=p.attr,p.find=Z,p.expr=Z.selectors,p.expr[\":\"]=p.expr.pseudos,p.unique=Z.uniqueSort,p.text=Z.getText,p.isXMLDoc=Z.isXML,p.contains=Z.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\\[\\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!=\"string\")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushstack(\"\",\"find\",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=\"p(a,this),d=c.length;return\" this.filter(function(){for(b=\"0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return\" this.pushstack(bj(this,a,!1),\"not\",a)},filter:function(a){return this.pushstack(bj(this,a,!0),\"filter\",a)},is:function(a){return!!a&&(typeof a=\"=\"string\"?bf.test(a)?p(a,this.context).index(this[0])\">=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!=\"string\"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerdocument&&c!==b&&c.nodetype!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,\"closest\",a)},index:function(a){return a?typeof a==\"string\"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a==\"string\"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,\"parentNode\")},parentsUntil:function(a,b,c){return p.dir(a,\"parentNode\",c)},next:function(a){return bi(a,\"nextSibling\")},prev:function(a){return bi(a,\"previousSibling\")},nextAll:function(a){return p.dir(a,\"nextSibling\")},prevAll:function(a){return p.dir(a,\"previousSibling\")},nextUntil:function(a,b,c){return p.dir(a,\"nextSibling\",c)},prevUntil:function(a,b,c){return p.dir(a,\"previousSibling\",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,\"iframe\")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d==\"string\"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(\",\"))}}),p.extend({filter:function(a,b,c){return c&&(a=\":not(\"+a+\")\"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",bm=/ jQuery\\d+=\"(?:null|\\d+)\"/g,bn=/^\\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bp=/<([\\w:]+) ,bq=\"/<tbody/i,br=/<|&#?\\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new\" regexp(\"<(?:\"+bl+\")[\\\\s>]\",\"i\"),bv=/^(?:checkbox|radio)$/,bw=/checked\\s*(?:[^=]|=\\s*.checked.)/i,bx=/\\/(java|ecma)script/i,by=/^\\s*<!(?:\\[CDATA\\[|\\-\\-)|[\\]\\-]{2}>\\s*$/g,bz={option:[1,\"<select multiple=\"multiple\">\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],area:[1,\"<map>\",\"</map>\"],_default:[0,\"\",\"\"]},bA=bk(e),bB=bA.appendChild(e.createElement(\"div\"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,\"X<div>\",\"</div>\"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,\"body\")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),\"before\",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),\"after\",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName(\"*\")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName(\"*\"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,\"\"):b;if(typeof a==\"string\"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||[\"\",\"\"])[1].toLowerCase()]){a=a.replace(bo,\"<$1>\");try{for(;d<e;d++)c=this[d]||{},c.nodetype===1&&(p.cleandata(c.getelementsbytagname(\"*\")),c.innerhtml=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replacewith:function(a){return bh(this[0])?this.length?this.pushstack(p(p.isfunction(a)?a():a),\"replacewith\",a):this:p.isfunction(a)?this.each(function(b){var c=\"p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof\" a!=\"string\" &&(a=\"p(a).detach()),this.each(function(){var\" b=\"this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return\" this.remove(a,!0)},dommanip:function(a,c,d){a=\"[].concat.apply([],a);var\" e,f,g,h,i=\"0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l\">1&&typeof j==\"string\"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,\"tr\");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodename(this[i],\"table\")?bc(this[i],\"tbody\"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:\"get\",datatype:\"script\",async:!1,global:!1,\"throws\":!0}):p.error(\"no ajax\"):p.globaleval((b.text||b.textcontent||b.innerhtml||\"\").replace(by,\"\")),b.parentnode&&b.parentnode.removechild(b)})}return this}}),p.buildfragment=\"function(a,c,d){var\" f,g,h,i=\"a[0];return\" c=\"c||e,c=(c[0]||c).ownerDocument||c[0]||c,typeof\" c.createdocumentfragment=\"=\"undefined\"&&(c=e),a.length===1&&typeof\" i=\"=\"string\"&&i.length<512&&c===e&&i.charAt(0)===\"<\"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(a,b){p.fn[a]=function(c){var\" d,e=\"0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return\" g[b](this[0]),this;for(;e<h;e++)d=\"(e\">0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test(\"<\"+a.nodename+\">\")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=0,t=[];if(!b||typeof b.createDocumentFragment==\"undefined\")b=e;for(g=b===e&&bA;(h=a[s])!=null;s++){typeof h==\"number\"&&(h+=\"\");if(!h)continue;if(typeof h==\"string\")if(!br.test(h))h=b.createTextNode(h);else{g=g||bk(b),l=l||g.appendChild(b.createElement(\"div\")),h=h.replace(bo,\"<$1>\"),i=(bp.exec(h)||[\"\",\"\"])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i===\"table\"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]===\"<table>\"&&!m?l.childNodes:[];for(f=n.length-1;f>=0;--f)p.nodeName(n[f],\"tbody\")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l=g.lastChild}h.nodeType?t.push(h):t=p.merge(t,h)}l&&(g.removeChild(l),h=l=g=null);if(!p.support.appendChecked)for(s=0;(h=t[s])!=null;s++)p.nodeName(h,\"input\")?bG(h):typeof h.getElementsByTagName!=\"undefined\"&&p.grep(h.getElementsByTagName(\"input\"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(s=0;(h=t[s])!=null;s++)if(!p.nodeName(h,\"script\")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!=\"undefined\"&&(r=p.grep(p.merge([],h.getElementsByTagName(\"script\")),q),t.splice.apply(t,[s+1,0].concat(r)),s+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \\/]([\\w.]+)/.exec(a)||/(webkit)[ \\/]([\\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(a)||/(msie) ([\\w.]+)/.exec(a)||a.indexOf(\"compatible\")<0&& (mozilla)(?:.*? rv:([\\w.]+)|) .exec(a)||[];return{browser:b[1]||\"\",version:b[2]||\"0\"}},a=\"p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function\" a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=\"this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function\" c(c,d){return d&&d instanceof p&&!(d a)&&(d=\"a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var\" b=\"a(e);return\" a}}();var bh,bi,bj,bk=\"/alpha\\([^)]*\\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^margin/,bO=new\" regexp(\"^(\"+q+\")(.*)$\",\"i\"),bp=\"new\" regexp(\"^(\"+q+\")(?!px)[a-z%]+$\",\"i\"),bq=\"new\" regexp(\"^([-+])=\"(\"+q+\")\",\"i\"),bR={},bS={position:\"absolute\",visibility:\"hidden\",display:\"block\"},bT={letterSpacing:0,fontWeight:400,lineHeight:1},bU=[\"Top\",\"Right\",\"Bottom\",\"Left\"],bV=[\"Webkit\",\"O\",\"Moz\",\"ms\"],bW=p.fn.toggle;p.fn.extend({css:function(a,c){return\" p.access(this,function(a,c,d){return d!=\"=b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length\">1)},show:function(){return bZ(this,!0)},hide:function(){return bZ(this)},toggle:function(a,b){var c=typeof a==\"boolean\";return p.isFunction(a)&&p.isFunction(b)?bW.apply(this,arguments):this.each(function(){(c?a:bY(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,\"opacity\");return c===\"\"?\"1\":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":p.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bX(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&\"get\"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g===\"string\"&&(f=bQ.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g=\"number\");if(d==null||g===\"number\"&&isNaN(d))return;g===\"number\"&&!p.cssNumber[i]&&(d+=\"px\");if(!h||!(\"set\"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bX(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&\"get\"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f===\"normal\"&&c in bT&&(f=bT[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(c=g[b],c===\"\"&&!p.contains(a.ownerDocument.documentElement,a)&&(c=p.style(a,b)),bP.test(c)&&bN.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bP.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b===\"fontSize\"?\"1em\":e,e=f.pixelLeft+\"px\",f.left=c,d&&(a.runtimeStyle.left=d)),e===\"\"?\"auto\":e}),p.each([\"height\",\"width\"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0||bH(a,\"display\")!==\"none\"?ca(a,b,d):p.swap(a,bS,function(){return ca(a,b,d)})},set:function(a,c,d){return b$(a,c,d?b_(a,b,d,p.support.boxSizing&&p.css(a,\"boxSizing\")===\"border-box\"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":b?\"1\":\"\"},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?\"alpha(opacity=\"+b*100+\")\":\"\",f=d&&d.filter||c.filter||\"\";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,\"\"))===\"\"&&c.removeAttribute){c.removeAttribute(\"filter\");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+\" \"+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:\"inline-block\"},function(){if(b)return bH(a,\"marginRight\")})}}),!p.support.pixelPosition&&p.fn.position&&p.each([\"top\",\"left\"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bP.test(d)?p(a).position()[b]+\"px\":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,\"display\"))===\"none\"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:\"\",padding:\"\",border:\"Width\"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c==\"string\"?c.split(\" \"):[c],f={};for(d=0;d<4;d++)f[a+bu[d]+b]=e[d]||e[d-2]||e[0];return f}},bn.test(a)||(p.csshooks[a+b].set=\"b$)});var\" cc=\"/%20/g,cd=/\\[\\]$/,ce=/\\r?\\n/g,cf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,cg=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return\" p.param(this.serializearray())},serializearray:function(){return this.map(function(){return this.elements?p.makearray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cg.test(this.nodename)||cf.test(this.type))}).map(function(a,b){var c=\"p(this).val();return\" d,e=\"[],f=function(a,b){b=p.isFunction(b)?b():b==null?\"\":b,e[e.length]=encodeURIComponent(a)+\"=\"+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else\" for(d in a)ch(d,a[d],c,f);return e.join(\"&\").replace(cc,\"+\")};var ci,cj,ck=\"/#.*$/,cl=/^(.*?):[\" \\t]*([^\\r\\n]*)\\r?$ mg,cm=\"/^(?:about|app|app\\-storage|.+\\-extension|file|res|widget):$/,cn=/^(?:GET|HEAD)$/,co=/^\\/\\//,cp=/\\?/,cq=/<script\\b[^<]*(?:(?!<\\/script\">)<[^<]*)*<\\ script>/gi,cr=/([?&])_=[^&]*/,cs=/^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,ct=p.fn.load,cu={},cv={},cw=[\"*/\"]+[\"*\"];try{ci=f.href}catch(cx){ci=e.createElement(\"a\"),ci.href=\"\",ci=ci.href}cj=cs.exec(ci.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!=\"string\"&&ct)return ct.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(\" \");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):typeof c==\"object\"&&(f=\"POST\"),p.ajax({url:a,type:f,dataType:\"html\",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p(\"<div>\").append(a.replace(cq,\"\")).find(e):a)}),this},p.each(\"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend\".split(\" \"),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each([\"get\",\"post\"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,\"script\")},getJSON:function(a,b,c){return p.get(a,b,c,\"json\")},ajaxSetup:function(a,b){return b?cA(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cA(a,b),a},ajaxSettings:{url:ci,isLocal:cm.test(cj[1]),global:!0,type:\"GET\",contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",processData:!0,async:!0,accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",\"*\":cw},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":a.String,\"text html\":!0,\"text json\":p.parseJSON,\"text xml\":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cy(cu),ajaxTransport:cy(cv),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||\"\",x.readyState=a>0?4:0,f&&(u=cB(l,x,f));if(a>=200&&a<300||a===304)l.ifmodified&&(w=x.getresponseheader(\"last-modified\"),w&&(p.lastmodified[d]=w),w=x.getresponseheader(\"etag\"),w&&(p.etag[d]=w)),a===304?(y=\"notmodified\",k=!0):(k=cc(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y=\"error\",a<0&&(a=0)}x.status=a,x.statustext=\"\"+(c||y),k?o.resolvewith(m,[s,y,x]):o.rejectwith(m,[x,y,t]),x.statuscode(r),r=b,j&&n.trigger(\"ajax\"+(k?\"success\":\"error\"),[x,l,k?s:t]),q.firewith(m,[x,y]),j&&(n.trigger(\"ajaxcomplete\",[x,l]),--p.active||p.event.trigger(\"ajaxstop\"))}typeof a=\"=\"object\"&&(c=a,a=b),c=c||{};var\" d,e,f,g,h,i,j,k,l=\"p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m\" instanceof p)?p(m):p.event,o=\"p.Deferred(),q=p.Callbacks(\"once\" memory\"),r=\"l.statusCode||{},t={},u={},v=0,w=\"canceled\",x={readyState:0,setRequestHeader:function(a,b){if(!v){var\" c=\"a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return\" this},getallresponseheaders:function(){return v=\"==2?e:null},getResponseHeader:function(a){var\" c;if(v=\"==2){if(!f){f={};while(c=cl.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return\" v||(l.mimetype=\"a),this},abort:function(a){return\" b;if(v<2)for(b in a)r[b]=\"[r[b],a[b]];else\" b=\"a[x.status],x.always(b)}return\" this},l.url=\"((a||l.url)+\"\").replace(ck,\"\").replace(co,cj[1]+\"//\"),l.dataTypes=p.trim(l.dataType||\"*\").toLowerCase().split(s),l.crossDomain==null&&(i=cs.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==cj[1]&&i[2]==cj[2]&&(i[3]||(i[1]===\"http:\"?80:443))==(cj[3]||(cj[1]===\"http:\"?80:443)))),l.data&&l.processData&&typeof\" l.data!=\"string\" &&(l.data=\"p.param(l.data,l.traditional)),cz(cu,l,c,x);if(v===2)return\" x;j=\"l.global,l.type=l.type.toUpperCase(),l.hasContent=!cn.test(l.type),j&&p.active++===0&&p.event.trigger(\"ajaxStart\");if(!l.hasContent){l.data&&(l.url+=(cp.test(l.url)?\"&\":\"?\")+l.data,delete\" l.data),d=\"l.url;if(l.cache===!1){var\" z=\"p.now(),A=l.url.replace(cr,\"$1_=\"+z);l.url=A+(A===l.url?(cp.test(l.url)?\"&\":\"?\")+\"_=\"+z:\"\")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader(\"Content-Type\",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader(\"If-Modified-Since\",p.lastModified[d]),p.etag[d]&&x.setRequestHeader(\"If-None-Match\",p.etag[d])),x.setRequestHeader(\"Accept\",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!==\"*\"?\",\" \"+cw+\"; q=\"0.01\":\"\"):l.accepts[\"*\"]);for(k\" l.headers)x.setrequestheader(k,l.headers[k]);if(!l.beforesend||l.beforesend.call(m,x,l)!=\"=!1&&v!==2){w=\"abort\";for(k\" in{success:1,error:1,complete:1})x[k](l[k]);g=\"cz(cv,l,c,x);if(!g)y(-1,\"No\" transport\");else{x.readystate=\"1,j&&n.trigger(\"ajaxSend\",[x,l]),l.async&&l.timeout\">0&&(h=setTimeout(function(){x.abort(\"timeout\")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,b);else throw b}}return x}return x.abort()},active:0,lastmodified:{},etag:{}});var cd=\"[],cE=/\\?/,cF=/(=)\\?(?=&|$)|\\?\\?/,cG=p.now();p.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var\" a=\"cD.pop()||p.expando+\"_\"+cG++;return\" this[a]=\"!0,a}}),p.ajaxPrefilter(\"json\" jsonp\",function(c,d,e){var f,g,h,i=\"c.data,j=c.url,k=c.jsonp!==!1,l=k&&cF.test(j),m=k&&!l&&typeof\" i=\"=\"string\"&&!(c.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&cF.test(i);if(c.dataTypes[0]===\"jsonp\"||l||m)return\" f=\"c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cF,\"$1\"+f):m?c.data=i.replace(cF,\"$1\"+f):k&&(c.url+=(cE.test(j)?\"&\":\"?\")+c.jsonp+\"=\"+f),c.converters[\"script\" json\"]=\"function(){return\" h||p.error(f+\" was not called\"),h[0]},c.datatypes[0]=\"json\" ,a[f]=\"function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cD.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),\"script\"}),p.ajaxSetup({accepts:{script:\"text/javascript,\" application javascript, ecmascript, x-ecmascript\"},contents:{script: javascript|ecmascript },converters:{\"text script\":function(a){return p.globaleval(a),a}}}),p.ajaxprefilter(\"script\",function(a){a.cache=\"==b&&(a.cache=!1),a.crossDomain&&(a.type=\"GET\",a.global=!1)}),p.ajaxTransport(\"script\",function(a){if(a.crossDomain){var\" c,d=\"e.head||e.getElementsByTagName(\"head\")[0]||e.documentElement;return{send:function(f,g){c=e.createElement(\"script\"),c.async=\"async\",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,\"success\")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var\" ch,ci=\"a.ActiveXObject?function(){for(var\" in ch)ch[a](0,1)}:!1,cj=\"0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cK()||cL()}:cK,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&\"withCredentials\"in\" a})}(p.ajaxsettings.xhr()),p.support.ajax&&p.ajaxtransport(function(c){if(!c.crossdomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=\"c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h\" c.xhrfields)i[h]=\"c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e[\"X-Requested-With\"]&&(e[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(h\" e)i.setrequestheader(h,e[h])}catch(j){}i.send(c.hascontent&&c.data||null),d=\"function(a,e){var\" h,j,k,l,m;try{if(d&&(e||i.readystate=\"==4)){d=b,g&&(i.onreadystatechange=p.noop,cI&&delete\" ch[g]);if(e)i.readystate!=\"=4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=\"\"}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cJ,cI&&(cH||(cH={},p(a).unload(cI)),cH[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var\" cm,cn,co=\"/^(?:toggle|show|hide)$/,cP=new\" regexp(\"^(?:([-+])=\"|)(\"+q+\")([a-z%]*)$\",\"i\"),cQ=/queueHooks$/,cR=[cX],cS={\"*\":[function(a,b){var\" c,d,e,f=\"this.createTween(a,b),g=cP.exec(b),h=f.cur(),i=+h||0,j=1;if(g){c=+g[2],d=g[3]||(p.cssNumber[a]?\"\":\"px\");if(d!==\"px\"&&i){i=p.css(f.elem,a,!0)||c||1;do\" e=\"j=j||\".5\",i=i/j,p.style(f.elem,a,i+d),j=f.cur()/h;while(j!==1&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return\" f}]};p.animation=\"p.extend(cV,{tweener:function(a,b){p.isFunction(a)?(b=a,a=[\"*\"]):a=a.split(\"\" \");var a&&a.get?a.get(this):cy.prophooks._default.get(this)},run:function(a){var b,c=\"cY.propHooks[this.prop];return\" this.pos=\"b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cY.propHooks._default.set(this),this}},cY.prototype.init.prototype=cY.prototype,cY.propHooks={_default:{get:function(a){var\" b;return a.elem[a.prop]=\"=null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,\"\"),!b||b===\"auto\"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cY.propHooks.scrollTop=cY.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each([\"toggle\",\"show\",\"hide\"],function(a,b){var\" c=\"p.fn[b];p.fn[b]=function(d,e,f){return\" d=\"=null||typeof\" this.filter(by).css(\"opacity\",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var b=\"cV(this,p.extend({},a),f);e&&b.stop(!0)};return\" e||f.queue=\"==!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var\" a.stop,b(d)};return typeof a!=\"string\" &&(d=\"c,c=a,a=b),c&&a!==!1&&this.queue(a||\"fx\",[]),this.each(function(){var\" for(c g)g[c]&&g[c].stop&&cq.test(c)&&e(g[c]);for(c=\"f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:cZ(\"show\"),slideUp:cZ(\"hide\"),slideToggle:cZ(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(a,b){p.fn[a]=function(a,c,d){return\" this.animate(b,a,c,d)}}),p.speed=\"function(a,b,c){var\" d.duration=\"=\"number\"?d.duration:d.duration\" p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue=\"=null||d.queue===!0)d.queue=\"fx\";return\" d.old=\"d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return\" a},swing:function(a){return.5-math.cos(a*math.pi) 2}},p.timers=\"[],p.fx=cY.prototype.init,p.fx.tick=function(){var\" a,b=\"p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cN&&(cN=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cN),cN=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return\" p.grep(p.timers,function(b){return c$=\"/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return\" c,d,e,f,g,h,i,j,k,l,m=\"this[0],n=m&&m.ownerDocument;if(!n)return;return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=c_(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},p.offset={bodyOffset:function(a){var\" p.support.doesnotincludemargininbodyoffset&&(b+=\"parseFloat(p.css(a,\"marginTop\"))||0,c+=parseFloat(p.css(a,\"marginLeft\"))||0),{top:b,left:c}},setOffset:function(a,b,c){var\">-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),\"using\"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c$.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,\"marginTop\"))||0,c.left-=parseFloat(p.css(a,\"marginLeft\"))||0,d.top+=parseFloat(p.css(b[0],\"borderTopWidth\"))||0,d.left+=parseFloat(p.css(b[0],\"borderLeftWidth\"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c$.test(a.nodeName)&&p.css(a,\"position\")===\"static\")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=c_(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:\"height\",Width:\"width\"},function(a,c){p.each({padding:\"inner\"+a,content:c,\"\":\"outer\"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!=\"boolean\"),h=d||(e===!0||f===!0?\"margin\":\"border\");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement[\"client\"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body[\"scroll\"+a],f[\"scroll\"+a],c.body[\"offset\"+a],f[\"offset\"+a],f[\"client\"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g)}})}),a.jQuery=a.$=p,typeof define==\"function\"&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return p})})(window);</2)y(-1,b);else></300||a===304)l.ifmodified&&(w=x.getresponseheader(\"last-modified\"),w&&(p.lastmodified[d]=w),w=x.getresponseheader(\"etag\"),w&&(p.etag[d]=w)),a===304?(y=\"notmodified\",k=!0):(k=cc(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y=\"error\",a<0&&(a=0)}x.status=a,x.statustext=\"\"+(c||y),k?o.resolvewith(m,[s,y,x]):o.rejectwith(m,[x,y,t]),x.statuscode(r),r=b,j&&n.trigger(\"ajax\"+(k?\"success\":\"error\"),[x,l,k?s:t]),q.firewith(m,[x,y]),j&&(n.trigger(\"ajaxcomplete\",[x,l]),--p.active||p.event.trigger(\"ajaxstop\"))}typeof></div></[^<]*)*<\\></4;d++)f[a+bu[d]+b]=e[d]||e[d-2]||e[0];return></0&&></table></$1></\"+a.nodename+\"></l;i++)d.call(c&&p.nodename(this[i],\"table\")?bc(this[i],\"tbody\"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:\"get\",datatype:\"script\",async:!1,global:!1,\"throws\":!0}):p.error(\"no></e;d++)c=this[d]||{},c.nodetype===1&&(p.cleandata(c.getelementsbytagname(\"*\")),c.innerhtml=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replacewith:function(a){return></$1></([\\w:]+)></(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^></e;d++){c=this[d];while(c&&c.ownerdocument&&c!==b&&c.nodetype!==11){if(g?g.index(c)></g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return></c;b++)if(p.contains(h[b],this))return!0});g=this.pushstack(\"\",\"find\",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b></k;j++){p=$.order[j];if(s=l[p].exec(m)){h=$.find[p]((s[1]||\"\").replace(k,\"\"),q,g);if(h==null)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(l[p],\"\"),a||o.apply(e,n.call(h,0)));break}}}if(a){i=bl(a,b,g),d=i.dirruns++,h==null&&(h=$.find.tag(\"*\",g.test(a)&&b.parentnode||b));for(j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l)}return></f;e=e+2)d.push(a[e]);return></c;a++)arguments[a]===b&&(g[a]=b)};for(;p<q;p++){s.exec(\"\"),a=f[p],j=[],i=0,k=e;while(g=s.exec(a)){n=s.lastindex=g.index+g[0].length;if(n></f;e++)z(a,b[e],c,d)}function></u.length&&!c.ispropagationstopped();d++){j=u[d],c.currenttarget=j.elem;for(e=0;e<j.matches.length&&!c.isimmediatepropagationstopped();e++){l=j.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleobj=l,h=((p.event.special[l.origtype]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventdefault(),c.stoppropagation()))}}return></0?\"on\"+s:\"\";if(!f){h=p.cache;for(j></c.length;j++){k=w.exec(c[j])||[],l=k[1],m=(k[2]||\"\").split(\".\").sort(),r=p.event.special[l]||{},l=(f?r.delegatetype:r.bindtype)||l,r=p.event.special[l]||{},n=p.extend({type:l,origtype:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(\".\")},o),q=i[l];if(!q){q=i[l]=[],q.delegatecount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addeventlistener?a.addeventlistener(l,h,!1):a.attachevent&&a.attachevent(\"on\"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegatecount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var></d.length;g++)e=d[g],e&&(c=p.propfix[e]||e,f=t.test(e),f||p.attr(a,e,\"\"),a.removeattribute(u?e:c),f&&c></0)return></d;c++)if(this[c].nodetype===1&&(\"></d;c++){e=this[c];if(e.nodetype===1)if(!e.classname&&b.length===1)e.classname=a;else{f=\"></d?p.queue(this[0],a):c===b?this:this.each(function(){var></f;e++)delete></d;b++)c[b]&&p.isfunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return></=g&&g--,c<=h&&h--)}),this},has:function(a){return></i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else></g;)if(c.apply(a[f++],d)===!1)break}else></0?this[this.length+a]:this[a]},pushstack:function(a,b,c){var></\"&&a.charat(a.length-1)===\"></\\></(\\w+)\\s*\\></i;h++)d=g[h],f=></body></html></e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function>"},{"_content":"<!DOCTYPE html>\n<html>\n<head>\n\t<style type=\"text/css\">\n\t\tbody{\n\t\t\tbackground: #fff;\n\t\t}\n\t\t.bufBox{\n\t\t\tfloat: left;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #ddd;\n\t\t\tborder-radius: 5px;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tmargin: 0 5px;\n\t\t\tposition:relative;\n\t\t\toverflow: hidden;\n\t\t}\n\t\t.bufCover{\n\t\t\twidth: 100%;\n\t\t\theight: 0;\n\t\t\tbackground: #f0f;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: absolute;\n\t\t}\n\t\t#buf{\n\t\t\theight: 60px;\n\t\t}\n\t\t#des p{\n\t\t\tpadding: 4px 0;\n\t\t\tmargin: 0;\n\t\t\tfont-size: 14px;\n\t\t}\n\t\t#des .desPro{\n\t\t\tcolor: #333;\n\t\t\tbackground: #EEE;\n\t\t}\n\t\t#des .desCon{\n\t\t\tcolor: #EEE;\n\t\t\tbackground: #333;\n\t\t}\n\t\t#des .desSpe{\n\t\t\tbackground: #BBB;\n\t\t}\n\t</style>\n\t<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n</head>\n<body>\n\t<button id=\"produce\">生产</button>\n\t<button id=\"consume\">消费</button>\n\t<div id=\"buf\">\n\t</div>\n\t<div id=\"des\"><p></p></div>\n\t<script type=\"text/javascript\" src=\"pro-con.js\"></script>\n</body>\n</html>","source":"assets/demo/coffee_pc_demo/pro-con.html","raw":"<!DOCTYPE html>\n<html>\n<head>\n\t<style type=\"text/css\">\n\t\tbody{\n\t\t\tbackground: #fff;\n\t\t}\n\t\t.bufBox{\n\t\t\tfloat: left;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #ddd;\n\t\t\tborder-radius: 5px;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tmargin: 0 5px;\n\t\t\tposition:relative;\n\t\t\toverflow: hidden;\n\t\t}\n\t\t.bufCover{\n\t\t\twidth: 100%;\n\t\t\theight: 0;\n\t\t\tbackground: #f0f;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: absolute;\n\t\t}\n\t\t#buf{\n\t\t\theight: 60px;\n\t\t}\n\t\t#des p{\n\t\t\tpadding: 4px 0;\n\t\t\tmargin: 0;\n\t\t\tfont-size: 14px;\n\t\t}\n\t\t#des .desPro{\n\t\t\tcolor: #333;\n\t\t\tbackground: #EEE;\n\t\t}\n\t\t#des .desCon{\n\t\t\tcolor: #EEE;\n\t\t\tbackground: #333;\n\t\t}\n\t\t#des .desSpe{\n\t\t\tbackground: #BBB;\n\t\t}\n\t</style>\n\t<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n</head>\n<body>\n\t<button id=\"produce\">生产</button>\n\t<button id=\"consume\">消费</button>\n\t<div id=\"buf\">\n\t</div>\n\t<div id=\"des\"><p></p></div>\n\t<script type=\"text/javascript\" src=\"pro-con.js\"></script>\n</body>\n</html>","date":"2020-03-12T13:55:48.642Z","updated":"2020-03-12T13:55:48.642Z","path":"assets/demo/coffee_pc_demo/pro-con.html","title":"","comments":1,"layout":"page","_id":"ck7otizrw00177guiy4v1y68v","content":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<style type=\"text/css\">\n\t\tbody{\n\t\t\tbackground: #fff;\n\t\t}\n\t\t.bufBox{\n\t\t\tfloat: left;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #ddd;\n\t\t\tborder-radius: 5px;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tmargin: 0 5px;\n\t\t\tposition:relative;\n\t\t\toverflow: hidden;\n\t\t}\n\t\t.bufCover{\n\t\t\twidth: 100%;\n\t\t\theight: 0;\n\t\t\tbackground: #f0f;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: absolute;\n\t\t}\n\t\t#buf{\n\t\t\theight: 60px;\n\t\t}\n\t\t#des p{\n\t\t\tpadding: 4px 0;\n\t\t\tmargin: 0;\n\t\t\tfont-size: 14px;\n\t\t}\n\t\t#des .desPro{\n\t\t\tcolor: #333;\n\t\t\tbackground: #EEE;\n\t\t}\n\t\t#des .desCon{\n\t\t\tcolor: #EEE;\n\t\t\tbackground: #333;\n\t\t}\n\t\t#des .desSpe{\n\t\t\tbackground: #BBB;\n\t\t}\n\t</style>\n\t<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n</head>\n<body>\n\t<button id=\"produce\">生产</button>\n\t<button id=\"consume\">消费</button>\n\t<div id=\"buf\">\n\t</div>\n\t<div id=\"des\"><p></p></div>\n\t<script type=\"text/javascript\" src=\"pro-con.js\"></script>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<style type=\"text/css\">\n\t\tbody{\n\t\t\tbackground: #fff;\n\t\t}\n\t\t.bufBox{\n\t\t\tfloat: left;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tbackground: #ddd;\n\t\t\tborder-radius: 5px;\n\t\t\ttext-align: center;\n\t\t\tline-height: 50px;\n\t\t\tmargin: 0 5px;\n\t\t\tposition:relative;\n\t\t\toverflow: hidden;\n\t\t}\n\t\t.bufCover{\n\t\t\twidth: 100%;\n\t\t\theight: 0;\n\t\t\tbackground: #f0f;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: absolute;\n\t\t}\n\t\t#buf{\n\t\t\theight: 60px;\n\t\t}\n\t\t#des p{\n\t\t\tpadding: 4px 0;\n\t\t\tmargin: 0;\n\t\t\tfont-size: 14px;\n\t\t}\n\t\t#des .desPro{\n\t\t\tcolor: #333;\n\t\t\tbackground: #EEE;\n\t\t}\n\t\t#des .desCon{\n\t\t\tcolor: #EEE;\n\t\t\tbackground: #333;\n\t\t}\n\t\t#des .desSpe{\n\t\t\tbackground: #BBB;\n\t\t}\n\t</style>\n\t<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n</head>\n<body>\n\t<button id=\"produce\">生产</button>\n\t<button id=\"consume\">消费</button>\n\t<div id=\"buf\">\n\t</div>\n\t<div id=\"des\"><p></p></div>\n\t<script type=\"text/javascript\" src=\"pro-con.js\"></script>\n</body>\n</html>"},{"_content":"<!doctype html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n\t<title>礼物 - 3.8</title>\n\t<link rel=\"stylesheet\" href=\"css/reset.css\">\n\t<link rel=\"stylesheet\" href=\"css/index.css\">\n\t<script src=\"js/zepto.min.js\"></script>\n\t<script src=\"js/shake.js\"></script>\n</head>\n<body>\n\t<!-- <div id=\"my_player\"></div> -->\n\t<header>\n\t\t<p>3.8节礼物，来了…</p>\n\t\t<div class=\"paper-t\"></div>\n\t\t<div class=\"main\">\n\t\t\t<div class=\"main-top top2\">\n\t\t\t\t<section id=\"se1\">\n\t\t\t\t\t<p>首先，你要输入我的生日</p>\n\t\t\t\t\t<input id=\"myBir\" type=\"text\" placeholder=\"4位数，格式为:mmdd\"/>\n\t\t\t\t\t<p>接着，摇一摇…</p>\n\t\t\t\t\t<img src=\"img/shake.png\"/>\n\t\t\t\t\t<p>最后，这就是见证奇迹的时刻…</p>\n\t\t\t\t</section>\n\t\t\t\t<section id=\"se2\" class=\"hide\">\n\t\t\t\t\t<p>3.8节快乐！</p>\n\t\t\t\t\t<p>祝身体健康,平安长乐</p>\n\t\t\t\t\t<p>请打开音量收听…</p>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"paper-b\"></div>\n\t</header>\n</body>\n\t<script>\n\t\tvar Main = (function() {\n\t\t\tfunction playAudio(src) {\n\t\t\t    if (typeof Audio != \"undefined\") { \n\t\t\t        new Audio(src).play() ;\n\t\t\t    } else if (typeof device != \"undefined\") {\n\t\t\t        if (device.platform == 'Android') {\n\t\t\t            console.log(src);\n\t\t\t        }\n\t\t\t        var mediaRes = new Media(src,\n\t\t\t            function onSuccess() {\n\t\t\t                mediaRes.release();\n\t\t\t            },\n\t\t\t            function onError(e){\n\t\t\t                console.log(\"error playing sound: \" + JSON.stringify(e));\n\t\t\t            });\n\t\t\t        mediaRes.play();\n\n\t\t\t    } else {\n\t\t\t        alert(\"no sound API to play: \" + src);\n\t\t\t    }\n\t\t\t}\n\t\t\twindow.addEventListener('shake', autoRun, false);\n\t\t\tfunction autoRun(){\n\t\t\t\tif($(\"#myBir\").val() == \"0425\"){\n\t\t\t\t\t$(\"#se1\").hide();\n\t\t\t\t\t$(\"#se2\").show();\n\t\t\t\t\tplayAudio(\"media/gift.ogg\");\n\t\t\t\t}else{\n\t\t\t\t\talert(\"生日错误\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tvar init = function() {\n\t\t\t\t\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tinit: init\n\t\t\t}\n\t\t})();\n\n\t\t$(Main.init());\n\t</script>\n</html>","source":"assets/demo/gift/index.html","raw":"<!doctype html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n\t<title>礼物 - 3.8</title>\n\t<link rel=\"stylesheet\" href=\"css/reset.css\">\n\t<link rel=\"stylesheet\" href=\"css/index.css\">\n\t<script src=\"js/zepto.min.js\"></script>\n\t<script src=\"js/shake.js\"></script>\n</head>\n<body>\n\t<!-- <div id=\"my_player\"></div> -->\n\t<header>\n\t\t<p>3.8节礼物，来了…</p>\n\t\t<div class=\"paper-t\"></div>\n\t\t<div class=\"main\">\n\t\t\t<div class=\"main-top top2\">\n\t\t\t\t<section id=\"se1\">\n\t\t\t\t\t<p>首先，你要输入我的生日</p>\n\t\t\t\t\t<input id=\"myBir\" type=\"text\" placeholder=\"4位数，格式为:mmdd\"/>\n\t\t\t\t\t<p>接着，摇一摇…</p>\n\t\t\t\t\t<img src=\"img/shake.png\"/>\n\t\t\t\t\t<p>最后，这就是见证奇迹的时刻…</p>\n\t\t\t\t</section>\n\t\t\t\t<section id=\"se2\" class=\"hide\">\n\t\t\t\t\t<p>3.8节快乐！</p>\n\t\t\t\t\t<p>祝身体健康,平安长乐</p>\n\t\t\t\t\t<p>请打开音量收听…</p>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"paper-b\"></div>\n\t</header>\n</body>\n\t<script>\n\t\tvar Main = (function() {\n\t\t\tfunction playAudio(src) {\n\t\t\t    if (typeof Audio != \"undefined\") { \n\t\t\t        new Audio(src).play() ;\n\t\t\t    } else if (typeof device != \"undefined\") {\n\t\t\t        if (device.platform == 'Android') {\n\t\t\t            console.log(src);\n\t\t\t        }\n\t\t\t        var mediaRes = new Media(src,\n\t\t\t            function onSuccess() {\n\t\t\t                mediaRes.release();\n\t\t\t            },\n\t\t\t            function onError(e){\n\t\t\t                console.log(\"error playing sound: \" + JSON.stringify(e));\n\t\t\t            });\n\t\t\t        mediaRes.play();\n\n\t\t\t    } else {\n\t\t\t        alert(\"no sound API to play: \" + src);\n\t\t\t    }\n\t\t\t}\n\t\t\twindow.addEventListener('shake', autoRun, false);\n\t\t\tfunction autoRun(){\n\t\t\t\tif($(\"#myBir\").val() == \"0425\"){\n\t\t\t\t\t$(\"#se1\").hide();\n\t\t\t\t\t$(\"#se2\").show();\n\t\t\t\t\tplayAudio(\"media/gift.ogg\");\n\t\t\t\t}else{\n\t\t\t\t\talert(\"生日错误\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tvar init = function() {\n\t\t\t\t\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tinit: init\n\t\t\t}\n\t\t})();\n\n\t\t$(Main.init());\n\t</script>\n</html>","date":"2020-03-12T13:55:48.645Z","updated":"2020-03-12T13:55:48.645Z","path":"assets/demo/gift/index.html","title":"","comments":1,"layout":"page","_id":"ck7otizrx00187guinn0h3om4","content":"<!doctype html>\n<html lang=\"en\">\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n\t<title>礼物 - 3.8</title>\n\t<link rel=\"stylesheet\" href=\"css/reset.css\">\n\t<link rel=\"stylesheet\" href=\"css/index.css\">\n\t<script src=\"js/zepto.min.js\"></script>\n\t<script src=\"js/shake.js\"></script>\n</head>\n<body>\n\t<!-- <div id=\"my_player\"></div> -->\n\t<header>\n\t\t<p>3.8节礼物，来了…</p>\n\t\t<div class=\"paper-t\"></div>\n\t\t<div class=\"main\">\n\t\t\t<div class=\"main-top top2\">\n\t\t\t\t<section id=\"se1\">\n\t\t\t\t\t<p>首先，你要输入我的生日</p>\n\t\t\t\t\t<input id=\"myBir\" type=\"text\" placeholder=\"4位数，格式为:mmdd\">\n\t\t\t\t\t<p>接着，摇一摇…</p>\n\t\t\t\t\t<img src=\"img/shake.png\">\n\t\t\t\t\t<p>最后，这就是见证奇迹的时刻…</p>\n\t\t\t\t</section>\n\t\t\t\t<section id=\"se2\" class=\"hide\">\n\t\t\t\t\t<p>3.8节快乐！</p>\n\t\t\t\t\t<p>祝身体健康,平安长乐</p>\n\t\t\t\t\t<p>请打开音量收听…</p>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"paper-b\"></div>\n\t</header>\n</body>\n\t<script>\n\t\tvar Main = (function() {\n\t\t\tfunction playAudio(src) {\n\t\t\t    if (typeof Audio != \"undefined\") { \n\t\t\t        new Audio(src).play() ;\n\t\t\t    } else if (typeof device != \"undefined\") {\n\t\t\t        if (device.platform == 'Android') {\n\t\t\t            console.log(src);\n\t\t\t        }\n\t\t\t        var mediaRes = new Media(src,\n\t\t\t            function onSuccess() {\n\t\t\t                mediaRes.release();\n\t\t\t            },\n\t\t\t            function onError(e){\n\t\t\t                console.log(\"error playing sound: \" + JSON.stringify(e));\n\t\t\t            });\n\t\t\t        mediaRes.play();\n\n\t\t\t    } else {\n\t\t\t        alert(\"no sound API to play: \" + src);\n\t\t\t    }\n\t\t\t}\n\t\t\twindow.addEventListener('shake', autoRun, false);\n\t\t\tfunction autoRun(){\n\t\t\t\tif($(\"#myBir\").val() == \"0425\"){\n\t\t\t\t\t$(\"#se1\").hide();\n\t\t\t\t\t$(\"#se2\").show();\n\t\t\t\t\tplayAudio(\"media/gift.ogg\");\n\t\t\t\t}else{\n\t\t\t\t\talert(\"生日错误\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tvar init = function() {\n\t\t\t\t\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tinit: init\n\t\t\t}\n\t\t})();\n\n\t\t$(Main.init());\n\t</script>\n</html>","site":{"data":{}},"excerpt":"","more":"<!doctype html>\n<html lang=\"en\">\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n\t<meta charset=\"utf-8\">\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, user-scalable=no\">\n\t<title>礼物 - 3.8</title>\n\t<link rel=\"stylesheet\" href=\"css/reset.css\">\n\t<link rel=\"stylesheet\" href=\"css/index.css\">\n\t<script src=\"js/zepto.min.js\"></script>\n\t<script src=\"js/shake.js\"></script>\n</head>\n<body>\n\t<!-- <div id=\"my_player\"></div> -->\n\t<header>\n\t\t<p>3.8节礼物，来了…</p>\n\t\t<div class=\"paper-t\"></div>\n\t\t<div class=\"main\">\n\t\t\t<div class=\"main-top top2\">\n\t\t\t\t<section id=\"se1\">\n\t\t\t\t\t<p>首先，你要输入我的生日</p>\n\t\t\t\t\t<input id=\"myBir\" type=\"text\" placeholder=\"4位数，格式为:mmdd\">\n\t\t\t\t\t<p>接着，摇一摇…</p>\n\t\t\t\t\t<img src=\"img/shake.png\">\n\t\t\t\t\t<p>最后，这就是见证奇迹的时刻…</p>\n\t\t\t\t</section>\n\t\t\t\t<section id=\"se2\" class=\"hide\">\n\t\t\t\t\t<p>3.8节快乐！</p>\n\t\t\t\t\t<p>祝身体健康,平安长乐</p>\n\t\t\t\t\t<p>请打开音量收听…</p>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"paper-b\"></div>\n\t</header>\n</body>\n\t<script>\n\t\tvar Main = (function() {\n\t\t\tfunction playAudio(src) {\n\t\t\t    if (typeof Audio != \"undefined\") { \n\t\t\t        new Audio(src).play() ;\n\t\t\t    } else if (typeof device != \"undefined\") {\n\t\t\t        if (device.platform == 'Android') {\n\t\t\t            console.log(src);\n\t\t\t        }\n\t\t\t        var mediaRes = new Media(src,\n\t\t\t            function onSuccess() {\n\t\t\t                mediaRes.release();\n\t\t\t            },\n\t\t\t            function onError(e){\n\t\t\t                console.log(\"error playing sound: \" + JSON.stringify(e));\n\t\t\t            });\n\t\t\t        mediaRes.play();\n\n\t\t\t    } else {\n\t\t\t        alert(\"no sound API to play: \" + src);\n\t\t\t    }\n\t\t\t}\n\t\t\twindow.addEventListener('shake', autoRun, false);\n\t\t\tfunction autoRun(){\n\t\t\t\tif($(\"#myBir\").val() == \"0425\"){\n\t\t\t\t\t$(\"#se1\").hide();\n\t\t\t\t\t$(\"#se2\").show();\n\t\t\t\t\tplayAudio(\"media/gift.ogg\");\n\t\t\t\t}else{\n\t\t\t\t\talert(\"生日错误\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tvar init = function() {\n\t\t\t\t\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tinit: init\n\t\t\t}\n\t\t})();\n\n\t\t$(Main.init());\n\t</script>\n</html>"},{"_content":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var N, ProCon, func, procon;\n\n  N = 10;\n\n  func = function(a, b) {\n    if (a == null) {\n      a = 4;\n    }\n    if (b == null) {\n      b = 6;\n    }\n    return a + b;\n  };\n\n  ProCon = (function() {\n\n    function ProCon() {}\n\n    ProCon.prototype.data = {\n      mutex: 1,\n      empty: N,\n      full: 0,\n      front: 0,\n      rear: 0,\n      buf: []\n    };\n\n    ProCon.prototype.init = function() {\n      var i, newDom,\n        _this = this;\n      i = 0;\n      while (i < N) {\n        newDom = $('<div class=\"bufBox\"><div class=\"bufCover\">' + i + '</div>' + i + '</div>');\n        $('#buf').append(newDom);\n        this.data.buf.push('e');\n        i++;\n      }\n      $('#produce').click(function() {\n        return _this.producer();\n      });\n      return $('#consume').click(function() {\n        return _this.consumer();\n      });\n    };\n\n    ProCon.prototype.p = function(num) {\n      return --num;\n    };\n\n    ProCon.prototype.v = function(num) {\n      return ++num;\n    };\n\n    ProCon.prototype.produceItem = function() {\n      $('<p class=\"desPro\">生产了产品</p>').insertBefore($(\"#des p:first\"));\n      return 'm';\n    };\n\n    ProCon.prototype.consumeItem = function() {\n      return $('<p class=\"desCon\">消费了产品</p>').insertBefore($(\"#des p:first\"));\n    };\n\n    ProCon.prototype.enterItem = function(item) {\n      var str;\n      this.data.front = (this.data.front + 1) % N;\n      this.data.buf[this.data.front] = item;\n      str = \"存入产品\" + this.data.buf[this.data.front] + \"到缓冲区\" + this.data.front;\n      $(\"<p class='desPro'>\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.front]).animate({\n        \"height\": \"50px\"\n      });\n    };\n\n    ProCon.prototype.removeItem = function() {\n      var str;\n      this.data.rear = (this.data.rear + 1) % N;\n      this.data.buf[this.data.rear] = 'e';\n      str = \"取出产品\" + this.data.buf[this.data.rear] + \"从缓冲区\" + this.data.rear;\n      $(\"<p class='desCon'>\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.rear]).animate({\n        \"height\": \"0px\"\n      });\n    };\n\n    ProCon.prototype.producer = function() {\n      var item;\n      if (this.data.full === N) {\n        $(\"<p class='desSpe'>缓冲区已全满</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      item = this.produceItem();\n      this.data.empty = this.p(this.data.empty);\n      this.data.mutex = this.p(this.data.mutex);\n      this.enterItem(item);\n      this.data.mutex = this.v(this.data.mutex);\n      return this.data.full = this.v(this.data.full);\n    };\n\n    ProCon.prototype.consumer = function() {\n      if (this.data.empty === N) {\n        $(\"<p class='desSpe'>缓冲区已空</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      this.data.full = this.p(this.data.full);\n      this.data.mutex = this.p(this.data.mutex);\n      this.removeItem();\n      this.data.mutex = this.v(this.data.mutex);\n      this.data.empty = this.v(this.data.empty);\n      return this.consumeItem();\n    };\n\n    return ProCon;\n\n  })();\n\n  procon = new ProCon;\n\n  procon.init();\n\n}).call(this);\n","source":"assets/demo/coffee_pc_demo/pro-con.js","raw":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var N, ProCon, func, procon;\n\n  N = 10;\n\n  func = function(a, b) {\n    if (a == null) {\n      a = 4;\n    }\n    if (b == null) {\n      b = 6;\n    }\n    return a + b;\n  };\n\n  ProCon = (function() {\n\n    function ProCon() {}\n\n    ProCon.prototype.data = {\n      mutex: 1,\n      empty: N,\n      full: 0,\n      front: 0,\n      rear: 0,\n      buf: []\n    };\n\n    ProCon.prototype.init = function() {\n      var i, newDom,\n        _this = this;\n      i = 0;\n      while (i < N) {\n        newDom = $('<div class=\"bufBox\"><div class=\"bufCover\">' + i + '</div>' + i + '</div>');\n        $('#buf').append(newDom);\n        this.data.buf.push('e');\n        i++;\n      }\n      $('#produce').click(function() {\n        return _this.producer();\n      });\n      return $('#consume').click(function() {\n        return _this.consumer();\n      });\n    };\n\n    ProCon.prototype.p = function(num) {\n      return --num;\n    };\n\n    ProCon.prototype.v = function(num) {\n      return ++num;\n    };\n\n    ProCon.prototype.produceItem = function() {\n      $('<p class=\"desPro\">生产了产品</p>').insertBefore($(\"#des p:first\"));\n      return 'm';\n    };\n\n    ProCon.prototype.consumeItem = function() {\n      return $('<p class=\"desCon\">消费了产品</p>').insertBefore($(\"#des p:first\"));\n    };\n\n    ProCon.prototype.enterItem = function(item) {\n      var str;\n      this.data.front = (this.data.front + 1) % N;\n      this.data.buf[this.data.front] = item;\n      str = \"存入产品\" + this.data.buf[this.data.front] + \"到缓冲区\" + this.data.front;\n      $(\"<p class='desPro'>\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.front]).animate({\n        \"height\": \"50px\"\n      });\n    };\n\n    ProCon.prototype.removeItem = function() {\n      var str;\n      this.data.rear = (this.data.rear + 1) % N;\n      this.data.buf[this.data.rear] = 'e';\n      str = \"取出产品\" + this.data.buf[this.data.rear] + \"从缓冲区\" + this.data.rear;\n      $(\"<p class='desCon'>\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.rear]).animate({\n        \"height\": \"0px\"\n      });\n    };\n\n    ProCon.prototype.producer = function() {\n      var item;\n      if (this.data.full === N) {\n        $(\"<p class='desSpe'>缓冲区已全满</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      item = this.produceItem();\n      this.data.empty = this.p(this.data.empty);\n      this.data.mutex = this.p(this.data.mutex);\n      this.enterItem(item);\n      this.data.mutex = this.v(this.data.mutex);\n      return this.data.full = this.v(this.data.full);\n    };\n\n    ProCon.prototype.consumer = function() {\n      if (this.data.empty === N) {\n        $(\"<p class='desSpe'>缓冲区已空</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      this.data.full = this.p(this.data.full);\n      this.data.mutex = this.p(this.data.mutex);\n      this.removeItem();\n      this.data.mutex = this.v(this.data.mutex);\n      this.data.empty = this.v(this.data.empty);\n      return this.consumeItem();\n    };\n\n    return ProCon;\n\n  })();\n\n  procon = new ProCon;\n\n  procon.init();\n\n}).call(this);\n","date":"2020-03-12T13:55:48.642Z","updated":"2020-03-12T13:55:48.642Z","path":"assets/demo/coffee_pc_demo/pro-con.js","layout":"false","title":"","comments":1,"_id":"ck7otizry00197guiybgi8wv9","content":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var N, ProCon, func, procon;\n\n  N = 10;\n\n  func = function(a, b) {\n    if (a == null) {\n      a = 4;\n    }\n    if (b == null) {\n      b = 6;\n    }\n    return a + b;\n  };\n\n  ProCon = (function() {\n\n    function ProCon() {}\n\n    ProCon.prototype.data = {\n      mutex: 1,\n      empty: N,\n      full: 0,\n      front: 0,\n      rear: 0,\n      buf: []\n    };\n\n    ProCon.prototype.init = function() {\n      var i, newDom,\n        _this = this;\n      i = 0;\n      while (i < N) {\n        newDom = $('<div class=\"bufBox\"><div class=\"bufCover\">' + i + '</div>' + i + '</div>');\n        $('#buf').append(newDom);\n        this.data.buf.push('e');\n        i++;\n      }\n      $('#produce').click(function() {\n        return _this.producer();\n      });\n      return $('#consume').click(function() {\n        return _this.consumer();\n      });\n    };\n\n    ProCon.prototype.p = function(num) {\n      return --num;\n    };\n\n    ProCon.prototype.v = function(num) {\n      return ++num;\n    };\n\n    ProCon.prototype.produceItem = function() {\n      $('<p class=\"desPro\">生产了产品</p>').insertBefore($(\"#des p:first\"));\n      return 'm';\n    };\n\n    ProCon.prototype.consumeItem = function() {\n      return $('<p class=\"desCon\">消费了产品</p>').insertBefore($(\"#des p:first\"));\n    };\n\n    ProCon.prototype.enterItem = function(item) {\n      var str;\n      this.data.front = (this.data.front + 1) % N;\n      this.data.buf[this.data.front] = item;\n      str = \"存入产品\" + this.data.buf[this.data.front] + \"到缓冲区\" + this.data.front;\n      $(\"<p class=\"desPro\">\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.front]).animate({\n        \"height\": \"50px\"\n      });\n    };\n\n    ProCon.prototype.removeItem = function() {\n      var str;\n      this.data.rear = (this.data.rear + 1) % N;\n      this.data.buf[this.data.rear] = 'e';\n      str = \"取出产品\" + this.data.buf[this.data.rear] + \"从缓冲区\" + this.data.rear;\n      $(\"<p class=\"desCon\">\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.rear]).animate({\n        \"height\": \"0px\"\n      });\n    };\n\n    ProCon.prototype.producer = function() {\n      var item;\n      if (this.data.full === N) {\n        $(\"<p class=\"desSpe\">缓冲区已全满</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      item = this.produceItem();\n      this.data.empty = this.p(this.data.empty);\n      this.data.mutex = this.p(this.data.mutex);\n      this.enterItem(item);\n      this.data.mutex = this.v(this.data.mutex);\n      return this.data.full = this.v(this.data.full);\n    };\n\n    ProCon.prototype.consumer = function() {\n      if (this.data.empty === N) {\n        $(\"<p class=\"desSpe\">缓冲区已空</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      this.data.full = this.p(this.data.full);\n      this.data.mutex = this.p(this.data.mutex);\n      this.removeItem();\n      this.data.mutex = this.v(this.data.mutex);\n      this.data.empty = this.v(this.data.empty);\n      return this.consumeItem();\n    };\n\n    return ProCon;\n\n  })();\n\n  procon = new ProCon;\n\n  procon.init();\n\n}).call(this);\n","site":{"data":{}},"excerpt":"","more":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var N, ProCon, func, procon;\n\n  N = 10;\n\n  func = function(a, b) {\n    if (a == null) {\n      a = 4;\n    }\n    if (b == null) {\n      b = 6;\n    }\n    return a + b;\n  };\n\n  ProCon = (function() {\n\n    function ProCon() {}\n\n    ProCon.prototype.data = {\n      mutex: 1,\n      empty: N,\n      full: 0,\n      front: 0,\n      rear: 0,\n      buf: []\n    };\n\n    ProCon.prototype.init = function() {\n      var i, newDom,\n        _this = this;\n      i = 0;\n      while (i < N) {\n        newDom = $('<div class=\"bufBox\"><div class=\"bufCover\">' + i + '</div>' + i + '</div>');\n        $('#buf').append(newDom);\n        this.data.buf.push('e');\n        i++;\n      }\n      $('#produce').click(function() {\n        return _this.producer();\n      });\n      return $('#consume').click(function() {\n        return _this.consumer();\n      });\n    };\n\n    ProCon.prototype.p = function(num) {\n      return --num;\n    };\n\n    ProCon.prototype.v = function(num) {\n      return ++num;\n    };\n\n    ProCon.prototype.produceItem = function() {\n      $('<p class=\"desPro\">生产了产品</p>').insertBefore($(\"#des p:first\"));\n      return 'm';\n    };\n\n    ProCon.prototype.consumeItem = function() {\n      return $('<p class=\"desCon\">消费了产品</p>').insertBefore($(\"#des p:first\"));\n    };\n\n    ProCon.prototype.enterItem = function(item) {\n      var str;\n      this.data.front = (this.data.front + 1) % N;\n      this.data.buf[this.data.front] = item;\n      str = \"存入产品\" + this.data.buf[this.data.front] + \"到缓冲区\" + this.data.front;\n      $(\"<p class=\"desPro\">\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.front]).animate({\n        \"height\": \"50px\"\n      });\n    };\n\n    ProCon.prototype.removeItem = function() {\n      var str;\n      this.data.rear = (this.data.rear + 1) % N;\n      this.data.buf[this.data.rear] = 'e';\n      str = \"取出产品\" + this.data.buf[this.data.rear] + \"从缓冲区\" + this.data.rear;\n      $(\"<p class=\"desCon\">\" + str + \"</p>\").insertBefore($(\"#des p:first\"));\n      return $($('.bufCover')[this.data.rear]).animate({\n        \"height\": \"0px\"\n      });\n    };\n\n    ProCon.prototype.producer = function() {\n      var item;\n      if (this.data.full === N) {\n        $(\"<p class=\"desSpe\">缓冲区已全满</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      item = this.produceItem();\n      this.data.empty = this.p(this.data.empty);\n      this.data.mutex = this.p(this.data.mutex);\n      this.enterItem(item);\n      this.data.mutex = this.v(this.data.mutex);\n      return this.data.full = this.v(this.data.full);\n    };\n\n    ProCon.prototype.consumer = function() {\n      if (this.data.empty === N) {\n        $(\"<p class=\"desSpe\">缓冲区已空</p>\").insertBefore($(\"#des p:first\"));\n        return;\n      }\n      this.data.full = this.p(this.data.full);\n      this.data.mutex = this.p(this.data.mutex);\n      this.removeItem();\n      this.data.mutex = this.v(this.data.mutex);\n      this.data.empty = this.v(this.data.empty);\n      return this.consumeItem();\n    };\n\n    return ProCon;\n\n  })();\n\n  procon = new ProCon;\n\n  procon.init();\n\n}).call(this);\n"},{"_content":"<!DOCTYPE HTML>\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<script type=\"text/javascript\" src=\"jquery.js\"></script>\n<style type=\"text/css\">\n\t*{\n\t\tmargin:0;\n\t\tpadding:0;\n\t}\n\t#textBox{\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tz-index: -999;\n\t}\n\t#bg{\n\t\tbackground: url(sgws.jpg) -50px;\n\n\t\twidth:500px;\n\t\theight: 314px;\n\t\ttext-align: center;\n\t\tposition: relative;\n\t\t-webkit-animation:roll 3s infinite ease ;\n\t\t   -moz-animation:roll 3s infinite ease ;\n\t\t    -ms-animation:roll 3s infinite ease ;\n\t\t     -o-animation:roll 3s infinite ease ;\n\t\t\t\tanimation:roll 3s infinite ease ;\n\t}\n\t#barHome{\n\t\twidth: 300px;\n\t\theight: 10px;\n\t\tbackground: #f00;\n\t\toverflow: hidden;\n\t\tposition: absolute;\n\t\tbottom: 45px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t}\n\t#barGuest{\n\t\twidth: 150px;\n\t\theight: 10px;\n\t\tbackground: #00f;\n\t}\n\t#results{\n\t\twidth: 300px;\n\t\tposition: absolute;\n\t\tbottom: 65px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t\tcolor: #fff;\n\t}\n\t#results span{\n\t\tmargin: 50px;\n\t}\n\t@-webkit-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-moz-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-ms-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-o-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n</style>\n<title>mediator</title>\n</head>\n<body>\n\t<div id=\"bg\">\n\t\t<input id=\"textBox\" type=\"text\" />\n\t\t<div id=\"results\">请按F键与J键</div>\n\t\t<div id=\"barHome\">\n\t\t\t<div id=\"barGuest\"></div>\n\t\t</div>\n\t</div>\n<script type=\"text/javascript\" src=\"mediator.js\"></script>\n</body>\n</html>","source":"assets/demo/mediator/demo.html","raw":"<!DOCTYPE HTML>\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<script type=\"text/javascript\" src=\"jquery.js\"></script>\n<style type=\"text/css\">\n\t*{\n\t\tmargin:0;\n\t\tpadding:0;\n\t}\n\t#textBox{\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tz-index: -999;\n\t}\n\t#bg{\n\t\tbackground: url(sgws.jpg) -50px;\n\n\t\twidth:500px;\n\t\theight: 314px;\n\t\ttext-align: center;\n\t\tposition: relative;\n\t\t-webkit-animation:roll 3s infinite ease ;\n\t\t   -moz-animation:roll 3s infinite ease ;\n\t\t    -ms-animation:roll 3s infinite ease ;\n\t\t     -o-animation:roll 3s infinite ease ;\n\t\t\t\tanimation:roll 3s infinite ease ;\n\t}\n\t#barHome{\n\t\twidth: 300px;\n\t\theight: 10px;\n\t\tbackground: #f00;\n\t\toverflow: hidden;\n\t\tposition: absolute;\n\t\tbottom: 45px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t}\n\t#barGuest{\n\t\twidth: 150px;\n\t\theight: 10px;\n\t\tbackground: #00f;\n\t}\n\t#results{\n\t\twidth: 300px;\n\t\tposition: absolute;\n\t\tbottom: 65px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t\tcolor: #fff;\n\t}\n\t#results span{\n\t\tmargin: 50px;\n\t}\n\t@-webkit-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-moz-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-ms-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-o-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n</style>\n<title>mediator</title>\n</head>\n<body>\n\t<div id=\"bg\">\n\t\t<input id=\"textBox\" type=\"text\" />\n\t\t<div id=\"results\">请按F键与J键</div>\n\t\t<div id=\"barHome\">\n\t\t\t<div id=\"barGuest\"></div>\n\t\t</div>\n\t</div>\n<script type=\"text/javascript\" src=\"mediator.js\"></script>\n</body>\n</html>","date":"2020-03-12T13:55:48.656Z","updated":"2020-03-12T13:55:48.656Z","path":"assets/demo/mediator/demo.html","title":"","comments":1,"layout":"page","_id":"ck7otizrz001a7guiakndt07j","content":"<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<script type=\"text/javascript\" src=\"jquery.js\"></script>\n<style type=\"text/css\">\n\t*{\n\t\tmargin:0;\n\t\tpadding:0;\n\t}\n\t#textBox{\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tz-index: -999;\n\t}\n\t#bg{\n\t\tbackground: url(sgws.jpg) -50px;\n\n\t\twidth:500px;\n\t\theight: 314px;\n\t\ttext-align: center;\n\t\tposition: relative;\n\t\t-webkit-animation:roll 3s infinite ease ;\n\t\t   -moz-animation:roll 3s infinite ease ;\n\t\t    -ms-animation:roll 3s infinite ease ;\n\t\t     -o-animation:roll 3s infinite ease ;\n\t\t\t\tanimation:roll 3s infinite ease ;\n\t}\n\t#barHome{\n\t\twidth: 300px;\n\t\theight: 10px;\n\t\tbackground: #f00;\n\t\toverflow: hidden;\n\t\tposition: absolute;\n\t\tbottom: 45px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t}\n\t#barGuest{\n\t\twidth: 150px;\n\t\theight: 10px;\n\t\tbackground: #00f;\n\t}\n\t#results{\n\t\twidth: 300px;\n\t\tposition: absolute;\n\t\tbottom: 65px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t\tcolor: #fff;\n\t}\n\t#results span{\n\t\tmargin: 50px;\n\t}\n\t@-webkit-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-moz-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-ms-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-o-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n</style>\n<title>mediator</title>\n</head>\n<body>\n\t<div id=\"bg\">\n\t\t<input id=\"textBox\" type=\"text\">\n\t\t<div id=\"results\">请按F键与J键</div>\n\t\t<div id=\"barHome\">\n\t\t\t<div id=\"barGuest\"></div>\n\t\t</div>\n\t</div>\n<script type=\"text/javascript\" src=\"mediator.js\"></script>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<script type=\"text/javascript\" src=\"jquery.js\"></script>\n<style type=\"text/css\">\n\t*{\n\t\tmargin:0;\n\t\tpadding:0;\n\t}\n\t#textBox{\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tz-index: -999;\n\t}\n\t#bg{\n\t\tbackground: url(sgws.jpg) -50px;\n\n\t\twidth:500px;\n\t\theight: 314px;\n\t\ttext-align: center;\n\t\tposition: relative;\n\t\t-webkit-animation:roll 3s infinite ease ;\n\t\t   -moz-animation:roll 3s infinite ease ;\n\t\t    -ms-animation:roll 3s infinite ease ;\n\t\t     -o-animation:roll 3s infinite ease ;\n\t\t\t\tanimation:roll 3s infinite ease ;\n\t}\n\t#barHome{\n\t\twidth: 300px;\n\t\theight: 10px;\n\t\tbackground: #f00;\n\t\toverflow: hidden;\n\t\tposition: absolute;\n\t\tbottom: 45px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t}\n\t#barGuest{\n\t\twidth: 150px;\n\t\theight: 10px;\n\t\tbackground: #00f;\n\t}\n\t#results{\n\t\twidth: 300px;\n\t\tposition: absolute;\n\t\tbottom: 65px;\n\t\tleft: 50%;\n\t\tmargin-left: -150px;\n\t\tcolor: #fff;\n\t}\n\t#results span{\n\t\tmargin: 50px;\n\t}\n\t@-webkit-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-moz-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-ms-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@-o-keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n\t@keyframes roll {0%{background-position: -90px;}50%{background-position: -10px;}100%{background-position: -90px;}}\n</style>\n<title>mediator</title>\n</head>\n<body>\n\t<div id=\"bg\">\n\t\t<input id=\"textBox\" type=\"text\">\n\t\t<div id=\"results\">请按F键与J键</div>\n\t\t<div id=\"barHome\">\n\t\t\t<div id=\"barGuest\"></div>\n\t\t</div>\n\t</div>\n<script type=\"text/javascript\" src=\"mediator.js\"></script>\n</body>\n</html>"},{"_content":"<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE7\" />\n<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n<style type=\"text/css\">\n*{\n\tmargin:0;\n\tpadding: 0;\n}\nbody{\n\toverflow: hidden;\n}\n#textBox{\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tz-index: -999;\n}\n.showRoll #frame {\n    border-color: hsl(0,0%,70%);\n    position: absolute;\n}\n#box{\n\twidth: 641px;\n\theight: 483px;\n\tbackground: url(bg.jpg);\n\tborder: 1px solid #ddd;\n\tposition: relative;\n\tcolor: #fff;\n\toverflow: hidden;\n}\n#frame {\n    width: 70px;\n    height: 92px;\n    left:370px;\n    top:240px;\n    position: absolute;\n    border: 1px solid transparent;\n    background: url(mhxy.png) no-repeat left top;\n    -webkit-animation: anm-down 1s steps(8) infinite;\n       -moz-animation: anm-down 1s steps(8) infinite;\n        -ms-animation: anm-down 1s steps(8) infinite;\n         -o-animation: anm-down 1s steps(8) infinite;\n            animation: anm-down 1s steps(8) infinite;\n}\n@-webkit-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n   @-moz-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n    @-ms-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n     @-o-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n        @keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n\n@-webkit-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n   @-moz-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n    @-ms-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n     @-o-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n        @keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n\n@-webkit-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n   @-moz-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n    @-ms-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n     @-o-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n        @keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n\n@-webkit-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n   @-moz-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n    @-ms-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n     @-o-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n        @keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n\n@-webkit-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n   @-moz-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n    @-ms-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n     @-o-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n        @keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n\n@-webkit-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n   @-moz-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n    @-ms-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n     @-o-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n        @keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n\n@-webkit-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n   @-moz-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n    @-ms-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n     @-o-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n        @keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n\n@-webkit-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n   @-moz-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n    @-ms-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n     @-o-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n        @keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n\n</style>\n<title>test</title>\n</head>\n<body>\n\t<div id=\"box\">\n\t\t<div id=\"frame\"></div>\n\t\t<input id=\"textBox\" type=\"text\" />\n\t</div>\n    \n    <script type=\"text/javascript\">\n    \tfunction setAnm (str){\n    \t\tswitch (str){\n    \t\t\tcase 'left':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-left 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'right':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-right 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'up':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-up 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'down':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-down 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'lu':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-lu 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ld':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ld 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ru':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ru 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'rd':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-rd 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n    \tvar data = {\n    \t\tx:0,\n    \t\ty:0,\n    \t\tl:false,\n    \t\tr:false,\n    \t\tu:false,\n    \t\td:false,\n    \t\ttime:null\n    \t}\n    \tfunction move(){\n    \t\ttrans = \"translate(\"+data.x*50+\"px,\"+data.y*50+\"px)\";\n\t\t  \t$('#frame').css({\"transform\":trans,\"transition\":\"all 0.3s linear\"});\n    \t}\n    \tfunction diff(){\n    \t\tvar newTime = +new Date;\n\t\t\tif(!data.time){\n\t\t\t\tdata.time = newTime;\n\t\t\t}\n\t\t\tvar diff = newTime-data.time;\n\t\t\treturn diff;\n    \t}\n\t\t$(window).keydown(function(event){\n\t\t  \tvar keycode = event.which;\n\t\t  \tif(keycode==37){\n\t\t  \t\tif(data.l) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.l=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"left\");\n\t\t\t  \t\tdata.x--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==38){\n\t\t  \t\tif(data.u) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.u=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"up\");\n\t\t\t  \t\tdata.y--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==39){\n\t\t  \t\tif(data.r) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.r=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"right\");\n\t\t\t  \t\tdata.x++;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==40){\n\t\t  \t\tif(data.d) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.d=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"down\");\n\t\t\t  \t\tdata.y++;\n\t\t  \t\t}\n\t\t  \t}\n\t\t  \tmove();\n\t\t}).keyup(function(){\n\t\t\tdata.l = data.r = data.u = data.d = false;\n\t\t\tdata.time = null;\n\t\t});\n    </script>\n</body>\n</html>","source":"assets/demo/pre_css3_demo/demo.html","raw":"<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE7\" />\n<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n<style type=\"text/css\">\n*{\n\tmargin:0;\n\tpadding: 0;\n}\nbody{\n\toverflow: hidden;\n}\n#textBox{\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tz-index: -999;\n}\n.showRoll #frame {\n    border-color: hsl(0,0%,70%);\n    position: absolute;\n}\n#box{\n\twidth: 641px;\n\theight: 483px;\n\tbackground: url(bg.jpg);\n\tborder: 1px solid #ddd;\n\tposition: relative;\n\tcolor: #fff;\n\toverflow: hidden;\n}\n#frame {\n    width: 70px;\n    height: 92px;\n    left:370px;\n    top:240px;\n    position: absolute;\n    border: 1px solid transparent;\n    background: url(mhxy.png) no-repeat left top;\n    -webkit-animation: anm-down 1s steps(8) infinite;\n       -moz-animation: anm-down 1s steps(8) infinite;\n        -ms-animation: anm-down 1s steps(8) infinite;\n         -o-animation: anm-down 1s steps(8) infinite;\n            animation: anm-down 1s steps(8) infinite;\n}\n@-webkit-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n   @-moz-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n    @-ms-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n     @-o-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n        @keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n\n@-webkit-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n   @-moz-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n    @-ms-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n     @-o-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n        @keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n\n@-webkit-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n   @-moz-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n    @-ms-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n     @-o-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n        @keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n\n@-webkit-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n   @-moz-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n    @-ms-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n     @-o-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n        @keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n\n@-webkit-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n   @-moz-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n    @-ms-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n     @-o-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n        @keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n\n@-webkit-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n   @-moz-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n    @-ms-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n     @-o-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n        @keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n\n@-webkit-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n   @-moz-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n    @-ms-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n     @-o-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n        @keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n\n@-webkit-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n   @-moz-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n    @-ms-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n     @-o-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n        @keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n\n</style>\n<title>test</title>\n</head>\n<body>\n\t<div id=\"box\">\n\t\t<div id=\"frame\"></div>\n\t\t<input id=\"textBox\" type=\"text\" />\n\t</div>\n    \n    <script type=\"text/javascript\">\n    \tfunction setAnm (str){\n    \t\tswitch (str){\n    \t\t\tcase 'left':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-left 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'right':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-right 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'up':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-up 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'down':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-down 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'lu':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-lu 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ld':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ld 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ru':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ru 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'rd':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-rd 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n    \tvar data = {\n    \t\tx:0,\n    \t\ty:0,\n    \t\tl:false,\n    \t\tr:false,\n    \t\tu:false,\n    \t\td:false,\n    \t\ttime:null\n    \t}\n    \tfunction move(){\n    \t\ttrans = \"translate(\"+data.x*50+\"px,\"+data.y*50+\"px)\";\n\t\t  \t$('#frame').css({\"transform\":trans,\"transition\":\"all 0.3s linear\"});\n    \t}\n    \tfunction diff(){\n    \t\tvar newTime = +new Date;\n\t\t\tif(!data.time){\n\t\t\t\tdata.time = newTime;\n\t\t\t}\n\t\t\tvar diff = newTime-data.time;\n\t\t\treturn diff;\n    \t}\n\t\t$(window).keydown(function(event){\n\t\t  \tvar keycode = event.which;\n\t\t  \tif(keycode==37){\n\t\t  \t\tif(data.l) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.l=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"left\");\n\t\t\t  \t\tdata.x--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==38){\n\t\t  \t\tif(data.u) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.u=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"up\");\n\t\t\t  \t\tdata.y--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==39){\n\t\t  \t\tif(data.r) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.r=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"right\");\n\t\t\t  \t\tdata.x++;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==40){\n\t\t  \t\tif(data.d) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.d=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"down\");\n\t\t\t  \t\tdata.y++;\n\t\t  \t\t}\n\t\t  \t}\n\t\t  \tmove();\n\t\t}).keyup(function(){\n\t\t\tdata.l = data.r = data.u = data.d = false;\n\t\t\tdata.time = null;\n\t\t});\n    </script>\n</body>\n</html>","date":"2020-03-12T13:55:48.661Z","updated":"2020-03-12T13:55:48.661Z","path":"assets/demo/pre_css3_demo/demo.html","title":"","comments":1,"layout":"page","_id":"ck7otizrz001b7guiwpxsvi0b","content":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE7\">\n<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n<style type=\"text/css\">\n*{\n\tmargin:0;\n\tpadding: 0;\n}\nbody{\n\toverflow: hidden;\n}\n#textBox{\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tz-index: -999;\n}\n.showRoll #frame {\n    border-color: hsl(0,0%,70%);\n    position: absolute;\n}\n#box{\n\twidth: 641px;\n\theight: 483px;\n\tbackground: url(bg.jpg);\n\tborder: 1px solid #ddd;\n\tposition: relative;\n\tcolor: #fff;\n\toverflow: hidden;\n}\n#frame {\n    width: 70px;\n    height: 92px;\n    left:370px;\n    top:240px;\n    position: absolute;\n    border: 1px solid transparent;\n    background: url(mhxy.png) no-repeat left top;\n    -webkit-animation: anm-down 1s steps(8) infinite;\n       -moz-animation: anm-down 1s steps(8) infinite;\n        -ms-animation: anm-down 1s steps(8) infinite;\n         -o-animation: anm-down 1s steps(8) infinite;\n            animation: anm-down 1s steps(8) infinite;\n}\n@-webkit-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n   @-moz-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n    @-ms-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n     @-o-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n        @keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n\n@-webkit-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n   @-moz-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n    @-ms-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n     @-o-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n        @keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n\n@-webkit-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n   @-moz-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n    @-ms-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n     @-o-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n        @keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n\n@-webkit-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n   @-moz-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n    @-ms-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n     @-o-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n        @keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n\n@-webkit-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n   @-moz-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n    @-ms-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n     @-o-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n        @keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n\n@-webkit-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n   @-moz-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n    @-ms-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n     @-o-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n        @keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n\n@-webkit-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n   @-moz-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n    @-ms-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n     @-o-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n        @keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n\n@-webkit-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n   @-moz-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n    @-ms-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n     @-o-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n        @keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n\n</style>\n<title>test</title>\n</head>\n<body>\n\t<div id=\"box\">\n\t\t<div id=\"frame\"></div>\n\t\t<input id=\"textBox\" type=\"text\">\n\t</div>\n    \n    <script type=\"text/javascript\">\n    \tfunction setAnm (str){\n    \t\tswitch (str){\n    \t\t\tcase 'left':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-left 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'right':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-right 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'up':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-up 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'down':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-down 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'lu':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-lu 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ld':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ld 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ru':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ru 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'rd':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-rd 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n    \tvar data = {\n    \t\tx:0,\n    \t\ty:0,\n    \t\tl:false,\n    \t\tr:false,\n    \t\tu:false,\n    \t\td:false,\n    \t\ttime:null\n    \t}\n    \tfunction move(){\n    \t\ttrans = \"translate(\"+data.x*50+\"px,\"+data.y*50+\"px)\";\n\t\t  \t$('#frame').css({\"transform\":trans,\"transition\":\"all 0.3s linear\"});\n    \t}\n    \tfunction diff(){\n    \t\tvar newTime = +new Date;\n\t\t\tif(!data.time){\n\t\t\t\tdata.time = newTime;\n\t\t\t}\n\t\t\tvar diff = newTime-data.time;\n\t\t\treturn diff;\n    \t}\n\t\t$(window).keydown(function(event){\n\t\t  \tvar keycode = event.which;\n\t\t  \tif(keycode==37){\n\t\t  \t\tif(data.l) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.l=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"left\");\n\t\t\t  \t\tdata.x--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==38){\n\t\t  \t\tif(data.u) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.u=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"up\");\n\t\t\t  \t\tdata.y--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==39){\n\t\t  \t\tif(data.r) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.r=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"right\");\n\t\t\t  \t\tdata.x++;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==40){\n\t\t  \t\tif(data.d) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.d=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"down\");\n\t\t\t  \t\tdata.y++;\n\t\t  \t\t}\n\t\t  \t}\n\t\t  \tmove();\n\t\t}).keyup(function(){\n\t\t\tdata.l = data.r = data.u = data.d = false;\n\t\t\tdata.time = null;\n\t\t});\n    </script>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE7\">\n<script type=\"text/javascript\" src=\"../jquery.js\"></script>\n<style type=\"text/css\">\n*{\n\tmargin:0;\n\tpadding: 0;\n}\nbody{\n\toverflow: hidden;\n}\n#textBox{\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tz-index: -999;\n}\n.showRoll #frame {\n    border-color: hsl(0,0%,70%);\n    position: absolute;\n}\n#box{\n\twidth: 641px;\n\theight: 483px;\n\tbackground: url(bg.jpg);\n\tborder: 1px solid #ddd;\n\tposition: relative;\n\tcolor: #fff;\n\toverflow: hidden;\n}\n#frame {\n    width: 70px;\n    height: 92px;\n    left:370px;\n    top:240px;\n    position: absolute;\n    border: 1px solid transparent;\n    background: url(mhxy.png) no-repeat left top;\n    -webkit-animation: anm-down 1s steps(8) infinite;\n       -moz-animation: anm-down 1s steps(8) infinite;\n        -ms-animation: anm-down 1s steps(8) infinite;\n         -o-animation: anm-down 1s steps(8) infinite;\n            animation: anm-down 1s steps(8) infinite;\n}\n@-webkit-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n   @-moz-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n    @-ms-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n     @-o-keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n        @keyframes anm-down { 0% { background-position: 0px 0; } 100% { background-position: -560px 0; } }\n\n@-webkit-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n   @-moz-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n    @-ms-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n     @-o-keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n        @keyframes anm-left { 0% { background-position: 0px -92px; } 100% { background-position: -560px -92px; } }\n\n@-webkit-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n   @-moz-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n    @-ms-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n     @-o-keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n        @keyframes anm-right { 0% { background-position: 0px -184px; } 100% { background-position: -560px -184px; } }\n\n@-webkit-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n   @-moz-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n    @-ms-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n     @-o-keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n        @keyframes anm-up { 0% { background-position: 0px -276px; } 100% { background-position: -560px -276px; } }\n\n@-webkit-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n   @-moz-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n    @-ms-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n     @-o-keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n        @keyframes anm-ld { 0% { background-position: 0px -368px; } 100% { background-position: -560px -368px; } }\n\n@-webkit-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n   @-moz-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n    @-ms-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n     @-o-keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n        @keyframes anm-rd { 0% { background-position: 0px -460px; } 100% { background-position: -560px -460px; } }\n\n@-webkit-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n   @-moz-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n    @-ms-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n     @-o-keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n        @keyframes anm-lu { 0% { background-position: 0px -552px; } 100% { background-position: -560px -552px; } }\n\n@-webkit-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n   @-moz-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n    @-ms-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n     @-o-keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n        @keyframes anm-ru { 0% { background-position: 0px -644px; } 100% { background-position: -560px -644px; } }\n\n</style>\n<title>test</title>\n</head>\n<body>\n\t<div id=\"box\">\n\t\t<div id=\"frame\"></div>\n\t\t<input id=\"textBox\" type=\"text\">\n\t</div>\n    \n    <script type=\"text/javascript\">\n    \tfunction setAnm (str){\n    \t\tswitch (str){\n    \t\t\tcase 'left':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-left 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'right':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-right 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'up':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-up 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'down':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-down 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'lu':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-lu 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ld':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ld 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'ru':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-ru 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t\tcase 'rd':{\n    \t\t\t\t$(\"#frame\").css({\"animation\":\"anm-rd 1s steps(8) infinite\"});\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n    \tvar data = {\n    \t\tx:0,\n    \t\ty:0,\n    \t\tl:false,\n    \t\tr:false,\n    \t\tu:false,\n    \t\td:false,\n    \t\ttime:null\n    \t}\n    \tfunction move(){\n    \t\ttrans = \"translate(\"+data.x*50+\"px,\"+data.y*50+\"px)\";\n\t\t  \t$('#frame').css({\"transform\":trans,\"transition\":\"all 0.3s linear\"});\n    \t}\n    \tfunction diff(){\n    \t\tvar newTime = +new Date;\n\t\t\tif(!data.time){\n\t\t\t\tdata.time = newTime;\n\t\t\t}\n\t\t\tvar diff = newTime-data.time;\n\t\t\treturn diff;\n    \t}\n\t\t$(window).keydown(function(event){\n\t\t  \tvar keycode = event.which;\n\t\t  \tif(keycode==37){\n\t\t  \t\tif(data.l) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.l=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"left\");\n\t\t\t  \t\tdata.x--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==38){\n\t\t  \t\tif(data.u) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.u=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"lu\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"up\");\n\t\t\t  \t\tdata.y--;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==39){\n\t\t  \t\tif(data.r) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.r=true;\n\t\t  \t\tif(data.u){\n\t\t  \t\t\tsetAnm(\"ru\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y--;\n\t\t  \t\t}else if(data.d){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"right\");\n\t\t\t  \t\tdata.x++;\n\t\t  \t\t}\n\t\t  \t}else if(keycode==40){\n\t\t  \t\tif(data.d) return;\n\t\t  \t\tvar isRun = diff();\n\t\t  \t\tconsole.log(isRun);\n\t\t  \t\tdata.d=true;\n\t\t  \t\tif(data.l){\n\t\t  \t\t\tsetAnm(\"ld\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x--;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else if(data.r){\n\t\t  \t\t\tsetAnm(\"rd\");\n\t\t  \t\t\tif(isRun>480)\n\t\t  \t\t\tdata.x++;\n\t\t  \t\t\tdata.y++;\n\t\t  \t\t}else{\n\t\t  \t\t\tsetAnm(\"down\");\n\t\t\t  \t\tdata.y++;\n\t\t  \t\t}\n\t\t  \t}\n\t\t  \tmove();\n\t\t}).keyup(function(){\n\t\t\tdata.l = data.r = data.u = data.d = false;\n\t\t\tdata.time = null;\n\t\t});\n    </script>\n</body>\n</html>"},{"_content":"\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>myReader</title>\n<style>\n*{\nmargin: 0;\npadding: 0;\n}\n\nbody{\nbackground: #eee;\noverflow-x : hidden;\noverflow-y : hidden;\n}\n\n#container{\nwidth: 600px;\nheight: 400px;\nbackground: #eee;\nposition: relative;\n}\n.tag{\nposition: absolute;\n}\n</style>\n</head>\n<body>\n<button>点击变化布局</button>\n<div id=\"container\"></div>\n<script type=\"text/javascript\" src=\"js/tagConfig.js\"></script>\n<script type=\"text/javascript\" src=\"js/main.js\"></script>\n\n</body>\n</html>\n","source":"assets/demo/my_news_reader/index.html","raw":"\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>myReader</title>\n<style>\n*{\nmargin: 0;\npadding: 0;\n}\n\nbody{\nbackground: #eee;\noverflow-x : hidden;\noverflow-y : hidden;\n}\n\n#container{\nwidth: 600px;\nheight: 400px;\nbackground: #eee;\nposition: relative;\n}\n.tag{\nposition: absolute;\n}\n</style>\n</head>\n<body>\n<button>点击变化布局</button>\n<div id=\"container\"></div>\n<script type=\"text/javascript\" src=\"js/tagConfig.js\"></script>\n<script type=\"text/javascript\" src=\"js/main.js\"></script>\n\n</body>\n</html>\n","date":"2020-03-12T13:55:48.657Z","updated":"2020-03-12T13:55:48.657Z","path":"assets/demo/my_news_reader/index.html","title":"","comments":1,"layout":"page","_id":"ck7otizs0001c7gui3zietqx9","content":"\n<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<title>myReader</title>\n<style>\n*{\nmargin: 0;\npadding: 0;\n}\n\nbody{\nbackground: #eee;\noverflow-x : hidden;\noverflow-y : hidden;\n}\n\n#container{\nwidth: 600px;\nheight: 400px;\nbackground: #eee;\nposition: relative;\n}\n.tag{\nposition: absolute;\n}\n</style>\n</head>\n<body>\n<button>点击变化布局</button>\n<div id=\"container\"></div>\n<script type=\"text/javascript\" src=\"js/tagConfig.js\"></script>\n<script type=\"text/javascript\" src=\"js/main.js\"></script>\n\n</body>\n</html>\n","site":{"data":{}},"excerpt":"","more":"\n<!DOCTYPE html>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n<title>myReader</title>\n<style>\n*{\nmargin: 0;\npadding: 0;\n}\n\nbody{\nbackground: #eee;\noverflow-x : hidden;\noverflow-y : hidden;\n}\n\n#container{\nwidth: 600px;\nheight: 400px;\nbackground: #eee;\nposition: relative;\n}\n.tag{\nposition: absolute;\n}\n</style>\n</head>\n<body>\n<button>点击变化布局</button>\n<div id=\"container\"></div>\n<script type=\"text/javascript\" src=\"js/tagConfig.js\"></script>\n<script type=\"text/javascript\" src=\"js/main.js\"></script>\n\n</body>\n</html>\n"},{"_content":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var Player, mediator, scoreboard;\n\n  Player = function(name) {\n    this.points = 0;\n    return this.name = name;\n  };\n\n  Player.prototype.play = function() {\n    this.points++;\n    return mediator.played();\n  };\n\n  scoreboard = {\n    element: document.getElementById(\"results\"),\n    update: function(score) {\n      var diff, key, msg, value;\n      msg = '';\n      for (key in score) {\n        value = score[key];\n        if (score.hasOwnProperty(key)) {\n          msg = msg + (\"<span><strong>\" + key + \"</strong>:\" + value + \"</span>\");\n        }\n      }\n      this.element.innerHTML = msg;\n      diff = score.Home - score.Guest;\n      if (diff > 15) {\n        alert(\"Home Win!\");\n        return location.reload();\n      } else if (diff < -15) {\n        alert(\"Guest Win!\");\n        return location.reload();\n      } else {\n        return document.getElementById('barGuest').style.width = 150 + (diff * 10) + 'px';\n      }\n    }\n  };\n\n  mediator = {\n    players: {},\n    setup: function() {\n      var players;\n      players = this.players;\n      players.home = new Player('Home');\n      return players.guest = new Player('Guest');\n    },\n    played: function() {\n      var players, score;\n      players = this.players;\n      score = {\n        Home: players.home.points,\n        Guest: players.guest.points\n      };\n      return scoreboard.update(score);\n    },\n    keypress: function(e) {\n      var keycode;\n      e = e || window.event;\n      keycode = e.which;\n      if (keycode === 102) {\n        mediator.players.home.play();\n        return;\n      }\n      if (keycode === 106) {\n        mediator.players.guest.play();\n      }\n    }\n  };\n\n  mediator.setup();\n\n  window.onkeypress = mediator.keypress;\n\n}).call(this);\n","source":"assets/demo/mediator/mediator.js","raw":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var Player, mediator, scoreboard;\n\n  Player = function(name) {\n    this.points = 0;\n    return this.name = name;\n  };\n\n  Player.prototype.play = function() {\n    this.points++;\n    return mediator.played();\n  };\n\n  scoreboard = {\n    element: document.getElementById(\"results\"),\n    update: function(score) {\n      var diff, key, msg, value;\n      msg = '';\n      for (key in score) {\n        value = score[key];\n        if (score.hasOwnProperty(key)) {\n          msg = msg + (\"<span><strong>\" + key + \"</strong>:\" + value + \"</span>\");\n        }\n      }\n      this.element.innerHTML = msg;\n      diff = score.Home - score.Guest;\n      if (diff > 15) {\n        alert(\"Home Win!\");\n        return location.reload();\n      } else if (diff < -15) {\n        alert(\"Guest Win!\");\n        return location.reload();\n      } else {\n        return document.getElementById('barGuest').style.width = 150 + (diff * 10) + 'px';\n      }\n    }\n  };\n\n  mediator = {\n    players: {},\n    setup: function() {\n      var players;\n      players = this.players;\n      players.home = new Player('Home');\n      return players.guest = new Player('Guest');\n    },\n    played: function() {\n      var players, score;\n      players = this.players;\n      score = {\n        Home: players.home.points,\n        Guest: players.guest.points\n      };\n      return scoreboard.update(score);\n    },\n    keypress: function(e) {\n      var keycode;\n      e = e || window.event;\n      keycode = e.which;\n      if (keycode === 102) {\n        mediator.players.home.play();\n        return;\n      }\n      if (keycode === 106) {\n        mediator.players.guest.play();\n      }\n    }\n  };\n\n  mediator.setup();\n\n  window.onkeypress = mediator.keypress;\n\n}).call(this);\n","date":"2020-03-12T13:55:48.656Z","updated":"2020-03-12T13:55:48.656Z","path":"assets/demo/mediator/mediator.js","layout":"false","title":"","comments":1,"_id":"ck7otizs1001d7guicw1g0ykp","content":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var Player, mediator, scoreboard;\n\n  Player = function(name) {\n    this.points = 0;\n    return this.name = name;\n  };\n\n  Player.prototype.play = function() {\n    this.points++;\n    return mediator.played();\n  };\n\n  scoreboard = {\n    element: document.getElementById(\"results\"),\n    update: function(score) {\n      var diff, key, msg, value;\n      msg = '';\n      for (key in score) {\n        value = score[key];\n        if (score.hasOwnProperty(key)) {\n          msg = msg + (\"<span><strong>\" + key + \"</strong>:\" + value + \"</span>\");\n        }\n      }\n      this.element.innerHTML = msg;\n      diff = score.Home - score.Guest;\n      if (diff > 15) {\n        alert(\"Home Win!\");\n        return location.reload();\n      } else if (diff < -15) {\n        alert(\"Guest Win!\");\n        return location.reload();\n      } else {\n        return document.getElementById('barGuest').style.width = 150 + (diff * 10) + 'px';\n      }\n    }\n  };\n\n  mediator = {\n    players: {},\n    setup: function() {\n      var players;\n      players = this.players;\n      players.home = new Player('Home');\n      return players.guest = new Player('Guest');\n    },\n    played: function() {\n      var players, score;\n      players = this.players;\n      score = {\n        Home: players.home.points,\n        Guest: players.guest.points\n      };\n      return scoreboard.update(score);\n    },\n    keypress: function(e) {\n      var keycode;\n      e = e || window.event;\n      keycode = e.which;\n      if (keycode === 102) {\n        mediator.players.home.play();\n        return;\n      }\n      if (keycode === 106) {\n        mediator.players.guest.play();\n      }\n    }\n  };\n\n  mediator.setup();\n\n  window.onkeypress = mediator.keypress;\n\n}).call(this);\n","site":{"data":{}},"excerpt":"","more":"// Generated by CoffeeScript 1.4.0\n(function() {\n  var Player, mediator, scoreboard;\n\n  Player = function(name) {\n    this.points = 0;\n    return this.name = name;\n  };\n\n  Player.prototype.play = function() {\n    this.points++;\n    return mediator.played();\n  };\n\n  scoreboard = {\n    element: document.getElementById(\"results\"),\n    update: function(score) {\n      var diff, key, msg, value;\n      msg = '';\n      for (key in score) {\n        value = score[key];\n        if (score.hasOwnProperty(key)) {\n          msg = msg + (\"<span><strong>\" + key + \"</strong>:\" + value + \"</span>\");\n        }\n      }\n      this.element.innerHTML = msg;\n      diff = score.Home - score.Guest;\n      if (diff > 15) {\n        alert(\"Home Win!\");\n        return location.reload();\n      } else if (diff < -15) {\n        alert(\"Guest Win!\");\n        return location.reload();\n      } else {\n        return document.getElementById('barGuest').style.width = 150 + (diff * 10) + 'px';\n      }\n    }\n  };\n\n  mediator = {\n    players: {},\n    setup: function() {\n      var players;\n      players = this.players;\n      players.home = new Player('Home');\n      return players.guest = new Player('Guest');\n    },\n    played: function() {\n      var players, score;\n      players = this.players;\n      score = {\n        Home: players.home.points,\n        Guest: players.guest.points\n      };\n      return scoreboard.update(score);\n    },\n    keypress: function(e) {\n      var keycode;\n      e = e || window.event;\n      keycode = e.which;\n      if (keycode === 102) {\n        mediator.players.home.play();\n        return;\n      }\n      if (keycode === 106) {\n        mediator.players.guest.play();\n      }\n    }\n  };\n\n  mediator.setup();\n\n  window.onkeypress = mediator.keypress;\n\n}).call(this);\n"},{"_content":"","source":"assets/demo/gift/js/index.main.js","raw":"","date":"2020-03-12T13:55:48.646Z","updated":"2020-03-12T13:55:48.646Z","path":"assets/demo/gift/js/index.main.js","layout":"false","title":"","comments":1,"_id":"ck7otizs2001e7guica3joxjo","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"/*\n *\n * Find more about this plugin by visiting\n * http://alxgbsn.co.uk/\n *\n * Copyright (c) 2010-2012 Alex Gibson\n * Released under MIT license\n *\n */\n\n(function (window, document) {\n\n    function Shake() {\n\n        //feature detect\n        this.hasDeviceMotion = 'ondevicemotion' in window;\n\n        //default velocity threshold for shake to register\n        this.threshold = 15;\n\n        //use date to prevent multiple shakes firing\n        this.lastTime = new Date();\n\n        //accelerometer values\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n\n        //create custom event\n        if (typeof document.CustomEvent === \"function\") {\n            this.event = new document.CustomEvent('shake', {\n                bubbles: true,\n                cancelable: true\n            });\n        } else if (typeof document.createEvent === \"function\") {\n            this.event = document.createEvent('Event');\n            this.event.initEvent('shake', true, true);\n        } else { \n          return false;\n        }\n    }\n\n    //reset timer values\n    Shake.prototype.reset = function () {\n        this.lastTime = new Date();\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n    };\n\n    //start listening for devicemotion\n    Shake.prototype.start = function () {\n        this.reset();\n        if (this.hasDeviceMotion) { window.addEventListener('devicemotion', this, false); }\n    };\n\n    //stop listening for devicemotion\n    Shake.prototype.stop = function () {\n\n        if (this.hasDeviceMotion) { window.removeEventListener('devicemotion', this, false); }\n        this.reset();\n    };\n\n    //calculates if shake did occur\n    Shake.prototype.devicemotion = function (e) {\n\n        var current = e.accelerationIncludingGravity,\n            currentTime,\n            timeDifference,\n            deltaX = 0,\n            deltaY = 0,\n            deltaZ = 0;\n\n        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\n            this.lastX = current.x;\n            this.lastY = current.y;\n            this.lastZ = current.z;\n            return;\n        }\n\n        deltaX = Math.abs(this.lastX - current.x);\n        deltaY = Math.abs(this.lastY - current.y);\n        deltaZ = Math.abs(this.lastZ - current.z);\n\n        if (((deltaX > this.threshold) && (deltaY > this.threshold)) || ((deltaX > this.threshold) && (deltaZ > this.threshold)) || ((deltaY > this.threshold) && (deltaZ > this.threshold))) {\n            //calculate time in milliseconds since last shake registered\n            currentTime = new Date();\n            timeDifference = currentTime.getTime() - this.lastTime.getTime();\n\n            if (timeDifference > 1000) {\n                window.dispatchEvent(this.event);\n                this.lastTime = new Date();\n            }\n        }\n\n        this.lastX = current.x;\n        this.lastY = current.y;\n        this.lastZ = current.z;\n\n    };\n\n    //event handler\n    Shake.prototype.handleEvent = function (e) {\n\n        if (typeof (this[e.type]) === 'function') {\n            return this[e.type](e);\n        }\n    };\n\n    //create a new instance of shake.js.\n    var myShakeEvent = new Shake();\n    myShakeEvent && myShakeEvent.start();\n\n}(window, document));\n","source":"assets/demo/gift/js/shake.js","raw":"/*\n *\n * Find more about this plugin by visiting\n * http://alxgbsn.co.uk/\n *\n * Copyright (c) 2010-2012 Alex Gibson\n * Released under MIT license\n *\n */\n\n(function (window, document) {\n\n    function Shake() {\n\n        //feature detect\n        this.hasDeviceMotion = 'ondevicemotion' in window;\n\n        //default velocity threshold for shake to register\n        this.threshold = 15;\n\n        //use date to prevent multiple shakes firing\n        this.lastTime = new Date();\n\n        //accelerometer values\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n\n        //create custom event\n        if (typeof document.CustomEvent === \"function\") {\n            this.event = new document.CustomEvent('shake', {\n                bubbles: true,\n                cancelable: true\n            });\n        } else if (typeof document.createEvent === \"function\") {\n            this.event = document.createEvent('Event');\n            this.event.initEvent('shake', true, true);\n        } else { \n          return false;\n        }\n    }\n\n    //reset timer values\n    Shake.prototype.reset = function () {\n        this.lastTime = new Date();\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n    };\n\n    //start listening for devicemotion\n    Shake.prototype.start = function () {\n        this.reset();\n        if (this.hasDeviceMotion) { window.addEventListener('devicemotion', this, false); }\n    };\n\n    //stop listening for devicemotion\n    Shake.prototype.stop = function () {\n\n        if (this.hasDeviceMotion) { window.removeEventListener('devicemotion', this, false); }\n        this.reset();\n    };\n\n    //calculates if shake did occur\n    Shake.prototype.devicemotion = function (e) {\n\n        var current = e.accelerationIncludingGravity,\n            currentTime,\n            timeDifference,\n            deltaX = 0,\n            deltaY = 0,\n            deltaZ = 0;\n\n        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\n            this.lastX = current.x;\n            this.lastY = current.y;\n            this.lastZ = current.z;\n            return;\n        }\n\n        deltaX = Math.abs(this.lastX - current.x);\n        deltaY = Math.abs(this.lastY - current.y);\n        deltaZ = Math.abs(this.lastZ - current.z);\n\n        if (((deltaX > this.threshold) && (deltaY > this.threshold)) || ((deltaX > this.threshold) && (deltaZ > this.threshold)) || ((deltaY > this.threshold) && (deltaZ > this.threshold))) {\n            //calculate time in milliseconds since last shake registered\n            currentTime = new Date();\n            timeDifference = currentTime.getTime() - this.lastTime.getTime();\n\n            if (timeDifference > 1000) {\n                window.dispatchEvent(this.event);\n                this.lastTime = new Date();\n            }\n        }\n\n        this.lastX = current.x;\n        this.lastY = current.y;\n        this.lastZ = current.z;\n\n    };\n\n    //event handler\n    Shake.prototype.handleEvent = function (e) {\n\n        if (typeof (this[e.type]) === 'function') {\n            return this[e.type](e);\n        }\n    };\n\n    //create a new instance of shake.js.\n    var myShakeEvent = new Shake();\n    myShakeEvent && myShakeEvent.start();\n\n}(window, document));\n","date":"2020-03-12T13:55:48.646Z","updated":"2020-03-12T13:55:48.646Z","path":"assets/demo/gift/js/shake.js","layout":"false","title":"","comments":1,"_id":"ck7otizs5001f7guiz6evqbgo","content":"/*\n *\n * Find more about this plugin by visiting\n * http://alxgbsn.co.uk/\n *\n * Copyright (c) 2010-2012 Alex Gibson\n * Released under MIT license\n *\n */\n\n(function (window, document) {\n\n    function Shake() {\n\n        //feature detect\n        this.hasDeviceMotion = 'ondevicemotion' in window;\n\n        //default velocity threshold for shake to register\n        this.threshold = 15;\n\n        //use date to prevent multiple shakes firing\n        this.lastTime = new Date();\n\n        //accelerometer values\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n\n        //create custom event\n        if (typeof document.CustomEvent === \"function\") {\n            this.event = new document.CustomEvent('shake', {\n                bubbles: true,\n                cancelable: true\n            });\n        } else if (typeof document.createEvent === \"function\") {\n            this.event = document.createEvent('Event');\n            this.event.initEvent('shake', true, true);\n        } else { \n          return false;\n        }\n    }\n\n    //reset timer values\n    Shake.prototype.reset = function () {\n        this.lastTime = new Date();\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n    };\n\n    //start listening for devicemotion\n    Shake.prototype.start = function () {\n        this.reset();\n        if (this.hasDeviceMotion) { window.addEventListener('devicemotion', this, false); }\n    };\n\n    //stop listening for devicemotion\n    Shake.prototype.stop = function () {\n\n        if (this.hasDeviceMotion) { window.removeEventListener('devicemotion', this, false); }\n        this.reset();\n    };\n\n    //calculates if shake did occur\n    Shake.prototype.devicemotion = function (e) {\n\n        var current = e.accelerationIncludingGravity,\n            currentTime,\n            timeDifference,\n            deltaX = 0,\n            deltaY = 0,\n            deltaZ = 0;\n\n        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\n            this.lastX = current.x;\n            this.lastY = current.y;\n            this.lastZ = current.z;\n            return;\n        }\n\n        deltaX = Math.abs(this.lastX - current.x);\n        deltaY = Math.abs(this.lastY - current.y);\n        deltaZ = Math.abs(this.lastZ - current.z);\n\n        if (((deltaX > this.threshold) && (deltaY > this.threshold)) || ((deltaX > this.threshold) && (deltaZ > this.threshold)) || ((deltaY > this.threshold) && (deltaZ > this.threshold))) {\n            //calculate time in milliseconds since last shake registered\n            currentTime = new Date();\n            timeDifference = currentTime.getTime() - this.lastTime.getTime();\n\n            if (timeDifference > 1000) {\n                window.dispatchEvent(this.event);\n                this.lastTime = new Date();\n            }\n        }\n\n        this.lastX = current.x;\n        this.lastY = current.y;\n        this.lastZ = current.z;\n\n    };\n\n    //event handler\n    Shake.prototype.handleEvent = function (e) {\n\n        if (typeof (this[e.type]) === 'function') {\n            return this[e.type](e);\n        }\n    };\n\n    //create a new instance of shake.js.\n    var myShakeEvent = new Shake();\n    myShakeEvent && myShakeEvent.start();\n\n}(window, document));\n","site":{"data":{}},"excerpt":"","more":"/*\n *\n * Find more about this plugin by visiting\n * http://alxgbsn.co.uk/\n *\n * Copyright (c) 2010-2012 Alex Gibson\n * Released under MIT license\n *\n */\n\n(function (window, document) {\n\n    function Shake() {\n\n        //feature detect\n        this.hasDeviceMotion = 'ondevicemotion' in window;\n\n        //default velocity threshold for shake to register\n        this.threshold = 15;\n\n        //use date to prevent multiple shakes firing\n        this.lastTime = new Date();\n\n        //accelerometer values\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n\n        //create custom event\n        if (typeof document.CustomEvent === \"function\") {\n            this.event = new document.CustomEvent('shake', {\n                bubbles: true,\n                cancelable: true\n            });\n        } else if (typeof document.createEvent === \"function\") {\n            this.event = document.createEvent('Event');\n            this.event.initEvent('shake', true, true);\n        } else { \n          return false;\n        }\n    }\n\n    //reset timer values\n    Shake.prototype.reset = function () {\n        this.lastTime = new Date();\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n    };\n\n    //start listening for devicemotion\n    Shake.prototype.start = function () {\n        this.reset();\n        if (this.hasDeviceMotion) { window.addEventListener('devicemotion', this, false); }\n    };\n\n    //stop listening for devicemotion\n    Shake.prototype.stop = function () {\n\n        if (this.hasDeviceMotion) { window.removeEventListener('devicemotion', this, false); }\n        this.reset();\n    };\n\n    //calculates if shake did occur\n    Shake.prototype.devicemotion = function (e) {\n\n        var current = e.accelerationIncludingGravity,\n            currentTime,\n            timeDifference,\n            deltaX = 0,\n            deltaY = 0,\n            deltaZ = 0;\n\n        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\n            this.lastX = current.x;\n            this.lastY = current.y;\n            this.lastZ = current.z;\n            return;\n        }\n\n        deltaX = Math.abs(this.lastX - current.x);\n        deltaY = Math.abs(this.lastY - current.y);\n        deltaZ = Math.abs(this.lastZ - current.z);\n\n        if (((deltaX > this.threshold) && (deltaY > this.threshold)) || ((deltaX > this.threshold) && (deltaZ > this.threshold)) || ((deltaY > this.threshold) && (deltaZ > this.threshold))) {\n            //calculate time in milliseconds since last shake registered\n            currentTime = new Date();\n            timeDifference = currentTime.getTime() - this.lastTime.getTime();\n\n            if (timeDifference > 1000) {\n                window.dispatchEvent(this.event);\n                this.lastTime = new Date();\n            }\n        }\n\n        this.lastX = current.x;\n        this.lastY = current.y;\n        this.lastZ = current.z;\n\n    };\n\n    //event handler\n    Shake.prototype.handleEvent = function (e) {\n\n        if (typeof (this[e.type]) === 'function') {\n            return this[e.type](e);\n        }\n    };\n\n    //create a new instance of shake.js.\n    var myShakeEvent = new Shake();\n    myShakeEvent && myShakeEvent.start();\n\n}(window, document));\n"},{"_content":"body{background:#f7f7f5;font-family:\"Helvetica Neue\",Helvetica,STHeiTi,sans-serif}header{height:44px;border-bottom:1px solid #000;background:#272c2f}header p{color:#fff;text-align:center;font-size:20px;line-height:40px}.hide{display:none}.paper-t{display:block;height:16px;width:100%;background:url(../img/paper.jpg) repeat-x;background-size:320px 15px}.paper-b{display:block;height:19px;width:100%;background:url(../img/paper-b.jpg) repeat-x;background-size:100% 19px;position:absolute;bottom:0px}.main{color:#2495e1;margin:-61px 8px 0px;height:100%;position:relative}.main .main-top{padding-top:61px;font-weight:500}.main .main-top .main-top-l{float:left}.main .main-top .main-top-r{float:right}.main .main-top:after{content:\"\";display:block;clear:both}.main .main-middle{font-size:98px;font-weight:500;text-align:center;line-height:141px}.main .main-bottom{width:100%;position:absolute;bottom:8px}.main .main-bottom nav{border:1px solid #2495e1;border-radius:3px;height:25px}.main .main-bottom nav span{float:left;display:inline-block;border-right:1px solid #2495e1;height:100%;width:33.1%;text-align:center;font-size:14px;line-height:26px}.main .main-bottom nav span:last-child{border-right:none}.main .main-bottom nav span.cur{background:#2495e1;color:#fff}.main .main-bottom .good-bad{height:140px;padding:20px 10px 10px}.main .main-bottom .good-bad em{display:inline-block;width:30px;height:30px;border-radius:15px;color:#fff;background:#2495e1;text-align:center;line-height:30px;float:left}.main .main-bottom .good-bad ul{padding-left:45px}.main .main-bottom .good-bad ul li{margin-bottom:13px}.main .main-bottom .good-bad ul p{font-size:18px;font-weight:500}.main .main-bottom .good-bad ul h3{font-size:30px;margin:23px 0px}.main .main-bottom .good-bad ul span{font-size:13px;color:#808080;margin-left:12px;display:block}.main .main-bottom .good-bad ul span:before{width:13px;height:11px;font-size:20px;font-weight:400;font-family:Georgia;content:\"\\201C\";position:absolute;color:#808080;left:56px}.main .main-bottom .good{border-bottom:1px solid #dfdfdf}.main .main-bottom .nav-chose .good{border-bottom:1px solid rgba(0,0,0,0)}.nav-chose .good-bad{text-align:center}.nav-chose .good-bad img{width:130px;margin-top:28px}.nav-chose .good-bad h2{margin:4px}.nav-chose .good-bad span{color:#666;margin:0 5px}.nav-chose .good-bad section{display:none}.nav-chose .good-bad section h3{display:none}.nav-chose .good-bad section.active{display:block}\n.top2{\n\ttext-align: center;\n\tmargin-top: 40px;\n}\n.top2 p{\n\tmargin: 10px 0px;\n\tcolor:#2495e1;\n}\n.top2 input{\n\theight: 30px;\n\tpadding: 5px;\n\tborder-radius: 3px;\n\tborder: 2px solid #2495e1;\n\toutline: none;\n}\n.top2 img{\n\twidth: 43%;\n}","source":"assets/demo/gift/css/index.css","raw":"body{background:#f7f7f5;font-family:\"Helvetica Neue\",Helvetica,STHeiTi,sans-serif}header{height:44px;border-bottom:1px solid #000;background:#272c2f}header p{color:#fff;text-align:center;font-size:20px;line-height:40px}.hide{display:none}.paper-t{display:block;height:16px;width:100%;background:url(../img/paper.jpg) repeat-x;background-size:320px 15px}.paper-b{display:block;height:19px;width:100%;background:url(../img/paper-b.jpg) repeat-x;background-size:100% 19px;position:absolute;bottom:0px}.main{color:#2495e1;margin:-61px 8px 0px;height:100%;position:relative}.main .main-top{padding-top:61px;font-weight:500}.main .main-top .main-top-l{float:left}.main .main-top .main-top-r{float:right}.main .main-top:after{content:\"\";display:block;clear:both}.main .main-middle{font-size:98px;font-weight:500;text-align:center;line-height:141px}.main .main-bottom{width:100%;position:absolute;bottom:8px}.main .main-bottom nav{border:1px solid #2495e1;border-radius:3px;height:25px}.main .main-bottom nav span{float:left;display:inline-block;border-right:1px solid #2495e1;height:100%;width:33.1%;text-align:center;font-size:14px;line-height:26px}.main .main-bottom nav span:last-child{border-right:none}.main .main-bottom nav span.cur{background:#2495e1;color:#fff}.main .main-bottom .good-bad{height:140px;padding:20px 10px 10px}.main .main-bottom .good-bad em{display:inline-block;width:30px;height:30px;border-radius:15px;color:#fff;background:#2495e1;text-align:center;line-height:30px;float:left}.main .main-bottom .good-bad ul{padding-left:45px}.main .main-bottom .good-bad ul li{margin-bottom:13px}.main .main-bottom .good-bad ul p{font-size:18px;font-weight:500}.main .main-bottom .good-bad ul h3{font-size:30px;margin:23px 0px}.main .main-bottom .good-bad ul span{font-size:13px;color:#808080;margin-left:12px;display:block}.main .main-bottom .good-bad ul span:before{width:13px;height:11px;font-size:20px;font-weight:400;font-family:Georgia;content:\"\\201C\";position:absolute;color:#808080;left:56px}.main .main-bottom .good{border-bottom:1px solid #dfdfdf}.main .main-bottom .nav-chose .good{border-bottom:1px solid rgba(0,0,0,0)}.nav-chose .good-bad{text-align:center}.nav-chose .good-bad img{width:130px;margin-top:28px}.nav-chose .good-bad h2{margin:4px}.nav-chose .good-bad span{color:#666;margin:0 5px}.nav-chose .good-bad section{display:none}.nav-chose .good-bad section h3{display:none}.nav-chose .good-bad section.active{display:block}\n.top2{\n\ttext-align: center;\n\tmargin-top: 40px;\n}\n.top2 p{\n\tmargin: 10px 0px;\n\tcolor:#2495e1;\n}\n.top2 input{\n\theight: 30px;\n\tpadding: 5px;\n\tborder-radius: 3px;\n\tborder: 2px solid #2495e1;\n\toutline: none;\n}\n.top2 img{\n\twidth: 43%;\n}","date":"2020-03-12T13:55:48.643Z","updated":"2020-03-12T13:55:48.643Z","path":"assets/demo/gift/css/index.css","layout":"false","title":"","comments":1,"_id":"ck7otizs5001g7guivwdvlgop","content":"body{background:#f7f7f5;font-family:\"Helvetica Neue\",Helvetica,STHeiTi,sans-serif}header{height:44px;border-bottom:1px solid #000;background:#272c2f}header p{color:#fff;text-align:center;font-size:20px;line-height:40px}.hide{display:none}.paper-t{display:block;height:16px;width:100%;background:url(../img/paper.jpg) repeat-x;background-size:320px 15px}.paper-b{display:block;height:19px;width:100%;background:url(../img/paper-b.jpg) repeat-x;background-size:100% 19px;position:absolute;bottom:0px}.main{color:#2495e1;margin:-61px 8px 0px;height:100%;position:relative}.main .main-top{padding-top:61px;font-weight:500}.main .main-top .main-top-l{float:left}.main .main-top .main-top-r{float:right}.main .main-top:after{content:\"\";display:block;clear:both}.main .main-middle{font-size:98px;font-weight:500;text-align:center;line-height:141px}.main .main-bottom{width:100%;position:absolute;bottom:8px}.main .main-bottom nav{border:1px solid #2495e1;border-radius:3px;height:25px}.main .main-bottom nav span{float:left;display:inline-block;border-right:1px solid #2495e1;height:100%;width:33.1%;text-align:center;font-size:14px;line-height:26px}.main .main-bottom nav span:last-child{border-right:none}.main .main-bottom nav span.cur{background:#2495e1;color:#fff}.main .main-bottom .good-bad{height:140px;padding:20px 10px 10px}.main .main-bottom .good-bad em{display:inline-block;width:30px;height:30px;border-radius:15px;color:#fff;background:#2495e1;text-align:center;line-height:30px;float:left}.main .main-bottom .good-bad ul{padding-left:45px}.main .main-bottom .good-bad ul li{margin-bottom:13px}.main .main-bottom .good-bad ul p{font-size:18px;font-weight:500}.main .main-bottom .good-bad ul h3{font-size:30px;margin:23px 0px}.main .main-bottom .good-bad ul span{font-size:13px;color:#808080;margin-left:12px;display:block}.main .main-bottom .good-bad ul span:before{width:13px;height:11px;font-size:20px;font-weight:400;font-family:Georgia;content:\"\\201C\";position:absolute;color:#808080;left:56px}.main .main-bottom .good{border-bottom:1px solid #dfdfdf}.main .main-bottom .nav-chose .good{border-bottom:1px solid rgba(0,0,0,0)}.nav-chose .good-bad{text-align:center}.nav-chose .good-bad img{width:130px;margin-top:28px}.nav-chose .good-bad h2{margin:4px}.nav-chose .good-bad span{color:#666;margin:0 5px}.nav-chose .good-bad section{display:none}.nav-chose .good-bad section h3{display:none}.nav-chose .good-bad section.active{display:block}\n.top2{\n\ttext-align: center;\n\tmargin-top: 40px;\n}\n.top2 p{\n\tmargin: 10px 0px;\n\tcolor:#2495e1;\n}\n.top2 input{\n\theight: 30px;\n\tpadding: 5px;\n\tborder-radius: 3px;\n\tborder: 2px solid #2495e1;\n\toutline: none;\n}\n.top2 img{\n\twidth: 43%;\n}","site":{"data":{}},"excerpt":"","more":"body{background:#f7f7f5;font-family:\"Helvetica Neue\",Helvetica,STHeiTi,sans-serif}header{height:44px;border-bottom:1px solid #000;background:#272c2f}header p{color:#fff;text-align:center;font-size:20px;line-height:40px}.hide{display:none}.paper-t{display:block;height:16px;width:100%;background:url(../img/paper.jpg) repeat-x;background-size:320px 15px}.paper-b{display:block;height:19px;width:100%;background:url(../img/paper-b.jpg) repeat-x;background-size:100% 19px;position:absolute;bottom:0px}.main{color:#2495e1;margin:-61px 8px 0px;height:100%;position:relative}.main .main-top{padding-top:61px;font-weight:500}.main .main-top .main-top-l{float:left}.main .main-top .main-top-r{float:right}.main .main-top:after{content:\"\";display:block;clear:both}.main .main-middle{font-size:98px;font-weight:500;text-align:center;line-height:141px}.main .main-bottom{width:100%;position:absolute;bottom:8px}.main .main-bottom nav{border:1px solid #2495e1;border-radius:3px;height:25px}.main .main-bottom nav span{float:left;display:inline-block;border-right:1px solid #2495e1;height:100%;width:33.1%;text-align:center;font-size:14px;line-height:26px}.main .main-bottom nav span:last-child{border-right:none}.main .main-bottom nav span.cur{background:#2495e1;color:#fff}.main .main-bottom .good-bad{height:140px;padding:20px 10px 10px}.main .main-bottom .good-bad em{display:inline-block;width:30px;height:30px;border-radius:15px;color:#fff;background:#2495e1;text-align:center;line-height:30px;float:left}.main .main-bottom .good-bad ul{padding-left:45px}.main .main-bottom .good-bad ul li{margin-bottom:13px}.main .main-bottom .good-bad ul p{font-size:18px;font-weight:500}.main .main-bottom .good-bad ul h3{font-size:30px;margin:23px 0px}.main .main-bottom .good-bad ul span{font-size:13px;color:#808080;margin-left:12px;display:block}.main .main-bottom .good-bad ul span:before{width:13px;height:11px;font-size:20px;font-weight:400;font-family:Georgia;content:\"\\201C\";position:absolute;color:#808080;left:56px}.main .main-bottom .good{border-bottom:1px solid #dfdfdf}.main .main-bottom .nav-chose .good{border-bottom:1px solid rgba(0,0,0,0)}.nav-chose .good-bad{text-align:center}.nav-chose .good-bad img{width:130px;margin-top:28px}.nav-chose .good-bad h2{margin:4px}.nav-chose .good-bad span{color:#666;margin:0 5px}.nav-chose .good-bad section{display:none}.nav-chose .good-bad section h3{display:none}.nav-chose .good-bad section.active{display:block}\n.top2{\n\ttext-align: center;\n\tmargin-top: 40px;\n}\n.top2 p{\n\tmargin: 10px 0px;\n\tcolor:#2495e1;\n}\n.top2 input{\n\theight: 30px;\n\tpadding: 5px;\n\tborder-radius: 3px;\n\tborder: 2px solid #2495e1;\n\toutline: none;\n}\n.top2 img{\n\twidth: 43%;\n}"},{"_content":"html{color:#000}blockquote,body,code,dd,div,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,input,legend,li,menu,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:after,q:before{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,select,textarea{font-family:inherit;font-size:inherit;font-weight:inherit;*font-size:100%}legend{color:#000}body,html{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}","source":"assets/demo/gift/css/reset.css","raw":"html{color:#000}blockquote,body,code,dd,div,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,input,legend,li,menu,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:after,q:before{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,select,textarea{font-family:inherit;font-size:inherit;font-weight:inherit;*font-size:100%}legend{color:#000}body,html{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}","date":"2020-03-12T13:55:48.644Z","updated":"2020-03-12T13:55:48.644Z","path":"assets/demo/gift/css/reset.css","layout":"false","title":"","comments":1,"_id":"ck7otizs6001h7guia2pgy3ua","content":"html{color:#000}blockquote,body,code,dd,div,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,input,legend,li,menu,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:after,q:before{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,select,textarea{font-family:inherit;font-size:inherit;font-weight:inherit;*font-size:100%}legend{color:#000}body,html{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}","site":{"data":{}},"excerpt":"","more":"html{color:#000}blockquote,body,code,dd,div,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,input,legend,li,menu,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}q:after,q:before{content:''}abbr,acronym{border:0;font-variant:normal}sup{vertical-align:text-top}sub{vertical-align:text-bottom}input,select,textarea{font-family:inherit;font-size:inherit;font-weight:inherit;*font-size:100%}legend{color:#000}body,html{-webkit-text-size-adjust:none;-webkit-touch-callout:none;vertical-align:middle;font-size:16px;background:#e6e6e6;position:relative;height:100%;font-family:Tahoma,Arial,\"Microsoft Yahei\",sans-serif}.clearfix:after{content:\" \";display:block;clear:both;visibility:hidden;line-height:0;height:0}input::-webkit-input-placeholder{color:#aaa}a,div{-webkit-tap-highlight-color:rgba(0,0,0,0)}a,a:active,a:hover{color:#0057af;text-decoration:none}"},{"_content":"/* Zepto v1.1.3 - zepto event ajax form ie - zeptojs.com/license */\nvar Zepto=function(){function L(t){return null==t?String(t):j[T.call(t)]||\"object\"}function Z(t){return\"function\"==L(t)}function $(t){return null!=t&&t==t.window}function _(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function D(t){return\"object\"==L(t)}function R(t){return D(t)&&!$(t)&&Object.getPrototypeOf(t)==Object.prototype}function M(t){return\"number\"==typeof t.length}function k(t){return s.call(t,function(t){return null!=t})}function z(t){return t.length>0?n.fn.concat.apply([],t):t}function F(t){return t.replace(/::/g,\"/\").replace(/([A-Z]+)([A-Z][a-z])/g,\"$1_$2\").replace(/([a-z\\d])([A-Z])/g,\"$1_$2\").replace(/_/g,\"-\").toLowerCase()}function q(t){return t in f?f[t]:f[t]=new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|$)\")}function H(t,e){return\"number\"!=typeof e||c[F(t)]?e:e+\"px\"}function I(t){var e,n;return u[t]||(e=a.createElement(t),a.body.appendChild(e),n=getComputedStyle(e,\"\").getPropertyValue(\"display\"),e.parentNode.removeChild(e),\"none\"==n&&(n=\"block\"),u[t]=n),u[t]}function V(t){return\"children\"in t?o.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function U(n,i,r){for(e in i)r&&(R(i[e])||A(i[e]))?(R(i[e])&&!R(n[e])&&(n[e]={}),A(i[e])&&!A(n[e])&&(n[e]=[]),U(n[e],i[e],r)):i[e]!==t&&(n[e]=i[e])}function B(t,e){return null==e?n(t):n(t).filter(e)}function J(t,e,n,i){return Z(e)?e.call(t,n,i):e}function X(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function W(e,n){var i=e.className,r=i&&i.baseVal!==t;return n===t?r?i.baseVal:i:void(r?i.baseVal=n:e.className=n)}function Y(t){var e;try{return t?\"true\"==t||(\"false\"==t?!1:\"null\"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\\[\\{]/.test(t)?n.parseJSON(t):t:e):t}catch(i){return t}}function G(t,e){e(t);for(var n in t.childNodes)G(t.childNodes[n],e)}var t,e,n,i,C,N,r=[],o=r.slice,s=r.filter,a=window.document,u={},f={},c={\"column-count\":1,columns:1,\"font-weight\":1,\"line-height\":1,opacity:1,\"z-index\":1,zoom:1},l=/^\\s*<(\\w+|!)[^>]*>/,h=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,d=/^(?:body|html)$/i,m=/([A-Z])/g,g=[\"val\",\"css\",\"html\",\"text\",\"data\",\"width\",\"height\",\"offset\"],v=[\"after\",\"prepend\",\"before\",\"append\"],y=a.createElement(\"table\"),x=a.createElement(\"tr\"),b={tr:a.createElement(\"tbody\"),tbody:y,thead:y,tfoot:y,td:x,th:x,\"*\":a.createElement(\"div\")},w=/complete|loaded|interactive/,E=/^[\\w-]*$/,j={},T=j.toString,S={},O=a.createElement(\"div\"),P={tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},A=Array.isArray||function(t){return t instanceof Array};return S.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=O).appendChild(t),i=~S.qsa(r,e).indexOf(t),o&&O.removeChild(t),i},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():\"\"})},N=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},S.fragment=function(e,i,r){var s,u,f;return h.test(e)&&(s=n(a.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,\"<$1></$2>\")),i===t&&(i=l.test(e)&&RegExp.$1),i in b||(i=\"*\"),f=b[i],f.innerHTML=\"\"+e,s=n.each(o.call(f.childNodes),function(){f.removeChild(this)})),R(r)&&(u=n(s),n.each(r,function(t,e){g.indexOf(t)>-1?u[t](e):u.attr(t,e)})),s},S.Z=function(t,e){return t=t||[],t.__proto__=n.fn,t.selector=e||\"\",t},S.isZ=function(t){return t instanceof S.Z},S.init=function(e,i){var r;if(!e)return S.Z();if(\"string\"==typeof e)if(e=e.trim(),\"<\"==e[0]&&l.test(e))r=S.fragment(e,RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=S.qsa(a,e)}else{if(Z(e))return n(a).ready(e);if(S.isZ(e))return e;if(A(e))r=k(e);else if(D(e))r=[e],e=null;else if(l.test(e))r=S.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=S.qsa(a,e)}}return S.Z(r,e)},n=function(t,e){return S.init(t,e)},n.extend=function(t){var e,n=o.call(arguments,1);return\"boolean\"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){U(t,n,e)}),t},S.qsa=function(t,e){var n,i=\"#\"==e[0],r=!i&&\".\"==e[0],s=i||r?e.slice(1):e,a=E.test(s);return _(t)&&a&&i?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!i?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=function(t,e){return t!==e&&t.contains(e)},n.type=L,n.isFunction=Z,n.isWindow=$,n.isArray=A,n.isPlainObject=R,n.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.inArray=function(t,e,n){return r.indexOf.call(e,t,n)},n.camelCase=C,n.trim=function(t){return null==t?\"\":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var n,r,o,i=[];if(M(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&i.push(n);else for(o in t)n=e(t[o],o),null!=n&&i.push(n);return z(i)},n.each=function(t,e){var n,i;if(M(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},n.grep=function(t,e){return s.call(t,e)},window.JSON&&(n.parseJSON=JSON.parse),n.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(t,e){j[\"[object \"+e+\"]\"]=e.toLowerCase()}),n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){return w.test(a.readyState)&&a.body?t(n):a.addEventListener(\"DOMContentLoaded\",function(){t(n)},!1),this},get:function(e){return e===t?o.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return r.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return Z(t)?this.not(this.not(t)):n(s.call(this,function(e){return S.matches(e,t)}))},add:function(t,e){return n(N(this.concat(n(t,e))))},is:function(t){return this.length>0&&S.matches(this[0],t)},not:function(e){var i=[];if(Z(e)&&e.call!==t)this.each(function(t){e.call(this,t)||i.push(this)});else{var r=\"string\"==typeof e?this.filter(e):M(e)&&Z(e.item)?o.call(e):n(e);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return D(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!D(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!D(t)?t:n(t)},find:function(t){var e,i=this;return e=\"object\"==typeof t?n(t).filter(function(){var t=this;return r.some.call(i,function(e){return n.contains(e,t)})}):1==this.length?n(S.qsa(this[0],t)):this.map(function(){return S.qsa(this,t)})},closest:function(t,e){var i=this[0],r=!1;for(\"object\"==typeof t&&(r=n(t));i&&!(r?r.indexOf(i)>=0:S.matches(i,t));)i=i!==e&&!_(i)&&i.parentNode;return n(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=n.map(i,function(t){return(t=t.parentNode)&&!_(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return B(e,t)},parent:function(t){return B(N(this.pluck(\"parentNode\")),t)},children:function(t){return B(this.map(function(){return V(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(t){return B(this.map(function(t,e){return s.call(V(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=\"\"})},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){\"none\"==this.style.display&&(this.style.display=\"\"),\"none\"==getComputedStyle(this,\"\").getPropertyValue(\"display\")&&(this.style.display=I(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=Z(t);if(this[0]&&!e)var i=n(t).get(0),r=i.parentNode||this.length>1;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=Z(t);return this.each(function(i){var r=n(this),o=r.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css(\"display\",\"none\")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?\"none\"==i.css(\"display\"):e)?i.show():i.hide()})},prev:function(t){return n(this.pluck(\"previousElementSibling\")).filter(t||\"*\")},next:function(t){return n(this.pluck(\"nextElementSibling\")).filter(t||\"*\")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;n(this).empty().append(J(this,t,e,i))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===t?\"\":\"\"+e})},attr:function(n,i){var r;return\"string\"==typeof n&&i===t?0==this.length||1!==this[0].nodeType?t:\"value\"==n&&\"INPUT\"==this[0].nodeName?this.val():!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:this.each(function(t){if(1===this.nodeType)if(D(n))for(e in n)X(this,e,n[e]);else X(this,n,J(this,i,t,this.getAttribute(n)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&X(this,t)})},prop:function(e,n){return e=P[e]||e,n===t?this[0]&&this[0][e]:this.each(function(t){this[e]=J(this,n,t,this[e])})},data:function(e,n){var i=this.attr(\"data-\"+e.replace(m,\"-$1\").toLowerCase(),n);return null!==i?Y(i):t},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?n(this[0]).find(\"option\").filter(function(){return this.selected}).pluck(\"value\"):this[0].value):this.each(function(e){this.value=J(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=J(this,t,e,i.offset()),o=i.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};\"static\"==i.css(\"position\")&&(s.position=\"relative\"),i.css(s)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r=this[0],o=getComputedStyle(r,\"\");if(!r)return;if(\"string\"==typeof t)return r.style[C(t)]||o.getPropertyValue(t);if(A(t)){var s={};return n.each(A(t)?t:[t],function(t,e){s[e]=r.style[C(e)]||o.getPropertyValue(e)}),s}}var a=\"\";if(\"string\"==L(t))i||0===i?a=F(t)+\":\"+H(t,i):this.each(function(){this.style.removeProperty(F(t))});else for(e in t)t[e]||0===t[e]?a+=F(e)+\":\"+H(e,t[e])+\";\":this.each(function(){this.style.removeProperty(F(e))});return this.each(function(){this.style.cssText+=\";\"+a})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?r.some.call(this,function(t){return this.test(W(t))},q(t)):!1},addClass:function(t){return t?this.each(function(e){i=[];var r=W(this),o=J(this,t,e,r);o.split(/\\s+/g).forEach(function(t){n(this).hasClass(t)||i.push(t)},this),i.length&&W(this,r+(r?\" \":\"\")+i.join(\" \"))}):this},removeClass:function(e){return this.each(function(n){return e===t?W(this,\"\"):(i=W(this),J(this,e,n,i).split(/\\s+/g).forEach(function(t){i=i.replace(q(t),\" \")}),void W(this,i.trim()))})},toggleClass:function(e,i){return e?this.each(function(r){var o=n(this),s=J(this,e,r,W(this));s.split(/\\s+/g).forEach(function(e){(i===t?!o.hasClass(e):i)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n=\"scrollTop\"in this[0];return e===t?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n=\"scrollLeft\"in this[0];return e===t?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),r=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(n(t).css(\"margin-top\"))||0,i.left-=parseFloat(n(t).css(\"margin-left\"))||0,r.top+=parseFloat(n(e[0]).css(\"border-top-width\"))||0,r.left+=parseFloat(n(e[0]).css(\"border-left-width\"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||a.body;t&&!d.test(t.nodeName)&&\"static\"==n(t).css(\"position\");)t=t.offsetParent;return t})}},n.fn.detach=n.fn.remove,[\"width\",\"height\"].forEach(function(e){var i=e.replace(/./,function(t){return t[0].toUpperCase()});n.fn[e]=function(r){var o,s=this[0];return r===t?$(s)?s[\"inner\"+i]:_(s)?s.documentElement[\"scroll\"+i]:(o=this.offset())&&o[e]:this.each(function(t){s=n(this),s.css(e,J(this,r,t,s[e]()))})}}),v.forEach(function(t,e){var i=e%2;n.fn[t]=function(){var t,o,r=n.map(arguments,function(e){return t=L(e),\"object\"==t||\"array\"==t||null==e?e:S.fragment(e)}),s=this.length>1;return r.length<1?this:this.each(function(t,a){o=i?a:a.parentNode,a=0==e?a.nextSibling:1==e?a.firstChild:2==e?a:null,r.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!o)return n(t).remove();G(o.insertBefore(t,a),function(t){null==t.nodeName||\"SCRIPT\"!==t.nodeName.toUpperCase()||t.type&&\"text/javascript\"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},n.fn[i?t+\"To\":\"insert\"+(e?\"Before\":\"After\")]=function(e){return n(e)[t](this),this}}),S.Z.prototype=n.fn,S.uniq=N,S.deserializeValue=Y,n.zepto=S,n}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function l(t){return t._zid||(t._zid=e++)}function h(t,e,n,i){if(e=p(e),e.ns)var r=d(e.ns);return(s[l(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&l(t.fn)!==l(n)||i&&t.sel!=i)})}function p(t){var e=(\"\"+t).split(\".\");return{e:e[0],ns:e.slice(1).sort().join(\" \")}}function d(t){return new RegExp(\"(?:^| )\"+t.replace(\" \",\" .* ?\")+\"(?: |$)\")}function m(t,e){return t.del&&!u&&t.e in f||!!e}function g(t){return c[t]||u&&f[t]||t}function v(e,i,r,o,a,u,f){var h=l(e),d=s[h]||(s[h]=[]);i.split(/\\s/).forEach(function(i){if(\"ready\"==i)return t(document).ready(r);var s=p(i);s.fn=r,s.sel=a,s.e in c&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?s.fn.apply(this,arguments):void 0}),s.del=u;var l=u||r;s.proxy=function(t){if(t=j(t),!t.isImmediatePropagationStopped()){t.data=o;var i=l.apply(e,t._args==n?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},s.i=d.length,d.push(s),\"addEventListener\"in e&&e.addEventListener(g(s.e),s.proxy,m(s,f))})}function y(t,e,n,i,r){var o=l(t);(e||\"\").split(/\\s/).forEach(function(e){h(t,e,n,i).forEach(function(e){delete s[o][e.i],\"removeEventListener\"in t&&t.removeEventListener(g(e.e),e.proxy,m(e,r))})})}function j(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(E,function(t,n){var r=i[t];e[t]=function(){return this[n]=x,r&&r.apply(i,arguments)},e[n]=b}),(i.defaultPrevented!==n?i.defaultPrevented:\"returnValue\"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function T(t){var e,i={originalEvent:t};for(e in t)w.test(e)||t[e]===n||(i[e]=t[e]);return j(i,t)}var n,e=1,i=Array.prototype.slice,r=t.isFunction,o=function(t){return\"string\"==typeof t},s={},a={},u=\"onfocusin\"in window,f={focus:\"focusin\",blur:\"focusout\"},c={mouseenter:\"mouseover\",mouseleave:\"mouseout\"};a.click=a.mousedown=a.mouseup=a.mousemove=\"MouseEvents\",t.event={add:v,remove:y},t.proxy=function(e,n){if(r(e)){var i=function(){return e.apply(n,arguments)};return i._zid=l(e),i}if(o(n))return t.proxy(e[n],e);throw new TypeError(\"expected function\")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var x=function(){return!0},b=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:\"isDefaultPrevented\",stopImmediatePropagation:\"isImmediatePropagationStopped\",stopPropagation:\"isPropagationStopped\"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,s,a,u,f){var c,l,h=this;return e&&!o(e)?(t.each(e,function(t,e){h.on(t,s,a,e,f)}),h):(o(s)||r(u)||u===!1||(u=a,a=s,s=n),(r(a)||a===!1)&&(u=a,a=n),u===!1&&(u=b),h.each(function(n,r){f&&(c=function(t){return y(r,t.type,u),u.apply(this,arguments)}),s&&(l=function(e){var n,o=t(e.target).closest(s,r).get(0);return o&&o!==r?(n=t.extend(T(e),{currentTarget:o,liveFired:r}),(c||u).apply(o,[n].concat(i.call(arguments,1)))):void 0}),v(r,e,u,a,s,l||c)}))},t.fn.off=function(e,i,s){var a=this;return e&&!o(e)?(t.each(e,function(t,e){a.off(t,i,e)}),a):(o(i)||r(s)||s===!1||(s=i,i=n),s===!1&&(s=b),a.each(function(){y(this,e,s,i)}))},t.fn.trigger=function(e,n){return e=o(e)||t.isPlainObject(e)?t.Event(e):j(e),e._args=n,this.each(function(){\"dispatchEvent\"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var i,r;return this.each(function(s,a){i=T(o(e)?t.Event(e):e),i._args=n,i.target=a,t.each(h(a,e.type||e),function(t,e){return r=e.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),r},\"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error\".split(\" \").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),[\"focus\",\"blur\"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){o(t)||(e=t,t=e.type);var n=document.createEvent(a[t]||\"Events\"),i=!0;if(e)for(var r in e)\"bubbles\"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),j(n)}}(Zepto),function(t){function l(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function h(t,e,i,r){return t.global?l(e||n,i,r):void 0}function p(e){e.global&&0===t.active++&&h(e,null,\"ajaxStart\")}function d(e){e.global&&!--t.active&&h(e,null,\"ajaxStop\")}function m(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||h(e,n,\"ajaxBeforeSend\",[t,e])===!1?!1:void h(e,n,\"ajaxSend\",[t,e])}function g(t,e,n,i){var r=n.context,o=\"success\";n.success.call(r,t,o,e),i&&i.resolveWith(r,[t,o,e]),h(n,r,\"ajaxSuccess\",[e,n,t]),y(o,e,n)}function v(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t),r&&r.rejectWith(o,[n,e,t]),h(i,o,\"ajaxError\",[n,i,t||e]),y(e,n,i)}function y(t,e,n){var i=n.context;n.complete.call(i,e,t),h(n,i,\"ajaxComplete\",[e,n]),d(n)}function x(){}function b(t){return t&&(t=t.split(\";\",2)[0]),t&&(t==f?\"html\":t==u?\"json\":s.test(t)?\"script\":a.test(t)&&\"xml\")||\"text\"}function w(t,e){return\"\"==e?t:(t+\"&\"+e).replace(/[&?]{1,2}/,\"?\")}function E(e){e.processData&&e.data&&\"string\"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&\"GET\"!=e.type.toUpperCase()||(e.url=w(e.url,e.data),e.data=void 0)}function j(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function S(e,n,i,r){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+\"[\"+(a||\"object\"==o||\"array\"==o?n:\"\")+\"]\"),!r&&s?e.add(u.name,u.value):\"array\"==o||!i&&\"object\"==o?S(e,u,i,n):e.add(n,u)})}var i,r,e=0,n=window.document,o=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,s=/^(?:text|application)\\/javascript/i,a=/^(?:text|application)\\/xml/i,u=\"application/json\",f=\"text/html\",c=/^\\s*$/;t.active=0,t.ajaxJSONP=function(i,r){if(!(\"type\"in i))return t.ajax(i);var f,h,o=i.jsonpCallback,s=(t.isFunction(o)?o():o)||\"jsonp\"+ ++e,a=n.createElement(\"script\"),u=window[s],c=function(e){t(a).triggerHandler(\"error\",e||\"abort\")},l={abort:c};return r&&r.promise(l),t(a).on(\"load error\",function(e,n){clearTimeout(h),t(a).off().remove(),\"error\"!=e.type&&f?g(f[0],l,i,r):v(null,n||\"error\",l,i,r),window[s]=u,f&&t.isFunction(u)&&u(f[0]),u=f=void 0}),m(l,i)===!1?(c(\"abort\"),l):(window[s]=function(){f=arguments},a.src=i.url.replace(/\\?(.+)=\\?/,\"?$1=\"+s),n.head.appendChild(a),i.timeout>0&&(h=setTimeout(function(){c(\"timeout\")},i.timeout)),l)},t.ajaxSettings={type:\"GET\",beforeSend:x,success:x,error:x,complete:x,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:\"text/javascript, application/javascript, application/x-javascript\",json:u,xml:\"application/xml, text/xml\",html:f,text:\"text/plain\"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),o=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)void 0===n[i]&&(n[i]=t.ajaxSettings[i]);p(n),n.crossDomain||(n.crossDomain=/^([\\w-]+:)?\\/\\/([^\\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),E(n),n.cache===!1&&(n.url=w(n.url,\"_=\"+Date.now()));var s=n.dataType,a=/\\?.+=\\?/.test(n.url);if(\"jsonp\"==s||a)return a||(n.url=w(n.url,n.jsonp?n.jsonp+\"=?\":n.jsonp===!1?\"\":\"callback=?\")),t.ajaxJSONP(n,o);var j,u=n.accepts[s],f={},l=function(t,e){f[t.toLowerCase()]=[t,e]},h=/^([\\w-]+:)\\/\\//.test(n.url)?RegExp.$1:window.location.protocol,d=n.xhr(),y=d.setRequestHeader;if(o&&o.promise(d),n.crossDomain||l(\"X-Requested-With\",\"XMLHttpRequest\"),l(\"Accept\",u||\"*/*\"),(u=n.mimeType||u)&&(u.indexOf(\",\")>-1&&(u=u.split(\",\",2)[0]),d.overrideMimeType&&d.overrideMimeType(u)),(n.contentType||n.contentType!==!1&&n.data&&\"GET\"!=n.type.toUpperCase())&&l(\"Content-Type\",n.contentType||\"application/x-www-form-urlencoded\"),n.headers)for(r in n.headers)l(r,n.headers[r]);if(d.setRequestHeader=l,d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=x,clearTimeout(j);var e,i=!1;if(d.status>=200&&d.status<300||304==d.status||0==d.status&&\"file:\"==h){s=s||b(n.mimeType||d.getResponseHeader(\"content-type\")),e=d.responseText;try{\"script\"==s?(1,eval)(e):\"xml\"==s?e=d.responseXML:\"json\"==s&&(e=c.test(e)?null:t.parseJSON(e))}catch(r){i=r}i?v(i,\"parsererror\",d,n,o):g(e,d,n,o)}else v(d.statusText||null,d.status?\"error\":\"abort\",d,n,o)}},m(d,n)===!1)return d.abort(),v(null,\"abort\",d,n,o),d;if(n.xhrFields)for(r in n.xhrFields)d[r]=n.xhrFields[r];var T=\"async\"in n?n.async:!0;d.open(n.type,n.url,T,n.username,n.password);for(r in f)y.apply(d,f[r]);return n.timeout>0&&(j=setTimeout(function(){d.onreadystatechange=x,d.abort(),v(null,\"timeout\",d,n,o)},n.timeout)),d.send(n.data?n.data:null),d},t.get=function(){return t.ajax(j.apply(null,arguments))},t.post=function(){var e=j.apply(null,arguments);return e.type=\"POST\",t.ajax(e)},t.getJSON=function(){var e=j.apply(null,arguments);return e.dataType=\"json\",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var a,r=this,s=e.split(/\\s/),u=j(e,n,i),f=u.success;return s.length>1&&(u.url=s[0],a=s[1]),u.success=function(e){r.html(a?t(\"<div>\").html(e.replace(o,\"\")).find(a):e),f&&f.apply(r,arguments)},t.ajax(u),this};var T=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(T(t)+\"=\"+T(e))},S(n,t,e),n.join(\"&\").replace(/%20/g,\"+\")}}(Zepto),function(t){t.fn.serializeArray=function(){var n,e=[];return t([].slice.call(this.get(0).elements)).each(function(){n=t(this);var i=n.attr(\"type\");\"fieldset\"!=this.nodeName.toLowerCase()&&!this.disabled&&\"submit\"!=i&&\"reset\"!=i&&\"button\"!=i&&(\"radio\"!=i&&\"checkbox\"!=i||this.checked)&&e.push({name:n.attr(\"name\"),value:n.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+\"=\"+encodeURIComponent(e.value))}),t.join(\"&\")},t.fn.submit=function(e){if(e)this.bind(\"submit\",e);else if(this.length){var n=t.Event(\"submit\");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){\"__proto__\"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||\"\",e.__Z=!0,e},isZ:function(e){return\"array\"===t.type(e)&&\"__Z\"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto);\n","source":"assets/demo/gift/js/zepto.min.js","raw":"/* Zepto v1.1.3 - zepto event ajax form ie - zeptojs.com/license */\nvar Zepto=function(){function L(t){return null==t?String(t):j[T.call(t)]||\"object\"}function Z(t){return\"function\"==L(t)}function $(t){return null!=t&&t==t.window}function _(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function D(t){return\"object\"==L(t)}function R(t){return D(t)&&!$(t)&&Object.getPrototypeOf(t)==Object.prototype}function M(t){return\"number\"==typeof t.length}function k(t){return s.call(t,function(t){return null!=t})}function z(t){return t.length>0?n.fn.concat.apply([],t):t}function F(t){return t.replace(/::/g,\"/\").replace(/([A-Z]+)([A-Z][a-z])/g,\"$1_$2\").replace(/([a-z\\d])([A-Z])/g,\"$1_$2\").replace(/_/g,\"-\").toLowerCase()}function q(t){return t in f?f[t]:f[t]=new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|$)\")}function H(t,e){return\"number\"!=typeof e||c[F(t)]?e:e+\"px\"}function I(t){var e,n;return u[t]||(e=a.createElement(t),a.body.appendChild(e),n=getComputedStyle(e,\"\").getPropertyValue(\"display\"),e.parentNode.removeChild(e),\"none\"==n&&(n=\"block\"),u[t]=n),u[t]}function V(t){return\"children\"in t?o.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function U(n,i,r){for(e in i)r&&(R(i[e])||A(i[e]))?(R(i[e])&&!R(n[e])&&(n[e]={}),A(i[e])&&!A(n[e])&&(n[e]=[]),U(n[e],i[e],r)):i[e]!==t&&(n[e]=i[e])}function B(t,e){return null==e?n(t):n(t).filter(e)}function J(t,e,n,i){return Z(e)?e.call(t,n,i):e}function X(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function W(e,n){var i=e.className,r=i&&i.baseVal!==t;return n===t?r?i.baseVal:i:void(r?i.baseVal=n:e.className=n)}function Y(t){var e;try{return t?\"true\"==t||(\"false\"==t?!1:\"null\"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\\[\\{]/.test(t)?n.parseJSON(t):t:e):t}catch(i){return t}}function G(t,e){e(t);for(var n in t.childNodes)G(t.childNodes[n],e)}var t,e,n,i,C,N,r=[],o=r.slice,s=r.filter,a=window.document,u={},f={},c={\"column-count\":1,columns:1,\"font-weight\":1,\"line-height\":1,opacity:1,\"z-index\":1,zoom:1},l=/^\\s*<(\\w+|!)[^>]*>/,h=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,d=/^(?:body|html)$/i,m=/([A-Z])/g,g=[\"val\",\"css\",\"html\",\"text\",\"data\",\"width\",\"height\",\"offset\"],v=[\"after\",\"prepend\",\"before\",\"append\"],y=a.createElement(\"table\"),x=a.createElement(\"tr\"),b={tr:a.createElement(\"tbody\"),tbody:y,thead:y,tfoot:y,td:x,th:x,\"*\":a.createElement(\"div\")},w=/complete|loaded|interactive/,E=/^[\\w-]*$/,j={},T=j.toString,S={},O=a.createElement(\"div\"),P={tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},A=Array.isArray||function(t){return t instanceof Array};return S.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=O).appendChild(t),i=~S.qsa(r,e).indexOf(t),o&&O.removeChild(t),i},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():\"\"})},N=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},S.fragment=function(e,i,r){var s,u,f;return h.test(e)&&(s=n(a.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,\"<$1></$2>\")),i===t&&(i=l.test(e)&&RegExp.$1),i in b||(i=\"*\"),f=b[i],f.innerHTML=\"\"+e,s=n.each(o.call(f.childNodes),function(){f.removeChild(this)})),R(r)&&(u=n(s),n.each(r,function(t,e){g.indexOf(t)>-1?u[t](e):u.attr(t,e)})),s},S.Z=function(t,e){return t=t||[],t.__proto__=n.fn,t.selector=e||\"\",t},S.isZ=function(t){return t instanceof S.Z},S.init=function(e,i){var r;if(!e)return S.Z();if(\"string\"==typeof e)if(e=e.trim(),\"<\"==e[0]&&l.test(e))r=S.fragment(e,RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=S.qsa(a,e)}else{if(Z(e))return n(a).ready(e);if(S.isZ(e))return e;if(A(e))r=k(e);else if(D(e))r=[e],e=null;else if(l.test(e))r=S.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=S.qsa(a,e)}}return S.Z(r,e)},n=function(t,e){return S.init(t,e)},n.extend=function(t){var e,n=o.call(arguments,1);return\"boolean\"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){U(t,n,e)}),t},S.qsa=function(t,e){var n,i=\"#\"==e[0],r=!i&&\".\"==e[0],s=i||r?e.slice(1):e,a=E.test(s);return _(t)&&a&&i?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!i?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=function(t,e){return t!==e&&t.contains(e)},n.type=L,n.isFunction=Z,n.isWindow=$,n.isArray=A,n.isPlainObject=R,n.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.inArray=function(t,e,n){return r.indexOf.call(e,t,n)},n.camelCase=C,n.trim=function(t){return null==t?\"\":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var n,r,o,i=[];if(M(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&i.push(n);else for(o in t)n=e(t[o],o),null!=n&&i.push(n);return z(i)},n.each=function(t,e){var n,i;if(M(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},n.grep=function(t,e){return s.call(t,e)},window.JSON&&(n.parseJSON=JSON.parse),n.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(t,e){j[\"[object \"+e+\"]\"]=e.toLowerCase()}),n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){return w.test(a.readyState)&&a.body?t(n):a.addEventListener(\"DOMContentLoaded\",function(){t(n)},!1),this},get:function(e){return e===t?o.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return r.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return Z(t)?this.not(this.not(t)):n(s.call(this,function(e){return S.matches(e,t)}))},add:function(t,e){return n(N(this.concat(n(t,e))))},is:function(t){return this.length>0&&S.matches(this[0],t)},not:function(e){var i=[];if(Z(e)&&e.call!==t)this.each(function(t){e.call(this,t)||i.push(this)});else{var r=\"string\"==typeof e?this.filter(e):M(e)&&Z(e.item)?o.call(e):n(e);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return D(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!D(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!D(t)?t:n(t)},find:function(t){var e,i=this;return e=\"object\"==typeof t?n(t).filter(function(){var t=this;return r.some.call(i,function(e){return n.contains(e,t)})}):1==this.length?n(S.qsa(this[0],t)):this.map(function(){return S.qsa(this,t)})},closest:function(t,e){var i=this[0],r=!1;for(\"object\"==typeof t&&(r=n(t));i&&!(r?r.indexOf(i)>=0:S.matches(i,t));)i=i!==e&&!_(i)&&i.parentNode;return n(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=n.map(i,function(t){return(t=t.parentNode)&&!_(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return B(e,t)},parent:function(t){return B(N(this.pluck(\"parentNode\")),t)},children:function(t){return B(this.map(function(){return V(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(t){return B(this.map(function(t,e){return s.call(V(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=\"\"})},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){\"none\"==this.style.display&&(this.style.display=\"\"),\"none\"==getComputedStyle(this,\"\").getPropertyValue(\"display\")&&(this.style.display=I(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=Z(t);if(this[0]&&!e)var i=n(t).get(0),r=i.parentNode||this.length>1;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=Z(t);return this.each(function(i){var r=n(this),o=r.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css(\"display\",\"none\")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?\"none\"==i.css(\"display\"):e)?i.show():i.hide()})},prev:function(t){return n(this.pluck(\"previousElementSibling\")).filter(t||\"*\")},next:function(t){return n(this.pluck(\"nextElementSibling\")).filter(t||\"*\")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;n(this).empty().append(J(this,t,e,i))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===t?\"\":\"\"+e})},attr:function(n,i){var r;return\"string\"==typeof n&&i===t?0==this.length||1!==this[0].nodeType?t:\"value\"==n&&\"INPUT\"==this[0].nodeName?this.val():!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:this.each(function(t){if(1===this.nodeType)if(D(n))for(e in n)X(this,e,n[e]);else X(this,n,J(this,i,t,this.getAttribute(n)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&X(this,t)})},prop:function(e,n){return e=P[e]||e,n===t?this[0]&&this[0][e]:this.each(function(t){this[e]=J(this,n,t,this[e])})},data:function(e,n){var i=this.attr(\"data-\"+e.replace(m,\"-$1\").toLowerCase(),n);return null!==i?Y(i):t},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?n(this[0]).find(\"option\").filter(function(){return this.selected}).pluck(\"value\"):this[0].value):this.each(function(e){this.value=J(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=J(this,t,e,i.offset()),o=i.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};\"static\"==i.css(\"position\")&&(s.position=\"relative\"),i.css(s)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r=this[0],o=getComputedStyle(r,\"\");if(!r)return;if(\"string\"==typeof t)return r.style[C(t)]||o.getPropertyValue(t);if(A(t)){var s={};return n.each(A(t)?t:[t],function(t,e){s[e]=r.style[C(e)]||o.getPropertyValue(e)}),s}}var a=\"\";if(\"string\"==L(t))i||0===i?a=F(t)+\":\"+H(t,i):this.each(function(){this.style.removeProperty(F(t))});else for(e in t)t[e]||0===t[e]?a+=F(e)+\":\"+H(e,t[e])+\";\":this.each(function(){this.style.removeProperty(F(e))});return this.each(function(){this.style.cssText+=\";\"+a})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?r.some.call(this,function(t){return this.test(W(t))},q(t)):!1},addClass:function(t){return t?this.each(function(e){i=[];var r=W(this),o=J(this,t,e,r);o.split(/\\s+/g).forEach(function(t){n(this).hasClass(t)||i.push(t)},this),i.length&&W(this,r+(r?\" \":\"\")+i.join(\" \"))}):this},removeClass:function(e){return this.each(function(n){return e===t?W(this,\"\"):(i=W(this),J(this,e,n,i).split(/\\s+/g).forEach(function(t){i=i.replace(q(t),\" \")}),void W(this,i.trim()))})},toggleClass:function(e,i){return e?this.each(function(r){var o=n(this),s=J(this,e,r,W(this));s.split(/\\s+/g).forEach(function(e){(i===t?!o.hasClass(e):i)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n=\"scrollTop\"in this[0];return e===t?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n=\"scrollLeft\"in this[0];return e===t?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),r=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(n(t).css(\"margin-top\"))||0,i.left-=parseFloat(n(t).css(\"margin-left\"))||0,r.top+=parseFloat(n(e[0]).css(\"border-top-width\"))||0,r.left+=parseFloat(n(e[0]).css(\"border-left-width\"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||a.body;t&&!d.test(t.nodeName)&&\"static\"==n(t).css(\"position\");)t=t.offsetParent;return t})}},n.fn.detach=n.fn.remove,[\"width\",\"height\"].forEach(function(e){var i=e.replace(/./,function(t){return t[0].toUpperCase()});n.fn[e]=function(r){var o,s=this[0];return r===t?$(s)?s[\"inner\"+i]:_(s)?s.documentElement[\"scroll\"+i]:(o=this.offset())&&o[e]:this.each(function(t){s=n(this),s.css(e,J(this,r,t,s[e]()))})}}),v.forEach(function(t,e){var i=e%2;n.fn[t]=function(){var t,o,r=n.map(arguments,function(e){return t=L(e),\"object\"==t||\"array\"==t||null==e?e:S.fragment(e)}),s=this.length>1;return r.length<1?this:this.each(function(t,a){o=i?a:a.parentNode,a=0==e?a.nextSibling:1==e?a.firstChild:2==e?a:null,r.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!o)return n(t).remove();G(o.insertBefore(t,a),function(t){null==t.nodeName||\"SCRIPT\"!==t.nodeName.toUpperCase()||t.type&&\"text/javascript\"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},n.fn[i?t+\"To\":\"insert\"+(e?\"Before\":\"After\")]=function(e){return n(e)[t](this),this}}),S.Z.prototype=n.fn,S.uniq=N,S.deserializeValue=Y,n.zepto=S,n}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function l(t){return t._zid||(t._zid=e++)}function h(t,e,n,i){if(e=p(e),e.ns)var r=d(e.ns);return(s[l(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&l(t.fn)!==l(n)||i&&t.sel!=i)})}function p(t){var e=(\"\"+t).split(\".\");return{e:e[0],ns:e.slice(1).sort().join(\" \")}}function d(t){return new RegExp(\"(?:^| )\"+t.replace(\" \",\" .* ?\")+\"(?: |$)\")}function m(t,e){return t.del&&!u&&t.e in f||!!e}function g(t){return c[t]||u&&f[t]||t}function v(e,i,r,o,a,u,f){var h=l(e),d=s[h]||(s[h]=[]);i.split(/\\s/).forEach(function(i){if(\"ready\"==i)return t(document).ready(r);var s=p(i);s.fn=r,s.sel=a,s.e in c&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?s.fn.apply(this,arguments):void 0}),s.del=u;var l=u||r;s.proxy=function(t){if(t=j(t),!t.isImmediatePropagationStopped()){t.data=o;var i=l.apply(e,t._args==n?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},s.i=d.length,d.push(s),\"addEventListener\"in e&&e.addEventListener(g(s.e),s.proxy,m(s,f))})}function y(t,e,n,i,r){var o=l(t);(e||\"\").split(/\\s/).forEach(function(e){h(t,e,n,i).forEach(function(e){delete s[o][e.i],\"removeEventListener\"in t&&t.removeEventListener(g(e.e),e.proxy,m(e,r))})})}function j(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(E,function(t,n){var r=i[t];e[t]=function(){return this[n]=x,r&&r.apply(i,arguments)},e[n]=b}),(i.defaultPrevented!==n?i.defaultPrevented:\"returnValue\"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function T(t){var e,i={originalEvent:t};for(e in t)w.test(e)||t[e]===n||(i[e]=t[e]);return j(i,t)}var n,e=1,i=Array.prototype.slice,r=t.isFunction,o=function(t){return\"string\"==typeof t},s={},a={},u=\"onfocusin\"in window,f={focus:\"focusin\",blur:\"focusout\"},c={mouseenter:\"mouseover\",mouseleave:\"mouseout\"};a.click=a.mousedown=a.mouseup=a.mousemove=\"MouseEvents\",t.event={add:v,remove:y},t.proxy=function(e,n){if(r(e)){var i=function(){return e.apply(n,arguments)};return i._zid=l(e),i}if(o(n))return t.proxy(e[n],e);throw new TypeError(\"expected function\")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var x=function(){return!0},b=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:\"isDefaultPrevented\",stopImmediatePropagation:\"isImmediatePropagationStopped\",stopPropagation:\"isPropagationStopped\"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,s,a,u,f){var c,l,h=this;return e&&!o(e)?(t.each(e,function(t,e){h.on(t,s,a,e,f)}),h):(o(s)||r(u)||u===!1||(u=a,a=s,s=n),(r(a)||a===!1)&&(u=a,a=n),u===!1&&(u=b),h.each(function(n,r){f&&(c=function(t){return y(r,t.type,u),u.apply(this,arguments)}),s&&(l=function(e){var n,o=t(e.target).closest(s,r).get(0);return o&&o!==r?(n=t.extend(T(e),{currentTarget:o,liveFired:r}),(c||u).apply(o,[n].concat(i.call(arguments,1)))):void 0}),v(r,e,u,a,s,l||c)}))},t.fn.off=function(e,i,s){var a=this;return e&&!o(e)?(t.each(e,function(t,e){a.off(t,i,e)}),a):(o(i)||r(s)||s===!1||(s=i,i=n),s===!1&&(s=b),a.each(function(){y(this,e,s,i)}))},t.fn.trigger=function(e,n){return e=o(e)||t.isPlainObject(e)?t.Event(e):j(e),e._args=n,this.each(function(){\"dispatchEvent\"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var i,r;return this.each(function(s,a){i=T(o(e)?t.Event(e):e),i._args=n,i.target=a,t.each(h(a,e.type||e),function(t,e){return r=e.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),r},\"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error\".split(\" \").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),[\"focus\",\"blur\"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){o(t)||(e=t,t=e.type);var n=document.createEvent(a[t]||\"Events\"),i=!0;if(e)for(var r in e)\"bubbles\"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),j(n)}}(Zepto),function(t){function l(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function h(t,e,i,r){return t.global?l(e||n,i,r):void 0}function p(e){e.global&&0===t.active++&&h(e,null,\"ajaxStart\")}function d(e){e.global&&!--t.active&&h(e,null,\"ajaxStop\")}function m(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||h(e,n,\"ajaxBeforeSend\",[t,e])===!1?!1:void h(e,n,\"ajaxSend\",[t,e])}function g(t,e,n,i){var r=n.context,o=\"success\";n.success.call(r,t,o,e),i&&i.resolveWith(r,[t,o,e]),h(n,r,\"ajaxSuccess\",[e,n,t]),y(o,e,n)}function v(t,e,n,i,r){var o=i.context;i.error.call(o,n,e,t),r&&r.rejectWith(o,[n,e,t]),h(i,o,\"ajaxError\",[n,i,t||e]),y(e,n,i)}function y(t,e,n){var i=n.context;n.complete.call(i,e,t),h(n,i,\"ajaxComplete\",[e,n]),d(n)}function x(){}function b(t){return t&&(t=t.split(\";\",2)[0]),t&&(t==f?\"html\":t==u?\"json\":s.test(t)?\"script\":a.test(t)&&\"xml\")||\"text\"}function w(t,e){return\"\"==e?t:(t+\"&\"+e).replace(/[&?]{1,2}/,\"?\")}function E(e){e.processData&&e.data&&\"string\"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&\"GET\"!=e.type.toUpperCase()||(e.url=w(e.url,e.data),e.data=void 0)}function j(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function S(e,n,i,r){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+\"[\"+(a||\"object\"==o||\"array\"==o?n:\"\")+\"]\"),!r&&s?e.add(u.name,u.value):\"array\"==o||!i&&\"object\"==o?S(e,u,i,n):e.add(n,u)})}var i,r,e=0,n=window.document,o=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,s=/^(?:text|application)\\/javascript/i,a=/^(?:text|application)\\/xml/i,u=\"application/json\",f=\"text/html\",c=/^\\s*$/;t.active=0,t.ajaxJSONP=function(i,r){if(!(\"type\"in i))return t.ajax(i);var f,h,o=i.jsonpCallback,s=(t.isFunction(o)?o():o)||\"jsonp\"+ ++e,a=n.createElement(\"script\"),u=window[s],c=function(e){t(a).triggerHandler(\"error\",e||\"abort\")},l={abort:c};return r&&r.promise(l),t(a).on(\"load error\",function(e,n){clearTimeout(h),t(a).off().remove(),\"error\"!=e.type&&f?g(f[0],l,i,r):v(null,n||\"error\",l,i,r),window[s]=u,f&&t.isFunction(u)&&u(f[0]),u=f=void 0}),m(l,i)===!1?(c(\"abort\"),l):(window[s]=function(){f=arguments},a.src=i.url.replace(/\\?(.+)=\\?/,\"?$1=\"+s),n.head.appendChild(a),i.timeout>0&&(h=setTimeout(function(){c(\"timeout\")},i.timeout)),l)},t.ajaxSettings={type:\"GET\",beforeSend:x,success:x,error:x,complete:x,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:\"text/javascript, application/javascript, application/x-javascript\",json:u,xml:\"application/xml, text/xml\",html:f,text:\"text/plain\"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),o=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)void 0===n[i]&&(n[i]=t.ajaxSettings[i]);p(n),n.crossDomain||(n.crossDomain=/^([\\w-]+:)?\\/\\/([^\\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),E(n),n.cache===!1&&(n.url=w(n.url,\"_=\"+Date.now()));var s=n.dataType,a=/\\?.+=\\?/.test(n.url);if(\"jsonp\"==s||a)return a||(n.url=w(n.url,n.jsonp?n.jsonp+\"=?\":n.jsonp===!1?\"\":\"callback=?\")),t.ajaxJSONP(n,o);var j,u=n.accepts[s],f={},l=function(t,e){f[t.toLowerCase()]=[t,e]},h=/^([\\w-]+:)\\/\\//.test(n.url)?RegExp.$1:window.location.protocol,d=n.xhr(),y=d.setRequestHeader;if(o&&o.promise(d),n.crossDomain||l(\"X-Requested-With\",\"XMLHttpRequest\"),l(\"Accept\",u||\"*/*\"),(u=n.mimeType||u)&&(u.indexOf(\",\")>-1&&(u=u.split(\",\",2)[0]),d.overrideMimeType&&d.overrideMimeType(u)),(n.contentType||n.contentType!==!1&&n.data&&\"GET\"!=n.type.toUpperCase())&&l(\"Content-Type\",n.contentType||\"application/x-www-form-urlencoded\"),n.headers)for(r in n.headers)l(r,n.headers[r]);if(d.setRequestHeader=l,d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=x,clearTimeout(j);var e,i=!1;if(d.status>=200&&d.status<300||304==d.status||0==d.status&&\"file:\"==h){s=s||b(n.mimeType||d.getResponseHeader(\"content-type\")),e=d.responseText;try{\"script\"==s?(1,eval)(e):\"xml\"==s?e=d.responseXML:\"json\"==s&&(e=c.test(e)?null:t.parseJSON(e))}catch(r){i=r}i?v(i,\"parsererror\",d,n,o):g(e,d,n,o)}else v(d.statusText||null,d.status?\"error\":\"abort\",d,n,o)}},m(d,n)===!1)return d.abort(),v(null,\"abort\",d,n,o),d;if(n.xhrFields)for(r in n.xhrFields)d[r]=n.xhrFields[r];var T=\"async\"in n?n.async:!0;d.open(n.type,n.url,T,n.username,n.password);for(r in f)y.apply(d,f[r]);return n.timeout>0&&(j=setTimeout(function(){d.onreadystatechange=x,d.abort(),v(null,\"timeout\",d,n,o)},n.timeout)),d.send(n.data?n.data:null),d},t.get=function(){return t.ajax(j.apply(null,arguments))},t.post=function(){var e=j.apply(null,arguments);return e.type=\"POST\",t.ajax(e)},t.getJSON=function(){var e=j.apply(null,arguments);return e.dataType=\"json\",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var a,r=this,s=e.split(/\\s/),u=j(e,n,i),f=u.success;return s.length>1&&(u.url=s[0],a=s[1]),u.success=function(e){r.html(a?t(\"<div>\").html(e.replace(o,\"\")).find(a):e),f&&f.apply(r,arguments)},t.ajax(u),this};var T=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(T(t)+\"=\"+T(e))},S(n,t,e),n.join(\"&\").replace(/%20/g,\"+\")}}(Zepto),function(t){t.fn.serializeArray=function(){var n,e=[];return t([].slice.call(this.get(0).elements)).each(function(){n=t(this);var i=n.attr(\"type\");\"fieldset\"!=this.nodeName.toLowerCase()&&!this.disabled&&\"submit\"!=i&&\"reset\"!=i&&\"button\"!=i&&(\"radio\"!=i&&\"checkbox\"!=i||this.checked)&&e.push({name:n.attr(\"name\"),value:n.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+\"=\"+encodeURIComponent(e.value))}),t.join(\"&\")},t.fn.submit=function(e){if(e)this.bind(\"submit\",e);else if(this.length){var n=t.Event(\"submit\");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){\"__proto__\"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||\"\",e.__Z=!0,e},isZ:function(e){return\"array\"===t.type(e)&&\"__Z\"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto);\n","date":"2020-03-12T13:55:48.647Z","updated":"2020-03-12T13:55:48.647Z","path":"assets/demo/gift/js/zepto.min.js","layout":"false","title":"","comments":1,"_id":"ck7otizs7001i7guiuo6lw1nq","content":"/* Zepto v1.1.3 - zepto event ajax form ie - zeptojs.com/license */\nvar Zepto=function(){function L(t){return null==t?String(t):j[T.call(t)]||\"object\"}function Z(t){return\"function\"==L(t)}function $(t){return null!=t&&t==t.window}function _(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function D(t){return\"object\"==L(t)}function R(t){return D(t)&&!$(t)&&Object.getPrototypeOf(t)==Object.prototype}function M(t){return\"number\"==typeof t.length}function k(t){return s.call(t,function(t){return null!=t})}function z(t){return t.length>0?n.fn.concat.apply([],t):t}function F(t){return t.replace(/::/g,\"/\").replace(/([A-Z]+)([A-Z][a-z])/g,\"$1_$2\").replace(/([a-z\\d])([A-Z])/g,\"$1_$2\").replace(/_/g,\"-\").toLowerCase()}function q(t){return t in f?f[t]:f[t]=new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|$)\")}function H(t,e){return\"number\"!=typeof e||c[F(t)]?e:e+\"px\"}function I(t){var e,n;return u[t]||(e=a.createElement(t),a.body.appendChild(e),n=getComputedStyle(e,\"\").getPropertyValue(\"display\"),e.parentNode.removeChild(e),\"none\"==n&&(n=\"block\"),u[t]=n),u[t]}function V(t){return\"children\"in t?o.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function U(n,i,r){for(e in i)r&&(R(i[e])||A(i[e]))?(R(i[e])&&!R(n[e])&&(n[e]={}),A(i[e])&&!A(n[e])&&(n[e]=[]),U(n[e],i[e],r)):i[e]!==t&&(n[e]=i[e])}function B(t,e){return null==e?n(t):n(t).filter(e)}function J(t,e,n,i){return Z(e)?e.call(t,n,i):e}function X(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function W(e,n){var i=e.className,r=i&&i.baseVal!==t;return n===t?r?i.baseVal:i:void(r?i.baseVal=n:e.className=n)}function Y(t){var e;try{return t?\"true\"==t||(\"false\"==t?!1:\"null\"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\\[\\{]/.test(t)?n.parseJSON(t):t:e):t}catch(i){return t}}function G(t,e){e(t);for(var n in t.childNodes)G(t.childNodes[n],e)}var t,e,n,i,C,N,r=[],o=r.slice,s=r.filter,a=window.document,u={},f={},c={\"column-count\":1,columns:1,\"font-weight\":1,\"line-height\":1,opacity:1,\"z-index\":1,zoom:1},l=/^\\s*<(\\w+|!)[^>]*>/,h=/^<(\\w+)\\s*\\ ?>(?:<\\ \\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,d=/^(?:body|html)$/i,m=/([A-Z])/g,g=[\"val\",\"css\",\"html\",\"text\",\"data\",\"width\",\"height\",\"offset\"],v=[\"after\",\"prepend\",\"before\",\"append\"],y=a.createElement(\"table\"),x=a.createElement(\"tr\"),b={tr:a.createElement(\"tbody\"),tbody:y,thead:y,tfoot:y,td:x,th:x,\"*\":a.createElement(\"div\")},w=/complete|loaded|interactive/,E=/^[\\w-]*$/,j={},T=j.toString,S={},O=a.createElement(\"div\"),P={tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},A=Array.isArray||function(t){return t instanceof Array};return S.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=O).appendChild(t),i=~S.qsa(r,e).indexOf(t),o&&O.removeChild(t),i},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():\"\"})},N=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},S.fragment=function(e,i,r){var s,u,f;return h.test(e)&&(s=n(a.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,\"<$1>\")),i===t&&(i=l.test(e)&&RegExp.$1),i in b||(i=\"*\"),f=b[i],f.innerHTML=\"\"+e,s=n.each(o.call(f.childNodes),function(){f.removeChild(this)})),R(r)&&(u=n(s),n.each(r,function(t,e){g.indexOf(t)>-1?u[t](e):u.attr(t,e)})),s},S.Z=function(t,e){return t=t||[],t.__proto__=n.fn,t.selector=e||\"\",t},S.isZ=function(t){return t instanceof S.Z},S.init=function(e,i){var r;if(!e)return S.Z();if(\"string\"==typeof e)if(e=e.trim(),\"<\"==e[0]&&l.test(e))r=s.fragment(e,regexp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=\"S.qsa(a,e)}else{if(Z(e))return\" n(a).ready(e);if(s.isz(e))return e;if(a(e))r=\"k(e);else\" if(d(e))r=\"[e],e=null;else\" if(l.test(e))r=\"S.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==t)return\" s.z(r,e)},n=\"function(t,e){return\" s.init(t,e)},n.extend=\"function(t){var\" e,n=\"o.call(arguments,1);return\"boolean\"==typeof\" t&&(e=\"t,t=n.shift()),n.forEach(function(n){U(t,n,e)}),t},S.qsa=function(t,e){var\" n,i=\"#\" ==\"e[0],r=!i&&\".\"==e[0],s=i||r?e.slice(1):e,a=E.test(s);return\" _(t)&&a&&i?(n=\"t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!i?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=function(t,e){return\" t!=\"=e&&t.contains(e)},n.type=L,n.isFunction=Z,n.isWindow=$,n.isArray=A,n.isPlainObject=R,n.isEmptyObject=function(t){var\" e;for(e in t)return!1;return!0},n.inarray=\"function(t,e,n){return\" r.indexof.call(e,t,n)},n.camelcase=\"C,n.trim=function(t){return\" null=\"=t?\"\":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var\" n,r,o,i=\"[];if(M(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&i.push(n);else\" for(o t)n=\"e(t[o],o),null!=n&&i.push(n);return\" z(i)},n.each=\"function(t,e){var\" n,i;if(m(t)){for(n=\"0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return\" t}else for(i t)if(e.call(t[i],i,t[i])=\"==!1)return\" t;return t},n.grep=\"function(t,e){return\" s.call(t,e)},window.json&&(n.parsejson=\"JSON.parse),n.each(\"Boolean\" number string function array date regexp object error\".split(\" \"),function(t,e){j[\"[object \"+e+\"]\"]=\"e.toLowerCase()}),n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return\" n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){return w.test(a.readystate)&&a.body?t(n):a.addeventlistener(\"domcontentloaded\",function(){t(n)},!1),this},get:function(e){return e=\"==t?o.call(this):this[e\">=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return r.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return Z(t)?this.not(this.not(t)):n(s.call(this,function(e){return S.matches(e,t)}))},add:function(t,e){return n(N(this.concat(n(t,e))))},is:function(t){return this.length>0&&S.matches(this[0],t)},not:function(e){var i=[];if(Z(e)&&e.call!==t)this.each(function(t){e.call(this,t)||i.push(this)});else{var r=\"string\"==typeof e?this.filter(e):M(e)&&Z(e.item)?o.call(e):n(e);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return d(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1=\"==t?this.slice(t):this.slice(t,+t+1)},first:function(){var\" t=\"this[0];return\" t&&!d(t)?t:n(t)},last:function(){var t&&!d(t)?t:n(t)},find:function(t){var e,i=\"this;return\" e=\"object\" ==\"typeof\" t?n(t).filter(function(){var r.some.call(i,function(e){return n.contains(e,t)})}):1=\"=this.length?n(S.qsa(this[0],t)):this.map(function(){return\" s.qsa(this,t)})},closest:function(t,e){var i=\"this[0],r=!1;for(\"object\"==typeof\" t&&(r=\"n(t));i&&!(r?r.indexOf(i)\">=0:S.matches(i,t));)i=i!==e&&!_(i)&&i.parentNode;return n(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=n.map(i,function(t){return(t=t.parentNode)&&!_(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return b(e,t)},parent:function(t){return b(n(this.pluck(\"parentnode\")),t)},children:function(t){return b(this.map(function(){return v(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childnodes)})},siblings:function(t){return b(this.map(function(t,e){return s.call(v(e.parentnode),function(t){return t!=\"=e})}),t)},empty:function(){return\" this.each(function(){this.innerhtml })},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){\"none\"=\"=this.style.display&&(this.style.display=\"\"),\"none\"==getComputedStyle(this,\"\").getPropertyValue(\"display\")&&(this.style.display=I(this.nodeName))})},replaceWith:function(t){return\" this.before(t).remove()},wrap:function(t){var e=\"Z(t);if(this[0]&&!e)var\" i=\"n(t).get(0),r=i.parentNode||this.length\">1;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=Z(t);return this.each(function(i){var r=n(this),o=r.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css(\"display\",\"none\")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?\"none\"==i.css(\"display\"):e)?i.show():i.hide()})},prev:function(t){return n(this.pluck(\"previousElementSibling\")).filter(t||\"*\")},next:function(t){return n(this.pluck(\"nextElementSibling\")).filter(t||\"*\")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;n(this).empty().append(J(this,t,e,i))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===t?\"\":\"\"+e})},attr:function(n,i){var r;return\"string\"==typeof n&&i===t?0==this.length||1!==this[0].nodeType?t:\"value\"==n&&\"INPUT\"==this[0].nodeName?this.val():!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:this.each(function(t){if(1===this.nodeType)if(D(n))for(e in n)X(this,e,n[e]);else X(this,n,J(this,i,t,this.getAttribute(n)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&X(this,t)})},prop:function(e,n){return e=P[e]||e,n===t?this[0]&&this[0][e]:this.each(function(t){this[e]=J(this,n,t,this[e])})},data:function(e,n){var i=this.attr(\"data-\"+e.replace(m,\"-$1\").toLowerCase(),n);return null!==i?Y(i):t},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?n(this[0]).find(\"option\").filter(function(){return this.selected}).pluck(\"value\"):this[0].value):this.each(function(e){this.value=J(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=J(this,t,e,i.offset()),o=i.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};\"static\"==i.css(\"position\")&&(s.position=\"relative\"),i.css(s)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r=\"this[0],o=getComputedStyle(r,\"\");if(!r)return;if(\"string\"==typeof\" t)return r.style[c(t)]||o.getpropertyvalue(t);if(a(t)){var s=\"{};return\" n.each(a(t)?t:[t],function(t,e){s[e]=\"r.style[C(e)]||o.getPropertyValue(e)}),s}}var\" a ;if(\"string\"=\"=L(t))i||0===i?a=F(t)+\":\"+H(t,i):this.each(function(){this.style.removeProperty(F(t))});else\" for(e in t)t[e]||0=\"==t[e]?a+=F(e)+\":\"+H(e,t[e])+\";\":this.each(function(){this.style.removeProperty(F(e))});return\" this.each(function(){this.style.csstext+=\";\" +a})},index:function(t){return t?this.indexof(n(t)[0]):this.parent().children().indexof(this[0])},hasclass:function(t){return t?r.some.call(this,function(t){return this.test(w(t))},q(t)):!1},addclass:function(t){return t?this.each(function(e){i=\"[];var\" \":\"\")+i.join(\" \"))}):this},removeclass:function(e){return this.each(function(n){return e=\"==t?W(this,\"\"):(i=W(this),J(this,e,n,i).split(/\\s+/g).forEach(function(t){i=i.replace(q(t),\"\" \")}),void w(this,i.trim()))})},toggleclass:function(e,i){return e?this.each(function(r){var o=\"n(this),s=J(this,e,r,W(this));s.split(/\\s+/g).forEach(function(e){(i===t?!o.hasClass(e):i)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var\" n=\"scrollTop\" this[0];return t=\"this[0],e=this.offsetParent(),i=this.offset(),r=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();return\" i.top-=\"parseFloat(n(t).css(\"margin-top\"))||0,i.left-=parseFloat(n(t).css(\"margin-left\"))||0,r.top+=parseFloat(n(e[0]).css(\"border-top-width\"))||0,r.left+=parseFloat(n(e[0]).css(\"border-left-width\"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return\" this.map(function(){for(var t})}},n.fn.detach=\"n.fn.remove,[\"width\",\"height\"].forEach(function(e){var\" i=\"e.replace(/./,function(t){return\" t[0].touppercase()});n.fn[e]=\"function(r){var\" o,s=\"this[0];return\" t,o,r=\"n.map(arguments,function(e){return\">1;return r.length<1?this:this.each(function(t,a){o=i?a:a.parentnode,a=0==e?a.nextsibling:1==e?a.firstchild:2==e?a:null,r.foreach(function(t){if(s)t=t.clonenode(!0);else 0=\"==window.$&&(window.$=Zepto),function(t){function\" if(!o)return n(t).remove();g(o.insertbefore(t,a),function(t){null=\"=t.nodeName||\"SCRIPT\"!==t.nodeName.toUpperCase()||t.type&&\"text/javascript\"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},n.fn[i?t+\"To\":\"insert\"+(e?\"Before\":\"After\")]=function(e){return\" n(e)[t](this),this}}),s.z.prototype=\"n.fn,S.uniq=N,S.deserializeValue=Y,n.zepto=S,n}();window.Zepto=Zepto,void\" l(t){return t._zid||(t._zid=\"e++)}function\" h(t,e,n,i){if(e=\"p(e),e.ns)var\" r=\"d(e.ns);return(s[l(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&l(t.fn)!==l(n)||i&&t.sel!=i)})}function\" p(t){var e=\"(\"\"+t).split(\".\");return{e:e[0],ns:e.slice(1).sort().join(\"\" \")}}function d(t){return new regexp(\"(?:^| )\"+t.replace(\" \",\" .* ?\")+\"(?: |$)\")}function m(t,e){return t.del&&!u&&t.e in f||!!e}function g(t){return c[t]||u&&f[t]||t}function v(e,i,r,o,a,u,f){var h=\"l(e),d=s[h]||(s[h]=[]);i.split(/\\s/).forEach(function(i){if(\"ready\"==i)return\" t(document).ready(r);var s=\"p(i);s.fn=r,s.sel=a,s.e\" c&&(r=\"function(e){var\" n=\"e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?s.fn.apply(this,arguments):void\" 0}),s.del=\"u;var\" l=\"u||r;s.proxy=function(t){if(t=j(t),!t.isImmediatePropagationStopped()){t.data=o;var\" i=\"l.apply(e,t._args==n?[t]:[t].concat(t._args));return\" e&&e.addeventlistener(g(s.e),s.proxy,m(s,f))})}function y(t,e,n,i,r){var o=\"l(t);(e||\"\").split(/\\s/).forEach(function(e){h(t,e,n,i).forEach(function(e){delete\" s[o][e.i],\"removeeventlistener\"in t&&t.removeeventlistener(g(e.e),e.proxy,m(e,r))})})}function j(e,i){return(i||!e.isdefaultprevented)&&(i||(i=\"e),t.each(E,function(t,n){var\" this[n]=\"x,r&&r.apply(i,arguments)},e[n]=b}),(i.defaultPrevented!==n?i.defaultPrevented:\"returnValue\"in\" i?i.returnvalue=\"==!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function\" t(t){var e,i=\"{originalEvent:t};for(e\" t)w.test(e)||t[e]=\"==n||(i[e]=t[e]);return\" j(i,t)}var n,e=\"1,i=Array.prototype.slice,r=t.isFunction,o=function(t){return\"string\"==typeof\" t},s=\"{},a={},u=\"onfocusin\"in\" window,f=\"{focus:\"focusin\",blur:\"focusout\"},c={mouseenter:\"mouseover\",mouseleave:\"mouseout\"};a.click=a.mousedown=a.mouseup=a.mousemove=\"MouseEvents\",t.event={add:v,remove:y},t.proxy=function(e,n){if(r(e)){var\" e.apply(n,arguments)};return i._zid=\"l(e),i}if(o(n))return\" t.proxy(e[n],e);throw typeerror(\"expected function\")},t.fn.bind=\"function(t,e,n){return\" this.on(t,e,n)},t.fn.unbind=\"function(t,e){return\" this.off(t,e)},t.fn.one=\"function(t,e,n,i){return\" this.on(t,e,n,i,1)};var x=\"function(){return!0},b=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:\"isDefaultPrevented\",stopImmediatePropagation:\"isImmediatePropagationStopped\",stopPropagation:\"isPropagationStopped\"};t.fn.delegate=function(t,e,n){return\" this.on(e,t,n)},t.fn.undelegate=\"function(t,e,n){return\" this.off(e,t,n)},t.fn.live=\"function(e,n){return\" t(document.body).delegate(this.selector,e,n),this},t.fn.die=\"function(e,n){return\" t(document.body).undelegate(this.selector,e,n),this},t.fn.on=\"function(e,s,a,u,f){var\" c,l,h=\"this;return\" e&&!o(e)?(t.each(e,function(t,e){h.on(t,s,a,e,f)}),h):(o(s)||r(u)||u=\"==!1||(u=a,a=s,s=n),(r(a)||a===!1)&&(u=a,a=n),u===!1&&(u=b),h.each(function(n,r){f&&(c=function(t){return\" y(r,t.type,u),u.apply(this,arguments)}),s&&(l=\"function(e){var\" n,o=\"t(e.target).closest(s,r).get(0);return\" o&&o!=\"=r?(n=t.extend(T(e),{currentTarget:o,liveFired:r}),(c||u).apply(o,[n].concat(i.call(arguments,1)))):void\" 0}),v(r,e,u,a,s,l||c)}))},t.fn.off=\"function(e,i,s){var\" a=\"this;return\" e&&!o(e)?(t.each(e,function(t,e){a.off(t,i,e)}),a):(o(i)||r(s)||s=\"==!1||(s=i,i=n),s===!1&&(s=b),a.each(function(){y(this,e,s,i)}))},t.fn.trigger=function(e,n){return\" this?this.dispatchevent(e):t(this).triggerhandler(e,n)})},t.fn.triggerhandler=\"function(e,n){var\" i,r;return this.each(function(s,a){i=\"T(o(e)?t.Event(e):e),i._args=n,i.target=a,t.each(h(a,e.type||e),function(t,e){return\" 0})}),r},\"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error\".split(\" \").foreach(function(e){t.fn[e]=\"function(t){return\" t?this.bind(e,t):this.trigger(e)}}),[\"focus\",\"blur\"].foreach(function(e){t.fn[e]=\"function(t){return\" t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.event=\"function(t,e){o(t)||(e=t,t=e.type);var\" e)\"bubbles\"=\"=r?i=!!e[r]:n[r]=e[r];return\" n.initevent(t,i,!0),j(n)}}(zepto),function(t){function l(e,n,i){var t(e).trigger(r,i),!r.isdefaultprevented()}function h(t,e,i,r){return t.global?l(e||n,i,r):void 0}function p(e){e.global&&0=\"==t.active++&&h(e,null,\"ajaxStart\")}function\" d(e){e.global&&!--t.active&&h(e,null,\"ajaxstop\")}function m(t,e){var e.beforesend.call(n,t,e)=\"==!1||h(e,n,\"ajaxBeforeSend\",[t,e])===!1?!1:void\" h(e,n,\"ajaxsend\",[t,e])}function g(t,e,n,i){var v(t,e,n,i,r){var y(t,e,n){var x(){}function b(t){return t&&(t=\"t.split(\";\",2)[0]),t&&(t==f?\"html\":t==u?\"json\":s.test(t)?\"script\":a.test(t)&&\"xml\")||\"text\"}function\" w(t,e){return\"\"=\"=e?t:(t+\"&\"+e).replace(/[&?]{1,2}/,\"?\")}function\" e(e){e.processdata&&e.data&&\"string\"!=\"t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&\"GET\"!=e.type.toUpperCase()||(e.url=w(e.url,e.data),e.data=void\" 0)}function j(e,n,i,r){return t.isfunction(n)&&(r=\"i,i=n,n=void\" 0),t.isfunction(i)||(r=\"i,i=void\" 0),{url:e,data:n,success:i,datatype:r}}function s(e,n,i,r){var o,s=\"t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+\"[\"+(a||\"object\"==o||\"array\"==o?n:\"\")+\"]\"),!r&&s?e.add(u.name,u.value):\"array\"==o||!i&&\"object\"==o?S(e,u,i,n):e.add(n,u)})}var\" i,r,e=\"0,n=window.document,o=/<script\\b[^<]*(?:(?!<\\/script\">)<[^<]*)*<\\ script>/gi,s=/^(?:text|application)\\/javascript/i,a=/^(?:text|application)\\/xml/i,u=\"application/json\",f=\"text/html\",c=/^\\s*$/;t.active=0,t.ajaxJSONP=function(i,r){if(!(\"type\"in i))return t.ajax(i);var f,h,o=i.jsonpCallback,s=(t.isFunction(o)?o():o)||\"jsonp\"+ ++e,a=n.createElement(\"script\"),u=window[s],c=function(e){t(a).triggerHandler(\"error\",e||\"abort\")},l={abort:c};return r&&r.promise(l),t(a).on(\"load error\",function(e,n){clearTimeout(h),t(a).off().remove(),\"error\"!=e.type&&f?g(f[0],l,i,r):v(null,n||\"error\",l,i,r),window[s]=u,f&&t.isFunction(u)&&u(f[0]),u=f=void 0}),m(l,i)===!1?(c(\"abort\"),l):(window[s]=function(){f=arguments},a.src=i.url.replace(/\\?(.+)=\\?/,\"?$1=\"+s),n.head.appendChild(a),i.timeout>0&&(h=setTimeout(function(){c(\"timeout\")},i.timeout)),l)},t.ajaxSettings={type:\"GET\",beforeSend:x,success:x,error:x,complete:x,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:\"text/javascript, application/javascript, application/x-javascript\",json:u,xml:\"application/xml, text/xml\",html:f,text:\"text/plain\"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),o=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)void 0===n[i]&&(n[i]=t.ajaxSettings[i]);p(n),n.crossDomain||(n.crossDomain=/^([\\w-]+:)?\\/\\/([^\\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),E(n),n.cache===!1&&(n.url=w(n.url,\"_=\"+Date.now()));var s=n.dataType,a=/\\?.+=\\?/.test(n.url);if(\"jsonp\"==s||a)return a||(n.url=w(n.url,n.jsonp?n.jsonp+\"=?\":n.jsonp===!1?\"\":\"callback=?\")),t.ajaxJSONP(n,o);var j,u=n.accepts[s],f={},l=function(t,e){f[t.toLowerCase()]=[t,e]},h=/^([\\w-]+:)\\/\\//.test(n.url)?RegExp.$1:window.location.protocol,d=n.xhr(),y=d.setRequestHeader;if(o&&o.promise(d),n.crossDomain||l(\"X-Requested-With\",\"XMLHttpRequest\"),l(\"Accept\",u||\"*/*\"),(u=n.mimeType||u)&&(u.indexOf(\",\")>-1&&(u=u.split(\",\",2)[0]),d.overrideMimeType&&d.overrideMimeType(u)),(n.contentType||n.contentType!==!1&&n.data&&\"GET\"!=n.type.toUpperCase())&&l(\"Content-Type\",n.contentType||\"application/x-www-form-urlencoded\"),n.headers)for(r in n.headers)l(r,n.headers[r]);if(d.setRequestHeader=l,d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=x,clearTimeout(j);var e,i=!1;if(d.status>=200&&d.status<300||304==d.status||0==d.status&&\"file:\"==h){s=s||b(n.mimetype||d.getresponseheader(\"content-type\")),e=d.responsetext;try{\"script\"==s?(1,eval)(e):\"xml\"==s?e=d.responsexml:\"json\"==s&&(e=c.test(e)?null:t.parsejson(e))}catch(r){i=r}i?v(i,\"parsererror\",d,n,o):g(e,d,n,o)}else v(d.statustext||null,d.status?\"error\":\"abort\",d,n,o)}},m(d,n)=\"==!1)return\" d.abort(),v(null,\"abort\",d,n,o),d;if(n.xhrfields)for(r in n.xhrfields)d[r]=\"n.xhrFields[r];var\" t=\"async\" n?n.async:!0;d.open(n.type,n.url,t,n.username,n.password);for(r f)y.apply(d,f[r]);return n.timeout>0&&(j=setTimeout(function(){d.onreadystatechange=x,d.abort(),v(null,\"timeout\",d,n,o)},n.timeout)),d.send(n.data?n.data:null),d},t.get=function(){return t.ajax(j.apply(null,arguments))},t.post=function(){var e=j.apply(null,arguments);return e.type=\"POST\",t.ajax(e)},t.getJSON=function(){var e=j.apply(null,arguments);return e.dataType=\"json\",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var a,r=this,s=e.split(/\\s/),u=j(e,n,i),f=u.success;return s.length>1&&(u.url=s[0],a=s[1]),u.success=function(e){r.html(a?t(\"<div>\").html(e.replace(o,\"\")).find(a):e),f&&f.apply(r,arguments)},t.ajax(u),this};var T=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(T(t)+\"=\"+T(e))},S(n,t,e),n.join(\"&\").replace(/%20/g,\"+\")}}(Zepto),function(t){t.fn.serializeArray=function(){var n,e=[];return t([].slice.call(this.get(0).elements)).each(function(){n=t(this);var i=n.attr(\"type\");\"fieldset\"!=this.nodeName.toLowerCase()&&!this.disabled&&\"submit\"!=i&&\"reset\"!=i&&\"button\"!=i&&(\"radio\"!=i&&\"checkbox\"!=i||this.checked)&&e.push({name:n.attr(\"name\"),value:n.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+\"=\"+encodeURIComponent(e.value))}),t.join(\"&\")},t.fn.submit=function(e){if(e)this.bind(\"submit\",e);else if(this.length){var n=t.Event(\"submit\");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){\"__proto__\"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||\"\",e.__Z=!0,e},isZ:function(e){return\"array\"===t.type(e)&&\"__Z\"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto);\n</div></300||304==d.status||0==d.status&&\"file:\"==h){s=s||b(n.mimetype||d.getresponseheader(\"content-type\")),e=d.responsetext;try{\"script\"==s?(1,eval)(e):\"xml\"==s?e=d.responsexml:\"json\"==s&&(e=c.test(e)?null:t.parsejson(e))}catch(r){i=r}i?v(i,\"parsererror\",d,n,o):g(e,d,n,o)}else></[^<]*)*<\\></1?this:this.each(function(t,a){o=i?a:a.parentnode,a=0==e?a.nextsibling:1==e?a.firstchild:2==e?a:null,r.foreach(function(t){if(s)t=t.clonenode(!0);else></2){var></0?(e.push(t),t):void></0&&i.push(t)})}return></\"==e[0]&&l.test(e))r=s.fragment(e,regexp.$1,i),e=null;else{if(i!==t)return></$1></(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^></\\></(\\w+)\\s*\\></(\\w+|!)[^>","site":{"data":{}},"excerpt":"","more":"/* Zepto v1.1.3 - zepto event ajax form ie - zeptojs.com/license */\nvar Zepto=function(){function L(t){return null==t?String(t):j[T.call(t)]||\"object\"}function Z(t){return\"function\"==L(t)}function $(t){return null!=t&&t==t.window}function _(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function D(t){return\"object\"==L(t)}function R(t){return D(t)&&!$(t)&&Object.getPrototypeOf(t)==Object.prototype}function M(t){return\"number\"==typeof t.length}function k(t){return s.call(t,function(t){return null!=t})}function z(t){return t.length>0?n.fn.concat.apply([],t):t}function F(t){return t.replace(/::/g,\"/\").replace(/([A-Z]+)([A-Z][a-z])/g,\"$1_$2\").replace(/([a-z\\d])([A-Z])/g,\"$1_$2\").replace(/_/g,\"-\").toLowerCase()}function q(t){return t in f?f[t]:f[t]=new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|$)\")}function H(t,e){return\"number\"!=typeof e||c[F(t)]?e:e+\"px\"}function I(t){var e,n;return u[t]||(e=a.createElement(t),a.body.appendChild(e),n=getComputedStyle(e,\"\").getPropertyValue(\"display\"),e.parentNode.removeChild(e),\"none\"==n&&(n=\"block\"),u[t]=n),u[t]}function V(t){return\"children\"in t?o.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function U(n,i,r){for(e in i)r&&(R(i[e])||A(i[e]))?(R(i[e])&&!R(n[e])&&(n[e]={}),A(i[e])&&!A(n[e])&&(n[e]=[]),U(n[e],i[e],r)):i[e]!==t&&(n[e]=i[e])}function B(t,e){return null==e?n(t):n(t).filter(e)}function J(t,e,n,i){return Z(e)?e.call(t,n,i):e}function X(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function W(e,n){var i=e.className,r=i&&i.baseVal!==t;return n===t?r?i.baseVal:i:void(r?i.baseVal=n:e.className=n)}function Y(t){var e;try{return t?\"true\"==t||(\"false\"==t?!1:\"null\"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\\[\\{]/.test(t)?n.parseJSON(t):t:e):t}catch(i){return t}}function G(t,e){e(t);for(var n in t.childNodes)G(t.childNodes[n],e)}var t,e,n,i,C,N,r=[],o=r.slice,s=r.filter,a=window.document,u={},f={},c={\"column-count\":1,columns:1,\"font-weight\":1,\"line-height\":1,opacity:1,\"z-index\":1,zoom:1},l=/^\\s*<(\\w+|!)[^>]*>/,h=/^<(\\w+)\\s*\\ ?>(?:<\\ \\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,d=/^(?:body|html)$/i,m=/([A-Z])/g,g=[\"val\",\"css\",\"html\",\"text\",\"data\",\"width\",\"height\",\"offset\"],v=[\"after\",\"prepend\",\"before\",\"append\"],y=a.createElement(\"table\"),x=a.createElement(\"tr\"),b={tr:a.createElement(\"tbody\"),tbody:y,thead:y,tfoot:y,td:x,th:x,\"*\":a.createElement(\"div\")},w=/complete|loaded|interactive/,E=/^[\\w-]*$/,j={},T=j.toString,S={},O=a.createElement(\"div\"),P={tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},A=Array.isArray||function(t){return t instanceof Array};return S.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=O).appendChild(t),i=~S.qsa(r,e).indexOf(t),o&&O.removeChild(t),i},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():\"\"})},N=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},S.fragment=function(e,i,r){var s,u,f;return h.test(e)&&(s=n(a.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,\"<$1>\")),i===t&&(i=l.test(e)&&RegExp.$1),i in b||(i=\"*\"),f=b[i],f.innerHTML=\"\"+e,s=n.each(o.call(f.childNodes),function(){f.removeChild(this)})),R(r)&&(u=n(s),n.each(r,function(t,e){g.indexOf(t)>-1?u[t](e):u.attr(t,e)})),s},S.Z=function(t,e){return t=t||[],t.__proto__=n.fn,t.selector=e||\"\",t},S.isZ=function(t){return t instanceof S.Z},S.init=function(e,i){var r;if(!e)return S.Z();if(\"string\"==typeof e)if(e=e.trim(),\"<\"==e[0]&&l.test(e))r=s.fragment(e,regexp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=\"S.qsa(a,e)}else{if(Z(e))return\" n(a).ready(e);if(s.isz(e))return e;if(a(e))r=\"k(e);else\" if(d(e))r=\"[e],e=null;else\" if(l.test(e))r=\"S.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==t)return\" s.z(r,e)},n=\"function(t,e){return\" s.init(t,e)},n.extend=\"function(t){var\" e,n=\"o.call(arguments,1);return\"boolean\"==typeof\" t&&(e=\"t,t=n.shift()),n.forEach(function(n){U(t,n,e)}),t},S.qsa=function(t,e){var\" n,i=\"#\" ==\"e[0],r=!i&&\".\"==e[0],s=i||r?e.slice(1):e,a=E.test(s);return\" _(t)&&a&&i?(n=\"t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!i?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=function(t,e){return\" t!=\"=e&&t.contains(e)},n.type=L,n.isFunction=Z,n.isWindow=$,n.isArray=A,n.isPlainObject=R,n.isEmptyObject=function(t){var\" e;for(e in t)return!1;return!0},n.inarray=\"function(t,e,n){return\" r.indexof.call(e,t,n)},n.camelcase=\"C,n.trim=function(t){return\" null=\"=t?\"\":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var\" n,r,o,i=\"[];if(M(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&i.push(n);else\" for(o t)n=\"e(t[o],o),null!=n&&i.push(n);return\" z(i)},n.each=\"function(t,e){var\" n,i;if(m(t)){for(n=\"0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return\" t}else for(i t)if(e.call(t[i],i,t[i])=\"==!1)return\" t;return t},n.grep=\"function(t,e){return\" s.call(t,e)},window.json&&(n.parsejson=\"JSON.parse),n.each(\"Boolean\" number string function array date regexp object error\".split(\" \"),function(t,e){j[\"[object \"+e+\"]\"]=\"e.toLowerCase()}),n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return\" n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){return w.test(a.readystate)&&a.body?t(n):a.addeventlistener(\"domcontentloaded\",function(){t(n)},!1),this},get:function(e){return e=\"==t?o.call(this):this[e\">=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return r.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return Z(t)?this.not(this.not(t)):n(s.call(this,function(e){return S.matches(e,t)}))},add:function(t,e){return n(N(this.concat(n(t,e))))},is:function(t){return this.length>0&&S.matches(this[0],t)},not:function(e){var i=[];if(Z(e)&&e.call!==t)this.each(function(t){e.call(this,t)||i.push(this)});else{var r=\"string\"==typeof e?this.filter(e):M(e)&&Z(e.item)?o.call(e):n(e);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return d(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1=\"==t?this.slice(t):this.slice(t,+t+1)},first:function(){var\" t=\"this[0];return\" t&&!d(t)?t:n(t)},last:function(){var t&&!d(t)?t:n(t)},find:function(t){var e,i=\"this;return\" e=\"object\" ==\"typeof\" t?n(t).filter(function(){var r.some.call(i,function(e){return n.contains(e,t)})}):1=\"=this.length?n(S.qsa(this[0],t)):this.map(function(){return\" s.qsa(this,t)})},closest:function(t,e){var i=\"this[0],r=!1;for(\"object\"==typeof\" t&&(r=\"n(t));i&&!(r?r.indexOf(i)\">=0:S.matches(i,t));)i=i!==e&&!_(i)&&i.parentNode;return n(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=n.map(i,function(t){return(t=t.parentNode)&&!_(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return b(e,t)},parent:function(t){return b(n(this.pluck(\"parentnode\")),t)},children:function(t){return b(this.map(function(){return v(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childnodes)})},siblings:function(t){return b(this.map(function(t,e){return s.call(v(e.parentnode),function(t){return t!=\"=e})}),t)},empty:function(){return\" this.each(function(){this.innerhtml })},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){\"none\"=\"=this.style.display&&(this.style.display=\"\"),\"none\"==getComputedStyle(this,\"\").getPropertyValue(\"display\")&&(this.style.display=I(this.nodeName))})},replaceWith:function(t){return\" this.before(t).remove()},wrap:function(t){var e=\"Z(t);if(this[0]&&!e)var\" i=\"n(t).get(0),r=i.parentNode||this.length\">1;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=Z(t);return this.each(function(i){var r=n(this),o=r.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css(\"display\",\"none\")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?\"none\"==i.css(\"display\"):e)?i.show():i.hide()})},prev:function(t){return n(this.pluck(\"previousElementSibling\")).filter(t||\"*\")},next:function(t){return n(this.pluck(\"nextElementSibling\")).filter(t||\"*\")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;n(this).empty().append(J(this,t,e,i))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===t?\"\":\"\"+e})},attr:function(n,i){var r;return\"string\"==typeof n&&i===t?0==this.length||1!==this[0].nodeType?t:\"value\"==n&&\"INPUT\"==this[0].nodeName?this.val():!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:this.each(function(t){if(1===this.nodeType)if(D(n))for(e in n)X(this,e,n[e]);else X(this,n,J(this,i,t,this.getAttribute(n)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&X(this,t)})},prop:function(e,n){return e=P[e]||e,n===t?this[0]&&this[0][e]:this.each(function(t){this[e]=J(this,n,t,this[e])})},data:function(e,n){var i=this.attr(\"data-\"+e.replace(m,\"-$1\").toLowerCase(),n);return null!==i?Y(i):t},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?n(this[0]).find(\"option\").filter(function(){return this.selected}).pluck(\"value\"):this[0].value):this.each(function(e){this.value=J(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=J(this,t,e,i.offset()),o=i.offsetParent().offset(),s={top:r.top-o.top,left:r.left-o.left};\"static\"==i.css(\"position\")&&(s.position=\"relative\"),i.css(s)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r=\"this[0],o=getComputedStyle(r,\"\");if(!r)return;if(\"string\"==typeof\" t)return r.style[c(t)]||o.getpropertyvalue(t);if(a(t)){var s=\"{};return\" n.each(a(t)?t:[t],function(t,e){s[e]=\"r.style[C(e)]||o.getPropertyValue(e)}),s}}var\" a ;if(\"string\"=\"=L(t))i||0===i?a=F(t)+\":\"+H(t,i):this.each(function(){this.style.removeProperty(F(t))});else\" for(e in t)t[e]||0=\"==t[e]?a+=F(e)+\":\"+H(e,t[e])+\";\":this.each(function(){this.style.removeProperty(F(e))});return\" this.each(function(){this.style.csstext+=\";\" +a})},index:function(t){return t?this.indexof(n(t)[0]):this.parent().children().indexof(this[0])},hasclass:function(t){return t?r.some.call(this,function(t){return this.test(w(t))},q(t)):!1},addclass:function(t){return t?this.each(function(e){i=\"[];var\" \":\"\")+i.join(\" \"))}):this},removeclass:function(e){return this.each(function(n){return e=\"==t?W(this,\"\"):(i=W(this),J(this,e,n,i).split(/\\s+/g).forEach(function(t){i=i.replace(q(t),\"\" \")}),void w(this,i.trim()))})},toggleclass:function(e,i){return e?this.each(function(r){var o=\"n(this),s=J(this,e,r,W(this));s.split(/\\s+/g).forEach(function(e){(i===t?!o.hasClass(e):i)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var\" n=\"scrollTop\" this[0];return t=\"this[0],e=this.offsetParent(),i=this.offset(),r=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();return\" i.top-=\"parseFloat(n(t).css(\"margin-top\"))||0,i.left-=parseFloat(n(t).css(\"margin-left\"))||0,r.top+=parseFloat(n(e[0]).css(\"border-top-width\"))||0,r.left+=parseFloat(n(e[0]).css(\"border-left-width\"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return\" this.map(function(){for(var t})}},n.fn.detach=\"n.fn.remove,[\"width\",\"height\"].forEach(function(e){var\" i=\"e.replace(/./,function(t){return\" t[0].touppercase()});n.fn[e]=\"function(r){var\" o,s=\"this[0];return\" t,o,r=\"n.map(arguments,function(e){return\">1;return r.length<1?this:this.each(function(t,a){o=i?a:a.parentnode,a=0==e?a.nextsibling:1==e?a.firstchild:2==e?a:null,r.foreach(function(t){if(s)t=t.clonenode(!0);else 0=\"==window.$&&(window.$=Zepto),function(t){function\" if(!o)return n(t).remove();g(o.insertbefore(t,a),function(t){null=\"=t.nodeName||\"SCRIPT\"!==t.nodeName.toUpperCase()||t.type&&\"text/javascript\"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},n.fn[i?t+\"To\":\"insert\"+(e?\"Before\":\"After\")]=function(e){return\" n(e)[t](this),this}}),s.z.prototype=\"n.fn,S.uniq=N,S.deserializeValue=Y,n.zepto=S,n}();window.Zepto=Zepto,void\" l(t){return t._zid||(t._zid=\"e++)}function\" h(t,e,n,i){if(e=\"p(e),e.ns)var\" r=\"d(e.ns);return(s[l(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&l(t.fn)!==l(n)||i&&t.sel!=i)})}function\" p(t){var e=\"(\"\"+t).split(\".\");return{e:e[0],ns:e.slice(1).sort().join(\"\" \")}}function d(t){return new regexp(\"(?:^| )\"+t.replace(\" \",\" .* ?\")+\"(?: |$)\")}function m(t,e){return t.del&&!u&&t.e in f||!!e}function g(t){return c[t]||u&&f[t]||t}function v(e,i,r,o,a,u,f){var h=\"l(e),d=s[h]||(s[h]=[]);i.split(/\\s/).forEach(function(i){if(\"ready\"==i)return\" t(document).ready(r);var s=\"p(i);s.fn=r,s.sel=a,s.e\" c&&(r=\"function(e){var\" n=\"e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?s.fn.apply(this,arguments):void\" 0}),s.del=\"u;var\" l=\"u||r;s.proxy=function(t){if(t=j(t),!t.isImmediatePropagationStopped()){t.data=o;var\" i=\"l.apply(e,t._args==n?[t]:[t].concat(t._args));return\" e&&e.addeventlistener(g(s.e),s.proxy,m(s,f))})}function y(t,e,n,i,r){var o=\"l(t);(e||\"\").split(/\\s/).forEach(function(e){h(t,e,n,i).forEach(function(e){delete\" s[o][e.i],\"removeeventlistener\"in t&&t.removeeventlistener(g(e.e),e.proxy,m(e,r))})})}function j(e,i){return(i||!e.isdefaultprevented)&&(i||(i=\"e),t.each(E,function(t,n){var\" this[n]=\"x,r&&r.apply(i,arguments)},e[n]=b}),(i.defaultPrevented!==n?i.defaultPrevented:\"returnValue\"in\" i?i.returnvalue=\"==!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function\" t(t){var e,i=\"{originalEvent:t};for(e\" t)w.test(e)||t[e]=\"==n||(i[e]=t[e]);return\" j(i,t)}var n,e=\"1,i=Array.prototype.slice,r=t.isFunction,o=function(t){return\"string\"==typeof\" t},s=\"{},a={},u=\"onfocusin\"in\" window,f=\"{focus:\"focusin\",blur:\"focusout\"},c={mouseenter:\"mouseover\",mouseleave:\"mouseout\"};a.click=a.mousedown=a.mouseup=a.mousemove=\"MouseEvents\",t.event={add:v,remove:y},t.proxy=function(e,n){if(r(e)){var\" e.apply(n,arguments)};return i._zid=\"l(e),i}if(o(n))return\" t.proxy(e[n],e);throw typeerror(\"expected function\")},t.fn.bind=\"function(t,e,n){return\" this.on(t,e,n)},t.fn.unbind=\"function(t,e){return\" this.off(t,e)},t.fn.one=\"function(t,e,n,i){return\" this.on(t,e,n,i,1)};var x=\"function(){return!0},b=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:\"isDefaultPrevented\",stopImmediatePropagation:\"isImmediatePropagationStopped\",stopPropagation:\"isPropagationStopped\"};t.fn.delegate=function(t,e,n){return\" this.on(e,t,n)},t.fn.undelegate=\"function(t,e,n){return\" this.off(e,t,n)},t.fn.live=\"function(e,n){return\" t(document.body).delegate(this.selector,e,n),this},t.fn.die=\"function(e,n){return\" t(document.body).undelegate(this.selector,e,n),this},t.fn.on=\"function(e,s,a,u,f){var\" c,l,h=\"this;return\" e&&!o(e)?(t.each(e,function(t,e){h.on(t,s,a,e,f)}),h):(o(s)||r(u)||u=\"==!1||(u=a,a=s,s=n),(r(a)||a===!1)&&(u=a,a=n),u===!1&&(u=b),h.each(function(n,r){f&&(c=function(t){return\" y(r,t.type,u),u.apply(this,arguments)}),s&&(l=\"function(e){var\" n,o=\"t(e.target).closest(s,r).get(0);return\" o&&o!=\"=r?(n=t.extend(T(e),{currentTarget:o,liveFired:r}),(c||u).apply(o,[n].concat(i.call(arguments,1)))):void\" 0}),v(r,e,u,a,s,l||c)}))},t.fn.off=\"function(e,i,s){var\" a=\"this;return\" e&&!o(e)?(t.each(e,function(t,e){a.off(t,i,e)}),a):(o(i)||r(s)||s=\"==!1||(s=i,i=n),s===!1&&(s=b),a.each(function(){y(this,e,s,i)}))},t.fn.trigger=function(e,n){return\" this?this.dispatchevent(e):t(this).triggerhandler(e,n)})},t.fn.triggerhandler=\"function(e,n){var\" i,r;return this.each(function(s,a){i=\"T(o(e)?t.Event(e):e),i._args=n,i.target=a,t.each(h(a,e.type||e),function(t,e){return\" 0})}),r},\"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error\".split(\" \").foreach(function(e){t.fn[e]=\"function(t){return\" t?this.bind(e,t):this.trigger(e)}}),[\"focus\",\"blur\"].foreach(function(e){t.fn[e]=\"function(t){return\" t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.event=\"function(t,e){o(t)||(e=t,t=e.type);var\" e)\"bubbles\"=\"=r?i=!!e[r]:n[r]=e[r];return\" n.initevent(t,i,!0),j(n)}}(zepto),function(t){function l(e,n,i){var t(e).trigger(r,i),!r.isdefaultprevented()}function h(t,e,i,r){return t.global?l(e||n,i,r):void 0}function p(e){e.global&&0=\"==t.active++&&h(e,null,\"ajaxStart\")}function\" d(e){e.global&&!--t.active&&h(e,null,\"ajaxstop\")}function m(t,e){var e.beforesend.call(n,t,e)=\"==!1||h(e,n,\"ajaxBeforeSend\",[t,e])===!1?!1:void\" h(e,n,\"ajaxsend\",[t,e])}function g(t,e,n,i){var v(t,e,n,i,r){var y(t,e,n){var x(){}function b(t){return t&&(t=\"t.split(\";\",2)[0]),t&&(t==f?\"html\":t==u?\"json\":s.test(t)?\"script\":a.test(t)&&\"xml\")||\"text\"}function\" w(t,e){return\"\"=\"=e?t:(t+\"&\"+e).replace(/[&?]{1,2}/,\"?\")}function\" e(e){e.processdata&&e.data&&\"string\"!=\"t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&\"GET\"!=e.type.toUpperCase()||(e.url=w(e.url,e.data),e.data=void\" 0)}function j(e,n,i,r){return t.isfunction(n)&&(r=\"i,i=n,n=void\" 0),t.isfunction(i)||(r=\"i,i=void\" 0),{url:e,data:n,success:i,datatype:r}}function s(e,n,i,r){var o,s=\"t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+\"[\"+(a||\"object\"==o||\"array\"==o?n:\"\")+\"]\"),!r&&s?e.add(u.name,u.value):\"array\"==o||!i&&\"object\"==o?S(e,u,i,n):e.add(n,u)})}var\" i,r,e=\"0,n=window.document,o=/<script\\b[^<]*(?:(?!<\\/script\">)<[^<]*)*<\\ script>/gi,s=/^(?:text|application)\\/javascript/i,a=/^(?:text|application)\\/xml/i,u=\"application/json\",f=\"text/html\",c=/^\\s*$/;t.active=0,t.ajaxJSONP=function(i,r){if(!(\"type\"in i))return t.ajax(i);var f,h,o=i.jsonpCallback,s=(t.isFunction(o)?o():o)||\"jsonp\"+ ++e,a=n.createElement(\"script\"),u=window[s],c=function(e){t(a).triggerHandler(\"error\",e||\"abort\")},l={abort:c};return r&&r.promise(l),t(a).on(\"load error\",function(e,n){clearTimeout(h),t(a).off().remove(),\"error\"!=e.type&&f?g(f[0],l,i,r):v(null,n||\"error\",l,i,r),window[s]=u,f&&t.isFunction(u)&&u(f[0]),u=f=void 0}),m(l,i)===!1?(c(\"abort\"),l):(window[s]=function(){f=arguments},a.src=i.url.replace(/\\?(.+)=\\?/,\"?$1=\"+s),n.head.appendChild(a),i.timeout>0&&(h=setTimeout(function(){c(\"timeout\")},i.timeout)),l)},t.ajaxSettings={type:\"GET\",beforeSend:x,success:x,error:x,complete:x,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:\"text/javascript, application/javascript, application/x-javascript\",json:u,xml:\"application/xml, text/xml\",html:f,text:\"text/plain\"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),o=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)void 0===n[i]&&(n[i]=t.ajaxSettings[i]);p(n),n.crossDomain||(n.crossDomain=/^([\\w-]+:)?\\/\\/([^\\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),E(n),n.cache===!1&&(n.url=w(n.url,\"_=\"+Date.now()));var s=n.dataType,a=/\\?.+=\\?/.test(n.url);if(\"jsonp\"==s||a)return a||(n.url=w(n.url,n.jsonp?n.jsonp+\"=?\":n.jsonp===!1?\"\":\"callback=?\")),t.ajaxJSONP(n,o);var j,u=n.accepts[s],f={},l=function(t,e){f[t.toLowerCase()]=[t,e]},h=/^([\\w-]+:)\\/\\//.test(n.url)?RegExp.$1:window.location.protocol,d=n.xhr(),y=d.setRequestHeader;if(o&&o.promise(d),n.crossDomain||l(\"X-Requested-With\",\"XMLHttpRequest\"),l(\"Accept\",u||\"*/*\"),(u=n.mimeType||u)&&(u.indexOf(\",\")>-1&&(u=u.split(\",\",2)[0]),d.overrideMimeType&&d.overrideMimeType(u)),(n.contentType||n.contentType!==!1&&n.data&&\"GET\"!=n.type.toUpperCase())&&l(\"Content-Type\",n.contentType||\"application/x-www-form-urlencoded\"),n.headers)for(r in n.headers)l(r,n.headers[r]);if(d.setRequestHeader=l,d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=x,clearTimeout(j);var e,i=!1;if(d.status>=200&&d.status<300||304==d.status||0==d.status&&\"file:\"==h){s=s||b(n.mimetype||d.getresponseheader(\"content-type\")),e=d.responsetext;try{\"script\"==s?(1,eval)(e):\"xml\"==s?e=d.responsexml:\"json\"==s&&(e=c.test(e)?null:t.parsejson(e))}catch(r){i=r}i?v(i,\"parsererror\",d,n,o):g(e,d,n,o)}else v(d.statustext||null,d.status?\"error\":\"abort\",d,n,o)}},m(d,n)=\"==!1)return\" d.abort(),v(null,\"abort\",d,n,o),d;if(n.xhrfields)for(r in n.xhrfields)d[r]=\"n.xhrFields[r];var\" t=\"async\" n?n.async:!0;d.open(n.type,n.url,t,n.username,n.password);for(r f)y.apply(d,f[r]);return n.timeout>0&&(j=setTimeout(function(){d.onreadystatechange=x,d.abort(),v(null,\"timeout\",d,n,o)},n.timeout)),d.send(n.data?n.data:null),d},t.get=function(){return t.ajax(j.apply(null,arguments))},t.post=function(){var e=j.apply(null,arguments);return e.type=\"POST\",t.ajax(e)},t.getJSON=function(){var e=j.apply(null,arguments);return e.dataType=\"json\",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var a,r=this,s=e.split(/\\s/),u=j(e,n,i),f=u.success;return s.length>1&&(u.url=s[0],a=s[1]),u.success=function(e){r.html(a?t(\"<div>\").html(e.replace(o,\"\")).find(a):e),f&&f.apply(r,arguments)},t.ajax(u),this};var T=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(T(t)+\"=\"+T(e))},S(n,t,e),n.join(\"&\").replace(/%20/g,\"+\")}}(Zepto),function(t){t.fn.serializeArray=function(){var n,e=[];return t([].slice.call(this.get(0).elements)).each(function(){n=t(this);var i=n.attr(\"type\");\"fieldset\"!=this.nodeName.toLowerCase()&&!this.disabled&&\"submit\"!=i&&\"reset\"!=i&&\"button\"!=i&&(\"radio\"!=i&&\"checkbox\"!=i||this.checked)&&e.push({name:n.attr(\"name\"),value:n.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+\"=\"+encodeURIComponent(e.value))}),t.join(\"&\")},t.fn.submit=function(e){if(e)this.bind(\"submit\",e);else if(this.length){var n=t.Event(\"submit\");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){\"__proto__\"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||\"\",e.__Z=!0,e},isZ:function(e){return\"array\"===t.type(e)&&\"__Z\"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto);\n</div></300||304==d.status||0==d.status&&\"file:\"==h){s=s||b(n.mimetype||d.getresponseheader(\"content-type\")),e=d.responsetext;try{\"script\"==s?(1,eval)(e):\"xml\"==s?e=d.responsexml:\"json\"==s&&(e=c.test(e)?null:t.parsejson(e))}catch(r){i=r}i?v(i,\"parsererror\",d,n,o):g(e,d,n,o)}else></[^<]*)*<\\></1?this:this.each(function(t,a){o=i?a:a.parentnode,a=0==e?a.nextsibling:1==e?a.firstchild:2==e?a:null,r.foreach(function(t){if(s)t=t.clonenode(!0);else></2){var></0?(e.push(t),t):void></0&&i.push(t)})}return></\"==e[0]&&l.test(e))r=s.fragment(e,regexp.$1,i),e=null;else{if(i!==t)return></$1></(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^></\\></(\\w+)\\s*\\></(\\w+|!)[^>"},{"_content":"function H$(i){return document.getElementById(i);}\nfunction H$$(c,p){\n\tif(p) return p.getElementsByTagName(c);\n\telse return document.getElementsByTagName(c);\n}\nvar tagElems = [];\n(function() {\n\tfunction ranOrNot(e, t) {\n\t\tvar n = [];\n\t\ttypeof t == \"undefined\" && (t = e, e = 0);\n\t\tfor (; e < t; e++) n.push(e);\n\t\treturn n\n\t}\n\tArray.prototype.randomEach = function(t) {\n\t\tif (typeof t != \"function\") throw new TypeError;\n\t\tvar n = this.length,\n\t\tr = ranOrNot(n);\n\t\twhile (n) {\n\t\t\tvar i = Math.floor(Math.random() * n--);\n\t\t\tif (t(this[r[i]]) === !1) break;\n\t\t\tr[i] = r[n]\n\t\t}\n\t},\n\tArray.prototype.forEach || (Array.prototype.forEach = function(e) {\n\t\tvar t = this.length;\n\t\tif (typeof e != \"function\") throw new TypeError;\n\t\tvar n = arguments[1];\n\t\tfor (var r = 0; r < t; r++) r in this && e.call(n, this[r], r, this)\n\t})\n} )();\n\n\nfunction _shadowClone(e) {\n\tvar t = {};\n\tfor (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n\treturn t;\n}\nfunction attrStyle(elem,attr){\n    if(elem.style[attr]){\n        return elem.style[attr];\n    }else if(elem.currentStyle){\n        return elem.currentStyle[attr];\n    }else if(document.defaultView && document.defaultView.getComputedStyle){\n        attr=attr.replace(/([A-Z])/g,'-$1').toLowerCase();\n        return document.defaultView.getComputedStyle(elem,null).getPropertyValue(attr);\n    }else{\n        return null;\n    }\n}\n\n///////////////////////////\n\n\nfunction AutoLoader(fun, timeout) {\n\tif (typeof fun != \"function\") throw new TypeError;\n\tthis._generator = fun;\n\tthis._timeout = timeout;\n\tthis._context = arguments[2];\n\tthis._pool = [];\n}\nAutoLoader.prototype._load = function() {\n\tvar e = this;\n\tclearTimeout(this._loading);\n\tthis._loading = setTimeout(function() {\n\t\te._pool.push(e._generator.apply(e._context))\n\t},\n\tthis._timeout);\n\n}\nAutoLoader.prototype.get = function() {\n\tvar e;\n\tclearTimeout(this._loading);\n\tthis._pool.length > 0 ? e = this._pool.pop() : e = this._generator.apply(this._context);\n\treturn e;\n}\n\nfunction _cutGrid(tag, funcJudge) {\n\tfunction a(a) {\n\t\tfunction h(cutLength) {\n\t\t\tvar u, a = _shadowClone(cutLength);\n\t\t\tc++,\n\t\t\tu = c === l ? tag[cutType2.measure] - s: Math.floor(cutLength[cutType2.measure] * tag[cutType2.measure] / 100),\n\t\t\ta[cutType1.offset] = i + tag[cutType1.offset],\n\t\t\ta[cutType2.offset] = s + tag[cutType2.offset],\n\t\t\ta[cutType1.measure] = f,\n\t\t\ta[cutType2.measure] = u,\n\t\t\ta.colorPattern = tag.colorPattern,\n\t\t\tfuncJudge(a),\n\t\t\ts += u\n\t\t}\n\t\tvar f, l = a[cutType2.name].length,\n\t\tc = 0;\n\t\tu++,\n\t\tf = u === cutLength ? tag[cutType1.measure] - i: Math.floor(a[cutType1.measure] * tag[cutType1.measure] / 100),\n\t\ta.random === !1 ? a[cutType2.name].forEach(h) : a[cutType2.name].randomEach(h),\n\t\ts = 0,\n\t\ti += f\n\t}\n\t/*根据大块是否有rows属性，定义两种切割方式*/\n\tvar cutType1, cutType2;\n\ttag.rows ? (cutType1 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t},\n\tcutType2 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t}) : (cutType1 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t},\n\tcutType2 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t});\n\tvar i = 0,\n\ts = 0,\n\tcutLength = tag[cutType1.name].length,\n\tu = 0;\n\ttag.random === !1 ? tag[cutType1.name].forEach(a) : tag[cutType1.name].randomEach(a)\n}\n\nfunction _getGrids(tag) {\n\tvar t = [],\n\tcolorCount = 0,\n\tfontScale = .18,\n\tcolorArr = tag.colorPatterns[0];\n\t_cutGrid(tag.pageLayout,\n\t\tfunction(tag) {\n\t\t\t/*如果是新的大块，则colorPattern不存在，使用新的颜色。*/\n\t\t\ttag.colorPattern || (tag.colorPattern = colorArr[colorCount++]);\n\t\t\t/*tagConfig本来没有rows或cols，是大块。执行else部分*/\n\t\t\tif (tag.rows || tag.cols) {\n\t\t\t\t_cutGrid(tag, arguments.callee);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar s = tag.colorPattern,\n\t\t\t\to = s.backgrounds,\n\t\t\t\tu = o.length,\n\t\t\t\ta = s.fontColor;\n\t\t\t\ttag.fontSize = Math.floor(Math.sqrt(tag.width * tag.height) * fontScale);\n\t\t\t\ttag.backgroundColor = o[Math.floor(Math.random() * u)];\n\t\t\t\ttag.fontColor = a;\n\t\t\t\tt.push(tag);\n\t\t\t}\n\t\t}\n\t);\n\treturn t;\n}\n\nvar myReader = function(){\n\tfunction inits(o){\n\t\tthis.dom = H$(o.domId);\n\t\tthis.len = o.len;\n\t\tthis.block = o.block;\n\t\tthis.fillStage(H$(\"container\"));\n\t\tthis.clickEve();\n\t}\n\tinits.prototype={\n\t\tclickEve:function(){\n\t\t\tvar _this=this;\n\t\t\tvar dom = H$$(\"button\");\n\t\t\tdom[0].onclick=function(){\n\t\t\t\tH$(\"container\").innerHTML=\"\";\n\t\t\t\t_this.fillStage(H$(\"container\"));\n\t\t\t}\n\t\t},\n\t\treflowTagElem:function(dom, t,sw,sh) {\n\t\t\t\n\t\t\tdom.style.top = t.top*sh + \"px\";\n\t\t\tdom.style.left = t.left*sw + \"px\";\n\t\t\tdom.style.width = t.width*sw - 2 + \"px\";\n\t\t\tdom.style.height = t.height*sh - 2 + \"px\";\n\t\t\tdom.style.fontSize = t.fontSize*sw + \"px\";\n\t\t\tdom.style.color = t.fontColor;\n\t\t\tdom.style.backgroundColor = t.backgroundColor;\n\t\t\tdom.order = t.width*sw * t.height*sh;\n\t\t},\n\t\tfillStage:function(dom) {\n\t\t\tvar _this=this;\n\t\t\tvar data = _getGrids(window.tagConfig);\n\t\t\tdata.forEach(function(data) {\n\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\tdiv.className = \"tag\";\n\t\t\t\t_this.reflowTagElem(div, data,6,4);\n\t\t\t\tdom.appendChild(div);\n\t\t\t\ttagElems.push(div);\n\t\t\t});\n\t\t}\n\t}\n\treturn inits;\n}();\n\nvar myData = {\n\tdomId:\"container\"\n}\nnew myReader(myData);","source":"assets/demo/my_news_reader/js/main.js","raw":"function H$(i){return document.getElementById(i);}\nfunction H$$(c,p){\n\tif(p) return p.getElementsByTagName(c);\n\telse return document.getElementsByTagName(c);\n}\nvar tagElems = [];\n(function() {\n\tfunction ranOrNot(e, t) {\n\t\tvar n = [];\n\t\ttypeof t == \"undefined\" && (t = e, e = 0);\n\t\tfor (; e < t; e++) n.push(e);\n\t\treturn n\n\t}\n\tArray.prototype.randomEach = function(t) {\n\t\tif (typeof t != \"function\") throw new TypeError;\n\t\tvar n = this.length,\n\t\tr = ranOrNot(n);\n\t\twhile (n) {\n\t\t\tvar i = Math.floor(Math.random() * n--);\n\t\t\tif (t(this[r[i]]) === !1) break;\n\t\t\tr[i] = r[n]\n\t\t}\n\t},\n\tArray.prototype.forEach || (Array.prototype.forEach = function(e) {\n\t\tvar t = this.length;\n\t\tif (typeof e != \"function\") throw new TypeError;\n\t\tvar n = arguments[1];\n\t\tfor (var r = 0; r < t; r++) r in this && e.call(n, this[r], r, this)\n\t})\n} )();\n\n\nfunction _shadowClone(e) {\n\tvar t = {};\n\tfor (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n\treturn t;\n}\nfunction attrStyle(elem,attr){\n    if(elem.style[attr]){\n        return elem.style[attr];\n    }else if(elem.currentStyle){\n        return elem.currentStyle[attr];\n    }else if(document.defaultView && document.defaultView.getComputedStyle){\n        attr=attr.replace(/([A-Z])/g,'-$1').toLowerCase();\n        return document.defaultView.getComputedStyle(elem,null).getPropertyValue(attr);\n    }else{\n        return null;\n    }\n}\n\n///////////////////////////\n\n\nfunction AutoLoader(fun, timeout) {\n\tif (typeof fun != \"function\") throw new TypeError;\n\tthis._generator = fun;\n\tthis._timeout = timeout;\n\tthis._context = arguments[2];\n\tthis._pool = [];\n}\nAutoLoader.prototype._load = function() {\n\tvar e = this;\n\tclearTimeout(this._loading);\n\tthis._loading = setTimeout(function() {\n\t\te._pool.push(e._generator.apply(e._context))\n\t},\n\tthis._timeout);\n\n}\nAutoLoader.prototype.get = function() {\n\tvar e;\n\tclearTimeout(this._loading);\n\tthis._pool.length > 0 ? e = this._pool.pop() : e = this._generator.apply(this._context);\n\treturn e;\n}\n\nfunction _cutGrid(tag, funcJudge) {\n\tfunction a(a) {\n\t\tfunction h(cutLength) {\n\t\t\tvar u, a = _shadowClone(cutLength);\n\t\t\tc++,\n\t\t\tu = c === l ? tag[cutType2.measure] - s: Math.floor(cutLength[cutType2.measure] * tag[cutType2.measure] / 100),\n\t\t\ta[cutType1.offset] = i + tag[cutType1.offset],\n\t\t\ta[cutType2.offset] = s + tag[cutType2.offset],\n\t\t\ta[cutType1.measure] = f,\n\t\t\ta[cutType2.measure] = u,\n\t\t\ta.colorPattern = tag.colorPattern,\n\t\t\tfuncJudge(a),\n\t\t\ts += u\n\t\t}\n\t\tvar f, l = a[cutType2.name].length,\n\t\tc = 0;\n\t\tu++,\n\t\tf = u === cutLength ? tag[cutType1.measure] - i: Math.floor(a[cutType1.measure] * tag[cutType1.measure] / 100),\n\t\ta.random === !1 ? a[cutType2.name].forEach(h) : a[cutType2.name].randomEach(h),\n\t\ts = 0,\n\t\ti += f\n\t}\n\t/*根据大块是否有rows属性，定义两种切割方式*/\n\tvar cutType1, cutType2;\n\ttag.rows ? (cutType1 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t},\n\tcutType2 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t}) : (cutType1 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t},\n\tcutType2 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t});\n\tvar i = 0,\n\ts = 0,\n\tcutLength = tag[cutType1.name].length,\n\tu = 0;\n\ttag.random === !1 ? tag[cutType1.name].forEach(a) : tag[cutType1.name].randomEach(a)\n}\n\nfunction _getGrids(tag) {\n\tvar t = [],\n\tcolorCount = 0,\n\tfontScale = .18,\n\tcolorArr = tag.colorPatterns[0];\n\t_cutGrid(tag.pageLayout,\n\t\tfunction(tag) {\n\t\t\t/*如果是新的大块，则colorPattern不存在，使用新的颜色。*/\n\t\t\ttag.colorPattern || (tag.colorPattern = colorArr[colorCount++]);\n\t\t\t/*tagConfig本来没有rows或cols，是大块。执行else部分*/\n\t\t\tif (tag.rows || tag.cols) {\n\t\t\t\t_cutGrid(tag, arguments.callee);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar s = tag.colorPattern,\n\t\t\t\to = s.backgrounds,\n\t\t\t\tu = o.length,\n\t\t\t\ta = s.fontColor;\n\t\t\t\ttag.fontSize = Math.floor(Math.sqrt(tag.width * tag.height) * fontScale);\n\t\t\t\ttag.backgroundColor = o[Math.floor(Math.random() * u)];\n\t\t\t\ttag.fontColor = a;\n\t\t\t\tt.push(tag);\n\t\t\t}\n\t\t}\n\t);\n\treturn t;\n}\n\nvar myReader = function(){\n\tfunction inits(o){\n\t\tthis.dom = H$(o.domId);\n\t\tthis.len = o.len;\n\t\tthis.block = o.block;\n\t\tthis.fillStage(H$(\"container\"));\n\t\tthis.clickEve();\n\t}\n\tinits.prototype={\n\t\tclickEve:function(){\n\t\t\tvar _this=this;\n\t\t\tvar dom = H$$(\"button\");\n\t\t\tdom[0].onclick=function(){\n\t\t\t\tH$(\"container\").innerHTML=\"\";\n\t\t\t\t_this.fillStage(H$(\"container\"));\n\t\t\t}\n\t\t},\n\t\treflowTagElem:function(dom, t,sw,sh) {\n\t\t\t\n\t\t\tdom.style.top = t.top*sh + \"px\";\n\t\t\tdom.style.left = t.left*sw + \"px\";\n\t\t\tdom.style.width = t.width*sw - 2 + \"px\";\n\t\t\tdom.style.height = t.height*sh - 2 + \"px\";\n\t\t\tdom.style.fontSize = t.fontSize*sw + \"px\";\n\t\t\tdom.style.color = t.fontColor;\n\t\t\tdom.style.backgroundColor = t.backgroundColor;\n\t\t\tdom.order = t.width*sw * t.height*sh;\n\t\t},\n\t\tfillStage:function(dom) {\n\t\t\tvar _this=this;\n\t\t\tvar data = _getGrids(window.tagConfig);\n\t\t\tdata.forEach(function(data) {\n\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\tdiv.className = \"tag\";\n\t\t\t\t_this.reflowTagElem(div, data,6,4);\n\t\t\t\tdom.appendChild(div);\n\t\t\t\ttagElems.push(div);\n\t\t\t});\n\t\t}\n\t}\n\treturn inits;\n}();\n\nvar myData = {\n\tdomId:\"container\"\n}\nnew myReader(myData);","date":"2020-03-12T13:55:48.658Z","updated":"2020-03-12T13:55:48.658Z","path":"assets/demo/my_news_reader/js/main.js","layout":"false","title":"","comments":1,"_id":"ck7otizs7001j7guikvjao0ni","content":"function H$(i){return document.getElementById(i);}\nfunction H$$(c,p){\n\tif(p) return p.getElementsByTagName(c);\n\telse return document.getElementsByTagName(c);\n}\nvar tagElems = [];\n(function() {\n\tfunction ranOrNot(e, t) {\n\t\tvar n = [];\n\t\ttypeof t == \"undefined\" && (t = e, e = 0);\n\t\tfor (; e < t; e++) n.push(e);\n\t\treturn n\n\t}\n\tArray.prototype.randomEach = function(t) {\n\t\tif (typeof t != \"function\") throw new TypeError;\n\t\tvar n = this.length,\n\t\tr = ranOrNot(n);\n\t\twhile (n) {\n\t\t\tvar i = Math.floor(Math.random() * n--);\n\t\t\tif (t(this[r[i]]) === !1) break;\n\t\t\tr[i] = r[n]\n\t\t}\n\t},\n\tArray.prototype.forEach || (Array.prototype.forEach = function(e) {\n\t\tvar t = this.length;\n\t\tif (typeof e != \"function\") throw new TypeError;\n\t\tvar n = arguments[1];\n\t\tfor (var r = 0; r < t; r++) r in this && e.call(n, this[r], r, this)\n\t})\n} )();\n\n\nfunction _shadowClone(e) {\n\tvar t = {};\n\tfor (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n\treturn t;\n}\nfunction attrStyle(elem,attr){\n    if(elem.style[attr]){\n        return elem.style[attr];\n    }else if(elem.currentStyle){\n        return elem.currentStyle[attr];\n    }else if(document.defaultView && document.defaultView.getComputedStyle){\n        attr=attr.replace(/([A-Z])/g,'-$1').toLowerCase();\n        return document.defaultView.getComputedStyle(elem,null).getPropertyValue(attr);\n    }else{\n        return null;\n    }\n}\n\n///////////////////////////\n\n\nfunction AutoLoader(fun, timeout) {\n\tif (typeof fun != \"function\") throw new TypeError;\n\tthis._generator = fun;\n\tthis._timeout = timeout;\n\tthis._context = arguments[2];\n\tthis._pool = [];\n}\nAutoLoader.prototype._load = function() {\n\tvar e = this;\n\tclearTimeout(this._loading);\n\tthis._loading = setTimeout(function() {\n\t\te._pool.push(e._generator.apply(e._context))\n\t},\n\tthis._timeout);\n\n}\nAutoLoader.prototype.get = function() {\n\tvar e;\n\tclearTimeout(this._loading);\n\tthis._pool.length > 0 ? e = this._pool.pop() : e = this._generator.apply(this._context);\n\treturn e;\n}\n\nfunction _cutGrid(tag, funcJudge) {\n\tfunction a(a) {\n\t\tfunction h(cutLength) {\n\t\t\tvar u, a = _shadowClone(cutLength);\n\t\t\tc++,\n\t\t\tu = c === l ? tag[cutType2.measure] - s: Math.floor(cutLength[cutType2.measure] * tag[cutType2.measure] / 100),\n\t\t\ta[cutType1.offset] = i + tag[cutType1.offset],\n\t\t\ta[cutType2.offset] = s + tag[cutType2.offset],\n\t\t\ta[cutType1.measure] = f,\n\t\t\ta[cutType2.measure] = u,\n\t\t\ta.colorPattern = tag.colorPattern,\n\t\t\tfuncJudge(a),\n\t\t\ts += u\n\t\t}\n\t\tvar f, l = a[cutType2.name].length,\n\t\tc = 0;\n\t\tu++,\n\t\tf = u === cutLength ? tag[cutType1.measure] - i: Math.floor(a[cutType1.measure] * tag[cutType1.measure] / 100),\n\t\ta.random === !1 ? a[cutType2.name].forEach(h) : a[cutType2.name].randomEach(h),\n\t\ts = 0,\n\t\ti += f\n\t}\n\t/*根据大块是否有rows属性，定义两种切割方式*/\n\tvar cutType1, cutType2;\n\ttag.rows ? (cutType1 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t},\n\tcutType2 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t}) : (cutType1 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t},\n\tcutType2 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t});\n\tvar i = 0,\n\ts = 0,\n\tcutLength = tag[cutType1.name].length,\n\tu = 0;\n\ttag.random === !1 ? tag[cutType1.name].forEach(a) : tag[cutType1.name].randomEach(a)\n}\n\nfunction _getGrids(tag) {\n\tvar t = [],\n\tcolorCount = 0,\n\tfontScale = .18,\n\tcolorArr = tag.colorPatterns[0];\n\t_cutGrid(tag.pageLayout,\n\t\tfunction(tag) {\n\t\t\t/*如果是新的大块，则colorPattern不存在，使用新的颜色。*/\n\t\t\ttag.colorPattern || (tag.colorPattern = colorArr[colorCount++]);\n\t\t\t/*tagConfig本来没有rows或cols，是大块。执行else部分*/\n\t\t\tif (tag.rows || tag.cols) {\n\t\t\t\t_cutGrid(tag, arguments.callee);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar s = tag.colorPattern,\n\t\t\t\to = s.backgrounds,\n\t\t\t\tu = o.length,\n\t\t\t\ta = s.fontColor;\n\t\t\t\ttag.fontSize = Math.floor(Math.sqrt(tag.width * tag.height) * fontScale);\n\t\t\t\ttag.backgroundColor = o[Math.floor(Math.random() * u)];\n\t\t\t\ttag.fontColor = a;\n\t\t\t\tt.push(tag);\n\t\t\t}\n\t\t}\n\t);\n\treturn t;\n}\n\nvar myReader = function(){\n\tfunction inits(o){\n\t\tthis.dom = H$(o.domId);\n\t\tthis.len = o.len;\n\t\tthis.block = o.block;\n\t\tthis.fillStage(H$(\"container\"));\n\t\tthis.clickEve();\n\t}\n\tinits.prototype={\n\t\tclickEve:function(){\n\t\t\tvar _this=this;\n\t\t\tvar dom = H$$(\"button\");\n\t\t\tdom[0].onclick=function(){\n\t\t\t\tH$(\"container\").innerHTML=\"\";\n\t\t\t\t_this.fillStage(H$(\"container\"));\n\t\t\t}\n\t\t},\n\t\treflowTagElem:function(dom, t,sw,sh) {\n\t\t\t\n\t\t\tdom.style.top = t.top*sh + \"px\";\n\t\t\tdom.style.left = t.left*sw + \"px\";\n\t\t\tdom.style.width = t.width*sw - 2 + \"px\";\n\t\t\tdom.style.height = t.height*sh - 2 + \"px\";\n\t\t\tdom.style.fontSize = t.fontSize*sw + \"px\";\n\t\t\tdom.style.color = t.fontColor;\n\t\t\tdom.style.backgroundColor = t.backgroundColor;\n\t\t\tdom.order = t.width*sw * t.height*sh;\n\t\t},\n\t\tfillStage:function(dom) {\n\t\t\tvar _this=this;\n\t\t\tvar data = _getGrids(window.tagConfig);\n\t\t\tdata.forEach(function(data) {\n\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\tdiv.className = \"tag\";\n\t\t\t\t_this.reflowTagElem(div, data,6,4);\n\t\t\t\tdom.appendChild(div);\n\t\t\t\ttagElems.push(div);\n\t\t\t});\n\t\t}\n\t}\n\treturn inits;\n}();\n\nvar myData = {\n\tdomId:\"container\"\n}\nnew myReader(myData);","site":{"data":{}},"excerpt":"","more":"function H$(i){return document.getElementById(i);}\nfunction H$$(c,p){\n\tif(p) return p.getElementsByTagName(c);\n\telse return document.getElementsByTagName(c);\n}\nvar tagElems = [];\n(function() {\n\tfunction ranOrNot(e, t) {\n\t\tvar n = [];\n\t\ttypeof t == \"undefined\" && (t = e, e = 0);\n\t\tfor (; e < t; e++) n.push(e);\n\t\treturn n\n\t}\n\tArray.prototype.randomEach = function(t) {\n\t\tif (typeof t != \"function\") throw new TypeError;\n\t\tvar n = this.length,\n\t\tr = ranOrNot(n);\n\t\twhile (n) {\n\t\t\tvar i = Math.floor(Math.random() * n--);\n\t\t\tif (t(this[r[i]]) === !1) break;\n\t\t\tr[i] = r[n]\n\t\t}\n\t},\n\tArray.prototype.forEach || (Array.prototype.forEach = function(e) {\n\t\tvar t = this.length;\n\t\tif (typeof e != \"function\") throw new TypeError;\n\t\tvar n = arguments[1];\n\t\tfor (var r = 0; r < t; r++) r in this && e.call(n, this[r], r, this)\n\t})\n} )();\n\n\nfunction _shadowClone(e) {\n\tvar t = {};\n\tfor (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n\treturn t;\n}\nfunction attrStyle(elem,attr){\n    if(elem.style[attr]){\n        return elem.style[attr];\n    }else if(elem.currentStyle){\n        return elem.currentStyle[attr];\n    }else if(document.defaultView && document.defaultView.getComputedStyle){\n        attr=attr.replace(/([A-Z])/g,'-$1').toLowerCase();\n        return document.defaultView.getComputedStyle(elem,null).getPropertyValue(attr);\n    }else{\n        return null;\n    }\n}\n\n///////////////////////////\n\n\nfunction AutoLoader(fun, timeout) {\n\tif (typeof fun != \"function\") throw new TypeError;\n\tthis._generator = fun;\n\tthis._timeout = timeout;\n\tthis._context = arguments[2];\n\tthis._pool = [];\n}\nAutoLoader.prototype._load = function() {\n\tvar e = this;\n\tclearTimeout(this._loading);\n\tthis._loading = setTimeout(function() {\n\t\te._pool.push(e._generator.apply(e._context))\n\t},\n\tthis._timeout);\n\n}\nAutoLoader.prototype.get = function() {\n\tvar e;\n\tclearTimeout(this._loading);\n\tthis._pool.length > 0 ? e = this._pool.pop() : e = this._generator.apply(this._context);\n\treturn e;\n}\n\nfunction _cutGrid(tag, funcJudge) {\n\tfunction a(a) {\n\t\tfunction h(cutLength) {\n\t\t\tvar u, a = _shadowClone(cutLength);\n\t\t\tc++,\n\t\t\tu = c === l ? tag[cutType2.measure] - s: Math.floor(cutLength[cutType2.measure] * tag[cutType2.measure] / 100),\n\t\t\ta[cutType1.offset] = i + tag[cutType1.offset],\n\t\t\ta[cutType2.offset] = s + tag[cutType2.offset],\n\t\t\ta[cutType1.measure] = f,\n\t\t\ta[cutType2.measure] = u,\n\t\t\ta.colorPattern = tag.colorPattern,\n\t\t\tfuncJudge(a),\n\t\t\ts += u\n\t\t}\n\t\tvar f, l = a[cutType2.name].length,\n\t\tc = 0;\n\t\tu++,\n\t\tf = u === cutLength ? tag[cutType1.measure] - i: Math.floor(a[cutType1.measure] * tag[cutType1.measure] / 100),\n\t\ta.random === !1 ? a[cutType2.name].forEach(h) : a[cutType2.name].randomEach(h),\n\t\ts = 0,\n\t\ti += f\n\t}\n\t/*根据大块是否有rows属性，定义两种切割方式*/\n\tvar cutType1, cutType2;\n\ttag.rows ? (cutType1 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t},\n\tcutType2 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t}) : (cutType1 = {\n\t\tname: \"cols\",\n\t\tmeasure: \"width\",\n\t\toffset: \"left\"\n\t},\n\tcutType2 = {\n\t\tname: \"rows\",\n\t\tmeasure: \"height\",\n\t\toffset: \"top\"\n\t});\n\tvar i = 0,\n\ts = 0,\n\tcutLength = tag[cutType1.name].length,\n\tu = 0;\n\ttag.random === !1 ? tag[cutType1.name].forEach(a) : tag[cutType1.name].randomEach(a)\n}\n\nfunction _getGrids(tag) {\n\tvar t = [],\n\tcolorCount = 0,\n\tfontScale = .18,\n\tcolorArr = tag.colorPatterns[0];\n\t_cutGrid(tag.pageLayout,\n\t\tfunction(tag) {\n\t\t\t/*如果是新的大块，则colorPattern不存在，使用新的颜色。*/\n\t\t\ttag.colorPattern || (tag.colorPattern = colorArr[colorCount++]);\n\t\t\t/*tagConfig本来没有rows或cols，是大块。执行else部分*/\n\t\t\tif (tag.rows || tag.cols) {\n\t\t\t\t_cutGrid(tag, arguments.callee);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar s = tag.colorPattern,\n\t\t\t\to = s.backgrounds,\n\t\t\t\tu = o.length,\n\t\t\t\ta = s.fontColor;\n\t\t\t\ttag.fontSize = Math.floor(Math.sqrt(tag.width * tag.height) * fontScale);\n\t\t\t\ttag.backgroundColor = o[Math.floor(Math.random() * u)];\n\t\t\t\ttag.fontColor = a;\n\t\t\t\tt.push(tag);\n\t\t\t}\n\t\t}\n\t);\n\treturn t;\n}\n\nvar myReader = function(){\n\tfunction inits(o){\n\t\tthis.dom = H$(o.domId);\n\t\tthis.len = o.len;\n\t\tthis.block = o.block;\n\t\tthis.fillStage(H$(\"container\"));\n\t\tthis.clickEve();\n\t}\n\tinits.prototype={\n\t\tclickEve:function(){\n\t\t\tvar _this=this;\n\t\t\tvar dom = H$$(\"button\");\n\t\t\tdom[0].onclick=function(){\n\t\t\t\tH$(\"container\").innerHTML=\"\";\n\t\t\t\t_this.fillStage(H$(\"container\"));\n\t\t\t}\n\t\t},\n\t\treflowTagElem:function(dom, t,sw,sh) {\n\t\t\t\n\t\t\tdom.style.top = t.top*sh + \"px\";\n\t\t\tdom.style.left = t.left*sw + \"px\";\n\t\t\tdom.style.width = t.width*sw - 2 + \"px\";\n\t\t\tdom.style.height = t.height*sh - 2 + \"px\";\n\t\t\tdom.style.fontSize = t.fontSize*sw + \"px\";\n\t\t\tdom.style.color = t.fontColor;\n\t\t\tdom.style.backgroundColor = t.backgroundColor;\n\t\t\tdom.order = t.width*sw * t.height*sh;\n\t\t},\n\t\tfillStage:function(dom) {\n\t\t\tvar _this=this;\n\t\t\tvar data = _getGrids(window.tagConfig);\n\t\t\tdata.forEach(function(data) {\n\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\tdiv.className = \"tag\";\n\t\t\t\t_this.reflowTagElem(div, data,6,4);\n\t\t\t\tdom.appendChild(div);\n\t\t\t\ttagElems.push(div);\n\t\t\t});\n\t\t}\n\t}\n\treturn inits;\n}();\n\nvar myData = {\n\tdomId:\"container\"\n}\nnew myReader(myData);"},{"_content":"window.tagConfig = {\n\tareas: {\n\t\tcols_40_60: [{\n\t\t\twidth: 40,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 60,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_50_50: [{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_32_32_36: [{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 36,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}]\n\t}\n},\nwindow.tagConfig.pageLayout = {\n\ttop: 0,\n\tleft: 0,\n\twidth: 100,\n\theight: 100,\n\trandom: !1,\n\tcols: [{\n\t\twidth: 45,\n\t\trows: [{\n\t\t\trandom: !1,\n\t\t\theight: 100,\n\t\t\trows: [{\n\t\t\t\theight: 45,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 30,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 25,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tcols: [{\n\t\t\t\t\t\twidth: 35,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 100\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 15,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 60\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 35\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 25\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t},\n\t{\n\t\twidth: 55,\n\t\trandom: !1,\n\t\trows: [{\n\t\t\theight: 50,\n\t\t\tcols: [{\n\t\t\t\twidth: 45,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 30\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 55,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 28,\n\t\t\tcols: [{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 40\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 60,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 40,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_32_32_36\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 22,\n\t\t\tcols: [{\n\t\t\t\twidth: 35,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 20,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 36\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t}]\n},\nwindow.tagConfig.colorPatterns = [[{\n\tbackgrounds: [\"#ce5f52\", \"#e37063\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6c5d56\", \"#746760\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#c8b66a\", \"#dbc877\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6e96b1\", \"#82a8bf\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n}]];","source":"assets/demo/my_news_reader/js/tagConfig.js","raw":"window.tagConfig = {\n\tareas: {\n\t\tcols_40_60: [{\n\t\t\twidth: 40,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 60,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_50_50: [{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_32_32_36: [{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 36,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}]\n\t}\n},\nwindow.tagConfig.pageLayout = {\n\ttop: 0,\n\tleft: 0,\n\twidth: 100,\n\theight: 100,\n\trandom: !1,\n\tcols: [{\n\t\twidth: 45,\n\t\trows: [{\n\t\t\trandom: !1,\n\t\t\theight: 100,\n\t\t\trows: [{\n\t\t\t\theight: 45,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 30,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 25,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tcols: [{\n\t\t\t\t\t\twidth: 35,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 100\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 15,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 60\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 35\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 25\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t},\n\t{\n\t\twidth: 55,\n\t\trandom: !1,\n\t\trows: [{\n\t\t\theight: 50,\n\t\t\tcols: [{\n\t\t\t\twidth: 45,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 30\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 55,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 28,\n\t\t\tcols: [{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 40\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 60,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 40,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_32_32_36\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 22,\n\t\t\tcols: [{\n\t\t\t\twidth: 35,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 20,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 36\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t}]\n},\nwindow.tagConfig.colorPatterns = [[{\n\tbackgrounds: [\"#ce5f52\", \"#e37063\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6c5d56\", \"#746760\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#c8b66a\", \"#dbc877\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6e96b1\", \"#82a8bf\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n}]];","date":"2020-03-12T13:55:48.658Z","updated":"2020-03-12T13:55:48.658Z","path":"assets/demo/my_news_reader/js/tagConfig.js","layout":"false","title":"","comments":1,"_id":"ck7otizs8001k7gui19p2onv4","content":"window.tagConfig = {\n\tareas: {\n\t\tcols_40_60: [{\n\t\t\twidth: 40,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 60,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_50_50: [{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_32_32_36: [{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 36,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}]\n\t}\n},\nwindow.tagConfig.pageLayout = {\n\ttop: 0,\n\tleft: 0,\n\twidth: 100,\n\theight: 100,\n\trandom: !1,\n\tcols: [{\n\t\twidth: 45,\n\t\trows: [{\n\t\t\trandom: !1,\n\t\t\theight: 100,\n\t\t\trows: [{\n\t\t\t\theight: 45,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 30,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 25,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tcols: [{\n\t\t\t\t\t\twidth: 35,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 100\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 15,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 60\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 35\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 25\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t},\n\t{\n\t\twidth: 55,\n\t\trandom: !1,\n\t\trows: [{\n\t\t\theight: 50,\n\t\t\tcols: [{\n\t\t\t\twidth: 45,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 30\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 55,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 28,\n\t\t\tcols: [{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 40\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 60,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 40,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_32_32_36\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 22,\n\t\t\tcols: [{\n\t\t\t\twidth: 35,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 20,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 36\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t}]\n},\nwindow.tagConfig.colorPatterns = [[{\n\tbackgrounds: [\"#ce5f52\", \"#e37063\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6c5d56\", \"#746760\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#c8b66a\", \"#dbc877\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6e96b1\", \"#82a8bf\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n}]];","site":{"data":{}},"excerpt":"","more":"window.tagConfig = {\n\tareas: {\n\t\tcols_40_60: [{\n\t\t\twidth: 40,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 60,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_50_50: [{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 50,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}],\n\t\tcols_32_32_36: [{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 32,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\twidth: 36,\n\t\t\trows: [{\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}]\n\t}\n},\nwindow.tagConfig.pageLayout = {\n\ttop: 0,\n\tleft: 0,\n\twidth: 100,\n\theight: 100,\n\trandom: !1,\n\tcols: [{\n\t\twidth: 45,\n\t\trows: [{\n\t\t\trandom: !1,\n\t\t\theight: 100,\n\t\t\trows: [{\n\t\t\t\theight: 45,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 30,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\theight: 25,\n\t\t\t\tcols: [{\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tcols: [{\n\t\t\t\t\t\twidth: 35,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 100\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 30\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 15,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 60\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\trows: [{\n\t\t\t\t\t\t\theight: 35\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 25\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theight: 40\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t},\n\t{\n\t\twidth: 55,\n\t\trandom: !1,\n\t\trows: [{\n\t\t\theight: 50,\n\t\t\tcols: [{\n\t\t\t\twidth: 45,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 35,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 30\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 55,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 28,\n\t\t\tcols: [{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 30,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 40\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 60,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_40_60\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 40,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_50_50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50,\n\t\t\t\t\tcols: window.tagConfig.areas.cols_32_32_36\n\t\t\t\t}]\n\t\t\t}]\n\t\t},\n\t\t{\n\t\t\theight: 22,\n\t\t\tcols: [{\n\t\t\t\twidth: 35,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 100\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 20,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 32\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 36\n\t\t\t\t}]\n\t\t\t},\n\t\t\t{\n\t\t\t\twidth: 15,\n\t\t\t\trows: [{\n\t\t\t\t\theight: 50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\theight: 50\n\t\t\t\t}]\n\t\t\t}]\n\t\t}]\n\t}]\n},\nwindow.tagConfig.colorPatterns = [[{\n\tbackgrounds: [\"#ce5f52\", \"#e37063\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6c5d56\", \"#746760\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#c8b66a\", \"#dbc877\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n},\n{\n\tbackgrounds: [\"#6e96b1\", \"#82a8bf\"],\n\tfontColor: \"#FFF\",\n\tborderColor: \"#5c666f\"\n}]];"}],"Post":[{"layout":"post","title":"GraphQL vs REST","date":"2017-08-16T02:12:44.000Z","comments":1,"_content":"\n\n### GraphQL是什么\nGraphQL 是一门语言。 如果我们传授 GraphQL 语言给一款应用，这款应用就能够向支持 GraphQL 的后端数据服务声明式传达数据需求。\n为了让数据服务支持 GraphQL，我们需要实现一个运行时层并将它暴露给想要与服务通信的客户端。可以将这个添加到服务端的层简单地看作是一位 GraphQL 语言翻译员，或代表数据服务并会说 GraphQL 语言的代理。GraphQL 并不是一个存储引擎，所以它不能作为一个独立的解决方案。这就是我们不能有一个纯粹的 GraphQL 服务，而需要实现一个翻译运行时的原因。\n\n这个层可以用任何语言编写，它定义了一个通用的基于图的模板来发布它所代表的数据服务的功能。支持 GraphQL 的客户端可以在功能允许的范围内使用这种模版进行查询。这一策略可以将客户端与服务端分离，允许两者独立开发和扩展。\n\n一个 GraphQL 请求既可以是查询（读操作），也可以是修改（写操作）。不管是何种情形，请求均只是一个带有特定格式的简单字符串，GraphQL 服务器可以对其进行解析、执行、处理。在移动和 Web 应用中最常见的响应格式是 JSON 。\n\n### REST API 有什么错\nREST API 最大的问题是其天然倾向多端点。这造成客户端需要多次往返获取数据。\n\nREST API 通常由多个端点组成，每个端点代表一种资源。因此，当客户端需要多个资源时，它需要向 REST API 发起多个请求，才能获取到所需要的数据。\n\n在 REST API 中，是没有描述客户端请求的语言的。客户端无法控制服务器返回哪些数据。没有让客户端对返回数据进行控制的语言。更确切的说，客户端能使用的语言是很有限的。\n例如，有如下进行读取操作的 REST API：\n- GET /ResouceName - 从该资源获取包含所有记录的列表\n- GET /ResourceName/ResourceID - 通过 ID 获取某条特定记录\n\n例如，客户端是不能够指定从该资源的记录中选择哪些字段的。信息仅存在于提供 REST API 的服务中，该服务将始终返回所有字段，而不管客户端需要什么。借用 GraphQL 术语描述这个问题：超额获取(over-fetching) 没用的信息。这浪费了服务器和客户端的网络内存资源\n\nREST API 的另一个大问题就是版本控制了。如果你需要支持多版本，那你就需要为此创建多个新的端点。这会导致这些端点很难使用和维护，此外，还造成服务端出现很多冗余代码。\n\n上面列出的一些 REST API 带来的问题都是 GraphQL 试图解决的。这并不是 REST API 带来的全部问题，我也不打算说明 REST API 是什么不是什么。我只是在谈论一种最流行的基于资源的 HTTP 终点 API。这些 API 最终都会变成一种具有常规 REST 特性的端点和出于性能原因定制的特殊端点的组合。\n\n### GraphQL 如何实现其魔力\n在 GraphQL 背后有很多的概念和设计策略，这儿列举了一些最重要的：\n- GraphQL 模板是强类型的。要创建一套 GraphQL 模板，我们需要定义了一些带有类型的字段。这些类型可以是原始数据类型也可以是自定义的，在模板中一切均需要类型。丰富的类型系统带来了丰富的特性，如 API 自证，这让我们能够为客户端和服务端创建强大的工具。\n- GraphQL 以图的形式组织数据，数据自然形成图。如果你需要一个结构描述数据，图是一种不错的选择。GraphQL 运行时让我们能够使用与该数据的自然图结构匹配的图 API 来表示我们的数据。\n- GraphQL 具有表达数据需求声明性质。GraphQL 让客户端能够以一种声明性的语言描述其对数据的需求。这种声明性带来了一种围绕着 GraphQL 语言使用的心智模型，该模型与我们用自然语言思考数据需求的方式接近，让我们使用 GraphQL 时比使用其它方式更容易。\n最后一个概念是我为什么认为 GraphQL 是游戏规则改变者的原因。\n\n这些全是抽象概念。让我们深入到细节中。\n\n为了解决多次往返请求的问题，GraphQL 让响应服务器变成一个端点。本质上，GraphQL 把自定义端点这一思想发挥到了极致，它让这个端点能够回复所有数据问题。\n\n伴随着单个端点这一概念的另一个重要概念是需要一种强大的客户端请求描述语言与自定义的单个端点进行通信。缺少客户端请求描述语言，单个端点是没有意义的。它需要一种语言解析自定义请求以及根据自定义请求返回数据。\n\n拥有一门客户端请求描述语言意味这客户端能够对请求进行控制。客户端能够精确表达它们需要什么，服务端也能精准回复客户端需要的。这就解决了超额获取的问题。\n\n当涉及到版本时，GraphQL 提供了一种有趣的解决方式。版本能够被完全避免。基本上，我们只需要在保留老的字段的基础上添加新字段即可，因为我们用的是图，我们能很灵活的在图上添加更多节点。因此，我们可以在图上留下旧的 API，并引入新的 API，而不会将其标记为新版本。API 只是多了更多节点。\n\n这点对于移动端尤为重用，因为我们无法充值这些移动端使用的版本。一经安装，移动端应用可能数年都使用老版本 API 。对于 Web，我们可以通过发布新代码简单的控制 API　版本，对于移动端应用，这点很难做到。\n\n还没有完全相信？ 结合实例一对一对比 GraphQL 和 REST 怎么样？\n### REST 风格 API vs GraphQL API —— 案例\n我们假设我们是开发者，负责构建闪亮全新的用户界面，用来展示星球大战影片和角色。\n\n我们要构建的第一份 UI 很简单：一个显示单个星球大战角色的信息视图。例如，达斯·维德以及电影中出场的其他角色。这个视图需要显示角色的姓名、出生年份、母星名、以及出场的所有影片中出现的头衔。\n\n听起来很简单，我们实际上已经需要处理三种不同的资源：人物、星球和电影。资源之间的关系很简单，任何人都很容易就猜出这里的数据组成。\n\n此 UI 的 JSON 数据可能类似于：\n```\n{\n  \"data\": {\n    \"person\": {\n      \"name\": \"Darth Vader\",\n      \"birthYear\": \"41.9BBY\",\n      \"planet\": {\n        \"name\": \"Tatooine\"\n      },\n      \"films\": [\n        { \"title\": \"A New Hope\" },\n        { \"title\": \"The Empire Strikes Back\" },\n        { \"title\": \"Return of the Jedi\" },\n        { \"title\": \"Revenge of the Sith\" }\n      ]\n    }\n  }\n}\n```\n假设数据服务按照上面的结构返回数据给我们。我们有一种可行的方式即使用 React.js 来展现视图：\n```\n// The Container Component:\n<PersonProfile person={data.person} ></PersonProfile>\n\n// The PersonProfile Component:\nName: {person.name}\nBirth Year: {person.birthYear}\nPlanet: {person.planet.name}\nFilms: {person.films.map(film => film.title)}\n```\n这是一个简单例子，此外我们关于星球大战的经验也能帮我们一点忙，我们可以很清楚的明白 UI 和数据之间的关系。与我们想象一致，UI 是使用了 JSON 数据对象中的全部的键。\n\n让我们来看看如何通过 REST 风格 API 获取这些数据。\n\n我们需要单个角色的信息，假设我们知道这个角色的 ID，REST 风格的 API 倾向于这样输出这些信息：\n```\nGET - /people/{id}\n```\n这个请求将会返回角色的姓名、出生年份以及一些其它信息给我们。一个规范的 REST 风格 API 将会返回给我们角色星球的 ID 以及该角色出现过的所有影片的 ID 组成的数组。\n\n这个请求以 JSON 格式返回的响应类似于：\n```\n{\n  \"name\": \"Darth Vader\",\n  \"birthYear\": \"41.9BBY\",\n  \"planetId\": 1\n  \"filmIds\": [1, 2, 3, 6],\n  *** 其它信息我们不需要 ***\n}\n```\n然后为了获取星球名称，我们发起请求：\n```\nGET - /planets/1\n```\n接着为了获取影片中的头衔，我们发起请求：\n```\nGET - /films/1\nGET - /films/2\nGET - /films/3\nGET - /films/6\n```\n当从服务器接受到所有的六个数据后，我们才能将其组合并生成满足视图需要的数据。\n\n除了有需要六次往返才能获取到满足一个简单 UI 需求的数据这一事实外，这种方式并无不可。我们阐明了如何获取数据，以及如何处理数据使其满足视图需要。\n\n如果你想确认我说的你可以自己动手尝试。有一个部署在 swapi.co/ 上的 REST API 服务提供了星球大战的数据，点进去，在里面尝试构造角色数据。数据的键名可能不同，但 API 端点是一致的。你同样需要进行六次 API 调用。同样，你不得不超额获取视图不需要的信息。\n\n当然，这只是 REST API 的一个实现方式，可能有更好的实现让生成视图更简单。例如，如果 API 服务支持资源嵌套并能理解角色和影片之间的关系，我们能够通过这种方式获取影片数据：\n```\nGET - /people/{id}/films\n```\n然而，一个纯粹的 REST API 服务很难实现这点。我们需要让后端工程师为我们创建自定义端点。这造成 REST API 规模不断增长这一事实 —— 为了满足不断增长的客户端的需要，我们不断添加自定义端点。管理这些自定义端点很难。\n\n让我们来看一看 GraphQL 策略。GraphQL 在服务端拥抱自定义端点思想并把它发展到极致。服务将只是一个端点，通道变得没有意义。如果我们使用 HTTP 实现，HTTP 方法将失去意义。假设我们有一个单一的 GraphQL 端点，它的 HTTP 地址是 /graphql\n\n因为我们希望一次往返获取需要的数据，所以我们需要明明白白告诉服务器我们需要哪些数据。我们通过 GraphQL 进行查询：\n```\nGET or POST - /graphql?query={...}\n```\nGraphQL 查询只是字符串，但它将包含我们需要的全部数据。这就是声明的强大之处。\n\n英语中，我们这样阐述数据需求：**我们需要角色名、出生年份、星球名和在所有出现过的影片中的头衔**。通过 GraphQL，我们进行如下转换：\n```\n{\n  person(ID: ...) {\n    name,\n    birthYear,\n    planet {\n      name\n    },\n    films {\n      title\n    }\n  }\n}\n```\n再细读一次英语表述的需求并与 GraphQL 查询进行对比。它们不能再更接近了。现在，将 GraphQL 查询与我们最开始用到的原始 JSON 数据进行对比。GraphQL 查询完全与 JSON 数据结构相对应，不过排除所有是值的部分。如果我们仿照问题与答案关系来考虑这中情况，那问题就是没有具体答案的答案原语。\n如果答案是：\n> 离太阳最近的星球是水星。\n一种好的提问方式是保留原话只去掉提问部分：\n> 哪个星球里太阳最近？\n这种关系同样适用于 GraphQL 查询。拿着 JSON 格式的响应数据，移除所有是答案的部分（作为值的对象），最后你得到了一个非常适合代表关于 JSON 响应问题的 GraphQL 查询。\n现在，将 GraphQL 查询和与我们展示数据的声明性 React UI 对比。所有出现在 GraphQL 查询中的数据都出现在了 UI 中。所有出现在 UI 中的数据都出现在了 GraphQL 查询中。\n\n这就是 GraphQL 强大的心智模型。UI 知晓它所需要的确切数据，提取需要的数据也很容易。编写 GraphQL 查询变成一个从 UI 中提取作为变量这一简单的工作。\n\n将模型进行反转，它仍然很强大。如果我们知道了 GraphQL 查询，我们同样知道如何在 UI 中使用相应数据。我们不需要分析响应数据就能使用它，也不需要的这些 API 的文档。这一切都是内建的。\n\n获取星球大战数据的 GraphQL 托管在 github.com/graphql/swa…。点击进去并尝试构造角色数据。只有一点点不同，我们之后会谈论，以下是可以从这个 API 中获取视图所需要数据的正式查询（使用达斯·维德举例）\n```\n{\n  person(personID: 4) {\n    name,\n    birthYear,\n    homeworld {\n      name\n    },\n    filmConnection {\n      films {\n        title\n      }\n    }\n  }\n}\n```\n这个请求返回的我们的响应数据结构十分接近视图用到的，记住，这些数据是我们通过一次往返获得的。\n### GraphQL 灵活性带来的开销\n完美的解决方案是不存在的。GraphQL 带来了灵活性，也带来了一些明确的问题和考量。\n\nGraphQL更容易的造成一个安全隐患是资源耗尽型攻击（拒绝服务攻击）。GraphQL 服务器可能会受到伴随着极其复杂的查询的攻击，造成服务器资源耗尽。很容易就能构造一个深度嵌套关系链（用户 -> 好友 -> 好友的好友。) 或者多次通过字段别名请求同一字段的查询。资源耗尽型攻击并没有限定 GraphQL，但是在使用 GraphQL 时，我们要特别小心。\n\n这儿有一些缓解措施我们可以用上。我们可以进行一些高级查询的开销分析，对单个用户请求的数据量做某种限制。我们也可以实现一种机制对需要很长时间处理的请求进行超时处理。此外，考虑到 GraphQL 就只是一个处理层，我们能在 GraphQL 之下的更底层进行速率限制。\n\n如果我们尝试保护的 GraphQL API 端点并不是公开的，仅供我们私有的客户端（web、移动）内部访问，我们能够使用白名单策略并预先审核服务器能够处理的查询。客户端仅能通过唯一查询标识码向服务器发起审核过的查询。Facebook 似乎就采用了这种策略。\n\n当使用 GraphQL 时，我们还需要考虑到认证和授权。我们是在 GraphQL 解析请求之前，之后还是之间处理它们呢？\n\n为了回答这个问题，需要将 GraphQL 想象成你一种位于你的后端数据请求逻辑顶层的 DSL（领域限定语言）。它只是一个能够被我们放在客户端与实际数据服务（多个）之间的处理层。\n\n将认证和授权当成另一个处理层。GraphQL 与认证和授权逻辑的具体实现关系不大。它的意义不在这儿。但是如果我们把这些层放在 GraphQL 之后，我们就可以在 GraphQL 层使用访问令牌连通客户端与执行逻辑。这和我们在 REST 风格 API 处理认证和授权类似。\n\n另一件因为 GraphQL 而变得更具挑战性的任务是客户端数据缓存。REST 风格的 API 因其类似目录更容易进行缓存处理。REST API 通过访问路径获取数据，我们能够使用访问路径作缓存键。\n\n对于 GraphQL，我们能够采用类似的策略使用查询字段作为响应数据的缓存键。但是这种方式有限制，效率低下，还容易造成数据一致性方面的问题。原因是多个 GraphQL 查询的结果很容易重叠，而这种缓存策略并没有考虑到这种重叠。\n\n这个问题有一个很好的解决方案。一个图的查询意味这一个图的缓存。如果我们将一个 GraphQL 查询的响应数据正则化为一个平铺的记录集合，为每个记录设置一个全局唯一 ID，我们就能够只缓存这些记录而不用缓存整个响应了。\n\n这种处理并不容易。这样导致一些记录指向另一些记录，导致我们可能得管理一个环形图，导致在写入和读取缓存时我们需要进行遍历，导致我们需要编写一个层来处理缓存逻辑。但是，这种方法总体上比基于响应的缓存更高效。Relay.js 就是一个采用这种缓存策略并在内部进行自动管理的框架。\n\n对于 GraphQL 我们最需要关心的问题可能是被普遍称作 N+1 SQL 查询的问题了。GraphQL 的字段查询被设计成独立的函数，从数据库获取这些字段可能造成每个字段都需要一个数据库查询。\n\n简单 REST 风格 API 端点的逻辑，易分析，易检测，可以优化 SQL 查询语句来解决 N+1 问题。而 GraphQL 需要动态处理字段，这点不容易做到。幸运的是 Facebook 正在研发一个处理类似问题的可能的解决方案：DataLoader。\n\n如名字暗示，DataLoader 是一款能让我们从数据库读取数据并让数据能被 GraphQL 处理函数使用的工具。我们使用 DataLoader，而不是直接通过 SQL 查询从数据库获取数据，将 DataLoader 作为代理以减少我们实际需要发送给数据库的 SQL 查询。\n\nDataLoader 使用批处理和缓存的组合来实现。如果同一个客户端请求会造成多次请求数据库，DataLoader 会整合这些问题并从数据库批量拉取请求数据。DataLoader 会同时缓存这些数据，当有后续请求需要同样资源时可以直接从缓存获取到。\n\n\n\n\n","source":"_posts/REST-GraphQL.md","raw":"---\nlayout: post\ntitle: \"GraphQL vs REST\"\ndate: 2017-08-16 10:12:44\ncomments: true\ntags: \n\t- Graph \n\t- REST\n---\n\n\n### GraphQL是什么\nGraphQL 是一门语言。 如果我们传授 GraphQL 语言给一款应用，这款应用就能够向支持 GraphQL 的后端数据服务声明式传达数据需求。\n为了让数据服务支持 GraphQL，我们需要实现一个运行时层并将它暴露给想要与服务通信的客户端。可以将这个添加到服务端的层简单地看作是一位 GraphQL 语言翻译员，或代表数据服务并会说 GraphQL 语言的代理。GraphQL 并不是一个存储引擎，所以它不能作为一个独立的解决方案。这就是我们不能有一个纯粹的 GraphQL 服务，而需要实现一个翻译运行时的原因。\n\n这个层可以用任何语言编写，它定义了一个通用的基于图的模板来发布它所代表的数据服务的功能。支持 GraphQL 的客户端可以在功能允许的范围内使用这种模版进行查询。这一策略可以将客户端与服务端分离，允许两者独立开发和扩展。\n\n一个 GraphQL 请求既可以是查询（读操作），也可以是修改（写操作）。不管是何种情形，请求均只是一个带有特定格式的简单字符串，GraphQL 服务器可以对其进行解析、执行、处理。在移动和 Web 应用中最常见的响应格式是 JSON 。\n\n### REST API 有什么错\nREST API 最大的问题是其天然倾向多端点。这造成客户端需要多次往返获取数据。\n\nREST API 通常由多个端点组成，每个端点代表一种资源。因此，当客户端需要多个资源时，它需要向 REST API 发起多个请求，才能获取到所需要的数据。\n\n在 REST API 中，是没有描述客户端请求的语言的。客户端无法控制服务器返回哪些数据。没有让客户端对返回数据进行控制的语言。更确切的说，客户端能使用的语言是很有限的。\n例如，有如下进行读取操作的 REST API：\n- GET /ResouceName - 从该资源获取包含所有记录的列表\n- GET /ResourceName/ResourceID - 通过 ID 获取某条特定记录\n\n例如，客户端是不能够指定从该资源的记录中选择哪些字段的。信息仅存在于提供 REST API 的服务中，该服务将始终返回所有字段，而不管客户端需要什么。借用 GraphQL 术语描述这个问题：超额获取(over-fetching) 没用的信息。这浪费了服务器和客户端的网络内存资源\n\nREST API 的另一个大问题就是版本控制了。如果你需要支持多版本，那你就需要为此创建多个新的端点。这会导致这些端点很难使用和维护，此外，还造成服务端出现很多冗余代码。\n\n上面列出的一些 REST API 带来的问题都是 GraphQL 试图解决的。这并不是 REST API 带来的全部问题，我也不打算说明 REST API 是什么不是什么。我只是在谈论一种最流行的基于资源的 HTTP 终点 API。这些 API 最终都会变成一种具有常规 REST 特性的端点和出于性能原因定制的特殊端点的组合。\n\n### GraphQL 如何实现其魔力\n在 GraphQL 背后有很多的概念和设计策略，这儿列举了一些最重要的：\n- GraphQL 模板是强类型的。要创建一套 GraphQL 模板，我们需要定义了一些带有类型的字段。这些类型可以是原始数据类型也可以是自定义的，在模板中一切均需要类型。丰富的类型系统带来了丰富的特性，如 API 自证，这让我们能够为客户端和服务端创建强大的工具。\n- GraphQL 以图的形式组织数据，数据自然形成图。如果你需要一个结构描述数据，图是一种不错的选择。GraphQL 运行时让我们能够使用与该数据的自然图结构匹配的图 API 来表示我们的数据。\n- GraphQL 具有表达数据需求声明性质。GraphQL 让客户端能够以一种声明性的语言描述其对数据的需求。这种声明性带来了一种围绕着 GraphQL 语言使用的心智模型，该模型与我们用自然语言思考数据需求的方式接近，让我们使用 GraphQL 时比使用其它方式更容易。\n最后一个概念是我为什么认为 GraphQL 是游戏规则改变者的原因。\n\n这些全是抽象概念。让我们深入到细节中。\n\n为了解决多次往返请求的问题，GraphQL 让响应服务器变成一个端点。本质上，GraphQL 把自定义端点这一思想发挥到了极致，它让这个端点能够回复所有数据问题。\n\n伴随着单个端点这一概念的另一个重要概念是需要一种强大的客户端请求描述语言与自定义的单个端点进行通信。缺少客户端请求描述语言，单个端点是没有意义的。它需要一种语言解析自定义请求以及根据自定义请求返回数据。\n\n拥有一门客户端请求描述语言意味这客户端能够对请求进行控制。客户端能够精确表达它们需要什么，服务端也能精准回复客户端需要的。这就解决了超额获取的问题。\n\n当涉及到版本时，GraphQL 提供了一种有趣的解决方式。版本能够被完全避免。基本上，我们只需要在保留老的字段的基础上添加新字段即可，因为我们用的是图，我们能很灵活的在图上添加更多节点。因此，我们可以在图上留下旧的 API，并引入新的 API，而不会将其标记为新版本。API 只是多了更多节点。\n\n这点对于移动端尤为重用，因为我们无法充值这些移动端使用的版本。一经安装，移动端应用可能数年都使用老版本 API 。对于 Web，我们可以通过发布新代码简单的控制 API　版本，对于移动端应用，这点很难做到。\n\n还没有完全相信？ 结合实例一对一对比 GraphQL 和 REST 怎么样？\n### REST 风格 API vs GraphQL API —— 案例\n我们假设我们是开发者，负责构建闪亮全新的用户界面，用来展示星球大战影片和角色。\n\n我们要构建的第一份 UI 很简单：一个显示单个星球大战角色的信息视图。例如，达斯·维德以及电影中出场的其他角色。这个视图需要显示角色的姓名、出生年份、母星名、以及出场的所有影片中出现的头衔。\n\n听起来很简单，我们实际上已经需要处理三种不同的资源：人物、星球和电影。资源之间的关系很简单，任何人都很容易就猜出这里的数据组成。\n\n此 UI 的 JSON 数据可能类似于：\n```\n{\n  \"data\": {\n    \"person\": {\n      \"name\": \"Darth Vader\",\n      \"birthYear\": \"41.9BBY\",\n      \"planet\": {\n        \"name\": \"Tatooine\"\n      },\n      \"films\": [\n        { \"title\": \"A New Hope\" },\n        { \"title\": \"The Empire Strikes Back\" },\n        { \"title\": \"Return of the Jedi\" },\n        { \"title\": \"Revenge of the Sith\" }\n      ]\n    }\n  }\n}\n```\n假设数据服务按照上面的结构返回数据给我们。我们有一种可行的方式即使用 React.js 来展现视图：\n```\n// The Container Component:\n<PersonProfile person={data.person} ></PersonProfile>\n\n// The PersonProfile Component:\nName: {person.name}\nBirth Year: {person.birthYear}\nPlanet: {person.planet.name}\nFilms: {person.films.map(film => film.title)}\n```\n这是一个简单例子，此外我们关于星球大战的经验也能帮我们一点忙，我们可以很清楚的明白 UI 和数据之间的关系。与我们想象一致，UI 是使用了 JSON 数据对象中的全部的键。\n\n让我们来看看如何通过 REST 风格 API 获取这些数据。\n\n我们需要单个角色的信息，假设我们知道这个角色的 ID，REST 风格的 API 倾向于这样输出这些信息：\n```\nGET - /people/{id}\n```\n这个请求将会返回角色的姓名、出生年份以及一些其它信息给我们。一个规范的 REST 风格 API 将会返回给我们角色星球的 ID 以及该角色出现过的所有影片的 ID 组成的数组。\n\n这个请求以 JSON 格式返回的响应类似于：\n```\n{\n  \"name\": \"Darth Vader\",\n  \"birthYear\": \"41.9BBY\",\n  \"planetId\": 1\n  \"filmIds\": [1, 2, 3, 6],\n  *** 其它信息我们不需要 ***\n}\n```\n然后为了获取星球名称，我们发起请求：\n```\nGET - /planets/1\n```\n接着为了获取影片中的头衔，我们发起请求：\n```\nGET - /films/1\nGET - /films/2\nGET - /films/3\nGET - /films/6\n```\n当从服务器接受到所有的六个数据后，我们才能将其组合并生成满足视图需要的数据。\n\n除了有需要六次往返才能获取到满足一个简单 UI 需求的数据这一事实外，这种方式并无不可。我们阐明了如何获取数据，以及如何处理数据使其满足视图需要。\n\n如果你想确认我说的你可以自己动手尝试。有一个部署在 swapi.co/ 上的 REST API 服务提供了星球大战的数据，点进去，在里面尝试构造角色数据。数据的键名可能不同，但 API 端点是一致的。你同样需要进行六次 API 调用。同样，你不得不超额获取视图不需要的信息。\n\n当然，这只是 REST API 的一个实现方式，可能有更好的实现让生成视图更简单。例如，如果 API 服务支持资源嵌套并能理解角色和影片之间的关系，我们能够通过这种方式获取影片数据：\n```\nGET - /people/{id}/films\n```\n然而，一个纯粹的 REST API 服务很难实现这点。我们需要让后端工程师为我们创建自定义端点。这造成 REST API 规模不断增长这一事实 —— 为了满足不断增长的客户端的需要，我们不断添加自定义端点。管理这些自定义端点很难。\n\n让我们来看一看 GraphQL 策略。GraphQL 在服务端拥抱自定义端点思想并把它发展到极致。服务将只是一个端点，通道变得没有意义。如果我们使用 HTTP 实现，HTTP 方法将失去意义。假设我们有一个单一的 GraphQL 端点，它的 HTTP 地址是 /graphql\n\n因为我们希望一次往返获取需要的数据，所以我们需要明明白白告诉服务器我们需要哪些数据。我们通过 GraphQL 进行查询：\n```\nGET or POST - /graphql?query={...}\n```\nGraphQL 查询只是字符串，但它将包含我们需要的全部数据。这就是声明的强大之处。\n\n英语中，我们这样阐述数据需求：**我们需要角色名、出生年份、星球名和在所有出现过的影片中的头衔**。通过 GraphQL，我们进行如下转换：\n```\n{\n  person(ID: ...) {\n    name,\n    birthYear,\n    planet {\n      name\n    },\n    films {\n      title\n    }\n  }\n}\n```\n再细读一次英语表述的需求并与 GraphQL 查询进行对比。它们不能再更接近了。现在，将 GraphQL 查询与我们最开始用到的原始 JSON 数据进行对比。GraphQL 查询完全与 JSON 数据结构相对应，不过排除所有是值的部分。如果我们仿照问题与答案关系来考虑这中情况，那问题就是没有具体答案的答案原语。\n如果答案是：\n> 离太阳最近的星球是水星。\n一种好的提问方式是保留原话只去掉提问部分：\n> 哪个星球里太阳最近？\n这种关系同样适用于 GraphQL 查询。拿着 JSON 格式的响应数据，移除所有是答案的部分（作为值的对象），最后你得到了一个非常适合代表关于 JSON 响应问题的 GraphQL 查询。\n现在，将 GraphQL 查询和与我们展示数据的声明性 React UI 对比。所有出现在 GraphQL 查询中的数据都出现在了 UI 中。所有出现在 UI 中的数据都出现在了 GraphQL 查询中。\n\n这就是 GraphQL 强大的心智模型。UI 知晓它所需要的确切数据，提取需要的数据也很容易。编写 GraphQL 查询变成一个从 UI 中提取作为变量这一简单的工作。\n\n将模型进行反转，它仍然很强大。如果我们知道了 GraphQL 查询，我们同样知道如何在 UI 中使用相应数据。我们不需要分析响应数据就能使用它，也不需要的这些 API 的文档。这一切都是内建的。\n\n获取星球大战数据的 GraphQL 托管在 github.com/graphql/swa…。点击进去并尝试构造角色数据。只有一点点不同，我们之后会谈论，以下是可以从这个 API 中获取视图所需要数据的正式查询（使用达斯·维德举例）\n```\n{\n  person(personID: 4) {\n    name,\n    birthYear,\n    homeworld {\n      name\n    },\n    filmConnection {\n      films {\n        title\n      }\n    }\n  }\n}\n```\n这个请求返回的我们的响应数据结构十分接近视图用到的，记住，这些数据是我们通过一次往返获得的。\n### GraphQL 灵活性带来的开销\n完美的解决方案是不存在的。GraphQL 带来了灵活性，也带来了一些明确的问题和考量。\n\nGraphQL更容易的造成一个安全隐患是资源耗尽型攻击（拒绝服务攻击）。GraphQL 服务器可能会受到伴随着极其复杂的查询的攻击，造成服务器资源耗尽。很容易就能构造一个深度嵌套关系链（用户 -> 好友 -> 好友的好友。) 或者多次通过字段别名请求同一字段的查询。资源耗尽型攻击并没有限定 GraphQL，但是在使用 GraphQL 时，我们要特别小心。\n\n这儿有一些缓解措施我们可以用上。我们可以进行一些高级查询的开销分析，对单个用户请求的数据量做某种限制。我们也可以实现一种机制对需要很长时间处理的请求进行超时处理。此外，考虑到 GraphQL 就只是一个处理层，我们能在 GraphQL 之下的更底层进行速率限制。\n\n如果我们尝试保护的 GraphQL API 端点并不是公开的，仅供我们私有的客户端（web、移动）内部访问，我们能够使用白名单策略并预先审核服务器能够处理的查询。客户端仅能通过唯一查询标识码向服务器发起审核过的查询。Facebook 似乎就采用了这种策略。\n\n当使用 GraphQL 时，我们还需要考虑到认证和授权。我们是在 GraphQL 解析请求之前，之后还是之间处理它们呢？\n\n为了回答这个问题，需要将 GraphQL 想象成你一种位于你的后端数据请求逻辑顶层的 DSL（领域限定语言）。它只是一个能够被我们放在客户端与实际数据服务（多个）之间的处理层。\n\n将认证和授权当成另一个处理层。GraphQL 与认证和授权逻辑的具体实现关系不大。它的意义不在这儿。但是如果我们把这些层放在 GraphQL 之后，我们就可以在 GraphQL 层使用访问令牌连通客户端与执行逻辑。这和我们在 REST 风格 API 处理认证和授权类似。\n\n另一件因为 GraphQL 而变得更具挑战性的任务是客户端数据缓存。REST 风格的 API 因其类似目录更容易进行缓存处理。REST API 通过访问路径获取数据，我们能够使用访问路径作缓存键。\n\n对于 GraphQL，我们能够采用类似的策略使用查询字段作为响应数据的缓存键。但是这种方式有限制，效率低下，还容易造成数据一致性方面的问题。原因是多个 GraphQL 查询的结果很容易重叠，而这种缓存策略并没有考虑到这种重叠。\n\n这个问题有一个很好的解决方案。一个图的查询意味这一个图的缓存。如果我们将一个 GraphQL 查询的响应数据正则化为一个平铺的记录集合，为每个记录设置一个全局唯一 ID，我们就能够只缓存这些记录而不用缓存整个响应了。\n\n这种处理并不容易。这样导致一些记录指向另一些记录，导致我们可能得管理一个环形图，导致在写入和读取缓存时我们需要进行遍历，导致我们需要编写一个层来处理缓存逻辑。但是，这种方法总体上比基于响应的缓存更高效。Relay.js 就是一个采用这种缓存策略并在内部进行自动管理的框架。\n\n对于 GraphQL 我们最需要关心的问题可能是被普遍称作 N+1 SQL 查询的问题了。GraphQL 的字段查询被设计成独立的函数，从数据库获取这些字段可能造成每个字段都需要一个数据库查询。\n\n简单 REST 风格 API 端点的逻辑，易分析，易检测，可以优化 SQL 查询语句来解决 N+1 问题。而 GraphQL 需要动态处理字段，这点不容易做到。幸运的是 Facebook 正在研发一个处理类似问题的可能的解决方案：DataLoader。\n\n如名字暗示，DataLoader 是一款能让我们从数据库读取数据并让数据能被 GraphQL 处理函数使用的工具。我们使用 DataLoader，而不是直接通过 SQL 查询从数据库获取数据，将 DataLoader 作为代理以减少我们实际需要发送给数据库的 SQL 查询。\n\nDataLoader 使用批处理和缓存的组合来实现。如果同一个客户端请求会造成多次请求数据库，DataLoader 会整合这些问题并从数据库批量拉取请求数据。DataLoader 会同时缓存这些数据，当有后续请求需要同样资源时可以直接从缓存获取到。\n\n\n\n\n","slug":"REST-GraphQL","published":1,"updated":"2020-03-12T13:55:48.638Z","photos":[],"link":"","_id":"ck7otizpt00017guitxxxh6wr","content":"<h3 id=\"GraphQL是什么\"><a href=\"#GraphQL是什么\" class=\"headerlink\" title=\"GraphQL是什么\"></a>GraphQL是什么</h3><p>GraphQL 是一门语言。 如果我们传授 GraphQL 语言给一款应用，这款应用就能够向支持 GraphQL 的后端数据服务声明式传达数据需求。<br>为了让数据服务支持 GraphQL，我们需要实现一个运行时层并将它暴露给想要与服务通信的客户端。可以将这个添加到服务端的层简单地看作是一位 GraphQL 语言翻译员，或代表数据服务并会说 GraphQL 语言的代理。GraphQL 并不是一个存储引擎，所以它不能作为一个独立的解决方案。这就是我们不能有一个纯粹的 GraphQL 服务，而需要实现一个翻译运行时的原因。</p>\n<p>这个层可以用任何语言编写，它定义了一个通用的基于图的模板来发布它所代表的数据服务的功能。支持 GraphQL 的客户端可以在功能允许的范围内使用这种模版进行查询。这一策略可以将客户端与服务端分离，允许两者独立开发和扩展。</p>\n<p>一个 GraphQL 请求既可以是查询（读操作），也可以是修改（写操作）。不管是何种情形，请求均只是一个带有特定格式的简单字符串，GraphQL 服务器可以对其进行解析、执行、处理。在移动和 Web 应用中最常见的响应格式是 JSON 。</p>\n<h3 id=\"REST-API-有什么错\"><a href=\"#REST-API-有什么错\" class=\"headerlink\" title=\"REST API 有什么错\"></a>REST API 有什么错</h3><p>REST API 最大的问题是其天然倾向多端点。这造成客户端需要多次往返获取数据。</p>\n<p>REST API 通常由多个端点组成，每个端点代表一种资源。因此，当客户端需要多个资源时，它需要向 REST API 发起多个请求，才能获取到所需要的数据。</p>\n<p>在 REST API 中，是没有描述客户端请求的语言的。客户端无法控制服务器返回哪些数据。没有让客户端对返回数据进行控制的语言。更确切的说，客户端能使用的语言是很有限的。<br>例如，有如下进行读取操作的 REST API：</p>\n<ul>\n<li>GET /ResouceName - 从该资源获取包含所有记录的列表</li>\n<li>GET /ResourceName/ResourceID - 通过 ID 获取某条特定记录</li>\n</ul>\n<p>例如，客户端是不能够指定从该资源的记录中选择哪些字段的。信息仅存在于提供 REST API 的服务中，该服务将始终返回所有字段，而不管客户端需要什么。借用 GraphQL 术语描述这个问题：超额获取(over-fetching) 没用的信息。这浪费了服务器和客户端的网络内存资源</p>\n<p>REST API 的另一个大问题就是版本控制了。如果你需要支持多版本，那你就需要为此创建多个新的端点。这会导致这些端点很难使用和维护，此外，还造成服务端出现很多冗余代码。</p>\n<p>上面列出的一些 REST API 带来的问题都是 GraphQL 试图解决的。这并不是 REST API 带来的全部问题，我也不打算说明 REST API 是什么不是什么。我只是在谈论一种最流行的基于资源的 HTTP 终点 API。这些 API 最终都会变成一种具有常规 REST 特性的端点和出于性能原因定制的特殊端点的组合。</p>\n<h3 id=\"GraphQL-如何实现其魔力\"><a href=\"#GraphQL-如何实现其魔力\" class=\"headerlink\" title=\"GraphQL 如何实现其魔力\"></a>GraphQL 如何实现其魔力</h3><p>在 GraphQL 背后有很多的概念和设计策略，这儿列举了一些最重要的：</p>\n<ul>\n<li>GraphQL 模板是强类型的。要创建一套 GraphQL 模板，我们需要定义了一些带有类型的字段。这些类型可以是原始数据类型也可以是自定义的，在模板中一切均需要类型。丰富的类型系统带来了丰富的特性，如 API 自证，这让我们能够为客户端和服务端创建强大的工具。</li>\n<li>GraphQL 以图的形式组织数据，数据自然形成图。如果你需要一个结构描述数据，图是一种不错的选择。GraphQL 运行时让我们能够使用与该数据的自然图结构匹配的图 API 来表示我们的数据。</li>\n<li>GraphQL 具有表达数据需求声明性质。GraphQL 让客户端能够以一种声明性的语言描述其对数据的需求。这种声明性带来了一种围绕着 GraphQL 语言使用的心智模型，该模型与我们用自然语言思考数据需求的方式接近，让我们使用 GraphQL 时比使用其它方式更容易。<br>最后一个概念是我为什么认为 GraphQL 是游戏规则改变者的原因。</li>\n</ul>\n<p>这些全是抽象概念。让我们深入到细节中。</p>\n<p>为了解决多次往返请求的问题，GraphQL 让响应服务器变成一个端点。本质上，GraphQL 把自定义端点这一思想发挥到了极致，它让这个端点能够回复所有数据问题。</p>\n<p>伴随着单个端点这一概念的另一个重要概念是需要一种强大的客户端请求描述语言与自定义的单个端点进行通信。缺少客户端请求描述语言，单个端点是没有意义的。它需要一种语言解析自定义请求以及根据自定义请求返回数据。</p>\n<p>拥有一门客户端请求描述语言意味这客户端能够对请求进行控制。客户端能够精确表达它们需要什么，服务端也能精准回复客户端需要的。这就解决了超额获取的问题。</p>\n<p>当涉及到版本时，GraphQL 提供了一种有趣的解决方式。版本能够被完全避免。基本上，我们只需要在保留老的字段的基础上添加新字段即可，因为我们用的是图，我们能很灵活的在图上添加更多节点。因此，我们可以在图上留下旧的 API，并引入新的 API，而不会将其标记为新版本。API 只是多了更多节点。</p>\n<p>这点对于移动端尤为重用，因为我们无法充值这些移动端使用的版本。一经安装，移动端应用可能数年都使用老版本 API 。对于 Web，我们可以通过发布新代码简单的控制 API　版本，对于移动端应用，这点很难做到。</p>\n<p>还没有完全相信？ 结合实例一对一对比 GraphQL 和 REST 怎么样？</p>\n<h3 id=\"REST-风格-API-vs-GraphQL-API-——-案例\"><a href=\"#REST-风格-API-vs-GraphQL-API-——-案例\" class=\"headerlink\" title=\"REST 风格 API vs GraphQL API —— 案例\"></a>REST 风格 API vs GraphQL API —— 案例</h3><p>我们假设我们是开发者，负责构建闪亮全新的用户界面，用来展示星球大战影片和角色。</p>\n<p>我们要构建的第一份 UI 很简单：一个显示单个星球大战角色的信息视图。例如，达斯·维德以及电影中出场的其他角色。这个视图需要显示角色的姓名、出生年份、母星名、以及出场的所有影片中出现的头衔。</p>\n<p>听起来很简单，我们实际上已经需要处理三种不同的资源：人物、星球和电影。资源之间的关系很简单，任何人都很容易就猜出这里的数据组成。</p>\n<p>此 UI 的 JSON 数据可能类似于：<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"data\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"person\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Darth Vader\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"birthYear\"</span>: <span class=\"string\">\"41.9BBY\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"planet\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Tatooine\"</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">\"films\"</span>: [</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"A New Hope\"</span> &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"The Empire Strikes Back\"</span> &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"Return of the Jedi\"</span> &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"Revenge of the Sith\"</span> &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>假设数据服务按照上面的结构返回数据给我们。我们有一种可行的方式即使用 React.js 来展现视图：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// The Container Component:</span></span><br><span class=\"line\">&lt;PersonProfile person=&#123;data.person&#125; &gt;&lt;/PersonProfile&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// The PersonProfile Component:</span></span><br><span class=\"line\">Name: &#123;person.name&#125;</span><br><span class=\"line\">Birth Year: &#123;person.birthYear&#125;</span><br><span class=\"line\">Planet: &#123;person<span class=\"selector-class\">.planet</span><span class=\"selector-class\">.name</span>&#125;</span><br><span class=\"line\">Films: &#123;person<span class=\"selector-class\">.films</span><span class=\"selector-class\">.map</span>(film =&gt; film.title)&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这是一个简单例子，此外我们关于星球大战的经验也能帮我们一点忙，我们可以很清楚的明白 UI 和数据之间的关系。与我们想象一致，UI 是使用了 JSON 数据对象中的全部的键。</p>\n<p>让我们来看看如何通过 REST 风格 API 获取这些数据。</p>\n<p>我们需要单个角色的信息，假设我们知道这个角色的 ID，REST 风格的 API 倾向于这样输出这些信息：<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"builtin-name\">GET</span> - /people/&#123;id&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这个请求将会返回角色的姓名、出生年份以及一些其它信息给我们。一个规范的 REST 风格 API 将会返回给我们角色星球的 ID 以及该角色出现过的所有影片的 ID 组成的数组。</p>\n<p>这个请求以 JSON 格式返回的响应类似于：<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Darth Vader\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"birthYear\"</span>: <span class=\"string\">\"41.9BBY\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"planetId\"</span>: <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"string\">\"filmIds\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>],</span><br><span class=\"line\">  *** 其它信息我们不需要 ***</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>然后为了获取星球名称，我们发起请求：<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"builtin-name\">GET</span> - /planets/1</span><br></pre></td></tr></table></figure></p>\n<p>接着为了获取影片中的头衔，我们发起请求：<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/1</span><br><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/2</span><br><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/3</span><br><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/6</span><br></pre></td></tr></table></figure></p>\n<p>当从服务器接受到所有的六个数据后，我们才能将其组合并生成满足视图需要的数据。</p>\n<p>除了有需要六次往返才能获取到满足一个简单 UI 需求的数据这一事实外，这种方式并无不可。我们阐明了如何获取数据，以及如何处理数据使其满足视图需要。</p>\n<p>如果你想确认我说的你可以自己动手尝试。有一个部署在 swapi.co/ 上的 REST API 服务提供了星球大战的数据，点进去，在里面尝试构造角色数据。数据的键名可能不同，但 API 端点是一致的。你同样需要进行六次 API 调用。同样，你不得不超额获取视图不需要的信息。</p>\n<p>当然，这只是 REST API 的一个实现方式，可能有更好的实现让生成视图更简单。例如，如果 API 服务支持资源嵌套并能理解角色和影片之间的关系，我们能够通过这种方式获取影片数据：<br><figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET - <span class=\"string\">/people/</span>&#123;id&#125;<span class=\"string\">/films</span></span><br></pre></td></tr></table></figure></p>\n<p>然而，一个纯粹的 REST API 服务很难实现这点。我们需要让后端工程师为我们创建自定义端点。这造成 REST API 规模不断增长这一事实 —— 为了满足不断增长的客户端的需要，我们不断添加自定义端点。管理这些自定义端点很难。</p>\n<p>让我们来看一看 GraphQL 策略。GraphQL 在服务端拥抱自定义端点思想并把它发展到极致。服务将只是一个端点，通道变得没有意义。如果我们使用 HTTP 实现，HTTP 方法将失去意义。假设我们有一个单一的 GraphQL 端点，它的 HTTP 地址是 /graphql</p>\n<p>因为我们希望一次往返获取需要的数据，所以我们需要明明白白告诉服务器我们需要哪些数据。我们通过 GraphQL 进行查询：<br><figure class=\"highlight nimrod\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">GET</span> <span class=\"keyword\">or</span> <span class=\"type\">POST</span> - /graphql?query=<span class=\"meta\">&#123;...&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>GraphQL 查询只是字符串，但它将包含我们需要的全部数据。这就是声明的强大之处。</p>\n<p>英语中，我们这样阐述数据需求：<strong>我们需要角色名、出生年份、星球名和在所有出现过的影片中的头衔</strong>。通过 GraphQL，我们进行如下转换：<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  person(<span class=\"name\">ID:</span> ...) &#123;</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    birthYear,</span><br><span class=\"line\">    planet &#123;</span><br><span class=\"line\">      name</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    films &#123;</span><br><span class=\"line\">      title</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>再细读一次英语表述的需求并与 GraphQL 查询进行对比。它们不能再更接近了。现在，将 GraphQL 查询与我们最开始用到的原始 JSON 数据进行对比。GraphQL 查询完全与 JSON 数据结构相对应，不过排除所有是值的部分。如果我们仿照问题与答案关系来考虑这中情况，那问题就是没有具体答案的答案原语。<br>如果答案是：</p>\n<blockquote>\n<p>离太阳最近的星球是水星。<br>一种好的提问方式是保留原话只去掉提问部分：<br>哪个星球里太阳最近？<br>这种关系同样适用于 GraphQL 查询。拿着 JSON 格式的响应数据，移除所有是答案的部分（作为值的对象），最后你得到了一个非常适合代表关于 JSON 响应问题的 GraphQL 查询。<br>现在，将 GraphQL 查询和与我们展示数据的声明性 React UI 对比。所有出现在 GraphQL 查询中的数据都出现在了 UI 中。所有出现在 UI 中的数据都出现在了 GraphQL 查询中。</p>\n</blockquote>\n<p>这就是 GraphQL 强大的心智模型。UI 知晓它所需要的确切数据，提取需要的数据也很容易。编写 GraphQL 查询变成一个从 UI 中提取作为变量这一简单的工作。</p>\n<p>将模型进行反转，它仍然很强大。如果我们知道了 GraphQL 查询，我们同样知道如何在 UI 中使用相应数据。我们不需要分析响应数据就能使用它，也不需要的这些 API 的文档。这一切都是内建的。</p>\n<p>获取星球大战数据的 GraphQL 托管在 github.com/graphql/swa…。点击进去并尝试构造角色数据。只有一点点不同，我们之后会谈论，以下是可以从这个 API 中获取视图所需要数据的正式查询（使用达斯·维德举例）<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  person(<span class=\"name\">personID:</span> <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    birthYear,</span><br><span class=\"line\">    homeworld &#123;</span><br><span class=\"line\">      name</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    filmConnection &#123;</span><br><span class=\"line\">      films &#123;</span><br><span class=\"line\">        title</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这个请求返回的我们的响应数据结构十分接近视图用到的，记住，这些数据是我们通过一次往返获得的。</p>\n<h3 id=\"GraphQL-灵活性带来的开销\"><a href=\"#GraphQL-灵活性带来的开销\" class=\"headerlink\" title=\"GraphQL 灵活性带来的开销\"></a>GraphQL 灵活性带来的开销</h3><p>完美的解决方案是不存在的。GraphQL 带来了灵活性，也带来了一些明确的问题和考量。</p>\n<p>GraphQL更容易的造成一个安全隐患是资源耗尽型攻击（拒绝服务攻击）。GraphQL 服务器可能会受到伴随着极其复杂的查询的攻击，造成服务器资源耗尽。很容易就能构造一个深度嵌套关系链（用户 -&gt; 好友 -&gt; 好友的好友。) 或者多次通过字段别名请求同一字段的查询。资源耗尽型攻击并没有限定 GraphQL，但是在使用 GraphQL 时，我们要特别小心。</p>\n<p>这儿有一些缓解措施我们可以用上。我们可以进行一些高级查询的开销分析，对单个用户请求的数据量做某种限制。我们也可以实现一种机制对需要很长时间处理的请求进行超时处理。此外，考虑到 GraphQL 就只是一个处理层，我们能在 GraphQL 之下的更底层进行速率限制。</p>\n<p>如果我们尝试保护的 GraphQL API 端点并不是公开的，仅供我们私有的客户端（web、移动）内部访问，我们能够使用白名单策略并预先审核服务器能够处理的查询。客户端仅能通过唯一查询标识码向服务器发起审核过的查询。Facebook 似乎就采用了这种策略。</p>\n<p>当使用 GraphQL 时，我们还需要考虑到认证和授权。我们是在 GraphQL 解析请求之前，之后还是之间处理它们呢？</p>\n<p>为了回答这个问题，需要将 GraphQL 想象成你一种位于你的后端数据请求逻辑顶层的 DSL（领域限定语言）。它只是一个能够被我们放在客户端与实际数据服务（多个）之间的处理层。</p>\n<p>将认证和授权当成另一个处理层。GraphQL 与认证和授权逻辑的具体实现关系不大。它的意义不在这儿。但是如果我们把这些层放在 GraphQL 之后，我们就可以在 GraphQL 层使用访问令牌连通客户端与执行逻辑。这和我们在 REST 风格 API 处理认证和授权类似。</p>\n<p>另一件因为 GraphQL 而变得更具挑战性的任务是客户端数据缓存。REST 风格的 API 因其类似目录更容易进行缓存处理。REST API 通过访问路径获取数据，我们能够使用访问路径作缓存键。</p>\n<p>对于 GraphQL，我们能够采用类似的策略使用查询字段作为响应数据的缓存键。但是这种方式有限制，效率低下，还容易造成数据一致性方面的问题。原因是多个 GraphQL 查询的结果很容易重叠，而这种缓存策略并没有考虑到这种重叠。</p>\n<p>这个问题有一个很好的解决方案。一个图的查询意味这一个图的缓存。如果我们将一个 GraphQL 查询的响应数据正则化为一个平铺的记录集合，为每个记录设置一个全局唯一 ID，我们就能够只缓存这些记录而不用缓存整个响应了。</p>\n<p>这种处理并不容易。这样导致一些记录指向另一些记录，导致我们可能得管理一个环形图，导致在写入和读取缓存时我们需要进行遍历，导致我们需要编写一个层来处理缓存逻辑。但是，这种方法总体上比基于响应的缓存更高效。Relay.js 就是一个采用这种缓存策略并在内部进行自动管理的框架。</p>\n<p>对于 GraphQL 我们最需要关心的问题可能是被普遍称作 N+1 SQL 查询的问题了。GraphQL 的字段查询被设计成独立的函数，从数据库获取这些字段可能造成每个字段都需要一个数据库查询。</p>\n<p>简单 REST 风格 API 端点的逻辑，易分析，易检测，可以优化 SQL 查询语句来解决 N+1 问题。而 GraphQL 需要动态处理字段，这点不容易做到。幸运的是 Facebook 正在研发一个处理类似问题的可能的解决方案：DataLoader。</p>\n<p>如名字暗示，DataLoader 是一款能让我们从数据库读取数据并让数据能被 GraphQL 处理函数使用的工具。我们使用 DataLoader，而不是直接通过 SQL 查询从数据库获取数据，将 DataLoader 作为代理以减少我们实际需要发送给数据库的 SQL 查询。</p>\n<p>DataLoader 使用批处理和缓存的组合来实现。如果同一个客户端请求会造成多次请求数据库，DataLoader 会整合这些问题并从数据库批量拉取请求数据。DataLoader 会同时缓存这些数据，当有后续请求需要同样资源时可以直接从缓存获取到。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"GraphQL是什么\"><a href=\"#GraphQL是什么\" class=\"headerlink\" title=\"GraphQL是什么\"></a>GraphQL是什么</h3><p>GraphQL 是一门语言。 如果我们传授 GraphQL 语言给一款应用，这款应用就能够向支持 GraphQL 的后端数据服务声明式传达数据需求。<br>为了让数据服务支持 GraphQL，我们需要实现一个运行时层并将它暴露给想要与服务通信的客户端。可以将这个添加到服务端的层简单地看作是一位 GraphQL 语言翻译员，或代表数据服务并会说 GraphQL 语言的代理。GraphQL 并不是一个存储引擎，所以它不能作为一个独立的解决方案。这就是我们不能有一个纯粹的 GraphQL 服务，而需要实现一个翻译运行时的原因。</p>\n<p>这个层可以用任何语言编写，它定义了一个通用的基于图的模板来发布它所代表的数据服务的功能。支持 GraphQL 的客户端可以在功能允许的范围内使用这种模版进行查询。这一策略可以将客户端与服务端分离，允许两者独立开发和扩展。</p>\n<p>一个 GraphQL 请求既可以是查询（读操作），也可以是修改（写操作）。不管是何种情形，请求均只是一个带有特定格式的简单字符串，GraphQL 服务器可以对其进行解析、执行、处理。在移动和 Web 应用中最常见的响应格式是 JSON 。</p>\n<h3 id=\"REST-API-有什么错\"><a href=\"#REST-API-有什么错\" class=\"headerlink\" title=\"REST API 有什么错\"></a>REST API 有什么错</h3><p>REST API 最大的问题是其天然倾向多端点。这造成客户端需要多次往返获取数据。</p>\n<p>REST API 通常由多个端点组成，每个端点代表一种资源。因此，当客户端需要多个资源时，它需要向 REST API 发起多个请求，才能获取到所需要的数据。</p>\n<p>在 REST API 中，是没有描述客户端请求的语言的。客户端无法控制服务器返回哪些数据。没有让客户端对返回数据进行控制的语言。更确切的说，客户端能使用的语言是很有限的。<br>例如，有如下进行读取操作的 REST API：</p>\n<ul>\n<li>GET /ResouceName - 从该资源获取包含所有记录的列表</li>\n<li>GET /ResourceName/ResourceID - 通过 ID 获取某条特定记录</li>\n</ul>\n<p>例如，客户端是不能够指定从该资源的记录中选择哪些字段的。信息仅存在于提供 REST API 的服务中，该服务将始终返回所有字段，而不管客户端需要什么。借用 GraphQL 术语描述这个问题：超额获取(over-fetching) 没用的信息。这浪费了服务器和客户端的网络内存资源</p>\n<p>REST API 的另一个大问题就是版本控制了。如果你需要支持多版本，那你就需要为此创建多个新的端点。这会导致这些端点很难使用和维护，此外，还造成服务端出现很多冗余代码。</p>\n<p>上面列出的一些 REST API 带来的问题都是 GraphQL 试图解决的。这并不是 REST API 带来的全部问题，我也不打算说明 REST API 是什么不是什么。我只是在谈论一种最流行的基于资源的 HTTP 终点 API。这些 API 最终都会变成一种具有常规 REST 特性的端点和出于性能原因定制的特殊端点的组合。</p>\n<h3 id=\"GraphQL-如何实现其魔力\"><a href=\"#GraphQL-如何实现其魔力\" class=\"headerlink\" title=\"GraphQL 如何实现其魔力\"></a>GraphQL 如何实现其魔力</h3><p>在 GraphQL 背后有很多的概念和设计策略，这儿列举了一些最重要的：</p>\n<ul>\n<li>GraphQL 模板是强类型的。要创建一套 GraphQL 模板，我们需要定义了一些带有类型的字段。这些类型可以是原始数据类型也可以是自定义的，在模板中一切均需要类型。丰富的类型系统带来了丰富的特性，如 API 自证，这让我们能够为客户端和服务端创建强大的工具。</li>\n<li>GraphQL 以图的形式组织数据，数据自然形成图。如果你需要一个结构描述数据，图是一种不错的选择。GraphQL 运行时让我们能够使用与该数据的自然图结构匹配的图 API 来表示我们的数据。</li>\n<li>GraphQL 具有表达数据需求声明性质。GraphQL 让客户端能够以一种声明性的语言描述其对数据的需求。这种声明性带来了一种围绕着 GraphQL 语言使用的心智模型，该模型与我们用自然语言思考数据需求的方式接近，让我们使用 GraphQL 时比使用其它方式更容易。<br>最后一个概念是我为什么认为 GraphQL 是游戏规则改变者的原因。</li>\n</ul>\n<p>这些全是抽象概念。让我们深入到细节中。</p>\n<p>为了解决多次往返请求的问题，GraphQL 让响应服务器变成一个端点。本质上，GraphQL 把自定义端点这一思想发挥到了极致，它让这个端点能够回复所有数据问题。</p>\n<p>伴随着单个端点这一概念的另一个重要概念是需要一种强大的客户端请求描述语言与自定义的单个端点进行通信。缺少客户端请求描述语言，单个端点是没有意义的。它需要一种语言解析自定义请求以及根据自定义请求返回数据。</p>\n<p>拥有一门客户端请求描述语言意味这客户端能够对请求进行控制。客户端能够精确表达它们需要什么，服务端也能精准回复客户端需要的。这就解决了超额获取的问题。</p>\n<p>当涉及到版本时，GraphQL 提供了一种有趣的解决方式。版本能够被完全避免。基本上，我们只需要在保留老的字段的基础上添加新字段即可，因为我们用的是图，我们能很灵活的在图上添加更多节点。因此，我们可以在图上留下旧的 API，并引入新的 API，而不会将其标记为新版本。API 只是多了更多节点。</p>\n<p>这点对于移动端尤为重用，因为我们无法充值这些移动端使用的版本。一经安装，移动端应用可能数年都使用老版本 API 。对于 Web，我们可以通过发布新代码简单的控制 API　版本，对于移动端应用，这点很难做到。</p>\n<p>还没有完全相信？ 结合实例一对一对比 GraphQL 和 REST 怎么样？</p>\n<h3 id=\"REST-风格-API-vs-GraphQL-API-——-案例\"><a href=\"#REST-风格-API-vs-GraphQL-API-——-案例\" class=\"headerlink\" title=\"REST 风格 API vs GraphQL API —— 案例\"></a>REST 风格 API vs GraphQL API —— 案例</h3><p>我们假设我们是开发者，负责构建闪亮全新的用户界面，用来展示星球大战影片和角色。</p>\n<p>我们要构建的第一份 UI 很简单：一个显示单个星球大战角色的信息视图。例如，达斯·维德以及电影中出场的其他角色。这个视图需要显示角色的姓名、出生年份、母星名、以及出场的所有影片中出现的头衔。</p>\n<p>听起来很简单，我们实际上已经需要处理三种不同的资源：人物、星球和电影。资源之间的关系很简单，任何人都很容易就猜出这里的数据组成。</p>\n<p>此 UI 的 JSON 数据可能类似于：<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"data\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"person\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Darth Vader\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"birthYear\"</span>: <span class=\"string\">\"41.9BBY\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"planet\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Tatooine\"</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">\"films\"</span>: [</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"A New Hope\"</span> &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"The Empire Strikes Back\"</span> &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"Return of the Jedi\"</span> &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">\"title\"</span>: <span class=\"string\">\"Revenge of the Sith\"</span> &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>假设数据服务按照上面的结构返回数据给我们。我们有一种可行的方式即使用 React.js 来展现视图：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// The Container Component:</span></span><br><span class=\"line\">&lt;PersonProfile person=&#123;data.person&#125; &gt;&lt;/PersonProfile&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// The PersonProfile Component:</span></span><br><span class=\"line\">Name: &#123;person.name&#125;</span><br><span class=\"line\">Birth Year: &#123;person.birthYear&#125;</span><br><span class=\"line\">Planet: &#123;person<span class=\"selector-class\">.planet</span><span class=\"selector-class\">.name</span>&#125;</span><br><span class=\"line\">Films: &#123;person<span class=\"selector-class\">.films</span><span class=\"selector-class\">.map</span>(film =&gt; film.title)&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这是一个简单例子，此外我们关于星球大战的经验也能帮我们一点忙，我们可以很清楚的明白 UI 和数据之间的关系。与我们想象一致，UI 是使用了 JSON 数据对象中的全部的键。</p>\n<p>让我们来看看如何通过 REST 风格 API 获取这些数据。</p>\n<p>我们需要单个角色的信息，假设我们知道这个角色的 ID，REST 风格的 API 倾向于这样输出这些信息：<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"builtin-name\">GET</span> - /people/&#123;id&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这个请求将会返回角色的姓名、出生年份以及一些其它信息给我们。一个规范的 REST 风格 API 将会返回给我们角色星球的 ID 以及该角色出现过的所有影片的 ID 组成的数组。</p>\n<p>这个请求以 JSON 格式返回的响应类似于：<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Darth Vader\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"birthYear\"</span>: <span class=\"string\">\"41.9BBY\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"planetId\"</span>: <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"string\">\"filmIds\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">6</span>],</span><br><span class=\"line\">  *** 其它信息我们不需要 ***</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>然后为了获取星球名称，我们发起请求：<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"builtin-name\">GET</span> - /planets/1</span><br></pre></td></tr></table></figure></p>\n<p>接着为了获取影片中的头衔，我们发起请求：<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/1</span><br><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/2</span><br><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/3</span><br><span class=\"line\"><span class=\"builtin-name\">GET</span> - /films/6</span><br></pre></td></tr></table></figure></p>\n<p>当从服务器接受到所有的六个数据后，我们才能将其组合并生成满足视图需要的数据。</p>\n<p>除了有需要六次往返才能获取到满足一个简单 UI 需求的数据这一事实外，这种方式并无不可。我们阐明了如何获取数据，以及如何处理数据使其满足视图需要。</p>\n<p>如果你想确认我说的你可以自己动手尝试。有一个部署在 swapi.co/ 上的 REST API 服务提供了星球大战的数据，点进去，在里面尝试构造角色数据。数据的键名可能不同，但 API 端点是一致的。你同样需要进行六次 API 调用。同样，你不得不超额获取视图不需要的信息。</p>\n<p>当然，这只是 REST API 的一个实现方式，可能有更好的实现让生成视图更简单。例如，如果 API 服务支持资源嵌套并能理解角色和影片之间的关系，我们能够通过这种方式获取影片数据：<br><figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET - <span class=\"string\">/people/</span>&#123;id&#125;<span class=\"string\">/films</span></span><br></pre></td></tr></table></figure></p>\n<p>然而，一个纯粹的 REST API 服务很难实现这点。我们需要让后端工程师为我们创建自定义端点。这造成 REST API 规模不断增长这一事实 —— 为了满足不断增长的客户端的需要，我们不断添加自定义端点。管理这些自定义端点很难。</p>\n<p>让我们来看一看 GraphQL 策略。GraphQL 在服务端拥抱自定义端点思想并把它发展到极致。服务将只是一个端点，通道变得没有意义。如果我们使用 HTTP 实现，HTTP 方法将失去意义。假设我们有一个单一的 GraphQL 端点，它的 HTTP 地址是 /graphql</p>\n<p>因为我们希望一次往返获取需要的数据，所以我们需要明明白白告诉服务器我们需要哪些数据。我们通过 GraphQL 进行查询：<br><figure class=\"highlight nimrod\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">GET</span> <span class=\"keyword\">or</span> <span class=\"type\">POST</span> - /graphql?query=<span class=\"meta\">&#123;...&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>GraphQL 查询只是字符串，但它将包含我们需要的全部数据。这就是声明的强大之处。</p>\n<p>英语中，我们这样阐述数据需求：<strong>我们需要角色名、出生年份、星球名和在所有出现过的影片中的头衔</strong>。通过 GraphQL，我们进行如下转换：<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  person(<span class=\"name\">ID:</span> ...) &#123;</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    birthYear,</span><br><span class=\"line\">    planet &#123;</span><br><span class=\"line\">      name</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    films &#123;</span><br><span class=\"line\">      title</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>再细读一次英语表述的需求并与 GraphQL 查询进行对比。它们不能再更接近了。现在，将 GraphQL 查询与我们最开始用到的原始 JSON 数据进行对比。GraphQL 查询完全与 JSON 数据结构相对应，不过排除所有是值的部分。如果我们仿照问题与答案关系来考虑这中情况，那问题就是没有具体答案的答案原语。<br>如果答案是：</p>\n<blockquote>\n<p>离太阳最近的星球是水星。<br>一种好的提问方式是保留原话只去掉提问部分：<br>哪个星球里太阳最近？<br>这种关系同样适用于 GraphQL 查询。拿着 JSON 格式的响应数据，移除所有是答案的部分（作为值的对象），最后你得到了一个非常适合代表关于 JSON 响应问题的 GraphQL 查询。<br>现在，将 GraphQL 查询和与我们展示数据的声明性 React UI 对比。所有出现在 GraphQL 查询中的数据都出现在了 UI 中。所有出现在 UI 中的数据都出现在了 GraphQL 查询中。</p>\n</blockquote>\n<p>这就是 GraphQL 强大的心智模型。UI 知晓它所需要的确切数据，提取需要的数据也很容易。编写 GraphQL 查询变成一个从 UI 中提取作为变量这一简单的工作。</p>\n<p>将模型进行反转，它仍然很强大。如果我们知道了 GraphQL 查询，我们同样知道如何在 UI 中使用相应数据。我们不需要分析响应数据就能使用它，也不需要的这些 API 的文档。这一切都是内建的。</p>\n<p>获取星球大战数据的 GraphQL 托管在 github.com/graphql/swa…。点击进去并尝试构造角色数据。只有一点点不同，我们之后会谈论，以下是可以从这个 API 中获取视图所需要数据的正式查询（使用达斯·维德举例）<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  person(<span class=\"name\">personID:</span> <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    birthYear,</span><br><span class=\"line\">    homeworld &#123;</span><br><span class=\"line\">      name</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    filmConnection &#123;</span><br><span class=\"line\">      films &#123;</span><br><span class=\"line\">        title</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这个请求返回的我们的响应数据结构十分接近视图用到的，记住，这些数据是我们通过一次往返获得的。</p>\n<h3 id=\"GraphQL-灵活性带来的开销\"><a href=\"#GraphQL-灵活性带来的开销\" class=\"headerlink\" title=\"GraphQL 灵活性带来的开销\"></a>GraphQL 灵活性带来的开销</h3><p>完美的解决方案是不存在的。GraphQL 带来了灵活性，也带来了一些明确的问题和考量。</p>\n<p>GraphQL更容易的造成一个安全隐患是资源耗尽型攻击（拒绝服务攻击）。GraphQL 服务器可能会受到伴随着极其复杂的查询的攻击，造成服务器资源耗尽。很容易就能构造一个深度嵌套关系链（用户 -&gt; 好友 -&gt; 好友的好友。) 或者多次通过字段别名请求同一字段的查询。资源耗尽型攻击并没有限定 GraphQL，但是在使用 GraphQL 时，我们要特别小心。</p>\n<p>这儿有一些缓解措施我们可以用上。我们可以进行一些高级查询的开销分析，对单个用户请求的数据量做某种限制。我们也可以实现一种机制对需要很长时间处理的请求进行超时处理。此外，考虑到 GraphQL 就只是一个处理层，我们能在 GraphQL 之下的更底层进行速率限制。</p>\n<p>如果我们尝试保护的 GraphQL API 端点并不是公开的，仅供我们私有的客户端（web、移动）内部访问，我们能够使用白名单策略并预先审核服务器能够处理的查询。客户端仅能通过唯一查询标识码向服务器发起审核过的查询。Facebook 似乎就采用了这种策略。</p>\n<p>当使用 GraphQL 时，我们还需要考虑到认证和授权。我们是在 GraphQL 解析请求之前，之后还是之间处理它们呢？</p>\n<p>为了回答这个问题，需要将 GraphQL 想象成你一种位于你的后端数据请求逻辑顶层的 DSL（领域限定语言）。它只是一个能够被我们放在客户端与实际数据服务（多个）之间的处理层。</p>\n<p>将认证和授权当成另一个处理层。GraphQL 与认证和授权逻辑的具体实现关系不大。它的意义不在这儿。但是如果我们把这些层放在 GraphQL 之后，我们就可以在 GraphQL 层使用访问令牌连通客户端与执行逻辑。这和我们在 REST 风格 API 处理认证和授权类似。</p>\n<p>另一件因为 GraphQL 而变得更具挑战性的任务是客户端数据缓存。REST 风格的 API 因其类似目录更容易进行缓存处理。REST API 通过访问路径获取数据，我们能够使用访问路径作缓存键。</p>\n<p>对于 GraphQL，我们能够采用类似的策略使用查询字段作为响应数据的缓存键。但是这种方式有限制，效率低下，还容易造成数据一致性方面的问题。原因是多个 GraphQL 查询的结果很容易重叠，而这种缓存策略并没有考虑到这种重叠。</p>\n<p>这个问题有一个很好的解决方案。一个图的查询意味这一个图的缓存。如果我们将一个 GraphQL 查询的响应数据正则化为一个平铺的记录集合，为每个记录设置一个全局唯一 ID，我们就能够只缓存这些记录而不用缓存整个响应了。</p>\n<p>这种处理并不容易。这样导致一些记录指向另一些记录，导致我们可能得管理一个环形图，导致在写入和读取缓存时我们需要进行遍历，导致我们需要编写一个层来处理缓存逻辑。但是，这种方法总体上比基于响应的缓存更高效。Relay.js 就是一个采用这种缓存策略并在内部进行自动管理的框架。</p>\n<p>对于 GraphQL 我们最需要关心的问题可能是被普遍称作 N+1 SQL 查询的问题了。GraphQL 的字段查询被设计成独立的函数，从数据库获取这些字段可能造成每个字段都需要一个数据库查询。</p>\n<p>简单 REST 风格 API 端点的逻辑，易分析，易检测，可以优化 SQL 查询语句来解决 N+1 问题。而 GraphQL 需要动态处理字段，这点不容易做到。幸运的是 Facebook 正在研发一个处理类似问题的可能的解决方案：DataLoader。</p>\n<p>如名字暗示，DataLoader 是一款能让我们从数据库读取数据并让数据能被 GraphQL 处理函数使用的工具。我们使用 DataLoader，而不是直接通过 SQL 查询从数据库获取数据，将 DataLoader 作为代理以减少我们实际需要发送给数据库的 SQL 查询。</p>\n<p>DataLoader 使用批处理和缓存的组合来实现。如果同一个客户端请求会造成多次请求数据库，DataLoader 会整合这些问题并从数据库批量拉取请求数据。DataLoader 会同时缓存这些数据，当有后续请求需要同样资源时可以直接从缓存获取到。</p>\n"},{"layout":"javascript","title":"发布-订阅模式","date":"2017-08-29T02:48:17.000Z","_content":"发布 — 订阅模式又叫观察者模式，它定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。在 JavaScript开发中，我们一般用事件模型来替代传统的发布 — 订阅模式。\n# 现实中的发布 － 订阅模式\n不论是在程序世界里还是现实生活中，发布 — 订阅模式的应用都非常之广泛。我们先看一个现实中的例子。\n小明最近看上了一套房子，到了售楼处之后才被告知，该楼盘的房子早已售罄。好在售楼MM告诉小明，不久后还有一些尾盘推出，开发商正在办理相关手续，手续办好后便可以购买。但到底是什么时候，目前还没有人能够知道。\n于是小明记下了售楼处的电话，以后每天都会打电话过去询问是不是已经到了购买时间。除了小明，还有小红、小强、小龙也会每天向售楼处咨询这个问题。一个星期过后，售楼 MM 决定辞职，因为厌倦了每天回答 1000个相同内容的电话。\n当然现实中没有这么笨的销售公司，实际上故事是这样的：小明离开之前，把电话号码留在了售楼处。售楼 MM 答应他，新楼盘一推出就马上发信息通知小明。小红、小强和小龙也是一样，他们的电话号码都被记在售楼处的花名册上，新楼盘推出的时候，售楼 MM会翻开花名册，遍历上面的电话号码，依次发送一条短信来通知他们。\n# 发布 － 订阅模式的作用\n在刚刚的例子中，发送短信通知就是一个典型的发布 — 订阅模式，小明、小红等购买者都是订阅者，他们订阅了房子开售的消息。售楼处作为发布者，会在合适的时候遍历花名册上的电话号码，依次给购房者发布消息。\n可以发现，在这个例子中使用发布 — 订阅模式有着显而易见的优点\n- 购房者不用再天天给售楼处打电话咨询开售时间，在合适的时间点，售楼处作为发布者\n会通知这些消息订阅者。\n- 购房者和售楼处之间不再强耦合在一起，当有新的购房者出现时，他只需把手机号码留在售楼处，售楼处不关心购房者的任何情况，不管购房者是男是女还是一只猴子。 而售楼处的任何变动也不会影响购买者，比如售楼 MM 离职，售楼处从一楼搬到二楼，这些改变都跟购房者无关，只要售楼处记得发短信这件事情。\n\n第一点说明发布 — 订阅模式可以`广泛应用于异步编程中`，这是一种替代传递回调函数的方案。比如，我们可以订阅 ajax请求的 error 、 succ 等事件。 或者如果想在动画的每一帧完成之后做一些事情，那我们可以订阅一个事件，然后在动画的每一帧完成之后发布这个事件。在异步编程中使用发布 — 订阅模式，我们就无需过多关注对象在异步运行期间的内部状态，而只需要订阅感兴趣的事件发生点。\n第二点说明发布 — 订阅模式可以`取代对象之间硬编码的通知机制`，一个对象不用再显式地调用另外一个对象的某个接口。发布 — 订阅模式让两个对象松耦合地联系在一起，虽然不太清楚彼此的细节，但这不影响它们之间相互通信。当有新的订阅者出现时，发布者的代码不需要任何修改；同样发布者需要改变时，也不会影响到之前的订阅者。只要之前约定的事件名没有变化，就可以自由地改变它们。\n# DOM 事件\n实际上，只要我们曾经在 DOM 节点上面绑定过事件函数，那我们就曾经使用过发布 — 订阅模式，来看看下面这两句简单的代码发生了什么事情：\n```\ndocument.body.addEventListener( 'click', function(){\n    alert(2);\n}, false );\ndocument.body.click(); // 模拟用户点击\n```\n在这里需要监控用户点击 document.body 的动作，但是我们没办法预知用户将在什么时候点击。所以我们订阅 document.body 上的 click 事件，当 body 节点被点击时， body 节点便会向订阅者发布这个消息。这很像购房的例子，购房者不知道房子什么时候开售，于是他在订阅消息后等待售楼处发布消息。\n当然我们还可以随意增加或者删除订阅者，增加任何订阅者都不会影响发布者代码的编写:\n```\ndocument.body.addEventListener( 'click', function(){\n    alert(2);\n}, false );\ndocument.body.addEventListener( 'click', function(){\n    alert(3);\n}, false );\ndocument.body.addEventListener( 'click', function(){\n    alert(4);\n}, false );\ndocument.body.click(); // 模拟用户点击\n```\n注意，手动触发事件更好的做法是 IE下用 fireEvent ，标准浏览器下用` dispatchEvent` 实现。\n# 自定义事件\n除了 DOM 事件，我们还会经常实现一些自定义的事件，这种依靠自定义事件完成的发布 —订阅模式可以用于任何 JavaScript代码中。\n现在看看如何一步步实现发布 — 订阅模式。\n- 首先要指定好谁充当发布者（比如售楼处）；\n- 然后给发布者添加一个缓存列表，用于存放回调函数以便通知订阅者（售楼处的花名册）；\n- 最后发布消息的时候，发布者会遍历这个缓存列表，依次触发里面存放的订阅者回调函数（遍历花名册，挨个发短信）。\n\n另外，我们还可以往回调函数里填入一些参数，订阅者可以接收这些参数。这是很有必要的，比如售楼处可以在发给订阅者的短信里加上房子的单价、面积、容积率等信息，订阅者接收到这些信息之后可以进行各自的处理：\n```\nvar salesOffices={};//定义售楼处\nsalesOffices.clientList=[];//缓存列表，存放订阅者的回调函数\nsalesOffices.listen=function(fn){//增加订阅者\n    this.clientList.push(fn);//订阅的消息添加进缓存列表\n}\nsalesOffices.trigger=function(){//发布消息\n    for(var i=0,fn;fn=this.clientList[i++];){\n        fn.apply(this,arguments);//arguments是发布消息时候带的参数\n    }\n}\n//测试\nsalesOffices.listen(function(price,squareMeter){//小明订阅消息\n    console.log(\"小明收到消息\")\n    console.log('价格='+price);\n    console.log('面积='+squareMeter);\n});\nsalesOffices.listen(function(price,squareMeter){//小红订阅消息\n    console.log(\"小红收到消息\")\n    console.log('价格='+price);\n    console.log('面积='+squareMeter);\n});\nsalesOffices.trigger(200000,88);\nsalesOffices.trigger(100000,100);\n//输出结果\n/*\n小明收到消息\n价格=200000\n面积=88\n小红收到消息\n价格=200000\n面积=88\n小明收到消息\n价格=100000\n面积=100\n小红收到消息\n价格=100000\n面积=100\n*/\n```\n至此，我们已经实现了一个最简单的发布 — 订阅模式，但这里还存在一些问题。我们看到订阅者接收到了发布者发布的每个消息，虽然小明只想买 88 平方米的房子，但是发布者把 110 平方米的信息也推送给了小明，这对小明来说是不必要的困扰。所以我们有必要增加一个标示 key ，让订阅者只订阅自己感兴趣的消息。改写后的代码如下：\n```\nvar salesOffices = {}; // 定义售楼处\nsalesOffices.clientList = {}; // 缓存列表，存放订阅者的回调函数\nsalesOffices.listen = function (key, fn) {\n    if (!this.clientList[key]) { // 如果还没有订阅过此类消息，给该类消息创建一个缓存列表\n        this.clientList[key] = [];\n    }\n    this.clientList[key].push(fn); // 订阅的消息添加进消息缓存列表\n};\nsalesOffices.trigger = function () { // 发布消息\n    var key = Array.prototype.shift.call(arguments), // 取出消息类型\n        fns = this.clientList[key]; // 取出该消息对应的回调函数集合\n    if (!fns || fns.length === 0) { // 如果没有订阅该消息，则返回\n        return false;\n    }\n    for (var i = 0, fn; fn = fns[i++];) {\n        fn.apply(this, arguments); // (2) // arguments 是发布消息时附送的参数\n    }\n};\nsalesOffices.listen('squareMeter88', function (price) { // 小明订阅 88 平方米房子的消息\n    console.log(\"小明订阅 88 平方米房子的消息\")\n    console.log('价格= ' + price); // 输出： 2000000\n});\nsalesOffices.listen('squareMeter110', function (price) { // 小红订阅 110 平方米房子的消息\n    console.log(\"小红订阅 110 平方米房子的消息\")\n    console.log('价格= ' + price); // 输出： 3000000\n});\nsalesOffices.trigger('squareMeter88', 2000000); // 发布 88 平方米房子的价格\nsalesOffices.trigger('squareMeter110', 3000000); // 发布 110 平方米房子的价格\n//输出结果\n/*\n小明订阅 88 平方米房子的消息\n价格= 2000000\n小红订阅 110 平方米房子的消息\n价格= 3000000\n*/\n```\n很明显，现在订阅者可以只订阅自己感兴趣的事件了。\n# 发布 － 订阅模式的通用实现\n现在我们已经看到了如何让售楼处拥有接受订阅和发布事件的功能。假设现在小明又去另一个售楼处买房子，那么这段代码是否必须在另一个售楼处对象上重写一次呢，有没有办法可以让所有对象都拥有发布 — 订阅功能呢？\n答案显然是有的，JavaScript 作为一门解释执行的语言，给对象动态添加职责是理所当然的事情。\n所以我们把发布 — 订阅的功能提取出来，放在一个单独的对象内：\n```\nvar event = {\n    clientList: [],\n    listen: function (key, fn) {\n        if (!this.clientList[key]) {\n            this.clientList[key] = [];\n        }\n        this.clientList[key].push(fn); // 订阅的消息添加进缓存列表\n    },\n    trigger: function () {\n        var key = Array.prototype.shift.call(arguments), // (1);\n            fns = this.clientList[key];\n        if (!fns || fns.length === 0) { // 如果没有绑定对应的消息\n            return false;\n        }\n        for (var i = 0, fn; fn = fns[i++];) {\n            fn.apply(this, arguments); // (2) // arguments 是 trigger 时带上的参数\n        }\n    }\n};\n```\n再定义一个 installEvent 函数，这个函数可以给所有的对象都动态安装发布 — 订阅功能：\n```\nvar installEvent = function (obj) {\n    for (var i in event) {\n        obj[i] = event[i];\n    }\n};\n```\n再来测试一番，我们给售楼处对象 salesOffices 动态增加发布 — 订阅功能：\n```\nvar salesOffices = {};\ninstallEvent(salesOffices);\nsalesOffices.listen('squareMeter88', function (price) { // 小明订阅消息\n    console.log(\"小明订阅消息\")\n    console.log('价格= ' + price);\n});\nsalesOffices.listen('squareMeter100', function (price) { // 小红订阅消息\n    console.log(\"小红订阅消息\")\n    console.log('价格= ' + price);\n});\nsalesOffices.trigger('squareMeter88', 2000000); // 输出：2000000\nsalesOffices.trigger('squareMeter100', 3000000); // 输出：3000000\n//输出结果\n/*\n小明订阅消息\n价格= 2000000\n小红订阅消息\n价格= 3000000\n*/\n```\n# 取消订阅的事件\n有时候，我们也许需要取消订阅事件的功能。比如小明突然不想买房子了，为了避免继续接收到售楼处推送过来的短信，小明需要取消之前订阅的事件。现在我们给 event 对象增加 remove方法：\n```\n\nevent.remove = function (key, fn) {\n    var fns = this.clientList[key];\n    if (!fns) { // 如果 key 对应的消息没有被人订阅，则直接返回\n        return false;\n    }\n    if (!fn) { // 如果没有传入具体的回调函数，表示需要取消 key 对应消息的所有订阅\n        fns && (fns.length = 0);\n    } else {\n        for (var l = fns.length - 1; l >= 0; l--) { // 反向遍历订阅的回调函数列表\n            var _fn = fns[l];\n            if (_fn === fn) {\n                fns.splice(l, 1); // 删除订阅者的回调函数\n            }\n        }\n    }\n};\nvar salesOffices = {};\nvar installEvent = function (obj) {\n    for (var i in event) {\n        obj[i] = event[i];\n    }\n}\ninstallEvent(salesOffices);\nsalesOffices.listen('squareMeter88', fn1 = function (price) { // 小明订阅消息\n    console.log('价格= ' + price);\n});\nsalesOffices.listen('squareMeter88', fn2 = function (price) { // 小红订阅消息\n    console.log('价格= ' + price);\n});\nsalesOffices.remove('squareMeter88', fn1); // 删除小明的订阅\nsalesOffices.trigger('squareMeter88', 2000000); // 输出：2000000\n```\n# 真实的例子——网站登录\n通过售楼处的虚拟例子，我们对发布 — 订阅模式的概念和实现都已经熟悉了，那么现在就趁热打铁，看一个真实的项目。\n假如我们正在开发一个商城网站，网站里有 header头部、nav导航、消息列表、购物车等模块。这几个模块的渲染有一个共同的前提条件，就是必须先用 ajax异步请求获取用户的登录信息。\n这是很正常的，比如用户的名字和头像要显示在 header模块里，而这两个字段都来自用户登录后返回的信息。\n至于 ajax请求什么时候能成功返回用户信息，这点我们没有办法确定。现在的情节看起来像极了售楼处的例子，小明不知道什么时候开发商的售楼手续能够成功办下来。\n但现在还不足以说服我们在此使用发布 — 订阅模式，因为异步的问题通常也可以用回调函数来解决。更重要的一点是，我们不知道除了 header头部、nav导航、消息列表、购物车之外，将来还有哪些模块需要使用这些用户信息。如果它们和用户信息模块产生了强耦合，比如下面这样的形式：\n```\nlogin.succ(function(data){\n    header.setAvatar( data.avatar); // 设置 header 模块的头像\n    nav.setAvatar( data.avatar ); // 设置导航模块的头像\n    message.refresh(); // 刷新消息列表\n    cart.refresh(); // 刷新购物车列表\n});\n```\n现在登录模块是我们负责编写的，但我们还必须了解 header 模块里设置头像的方法叫setAvatar 、购物车模块里刷新的方法叫 refresh ，这种耦合性会使程序变得僵硬，header 模块不能随意再改变 setAvatar 的方法名，它自身的名字也不能被改为 header1、header2。 这是针对具体实现编程的典型例子，针对具体实现编程是不被赞同的。\n等到有一天，项目中又新增了一个收货地址管理的模块，这个模块本来是另一个同事所写的，而此时你正在马来西亚度假，但是他却不得不给你打电话：“Hi，登录之后麻烦刷新一下收货地址列表。”于是你又翻开你 3个月前写的登录模块，在最后部分加上这行代码：\n```\nlogin.succ(function( data ){\n    header.setAvatar( data.avatar);\n    nav.setAvatar( data.avatar );\n    message.refresh();\n    cart.refresh();\n    address.refresh(); // 增加这行代码\n});\n```\n我们就会越来越疲于应付这些突如其来的业务要求，要么跳槽了事，要么必须来重构这些代码。\n用发布 — 订阅模式重写之后，对用户信息感兴趣的业务模块将自行订阅登录成功的消息事件。当登录成功时，登录模块只需要发布登录成功的消息，而业务方接受到消息之后，就会开始进行各自的业务处理，登录模块并不关心业务方究竟要做什么，也不想去了解它们的内部细节。改善后的代码如下： \n```\n$.ajax( 'http:// xxx.com?login', function(data){ // 登录成功\n    login.trigger( 'loginSucc', data); // 发布登录成功的消息\n});\n```\n各模块监听登录成功的消息：\n```\nvar header = (function () { // header 模块\n    login.listen('loginSucc', function (data) {\n        header.setAvatar(data.avatar);\n    });\n    return {\n        setAvatar: function (data) {\n            console.log('设置 header 模块的头像');\n        }\n    }\n})();\nvar nav = (function () { // nav 模块\n    login.listen('loginSucc', function (data) {\n        nav.setAvatar(data.avatar);\n    });\n    return {\n        setAvatar: function (avatar) {\n            console.log('设置 nav 模块的头像');\n        }\n    }\n})();\n```\n如上所述，我们随时可以把 setAvatar 的方法名改成 setTouxiang 。如果有一天在登录完成之后，又增加一个刷新收货地址列表的行为，那么只要在收货地址模块里加上监听消息的方法即可，而这可以让开发该模块的同事自己完成，你作为登录模块的开发者，永远不用再关心这些行为了。代码如下：\n```\nvar address = (function () { // nav 模块\n    login.listen('loginSucc', function (obj) {\n        address.refresh(obj);\n    });\n    return {\n        refresh: function (avatar) {\n            console.log('刷新收货地址列表');\n        }\n    }\n})();\n```\n# 全局的发布 － 订阅对象\n回想下刚刚实现的发布 — 订阅模式，我们给售楼处对象和登录对象都添加了订阅和发布的功能，这里还存在两个小问题。\n- 我们给每个发布者对象都添加了 listen 和 trigger 方法，以及一个缓存列表 clientList ，这其实是一种资源浪费。\n- 小明跟售楼处对象还是存在一定的耦合性，小明至少要知道售楼处对象的名字是salesOffices ，才能顺利的订阅到事件。见如下代码：\n```\nsalesOffices.listen( 'squareMeter100', function( price ){ // 小明订阅消息\n    console.log( '价格= ' + price );\n});\n```\n如果小明还关心 300平方米的房子，而这套房子的卖家是 salesOffices2 ，这意味着小明要开始订阅 salesOffices2 对象。见如下代码：\n```\nsalesOffices2.listen( 'squareMeter300', function( price ){ // 小明订阅消息\n    console.log( '价格= ' + price );\n});\n```\n其实在现实中，买房子未必要亲自去售楼处，我们只要把订阅的请求交给中介公司，而各大房产公司也只需要通过中介公司来发布房子信息。这样一来，我们不用关心消息是来自哪个房产公司，我们在意的是能否顺利收到消息。当然，为了保证订阅者和发布者能顺利通信，订阅者和发布者都必须知道这个中介公司。\n同样在程序中，发布 — 订阅模式可以用一个全局的 `Event `对象来实现，订阅者不需要了解消息来自哪个发布者，发布者也不知道消息会推送给哪些订阅者， Event 作为一个类似“中介者”的角色，把订阅者和发布者联系起来。见如下代码：\n```\nvar Event = (function () {\n    var clientList = {},\n        listen,\n        trigger,\n        remove;\n    listen = function (key, fn) {\n        if (!clientList[key]) {\n            clientList[key] = [];\n        }\n        clientList[key].push(fn);\n    };\n    trigger = function () {\n        var key = Array.prototype.shift.call(arguments),\n        \n            fns = clientList[key];\n        if (!fns || fns.length === 0) {\n            return false;\n        }\n        for (var i = 0, fn; fn = fns[i++];) {\n            fn.apply(this, arguments);\n        }\n    };\n    remove = function (key, fn) {\n        var fns = clientList[key];\n        if (!fns) {\n            return false;\n        }\n        if (!fn) {\n            fns && (fns.length = 0);\n        } else {\n            for (var l = fns.length - 1; l >= 0; l--) {\n                var _fn = fns[l];\n                if (_fn === fn) {\n                    fns.splice(l, 1);\n                }\n            }\n        }\n    };\n    return {\n        listen: listen,\n        trigger: trigger,\n        remove: remove\n    }\n})();\nEvent.listen('squareMeter88', function (price) { // 小红订阅消息\n    console.log(\"小红订阅消息\")\n    console.log('价格= ' + price); // 输出：'价格=2000000'\n});\nEvent.listen('squareMeter88', function (price) { // 小红订阅消息\n    console.log(\"小ming订阅消息\")\n    console.log('价格= ' + price); // 输出：'价格=2000000'\n});\nEvent.listen('squareMeter11', function (price) { // 小红订阅消息\n    console.log(\"小ming订阅消息\")\n    console.log('价格= ' + price); // 输出：'价格=2000000'\n});\nEvent.trigger('squareMeter88', 2000000); // 售楼处发布消息\nEvent.trigger('squareMeter11', 4000000); // 售楼处发布消息\n//输出结果\n/*\n小红订阅消息\n价格= 2000000\n小ming订阅消息\n价格= 2000000\n小ming订阅消息\n价格= 4000000\n*/\n```\n# 模块间通信\n上一节中实现的发布 — 订阅模式的实现，是基于一个全局的 Event 对象，我们利用它可以在两个封装良好的模块中进行通信，这两个模块可以完全不知道对方的存在。就如同有了中介公司之后，我们不再需要知道房子开售的消息来自哪个售楼处。\n比如现在有两个模块，a模块里面有一个按钮，每次点击按钮之后，b模块里的 div中会显示按钮的总点击次数，我们用全局发布 — 订阅模式完成下面的代码，使得 a 模块和 b 模块可以在保持封装性的前提下进行通信。\n```\n<!DOCTYPE html>\n<html>\n    <body>\n        <button id=\"count\">点我</button>\n        <div id=\"show\"></div>\n    </body>\n<script type=\"text/JavaScript\">\n    var a = (function(){\n    var count = 0;\n    var button = document.getElementById( 'count' );\n    button.onclick = function(){\n            Event.trigger( 'add', count++ );\n        }\n    })();\n    var b = (function(){\n    var div = document.getElementById( 'show' );\n    Event.listen( 'add', function( count ){\n        div.innerHTML = count;\n        });\n    })();\n</script>\n</html>\n```\n但在这里我们要留意另一个问题，模块之间如果用了太多的全局发布 — 订阅模式来通信，那么模块与模块之间的联系就被隐藏到了背后。我们最终会搞不清楚消息来自哪个模块，或者消息会流向哪些模块，这又会给我们的维护带来一些麻烦，也许某个模块的作用就是暴露一些接口给其他模块调用。\n# 必须先订阅再发布吗\n我们所了解到的发布 — 订阅模式，都是订阅者必须先订阅一个消息，随后才能接收到发布者发布的消息。如果把顺序反过来，发布者先发布一条消息，而在此之前并没有对象来订阅它，这条消息无疑将消失在宇宙中。\n在某些情况下，我们需要先将这条消息保存下来，等到有对象来订阅它的时候，再重新把消息发布给订阅者。就如同 QQ中的离线消息一样，离线消息被保存在服务器中，接收人下次登录上线之后，可以重新收到这条消息。\n这种需求在实际项目中是存在的，比如在之前的商城网站中，获取到用户信息之后才能渲染用户导航模块，而获取用户信息的操作是一个 ajax 异步请求。当 ajax 请求成功返回之后会发布一个事件，在此之前订阅了此事件的用户导航模块可以接收到这些用户信息。\n但是这只是理想的状况，因为异步的原因，我们不能保证 ajax请求返回的时间，有时候它返回得比较快，而此时用户导航模块的代码还没有加载好（还没有订阅相应事件），特别是在用了一些模块化惰性加载的技术后，这是很可能发生的事情。也许我们还需要一个方案，使得我们的发布 — 订阅对象拥有先发布后订阅的能力。\n为了满足这个需求，我们要建立一个存放离线事件的堆栈，当事件发布的时候，如果此时还没有订阅者来订阅这个事件，我们暂时把发布事件的动作包裹在一个函数里，这些包装函数将被存入堆栈中，等到终于有对象来订阅此事件的时候，我们将遍历堆栈并且依次执行这些包装函数，也就是重新发布里面的事件。当然离线事件的生命周期只有一次，就像 QQ的未读消息只会被重新阅读一次，所以刚才的操作我们只能进行一次。\n# 全局事件的命名冲突\n全局的发布 — 订阅对象里只有一个 clinetList 来存放消息名和回调函数，大家都通过它来订阅和发布各种消息，久而久之，难免会出现事件名冲突的情况，所以我们还可以给 Event 对象提供创建命名空间的功能。\n在提供最终的代码之前，我们来感受一下怎么使用这两个新增的功能。\n```\n/************** 先发布后订阅 ********************/\nEvent.trigger('click', 1);\nEvent.listen('click', function(a) {\n    console.log(a); // 输出：1\n});\n/************** 使用命名空间 ********************/\nEvent.create('namespace1').listen('click', function(a) {\n    console.log(a); // 输出：1\n});\nEvent.create('namespace1').trigger('click', 1);\nEvent.create('namespace2').listen('click', function(a) {\n    console.log(a); // 输出：2\n});\nEvent.create('namespace2').trigger('click', 2);\n```\n具体实现代码如下：\n```\nvar Event = (function() {\n    var global = this,\n        Event,\n        _default = \"default\";\n    Event = function() {\n        var _listen,\n            _trigger,\n            _remove,\n            _slice = Array.prototype.slice,\n            _shift = Array.prototype.shift,\n            _unshift = Array.prototype.unshift,\n            namespaceCache = {},\n            _create,\n            find,\n            each = function(ary, fn) {\n                var ret;\n                for (var i = 0, l = ary.length; i < l; i++) {\n                    var n = ary[i];\n                    ret = fn.call(n, i, n);\n                }\n                return ret;\n            };\n        _listen = function(key, fn, cache) {\n            if (!cache[key]) {\n                cache[key] = [];\n            }\n            cache[key].push(fn);\n        };\n        _remove = function(key, cache, fn) {\n            if (cache[key]) {\n                if (fn) {\n                    for (var i = cache[key].length; i >= 0; i--) {\n                        if (cache[key][i] === fn) {\n                            cache[key].splice(i, 1);\n                        }\n                    }\n                } else {\n                    cache[key] = [];\n                }\n            }\n        };\n        _trigger = function() {\n            var cache = _shift.call(arguments),\n                key = _shift.call(arguments),\n                args = arguments,\n                _self = this,\n                ret,\n                stack = cache[key];\n            if (!stack || !stack.length) {\n                return;\n            }\n            return each(stack, function() {\n                return this.apply(_self, args);\n            });\n        };\n        _create = function(namespace) {\n            var namespace = namespace || _default;\n            var cache = {},\n                offlineStack = [], // 离线事件\n                ret = {\n                    listen: function(key, fn, last) {\n                        _listen(key, fn, cache);\n                        if (offlineStack === null) {\n                            return;\n                        }\n                        if (last === 'last') {\n                            offlineStack.length && offlineStack.pop()();\n                        } else {\n                            each(offlineStack, function() {\n                                this();\n                            });\n                        }\n                        offlineStack = null;\n                    },\n                    one: function(key, fn, last) {\n                        _remove(key, cache);\n                        this.listen(key, fn, last);\n                    },\n                    remove: function(key, fn) {\n                        _remove(key, cache, fn);\n                    },\n                    trigger: function() {\n                        var fn,\n                            args,\n                            _self = this;\n                        _unshift.call(arguments, cache);\n                        args = arguments;\n                        fn = function() {\n                            return _trigger.apply(_self, args);\n                        };\n                        if (offlineStack) {\n                            return offlineStack.push(fn);\n                        }\n                        return fn();\n                    }\n                };\n            return namespace ?\n                (namespaceCache[namespace] ? namespaceCache[namespace] :\n                    namespaceCache[namespace] = ret) :\n                ret;\n        };\n        return {\n            create: _create,\n            one: function(key, fn, last) {\n                var event = this.create();\n                event.one(key, fn, last);\n            },\n            remove: function(key, fn) {\n                var event = this.create();\n                event.remove(key, fn);\n            },\n            listen: function(key, fn, last) {\n                var event = this.create();\n                event.listen(key, fn, last);\n            },\n            trigger: function() {\n                var event = this.create();\n                event.trigger.apply(this, arguments);\n            }\n        };\n    }();\n    return Event;\n})();\n```\n# JavaScript 实现发布 － 订阅模式的便利性\n这里要提出的是，我们一直讨论的发布 — 订阅模式，跟一些别的语言（比如 Java）中的实现还是有区别的。在 Java中实现一个自己的发布 — 订阅模式，通常会把订阅者对象自身当成引用传入发布者对象中，同时订阅者对象还需提供一个名为诸如 update的方法，供发布者对象在适合的时候调用。而在 JavaScript中，我们用注册回调函数的形式来代替传统的发布 — 订阅模式，显得更加优雅和简单。\n另外，在 JavaScript中，我们无需去选择使用推模型还是拉模型。推模型是指在事件发生时，发布者一次性把所有更改的状态和数据都推送给订阅者。拉模型不同的地方是，发布者仅仅通知订阅者事件已经发生了，此外发布者要提供一些公开的接口供订阅者来主动拉取数据。拉模型的好处是可以让订阅者“按需获取”，但同时有可能让发布者变成一个“门户大开”的对象，同时增加了代码量和复杂度。\n刚好在 JavaScript中， arguments 可以很方便地表示参数列表，所以我们一般都会选择推模型，使用 Function.prototype.apply 方法把所有参数都推送给订阅者。\n# 小结\n本章我们学习了发布 — 订阅模式，也就是常说的观察者模式。发布 — 订阅模式在实际开发中非常有用。\n发布 — 订阅模式的优点非常明显，一为时间上的解耦，二为对象之间的解耦。它的应用非常广泛，既可以用在异步编程中，也可以帮助我们完成更松耦合的代码编写。发布 — 订阅模式还可以用来帮助实现一些别的设计模式，比如中介者模式。 从架构上来看，无论是 MVC还是 MVVM，都少不了发布 — 订阅模式的参与，而且 JavaScript本身也是一门基于事件驱动的语言。\n当然，发布 — 订阅模式也不是完全没有缺点。创建订阅者本身要消耗一定的时间和内存，而且当你订阅一个消息后，也许此消息最后都未发生，但这个订阅者会始终存在于内存中。另外，发布 — 订阅模式虽然可以弱化对象之间的联系，但如果过度使用的话，对象和对象之间的必要联系也将被深埋在背后，会导致程序难以跟踪维护和理解。特别是有多个发布者和订阅者嵌套到一起的时候，要跟踪一个 bug不是件轻松的事情。\n  <font color=#00ffff size=6>End","source":"_posts/JavaScript中的发布-订阅模式.md","raw":"---\nlayout: javascript\ntitle: 发布-订阅模式\ndate: 2017-08-29 10:48:17\ntags:\n    - 发布-订阅\n---\n发布 — 订阅模式又叫观察者模式，它定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。在 JavaScript开发中，我们一般用事件模型来替代传统的发布 — 订阅模式。\n# 现实中的发布 － 订阅模式\n不论是在程序世界里还是现实生活中，发布 — 订阅模式的应用都非常之广泛。我们先看一个现实中的例子。\n小明最近看上了一套房子，到了售楼处之后才被告知，该楼盘的房子早已售罄。好在售楼MM告诉小明，不久后还有一些尾盘推出，开发商正在办理相关手续，手续办好后便可以购买。但到底是什么时候，目前还没有人能够知道。\n于是小明记下了售楼处的电话，以后每天都会打电话过去询问是不是已经到了购买时间。除了小明，还有小红、小强、小龙也会每天向售楼处咨询这个问题。一个星期过后，售楼 MM 决定辞职，因为厌倦了每天回答 1000个相同内容的电话。\n当然现实中没有这么笨的销售公司，实际上故事是这样的：小明离开之前，把电话号码留在了售楼处。售楼 MM 答应他，新楼盘一推出就马上发信息通知小明。小红、小强和小龙也是一样，他们的电话号码都被记在售楼处的花名册上，新楼盘推出的时候，售楼 MM会翻开花名册，遍历上面的电话号码，依次发送一条短信来通知他们。\n# 发布 － 订阅模式的作用\n在刚刚的例子中，发送短信通知就是一个典型的发布 — 订阅模式，小明、小红等购买者都是订阅者，他们订阅了房子开售的消息。售楼处作为发布者，会在合适的时候遍历花名册上的电话号码，依次给购房者发布消息。\n可以发现，在这个例子中使用发布 — 订阅模式有着显而易见的优点\n- 购房者不用再天天给售楼处打电话咨询开售时间，在合适的时间点，售楼处作为发布者\n会通知这些消息订阅者。\n- 购房者和售楼处之间不再强耦合在一起，当有新的购房者出现时，他只需把手机号码留在售楼处，售楼处不关心购房者的任何情况，不管购房者是男是女还是一只猴子。 而售楼处的任何变动也不会影响购买者，比如售楼 MM 离职，售楼处从一楼搬到二楼，这些改变都跟购房者无关，只要售楼处记得发短信这件事情。\n\n第一点说明发布 — 订阅模式可以`广泛应用于异步编程中`，这是一种替代传递回调函数的方案。比如，我们可以订阅 ajax请求的 error 、 succ 等事件。 或者如果想在动画的每一帧完成之后做一些事情，那我们可以订阅一个事件，然后在动画的每一帧完成之后发布这个事件。在异步编程中使用发布 — 订阅模式，我们就无需过多关注对象在异步运行期间的内部状态，而只需要订阅感兴趣的事件发生点。\n第二点说明发布 — 订阅模式可以`取代对象之间硬编码的通知机制`，一个对象不用再显式地调用另外一个对象的某个接口。发布 — 订阅模式让两个对象松耦合地联系在一起，虽然不太清楚彼此的细节，但这不影响它们之间相互通信。当有新的订阅者出现时，发布者的代码不需要任何修改；同样发布者需要改变时，也不会影响到之前的订阅者。只要之前约定的事件名没有变化，就可以自由地改变它们。\n# DOM 事件\n实际上，只要我们曾经在 DOM 节点上面绑定过事件函数，那我们就曾经使用过发布 — 订阅模式，来看看下面这两句简单的代码发生了什么事情：\n```\ndocument.body.addEventListener( 'click', function(){\n    alert(2);\n}, false );\ndocument.body.click(); // 模拟用户点击\n```\n在这里需要监控用户点击 document.body 的动作，但是我们没办法预知用户将在什么时候点击。所以我们订阅 document.body 上的 click 事件，当 body 节点被点击时， body 节点便会向订阅者发布这个消息。这很像购房的例子，购房者不知道房子什么时候开售，于是他在订阅消息后等待售楼处发布消息。\n当然我们还可以随意增加或者删除订阅者，增加任何订阅者都不会影响发布者代码的编写:\n```\ndocument.body.addEventListener( 'click', function(){\n    alert(2);\n}, false );\ndocument.body.addEventListener( 'click', function(){\n    alert(3);\n}, false );\ndocument.body.addEventListener( 'click', function(){\n    alert(4);\n}, false );\ndocument.body.click(); // 模拟用户点击\n```\n注意，手动触发事件更好的做法是 IE下用 fireEvent ，标准浏览器下用` dispatchEvent` 实现。\n# 自定义事件\n除了 DOM 事件，我们还会经常实现一些自定义的事件，这种依靠自定义事件完成的发布 —订阅模式可以用于任何 JavaScript代码中。\n现在看看如何一步步实现发布 — 订阅模式。\n- 首先要指定好谁充当发布者（比如售楼处）；\n- 然后给发布者添加一个缓存列表，用于存放回调函数以便通知订阅者（售楼处的花名册）；\n- 最后发布消息的时候，发布者会遍历这个缓存列表，依次触发里面存放的订阅者回调函数（遍历花名册，挨个发短信）。\n\n另外，我们还可以往回调函数里填入一些参数，订阅者可以接收这些参数。这是很有必要的，比如售楼处可以在发给订阅者的短信里加上房子的单价、面积、容积率等信息，订阅者接收到这些信息之后可以进行各自的处理：\n```\nvar salesOffices={};//定义售楼处\nsalesOffices.clientList=[];//缓存列表，存放订阅者的回调函数\nsalesOffices.listen=function(fn){//增加订阅者\n    this.clientList.push(fn);//订阅的消息添加进缓存列表\n}\nsalesOffices.trigger=function(){//发布消息\n    for(var i=0,fn;fn=this.clientList[i++];){\n        fn.apply(this,arguments);//arguments是发布消息时候带的参数\n    }\n}\n//测试\nsalesOffices.listen(function(price,squareMeter){//小明订阅消息\n    console.log(\"小明收到消息\")\n    console.log('价格='+price);\n    console.log('面积='+squareMeter);\n});\nsalesOffices.listen(function(price,squareMeter){//小红订阅消息\n    console.log(\"小红收到消息\")\n    console.log('价格='+price);\n    console.log('面积='+squareMeter);\n});\nsalesOffices.trigger(200000,88);\nsalesOffices.trigger(100000,100);\n//输出结果\n/*\n小明收到消息\n价格=200000\n面积=88\n小红收到消息\n价格=200000\n面积=88\n小明收到消息\n价格=100000\n面积=100\n小红收到消息\n价格=100000\n面积=100\n*/\n```\n至此，我们已经实现了一个最简单的发布 — 订阅模式，但这里还存在一些问题。我们看到订阅者接收到了发布者发布的每个消息，虽然小明只想买 88 平方米的房子，但是发布者把 110 平方米的信息也推送给了小明，这对小明来说是不必要的困扰。所以我们有必要增加一个标示 key ，让订阅者只订阅自己感兴趣的消息。改写后的代码如下：\n```\nvar salesOffices = {}; // 定义售楼处\nsalesOffices.clientList = {}; // 缓存列表，存放订阅者的回调函数\nsalesOffices.listen = function (key, fn) {\n    if (!this.clientList[key]) { // 如果还没有订阅过此类消息，给该类消息创建一个缓存列表\n        this.clientList[key] = [];\n    }\n    this.clientList[key].push(fn); // 订阅的消息添加进消息缓存列表\n};\nsalesOffices.trigger = function () { // 发布消息\n    var key = Array.prototype.shift.call(arguments), // 取出消息类型\n        fns = this.clientList[key]; // 取出该消息对应的回调函数集合\n    if (!fns || fns.length === 0) { // 如果没有订阅该消息，则返回\n        return false;\n    }\n    for (var i = 0, fn; fn = fns[i++];) {\n        fn.apply(this, arguments); // (2) // arguments 是发布消息时附送的参数\n    }\n};\nsalesOffices.listen('squareMeter88', function (price) { // 小明订阅 88 平方米房子的消息\n    console.log(\"小明订阅 88 平方米房子的消息\")\n    console.log('价格= ' + price); // 输出： 2000000\n});\nsalesOffices.listen('squareMeter110', function (price) { // 小红订阅 110 平方米房子的消息\n    console.log(\"小红订阅 110 平方米房子的消息\")\n    console.log('价格= ' + price); // 输出： 3000000\n});\nsalesOffices.trigger('squareMeter88', 2000000); // 发布 88 平方米房子的价格\nsalesOffices.trigger('squareMeter110', 3000000); // 发布 110 平方米房子的价格\n//输出结果\n/*\n小明订阅 88 平方米房子的消息\n价格= 2000000\n小红订阅 110 平方米房子的消息\n价格= 3000000\n*/\n```\n很明显，现在订阅者可以只订阅自己感兴趣的事件了。\n# 发布 － 订阅模式的通用实现\n现在我们已经看到了如何让售楼处拥有接受订阅和发布事件的功能。假设现在小明又去另一个售楼处买房子，那么这段代码是否必须在另一个售楼处对象上重写一次呢，有没有办法可以让所有对象都拥有发布 — 订阅功能呢？\n答案显然是有的，JavaScript 作为一门解释执行的语言，给对象动态添加职责是理所当然的事情。\n所以我们把发布 — 订阅的功能提取出来，放在一个单独的对象内：\n```\nvar event = {\n    clientList: [],\n    listen: function (key, fn) {\n        if (!this.clientList[key]) {\n            this.clientList[key] = [];\n        }\n        this.clientList[key].push(fn); // 订阅的消息添加进缓存列表\n    },\n    trigger: function () {\n        var key = Array.prototype.shift.call(arguments), // (1);\n            fns = this.clientList[key];\n        if (!fns || fns.length === 0) { // 如果没有绑定对应的消息\n            return false;\n        }\n        for (var i = 0, fn; fn = fns[i++];) {\n            fn.apply(this, arguments); // (2) // arguments 是 trigger 时带上的参数\n        }\n    }\n};\n```\n再定义一个 installEvent 函数，这个函数可以给所有的对象都动态安装发布 — 订阅功能：\n```\nvar installEvent = function (obj) {\n    for (var i in event) {\n        obj[i] = event[i];\n    }\n};\n```\n再来测试一番，我们给售楼处对象 salesOffices 动态增加发布 — 订阅功能：\n```\nvar salesOffices = {};\ninstallEvent(salesOffices);\nsalesOffices.listen('squareMeter88', function (price) { // 小明订阅消息\n    console.log(\"小明订阅消息\")\n    console.log('价格= ' + price);\n});\nsalesOffices.listen('squareMeter100', function (price) { // 小红订阅消息\n    console.log(\"小红订阅消息\")\n    console.log('价格= ' + price);\n});\nsalesOffices.trigger('squareMeter88', 2000000); // 输出：2000000\nsalesOffices.trigger('squareMeter100', 3000000); // 输出：3000000\n//输出结果\n/*\n小明订阅消息\n价格= 2000000\n小红订阅消息\n价格= 3000000\n*/\n```\n# 取消订阅的事件\n有时候，我们也许需要取消订阅事件的功能。比如小明突然不想买房子了，为了避免继续接收到售楼处推送过来的短信，小明需要取消之前订阅的事件。现在我们给 event 对象增加 remove方法：\n```\n\nevent.remove = function (key, fn) {\n    var fns = this.clientList[key];\n    if (!fns) { // 如果 key 对应的消息没有被人订阅，则直接返回\n        return false;\n    }\n    if (!fn) { // 如果没有传入具体的回调函数，表示需要取消 key 对应消息的所有订阅\n        fns && (fns.length = 0);\n    } else {\n        for (var l = fns.length - 1; l >= 0; l--) { // 反向遍历订阅的回调函数列表\n            var _fn = fns[l];\n            if (_fn === fn) {\n                fns.splice(l, 1); // 删除订阅者的回调函数\n            }\n        }\n    }\n};\nvar salesOffices = {};\nvar installEvent = function (obj) {\n    for (var i in event) {\n        obj[i] = event[i];\n    }\n}\ninstallEvent(salesOffices);\nsalesOffices.listen('squareMeter88', fn1 = function (price) { // 小明订阅消息\n    console.log('价格= ' + price);\n});\nsalesOffices.listen('squareMeter88', fn2 = function (price) { // 小红订阅消息\n    console.log('价格= ' + price);\n});\nsalesOffices.remove('squareMeter88', fn1); // 删除小明的订阅\nsalesOffices.trigger('squareMeter88', 2000000); // 输出：2000000\n```\n# 真实的例子——网站登录\n通过售楼处的虚拟例子，我们对发布 — 订阅模式的概念和实现都已经熟悉了，那么现在就趁热打铁，看一个真实的项目。\n假如我们正在开发一个商城网站，网站里有 header头部、nav导航、消息列表、购物车等模块。这几个模块的渲染有一个共同的前提条件，就是必须先用 ajax异步请求获取用户的登录信息。\n这是很正常的，比如用户的名字和头像要显示在 header模块里，而这两个字段都来自用户登录后返回的信息。\n至于 ajax请求什么时候能成功返回用户信息，这点我们没有办法确定。现在的情节看起来像极了售楼处的例子，小明不知道什么时候开发商的售楼手续能够成功办下来。\n但现在还不足以说服我们在此使用发布 — 订阅模式，因为异步的问题通常也可以用回调函数来解决。更重要的一点是，我们不知道除了 header头部、nav导航、消息列表、购物车之外，将来还有哪些模块需要使用这些用户信息。如果它们和用户信息模块产生了强耦合，比如下面这样的形式：\n```\nlogin.succ(function(data){\n    header.setAvatar( data.avatar); // 设置 header 模块的头像\n    nav.setAvatar( data.avatar ); // 设置导航模块的头像\n    message.refresh(); // 刷新消息列表\n    cart.refresh(); // 刷新购物车列表\n});\n```\n现在登录模块是我们负责编写的，但我们还必须了解 header 模块里设置头像的方法叫setAvatar 、购物车模块里刷新的方法叫 refresh ，这种耦合性会使程序变得僵硬，header 模块不能随意再改变 setAvatar 的方法名，它自身的名字也不能被改为 header1、header2。 这是针对具体实现编程的典型例子，针对具体实现编程是不被赞同的。\n等到有一天，项目中又新增了一个收货地址管理的模块，这个模块本来是另一个同事所写的，而此时你正在马来西亚度假，但是他却不得不给你打电话：“Hi，登录之后麻烦刷新一下收货地址列表。”于是你又翻开你 3个月前写的登录模块，在最后部分加上这行代码：\n```\nlogin.succ(function( data ){\n    header.setAvatar( data.avatar);\n    nav.setAvatar( data.avatar );\n    message.refresh();\n    cart.refresh();\n    address.refresh(); // 增加这行代码\n});\n```\n我们就会越来越疲于应付这些突如其来的业务要求，要么跳槽了事，要么必须来重构这些代码。\n用发布 — 订阅模式重写之后，对用户信息感兴趣的业务模块将自行订阅登录成功的消息事件。当登录成功时，登录模块只需要发布登录成功的消息，而业务方接受到消息之后，就会开始进行各自的业务处理，登录模块并不关心业务方究竟要做什么，也不想去了解它们的内部细节。改善后的代码如下： \n```\n$.ajax( 'http:// xxx.com?login', function(data){ // 登录成功\n    login.trigger( 'loginSucc', data); // 发布登录成功的消息\n});\n```\n各模块监听登录成功的消息：\n```\nvar header = (function () { // header 模块\n    login.listen('loginSucc', function (data) {\n        header.setAvatar(data.avatar);\n    });\n    return {\n        setAvatar: function (data) {\n            console.log('设置 header 模块的头像');\n        }\n    }\n})();\nvar nav = (function () { // nav 模块\n    login.listen('loginSucc', function (data) {\n        nav.setAvatar(data.avatar);\n    });\n    return {\n        setAvatar: function (avatar) {\n            console.log('设置 nav 模块的头像');\n        }\n    }\n})();\n```\n如上所述，我们随时可以把 setAvatar 的方法名改成 setTouxiang 。如果有一天在登录完成之后，又增加一个刷新收货地址列表的行为，那么只要在收货地址模块里加上监听消息的方法即可，而这可以让开发该模块的同事自己完成，你作为登录模块的开发者，永远不用再关心这些行为了。代码如下：\n```\nvar address = (function () { // nav 模块\n    login.listen('loginSucc', function (obj) {\n        address.refresh(obj);\n    });\n    return {\n        refresh: function (avatar) {\n            console.log('刷新收货地址列表');\n        }\n    }\n})();\n```\n# 全局的发布 － 订阅对象\n回想下刚刚实现的发布 — 订阅模式，我们给售楼处对象和登录对象都添加了订阅和发布的功能，这里还存在两个小问题。\n- 我们给每个发布者对象都添加了 listen 和 trigger 方法，以及一个缓存列表 clientList ，这其实是一种资源浪费。\n- 小明跟售楼处对象还是存在一定的耦合性，小明至少要知道售楼处对象的名字是salesOffices ，才能顺利的订阅到事件。见如下代码：\n```\nsalesOffices.listen( 'squareMeter100', function( price ){ // 小明订阅消息\n    console.log( '价格= ' + price );\n});\n```\n如果小明还关心 300平方米的房子，而这套房子的卖家是 salesOffices2 ，这意味着小明要开始订阅 salesOffices2 对象。见如下代码：\n```\nsalesOffices2.listen( 'squareMeter300', function( price ){ // 小明订阅消息\n    console.log( '价格= ' + price );\n});\n```\n其实在现实中，买房子未必要亲自去售楼处，我们只要把订阅的请求交给中介公司，而各大房产公司也只需要通过中介公司来发布房子信息。这样一来，我们不用关心消息是来自哪个房产公司，我们在意的是能否顺利收到消息。当然，为了保证订阅者和发布者能顺利通信，订阅者和发布者都必须知道这个中介公司。\n同样在程序中，发布 — 订阅模式可以用一个全局的 `Event `对象来实现，订阅者不需要了解消息来自哪个发布者，发布者也不知道消息会推送给哪些订阅者， Event 作为一个类似“中介者”的角色，把订阅者和发布者联系起来。见如下代码：\n```\nvar Event = (function () {\n    var clientList = {},\n        listen,\n        trigger,\n        remove;\n    listen = function (key, fn) {\n        if (!clientList[key]) {\n            clientList[key] = [];\n        }\n        clientList[key].push(fn);\n    };\n    trigger = function () {\n        var key = Array.prototype.shift.call(arguments),\n        \n            fns = clientList[key];\n        if (!fns || fns.length === 0) {\n            return false;\n        }\n        for (var i = 0, fn; fn = fns[i++];) {\n            fn.apply(this, arguments);\n        }\n    };\n    remove = function (key, fn) {\n        var fns = clientList[key];\n        if (!fns) {\n            return false;\n        }\n        if (!fn) {\n            fns && (fns.length = 0);\n        } else {\n            for (var l = fns.length - 1; l >= 0; l--) {\n                var _fn = fns[l];\n                if (_fn === fn) {\n                    fns.splice(l, 1);\n                }\n            }\n        }\n    };\n    return {\n        listen: listen,\n        trigger: trigger,\n        remove: remove\n    }\n})();\nEvent.listen('squareMeter88', function (price) { // 小红订阅消息\n    console.log(\"小红订阅消息\")\n    console.log('价格= ' + price); // 输出：'价格=2000000'\n});\nEvent.listen('squareMeter88', function (price) { // 小红订阅消息\n    console.log(\"小ming订阅消息\")\n    console.log('价格= ' + price); // 输出：'价格=2000000'\n});\nEvent.listen('squareMeter11', function (price) { // 小红订阅消息\n    console.log(\"小ming订阅消息\")\n    console.log('价格= ' + price); // 输出：'价格=2000000'\n});\nEvent.trigger('squareMeter88', 2000000); // 售楼处发布消息\nEvent.trigger('squareMeter11', 4000000); // 售楼处发布消息\n//输出结果\n/*\n小红订阅消息\n价格= 2000000\n小ming订阅消息\n价格= 2000000\n小ming订阅消息\n价格= 4000000\n*/\n```\n# 模块间通信\n上一节中实现的发布 — 订阅模式的实现，是基于一个全局的 Event 对象，我们利用它可以在两个封装良好的模块中进行通信，这两个模块可以完全不知道对方的存在。就如同有了中介公司之后，我们不再需要知道房子开售的消息来自哪个售楼处。\n比如现在有两个模块，a模块里面有一个按钮，每次点击按钮之后，b模块里的 div中会显示按钮的总点击次数，我们用全局发布 — 订阅模式完成下面的代码，使得 a 模块和 b 模块可以在保持封装性的前提下进行通信。\n```\n<!DOCTYPE html>\n<html>\n    <body>\n        <button id=\"count\">点我</button>\n        <div id=\"show\"></div>\n    </body>\n<script type=\"text/JavaScript\">\n    var a = (function(){\n    var count = 0;\n    var button = document.getElementById( 'count' );\n    button.onclick = function(){\n            Event.trigger( 'add', count++ );\n        }\n    })();\n    var b = (function(){\n    var div = document.getElementById( 'show' );\n    Event.listen( 'add', function( count ){\n        div.innerHTML = count;\n        });\n    })();\n</script>\n</html>\n```\n但在这里我们要留意另一个问题，模块之间如果用了太多的全局发布 — 订阅模式来通信，那么模块与模块之间的联系就被隐藏到了背后。我们最终会搞不清楚消息来自哪个模块，或者消息会流向哪些模块，这又会给我们的维护带来一些麻烦，也许某个模块的作用就是暴露一些接口给其他模块调用。\n# 必须先订阅再发布吗\n我们所了解到的发布 — 订阅模式，都是订阅者必须先订阅一个消息，随后才能接收到发布者发布的消息。如果把顺序反过来，发布者先发布一条消息，而在此之前并没有对象来订阅它，这条消息无疑将消失在宇宙中。\n在某些情况下，我们需要先将这条消息保存下来，等到有对象来订阅它的时候，再重新把消息发布给订阅者。就如同 QQ中的离线消息一样，离线消息被保存在服务器中，接收人下次登录上线之后，可以重新收到这条消息。\n这种需求在实际项目中是存在的，比如在之前的商城网站中，获取到用户信息之后才能渲染用户导航模块，而获取用户信息的操作是一个 ajax 异步请求。当 ajax 请求成功返回之后会发布一个事件，在此之前订阅了此事件的用户导航模块可以接收到这些用户信息。\n但是这只是理想的状况，因为异步的原因，我们不能保证 ajax请求返回的时间，有时候它返回得比较快，而此时用户导航模块的代码还没有加载好（还没有订阅相应事件），特别是在用了一些模块化惰性加载的技术后，这是很可能发生的事情。也许我们还需要一个方案，使得我们的发布 — 订阅对象拥有先发布后订阅的能力。\n为了满足这个需求，我们要建立一个存放离线事件的堆栈，当事件发布的时候，如果此时还没有订阅者来订阅这个事件，我们暂时把发布事件的动作包裹在一个函数里，这些包装函数将被存入堆栈中，等到终于有对象来订阅此事件的时候，我们将遍历堆栈并且依次执行这些包装函数，也就是重新发布里面的事件。当然离线事件的生命周期只有一次，就像 QQ的未读消息只会被重新阅读一次，所以刚才的操作我们只能进行一次。\n# 全局事件的命名冲突\n全局的发布 — 订阅对象里只有一个 clinetList 来存放消息名和回调函数，大家都通过它来订阅和发布各种消息，久而久之，难免会出现事件名冲突的情况，所以我们还可以给 Event 对象提供创建命名空间的功能。\n在提供最终的代码之前，我们来感受一下怎么使用这两个新增的功能。\n```\n/************** 先发布后订阅 ********************/\nEvent.trigger('click', 1);\nEvent.listen('click', function(a) {\n    console.log(a); // 输出：1\n});\n/************** 使用命名空间 ********************/\nEvent.create('namespace1').listen('click', function(a) {\n    console.log(a); // 输出：1\n});\nEvent.create('namespace1').trigger('click', 1);\nEvent.create('namespace2').listen('click', function(a) {\n    console.log(a); // 输出：2\n});\nEvent.create('namespace2').trigger('click', 2);\n```\n具体实现代码如下：\n```\nvar Event = (function() {\n    var global = this,\n        Event,\n        _default = \"default\";\n    Event = function() {\n        var _listen,\n            _trigger,\n            _remove,\n            _slice = Array.prototype.slice,\n            _shift = Array.prototype.shift,\n            _unshift = Array.prototype.unshift,\n            namespaceCache = {},\n            _create,\n            find,\n            each = function(ary, fn) {\n                var ret;\n                for (var i = 0, l = ary.length; i < l; i++) {\n                    var n = ary[i];\n                    ret = fn.call(n, i, n);\n                }\n                return ret;\n            };\n        _listen = function(key, fn, cache) {\n            if (!cache[key]) {\n                cache[key] = [];\n            }\n            cache[key].push(fn);\n        };\n        _remove = function(key, cache, fn) {\n            if (cache[key]) {\n                if (fn) {\n                    for (var i = cache[key].length; i >= 0; i--) {\n                        if (cache[key][i] === fn) {\n                            cache[key].splice(i, 1);\n                        }\n                    }\n                } else {\n                    cache[key] = [];\n                }\n            }\n        };\n        _trigger = function() {\n            var cache = _shift.call(arguments),\n                key = _shift.call(arguments),\n                args = arguments,\n                _self = this,\n                ret,\n                stack = cache[key];\n            if (!stack || !stack.length) {\n                return;\n            }\n            return each(stack, function() {\n                return this.apply(_self, args);\n            });\n        };\n        _create = function(namespace) {\n            var namespace = namespace || _default;\n            var cache = {},\n                offlineStack = [], // 离线事件\n                ret = {\n                    listen: function(key, fn, last) {\n                        _listen(key, fn, cache);\n                        if (offlineStack === null) {\n                            return;\n                        }\n                        if (last === 'last') {\n                            offlineStack.length && offlineStack.pop()();\n                        } else {\n                            each(offlineStack, function() {\n                                this();\n                            });\n                        }\n                        offlineStack = null;\n                    },\n                    one: function(key, fn, last) {\n                        _remove(key, cache);\n                        this.listen(key, fn, last);\n                    },\n                    remove: function(key, fn) {\n                        _remove(key, cache, fn);\n                    },\n                    trigger: function() {\n                        var fn,\n                            args,\n                            _self = this;\n                        _unshift.call(arguments, cache);\n                        args = arguments;\n                        fn = function() {\n                            return _trigger.apply(_self, args);\n                        };\n                        if (offlineStack) {\n                            return offlineStack.push(fn);\n                        }\n                        return fn();\n                    }\n                };\n            return namespace ?\n                (namespaceCache[namespace] ? namespaceCache[namespace] :\n                    namespaceCache[namespace] = ret) :\n                ret;\n        };\n        return {\n            create: _create,\n            one: function(key, fn, last) {\n                var event = this.create();\n                event.one(key, fn, last);\n            },\n            remove: function(key, fn) {\n                var event = this.create();\n                event.remove(key, fn);\n            },\n            listen: function(key, fn, last) {\n                var event = this.create();\n                event.listen(key, fn, last);\n            },\n            trigger: function() {\n                var event = this.create();\n                event.trigger.apply(this, arguments);\n            }\n        };\n    }();\n    return Event;\n})();\n```\n# JavaScript 实现发布 － 订阅模式的便利性\n这里要提出的是，我们一直讨论的发布 — 订阅模式，跟一些别的语言（比如 Java）中的实现还是有区别的。在 Java中实现一个自己的发布 — 订阅模式，通常会把订阅者对象自身当成引用传入发布者对象中，同时订阅者对象还需提供一个名为诸如 update的方法，供发布者对象在适合的时候调用。而在 JavaScript中，我们用注册回调函数的形式来代替传统的发布 — 订阅模式，显得更加优雅和简单。\n另外，在 JavaScript中，我们无需去选择使用推模型还是拉模型。推模型是指在事件发生时，发布者一次性把所有更改的状态和数据都推送给订阅者。拉模型不同的地方是，发布者仅仅通知订阅者事件已经发生了，此外发布者要提供一些公开的接口供订阅者来主动拉取数据。拉模型的好处是可以让订阅者“按需获取”，但同时有可能让发布者变成一个“门户大开”的对象，同时增加了代码量和复杂度。\n刚好在 JavaScript中， arguments 可以很方便地表示参数列表，所以我们一般都会选择推模型，使用 Function.prototype.apply 方法把所有参数都推送给订阅者。\n# 小结\n本章我们学习了发布 — 订阅模式，也就是常说的观察者模式。发布 — 订阅模式在实际开发中非常有用。\n发布 — 订阅模式的优点非常明显，一为时间上的解耦，二为对象之间的解耦。它的应用非常广泛，既可以用在异步编程中，也可以帮助我们完成更松耦合的代码编写。发布 — 订阅模式还可以用来帮助实现一些别的设计模式，比如中介者模式。 从架构上来看，无论是 MVC还是 MVVM，都少不了发布 — 订阅模式的参与，而且 JavaScript本身也是一门基于事件驱动的语言。\n当然，发布 — 订阅模式也不是完全没有缺点。创建订阅者本身要消耗一定的时间和内存，而且当你订阅一个消息后，也许此消息最后都未发生，但这个订阅者会始终存在于内存中。另外，发布 — 订阅模式虽然可以弱化对象之间的联系，但如果过度使用的话，对象和对象之间的必要联系也将被深埋在背后，会导致程序难以跟踪维护和理解。特别是有多个发布者和订阅者嵌套到一起的时候，要跟踪一个 bug不是件轻松的事情。\n  <font color=#00ffff size=6>End","slug":"JavaScript中的发布-订阅模式","published":1,"updated":"2020-03-12T13:55:48.637Z","comments":1,"photos":[],"link":"","_id":"ck7otizpz00037guiq7r32ig4","content":"<p>发布 — 订阅模式又叫观察者模式，它定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。在 JavaScript开发中，我们一般用事件模型来替代传统的发布 — 订阅模式。</p>\n<h1 id=\"现实中的发布-－-订阅模式\"><a href=\"#现实中的发布-－-订阅模式\" class=\"headerlink\" title=\"现实中的发布 － 订阅模式\"></a>现实中的发布 － 订阅模式</h1><p>不论是在程序世界里还是现实生活中，发布 — 订阅模式的应用都非常之广泛。我们先看一个现实中的例子。<br>小明最近看上了一套房子，到了售楼处之后才被告知，该楼盘的房子早已售罄。好在售楼MM告诉小明，不久后还有一些尾盘推出，开发商正在办理相关手续，手续办好后便可以购买。但到底是什么时候，目前还没有人能够知道。<br>于是小明记下了售楼处的电话，以后每天都会打电话过去询问是不是已经到了购买时间。除了小明，还有小红、小强、小龙也会每天向售楼处咨询这个问题。一个星期过后，售楼 MM 决定辞职，因为厌倦了每天回答 1000个相同内容的电话。<br>当然现实中没有这么笨的销售公司，实际上故事是这样的：小明离开之前，把电话号码留在了售楼处。售楼 MM 答应他，新楼盘一推出就马上发信息通知小明。小红、小强和小龙也是一样，他们的电话号码都被记在售楼处的花名册上，新楼盘推出的时候，售楼 MM会翻开花名册，遍历上面的电话号码，依次发送一条短信来通知他们。</p>\n<h1 id=\"发布-－-订阅模式的作用\"><a href=\"#发布-－-订阅模式的作用\" class=\"headerlink\" title=\"发布 － 订阅模式的作用\"></a>发布 － 订阅模式的作用</h1><p>在刚刚的例子中，发送短信通知就是一个典型的发布 — 订阅模式，小明、小红等购买者都是订阅者，他们订阅了房子开售的消息。售楼处作为发布者，会在合适的时候遍历花名册上的电话号码，依次给购房者发布消息。<br>可以发现，在这个例子中使用发布 — 订阅模式有着显而易见的优点</p>\n<ul>\n<li>购房者不用再天天给售楼处打电话咨询开售时间，在合适的时间点，售楼处作为发布者<br>会通知这些消息订阅者。</li>\n<li>购房者和售楼处之间不再强耦合在一起，当有新的购房者出现时，他只需把手机号码留在售楼处，售楼处不关心购房者的任何情况，不管购房者是男是女还是一只猴子。 而售楼处的任何变动也不会影响购买者，比如售楼 MM 离职，售楼处从一楼搬到二楼，这些改变都跟购房者无关，只要售楼处记得发短信这件事情。</li>\n</ul>\n<p>第一点说明发布 — 订阅模式可以<code>广泛应用于异步编程中</code>，这是一种替代传递回调函数的方案。比如，我们可以订阅 ajax请求的 error 、 succ 等事件。 或者如果想在动画的每一帧完成之后做一些事情，那我们可以订阅一个事件，然后在动画的每一帧完成之后发布这个事件。在异步编程中使用发布 — 订阅模式，我们就无需过多关注对象在异步运行期间的内部状态，而只需要订阅感兴趣的事件发生点。<br>第二点说明发布 — 订阅模式可以<code>取代对象之间硬编码的通知机制</code>，一个对象不用再显式地调用另外一个对象的某个接口。发布 — 订阅模式让两个对象松耦合地联系在一起，虽然不太清楚彼此的细节，但这不影响它们之间相互通信。当有新的订阅者出现时，发布者的代码不需要任何修改；同样发布者需要改变时，也不会影响到之前的订阅者。只要之前约定的事件名没有变化，就可以自由地改变它们。</p>\n<h1 id=\"DOM-事件\"><a href=\"#DOM-事件\" class=\"headerlink\" title=\"DOM 事件\"></a>DOM 事件</h1><p>实际上，只要我们曾经在 DOM 节点上面绑定过事件函数，那我们就曾经使用过发布 — 订阅模式，来看看下面这两句简单的代码发生了什么事情：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.click(); <span class=\"comment\">// 模拟用户点击</span></span><br></pre></td></tr></table></figure></p>\n<p>在这里需要监控用户点击 document.body 的动作，但是我们没办法预知用户将在什么时候点击。所以我们订阅 document.body 上的 click 事件，当 body 节点被点击时， body 节点便会向订阅者发布这个消息。这很像购房的例子，购房者不知道房子什么时候开售，于是他在订阅消息后等待售楼处发布消息。<br>当然我们还可以随意增加或者删除订阅者，增加任何订阅者都不会影响发布者代码的编写:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.click(); <span class=\"comment\">// 模拟用户点击</span></span><br></pre></td></tr></table></figure></p>\n<p>注意，手动触发事件更好的做法是 IE下用 fireEvent ，标准浏览器下用<code>dispatchEvent</code> 实现。</p>\n<h1 id=\"自定义事件\"><a href=\"#自定义事件\" class=\"headerlink\" title=\"自定义事件\"></a>自定义事件</h1><p>除了 DOM 事件，我们还会经常实现一些自定义的事件，这种依靠自定义事件完成的发布 —订阅模式可以用于任何 JavaScript代码中。<br>现在看看如何一步步实现发布 — 订阅模式。</p>\n<ul>\n<li>首先要指定好谁充当发布者（比如售楼处）；</li>\n<li>然后给发布者添加一个缓存列表，用于存放回调函数以便通知订阅者（售楼处的花名册）；</li>\n<li>最后发布消息的时候，发布者会遍历这个缓存列表，依次触发里面存放的订阅者回调函数（遍历花名册，挨个发短信）。</li>\n</ul>\n<p>另外，我们还可以往回调函数里填入一些参数，订阅者可以接收这些参数。这是很有必要的，比如售楼处可以在发给订阅者的短信里加上房子的单价、面积、容积率等信息，订阅者接收到这些信息之后可以进行各自的处理：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> salesOffices=&#123;&#125;;<span class=\"comment\">//定义售楼处</span></span><br><span class=\"line\">salesOffices.clientList=[];<span class=\"comment\">//缓存列表，存放订阅者的回调函数</span></span><br><span class=\"line\">salesOffices.listen=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">fn</span>)</span>&#123;<span class=\"comment\">//增加订阅者</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.clientList.push(fn);<span class=\"comment\">//订阅的消息添加进缓存列表</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">salesOffices.trigger=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"comment\">//发布消息</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>,fn;fn=<span class=\"keyword\">this</span>.clientList[i++];)&#123;</span><br><span class=\"line\">        fn.apply(<span class=\"keyword\">this</span>,<span class=\"built_in\">arguments</span>);<span class=\"comment\">//arguments是发布消息时候带的参数</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//测试</span></span><br><span class=\"line\">salesOffices.listen(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">price,squareMeter</span>)</span>&#123;<span class=\"comment\">//小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小明收到消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格='</span>+price);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'面积='</span>+squareMeter);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">price,squareMeter</span>)</span>&#123;<span class=\"comment\">//小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红收到消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格='</span>+price);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'面积='</span>+squareMeter);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"number\">200000</span>,<span class=\"number\">88</span>);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"number\">100000</span>,<span class=\"number\">100</span>);</span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小明收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=200000</span></span><br><span class=\"line\"><span class=\"comment\">面积=88</span></span><br><span class=\"line\"><span class=\"comment\">小红收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=200000</span></span><br><span class=\"line\"><span class=\"comment\">面积=88</span></span><br><span class=\"line\"><span class=\"comment\">小明收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=100000</span></span><br><span class=\"line\"><span class=\"comment\">面积=100</span></span><br><span class=\"line\"><span class=\"comment\">小红收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=100000</span></span><br><span class=\"line\"><span class=\"comment\">面积=100</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<p>至此，我们已经实现了一个最简单的发布 — 订阅模式，但这里还存在一些问题。我们看到订阅者接收到了发布者发布的每个消息，虽然小明只想买 88 平方米的房子，但是发布者把 110 平方米的信息也推送给了小明，这对小明来说是不必要的困扰。所以我们有必要增加一个标示 key ，让订阅者只订阅自己感兴趣的消息。改写后的代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> salesOffices = &#123;&#125;; <span class=\"comment\">// 定义售楼处</span></span><br><span class=\"line\">salesOffices.clientList = &#123;&#125;; <span class=\"comment\">// 缓存列表，存放订阅者的回调函数</span></span><br><span class=\"line\">salesOffices.listen = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.clientList[key]) &#123; <span class=\"comment\">// 如果还没有订阅过此类消息，给该类消息创建一个缓存列表</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.clientList[key] = [];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.clientList[key].push(fn); <span class=\"comment\">// 订阅的消息添加进消息缓存列表</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">salesOffices.trigger = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// 发布消息</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = <span class=\"built_in\">Array</span>.prototype.shift.call(<span class=\"built_in\">arguments</span>), <span class=\"comment\">// 取出消息类型</span></span><br><span class=\"line\">        fns = <span class=\"keyword\">this</span>.clientList[key]; <span class=\"comment\">// 取出该消息对应的回调函数集合</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fns || fns.length === <span class=\"number\">0</span>) &#123; <span class=\"comment\">// 如果没有订阅该消息，则返回</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, fn; fn = fns[i++];) &#123;</span><br><span class=\"line\">        fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>); <span class=\"comment\">// (2) // arguments 是发布消息时附送的参数</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小明订阅 88 平方米房子的消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小明订阅 88 平方米房子的消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出： 2000000</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter110'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅 110 平方米房子的消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红订阅 110 平方米房子的消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出： 3000000</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 发布 88 平方米房子的价格</span></span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter110'</span>, <span class=\"number\">3000000</span>); <span class=\"comment\">// 发布 110 平方米房子的价格</span></span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小明订阅 88 平方米房子的消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小红订阅 110 平方米房子的消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 3000000</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<p>很明显，现在订阅者可以只订阅自己感兴趣的事件了。</p>\n<h1 id=\"发布-－-订阅模式的通用实现\"><a href=\"#发布-－-订阅模式的通用实现\" class=\"headerlink\" title=\"发布 － 订阅模式的通用实现\"></a>发布 － 订阅模式的通用实现</h1><p>现在我们已经看到了如何让售楼处拥有接受订阅和发布事件的功能。假设现在小明又去另一个售楼处买房子，那么这段代码是否必须在另一个售楼处对象上重写一次呢，有没有办法可以让所有对象都拥有发布 — 订阅功能呢？<br>答案显然是有的，JavaScript 作为一门解释执行的语言，给对象动态添加职责是理所当然的事情。<br>所以我们把发布 — 订阅的功能提取出来，放在一个单独的对象内：<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var event = &#123;</span><br><span class=\"line\">    clientList: [],</span><br><span class=\"line\">    listen: function (<span class=\"built_in\">key</span>, <span class=\"function\"><span class=\"keyword\">fn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">if</span> <span class=\"params\">(!this.clientList[<span class=\"built_in\">key</span>])</span> &#123;</span></span><br><span class=\"line\"><span class=\"function\">            this.clientList[<span class=\"built_in\">key</span>] = []</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        this.clientList[<span class=\"built_in\">key</span>].<span class=\"keyword\">push</span>(<span class=\"function\"><span class=\"keyword\">fn</span>)</span>; <span class=\"comment\">// 订阅的消息添加进缓存列表</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    trigger: function () &#123;</span><br><span class=\"line\">        var <span class=\"built_in\">key</span> = Array.prototype.shift.<span class=\"keyword\">call</span>(arguments), <span class=\"comment\">// (1);</span></span><br><span class=\"line\">            fns = this.clientList[<span class=\"built_in\">key</span>];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fns || fns.length === <span class=\"number\">0</span>) &#123; <span class=\"comment\">// 如果没有绑定对应的消息</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> false;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (var i = <span class=\"number\">0</span>, <span class=\"function\"><span class=\"keyword\">fn</span></span>; <span class=\"function\"><span class=\"keyword\">fn</span> = fns[i++]</span>;) &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">fn</span>.apply<span class=\"params\">(this, arguments)</span></span>; <span class=\"comment\">// (2) // arguments 是 trigger 时带上的参数</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>再定义一个 installEvent 函数，这个函数可以给所有的对象都动态安装发布 — 订阅功能：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> installEvent = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(obj)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> event) &#123;</span><br><span class=\"line\">        obj[i] = event[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>再来测试一番，我们给售楼处对象 salesOffices 动态增加发布 — 订阅功能：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> salesOffices = &#123;&#125;;</span><br><span class=\"line\">installEvent(salesOffices);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小明订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter100'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 输出：2000000</span></span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter100'</span>, <span class=\"number\">3000000</span>); <span class=\"comment\">// 输出：3000000</span></span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小明订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小红订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 3000000</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"取消订阅的事件\"><a href=\"#取消订阅的事件\" class=\"headerlink\" title=\"取消订阅的事件\"></a>取消订阅的事件</h1><p>有时候，我们也许需要取消订阅事件的功能。比如小明突然不想买房子了，为了避免继续接收到售楼处推送过来的短信，小明需要取消之前订阅的事件。现在我们给 event 对象增加 remove方法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">event.remove = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> fns = <span class=\"keyword\">this</span>.clientList[key];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fns) &#123; <span class=\"comment\">// 如果 key 对应的消息没有被人订阅，则直接返回</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fn) &#123; <span class=\"comment\">// 如果没有传入具体的回调函数，表示需要取消 key 对应消息的所有订阅</span></span><br><span class=\"line\">        fns &amp;&amp; (fns.length = <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> l = fns.length - <span class=\"number\">1</span>; l &gt;= <span class=\"number\">0</span>; l--) &#123; <span class=\"comment\">// 反向遍历订阅的回调函数列表</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> _fn = fns[l];</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (_fn === fn) &#123;</span><br><span class=\"line\">                fns.splice(l, <span class=\"number\">1</span>); <span class=\"comment\">// 删除订阅者的回调函数</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> salesOffices = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> installEvent = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> event) &#123;</span><br><span class=\"line\">        obj[i] = event[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">installEvent(salesOffices);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, fn1 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, fn2 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.remove(<span class=\"string\">'squareMeter88'</span>, fn1); <span class=\"comment\">// 删除小明的订阅</span></span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 输出：2000000</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"真实的例子——网站登录\"><a href=\"#真实的例子——网站登录\" class=\"headerlink\" title=\"真实的例子——网站登录\"></a>真实的例子——网站登录</h1><p>通过售楼处的虚拟例子，我们对发布 — 订阅模式的概念和实现都已经熟悉了，那么现在就趁热打铁，看一个真实的项目。<br>假如我们正在开发一个商城网站，网站里有 header头部、nav导航、消息列表、购物车等模块。这几个模块的渲染有一个共同的前提条件，就是必须先用 ajax异步请求获取用户的登录信息。<br>这是很正常的，比如用户的名字和头像要显示在 header模块里，而这两个字段都来自用户登录后返回的信息。<br>至于 ajax请求什么时候能成功返回用户信息，这点我们没有办法确定。现在的情节看起来像极了售楼处的例子，小明不知道什么时候开发商的售楼手续能够成功办下来。<br>但现在还不足以说服我们在此使用发布 — 订阅模式，因为异步的问题通常也可以用回调函数来解决。更重要的一点是，我们不知道除了 header头部、nav导航、消息列表、购物车之外，将来还有哪些模块需要使用这些用户信息。如果它们和用户信息模块产生了强耦合，比如下面这样的形式：<br><figure class=\"highlight lasso\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">login.succ(function(<span class=\"built_in\">data</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">header</span>.setAvatar( <span class=\"built_in\">data</span>.avatar); <span class=\"comment\">// 设置 header 模块的头像</span></span><br><span class=\"line\">    nav.setAvatar( <span class=\"built_in\">data</span>.avatar ); <span class=\"comment\">// 设置导航模块的头像</span></span><br><span class=\"line\">    message.refresh(); <span class=\"comment\">// 刷新消息列表</span></span><br><span class=\"line\">    cart.refresh(); <span class=\"comment\">// 刷新购物车列表</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>现在登录模块是我们负责编写的，但我们还必须了解 header 模块里设置头像的方法叫setAvatar 、购物车模块里刷新的方法叫 refresh ，这种耦合性会使程序变得僵硬，header 模块不能随意再改变 setAvatar 的方法名，它自身的名字也不能被改为 header1、header2。 这是针对具体实现编程的典型例子，针对具体实现编程是不被赞同的。<br>等到有一天，项目中又新增了一个收货地址管理的模块，这个模块本来是另一个同事所写的，而此时你正在马来西亚度假，但是他却不得不给你打电话：“Hi，登录之后麻烦刷新一下收货地址列表。”于是你又翻开你 3个月前写的登录模块，在最后部分加上这行代码：<br><figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">login.succ(function( data )&#123;</span><br><span class=\"line\">    header.setAvatar( data.avatar)<span class=\"comment\">;</span></span><br><span class=\"line\">    nav.setAvatar( data.avatar )<span class=\"comment\">;</span></span><br><span class=\"line\">    message.refresh()<span class=\"comment\">;</span></span><br><span class=\"line\">    cart.refresh()<span class=\"comment\">;</span></span><br><span class=\"line\">    address.refresh()<span class=\"comment\">; // 增加这行代码</span></span><br><span class=\"line\">&#125;)<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure></p>\n<p>我们就会越来越疲于应付这些突如其来的业务要求，要么跳槽了事，要么必须来重构这些代码。<br>用发布 — 订阅模式重写之后，对用户信息感兴趣的业务模块将自行订阅登录成功的消息事件。当登录成功时，登录模块只需要发布登录成功的消息，而业务方接受到消息之后，就会开始进行各自的业务处理，登录模块并不关心业务方究竟要做什么，也不想去了解它们的内部细节。改善后的代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax( <span class=\"string\">'http:// xxx.com?login'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123; <span class=\"comment\">// 登录成功</span></span><br><span class=\"line\">    login.trigger( <span class=\"string\">'loginSucc'</span>, data); <span class=\"comment\">// 发布登录成功的消息</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>各模块监听登录成功的消息：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> header = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// header 模块</span></span><br><span class=\"line\">    login.listen(<span class=\"string\">'loginSucc'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        header.setAvatar(data.avatar);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        setAvatar: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'设置 header 模块的头像'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"><span class=\"keyword\">var</span> nav = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// nav 模块</span></span><br><span class=\"line\">    login.listen(<span class=\"string\">'loginSucc'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        nav.setAvatar(data.avatar);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        setAvatar: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">avatar</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'设置 nav 模块的头像'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></p>\n<p>如上所述，我们随时可以把 setAvatar 的方法名改成 setTouxiang 。如果有一天在登录完成之后，又增加一个刷新收货地址列表的行为，那么只要在收货地址模块里加上监听消息的方法即可，而这可以让开发该模块的同事自己完成，你作为登录模块的开发者，永远不用再关心这些行为了。代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> address = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// nav 模块</span></span><br><span class=\"line\">    login.listen(<span class=\"string\">'loginSucc'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">        address.refresh(obj);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        refresh: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">avatar</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'刷新收货地址列表'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"全局的发布-－-订阅对象\"><a href=\"#全局的发布-－-订阅对象\" class=\"headerlink\" title=\"全局的发布 － 订阅对象\"></a>全局的发布 － 订阅对象</h1><p>回想下刚刚实现的发布 — 订阅模式，我们给售楼处对象和登录对象都添加了订阅和发布的功能，这里还存在两个小问题。</p>\n<ul>\n<li>我们给每个发布者对象都添加了 listen 和 trigger 方法，以及一个缓存列表 clientList ，这其实是一种资源浪费。</li>\n<li>小明跟售楼处对象还是存在一定的耦合性，小明至少要知道售楼处对象的名字是salesOffices ，才能顺利的订阅到事件。见如下代码：<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salesOffices.listen( <span class=\"string\">'squareMeter100'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> price </span>)</span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log( <span class=\"string\">'价格= '</span> + price );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>如果小明还关心 300平方米的房子，而这套房子的卖家是 salesOffices2 ，这意味着小明要开始订阅 salesOffices2 对象。见如下代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salesOffices2.listen( <span class=\"string\">'squareMeter300'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> price </span>)</span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log( <span class=\"string\">'价格= '</span> + price );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>其实在现实中，买房子未必要亲自去售楼处，我们只要把订阅的请求交给中介公司，而各大房产公司也只需要通过中介公司来发布房子信息。这样一来，我们不用关心消息是来自哪个房产公司，我们在意的是能否顺利收到消息。当然，为了保证订阅者和发布者能顺利通信，订阅者和发布者都必须知道这个中介公司。<br>同样在程序中，发布 — 订阅模式可以用一个全局的 <code>Event</code>对象来实现，订阅者不需要了解消息来自哪个发布者，发布者也不知道消息会推送给哪些订阅者， Event 作为一个类似“中介者”的角色，把订阅者和发布者联系起来。见如下代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Event = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> clientList = &#123;&#125;,</span><br><span class=\"line\">        listen,</span><br><span class=\"line\">        trigger,</span><br><span class=\"line\">        remove;</span><br><span class=\"line\">    listen = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!clientList[key]) &#123;</span><br><span class=\"line\">            clientList[key] = [];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        clientList[key].push(fn);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    trigger = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> key = <span class=\"built_in\">Array</span>.prototype.shift.call(<span class=\"built_in\">arguments</span>),</span><br><span class=\"line\">        </span><br><span class=\"line\">            fns = clientList[key];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fns || fns.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, fn; fn = fns[i++];) &#123;</span><br><span class=\"line\">            fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    remove = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> fns = clientList[key];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fns) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fn) &#123;</span><br><span class=\"line\">            fns &amp;&amp; (fns.length = <span class=\"number\">0</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> l = fns.length - <span class=\"number\">1</span>; l &gt;= <span class=\"number\">0</span>; l--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> _fn = fns[l];</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (_fn === fn) &#123;</span><br><span class=\"line\">                    fns.splice(l, <span class=\"number\">1</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        listen: listen,</span><br><span class=\"line\">        trigger: trigger,</span><br><span class=\"line\">        remove: remove</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\">Event.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出：'价格=2000000'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小ming订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出：'价格=2000000'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.listen(<span class=\"string\">'squareMeter11'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小ming订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出：'价格=2000000'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 售楼处发布消息</span></span><br><span class=\"line\">Event.trigger(<span class=\"string\">'squareMeter11'</span>, <span class=\"number\">4000000</span>); <span class=\"comment\">// 售楼处发布消息</span></span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小红订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小ming订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小ming订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 4000000</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"模块间通信\"><a href=\"#模块间通信\" class=\"headerlink\" title=\"模块间通信\"></a>模块间通信</h1><p>上一节中实现的发布 — 订阅模式的实现，是基于一个全局的 Event 对象，我们利用它可以在两个封装良好的模块中进行通信，这两个模块可以完全不知道对方的存在。就如同有了中介公司之后，我们不再需要知道房子开售的消息来自哪个售楼处。<br>比如现在有两个模块，a模块里面有一个按钮，每次点击按钮之后，b模块里的 div中会显示按钮的总点击次数，我们用全局发布 — 订阅模式完成下面的代码，使得 a 模块和 b 模块可以在保持封装性的前提下进行通信。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">\"count\"</span>&gt;</span>点我<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"show\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"keyword\">var</span> a = (<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"keyword\">var</span> count = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> button = <span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'count'</span> );</span></span><br><span class=\"line\"><span class=\"actionscript\">    button.onclick = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">            Event.trigger( <span class=\"string\">'add'</span>, count++ );</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)();</span></span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"keyword\">var</span> b = (<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> div = <span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'show'</span> );</span></span><br><span class=\"line\"><span class=\"actionscript\">    Event.listen( <span class=\"string\">'add'</span>, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">( count )</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        div.innerHTML = count;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)();</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>但在这里我们要留意另一个问题，模块之间如果用了太多的全局发布 — 订阅模式来通信，那么模块与模块之间的联系就被隐藏到了背后。我们最终会搞不清楚消息来自哪个模块，或者消息会流向哪些模块，这又会给我们的维护带来一些麻烦，也许某个模块的作用就是暴露一些接口给其他模块调用。</p>\n<h1 id=\"必须先订阅再发布吗\"><a href=\"#必须先订阅再发布吗\" class=\"headerlink\" title=\"必须先订阅再发布吗\"></a>必须先订阅再发布吗</h1><p>我们所了解到的发布 — 订阅模式，都是订阅者必须先订阅一个消息，随后才能接收到发布者发布的消息。如果把顺序反过来，发布者先发布一条消息，而在此之前并没有对象来订阅它，这条消息无疑将消失在宇宙中。<br>在某些情况下，我们需要先将这条消息保存下来，等到有对象来订阅它的时候，再重新把消息发布给订阅者。就如同 QQ中的离线消息一样，离线消息被保存在服务器中，接收人下次登录上线之后，可以重新收到这条消息。<br>这种需求在实际项目中是存在的，比如在之前的商城网站中，获取到用户信息之后才能渲染用户导航模块，而获取用户信息的操作是一个 ajax 异步请求。当 ajax 请求成功返回之后会发布一个事件，在此之前订阅了此事件的用户导航模块可以接收到这些用户信息。<br>但是这只是理想的状况，因为异步的原因，我们不能保证 ajax请求返回的时间，有时候它返回得比较快，而此时用户导航模块的代码还没有加载好（还没有订阅相应事件），特别是在用了一些模块化惰性加载的技术后，这是很可能发生的事情。也许我们还需要一个方案，使得我们的发布 — 订阅对象拥有先发布后订阅的能力。<br>为了满足这个需求，我们要建立一个存放离线事件的堆栈，当事件发布的时候，如果此时还没有订阅者来订阅这个事件，我们暂时把发布事件的动作包裹在一个函数里，这些包装函数将被存入堆栈中，等到终于有对象来订阅此事件的时候，我们将遍历堆栈并且依次执行这些包装函数，也就是重新发布里面的事件。当然离线事件的生命周期只有一次，就像 QQ的未读消息只会被重新阅读一次，所以刚才的操作我们只能进行一次。</p>\n<h1 id=\"全局事件的命名冲突\"><a href=\"#全局事件的命名冲突\" class=\"headerlink\" title=\"全局事件的命名冲突\"></a>全局事件的命名冲突</h1><p>全局的发布 — 订阅对象里只有一个 clinetList 来存放消息名和回调函数，大家都通过它来订阅和发布各种消息，久而久之，难免会出现事件名冲突的情况，所以我们还可以给 Event 对象提供创建命名空间的功能。<br>在提供最终的代码之前，我们来感受一下怎么使用这两个新增的功能。<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"><span class=\"markdown\">/<span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">**** 先发布后订阅 **</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"emphasis\">***</span>/</span></span></span><br><span class=\"line\">Event.trigger(<span class=\"string\">'click'</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">Event.listen(<span class=\"string\">'click'</span>, function(a) &#123;</span><br><span class=\"line\">    console.log(a); <span class=\"comment\">// 输出：1</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\"><span class=\"markdown\">/<span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">**** 使用命名空间 **</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"emphasis\">***</span>/</span></span></span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace1'</span>).listen(<span class=\"string\">'click'</span>, function(a) &#123;</span><br><span class=\"line\">    console.log(a); <span class=\"comment\">// 输出：1</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace1'</span>).trigger(<span class=\"string\">'click'</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace2'</span>).listen(<span class=\"string\">'click'</span>, function(a) &#123;</span><br><span class=\"line\">    console.log(a); <span class=\"comment\">// 输出：2</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace2'</span>).trigger(<span class=\"string\">'click'</span>, <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure></p>\n<p>具体实现代码如下：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Event = (<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> global = <span class=\"keyword\">this</span>,</span><br><span class=\"line\">        Event,</span><br><span class=\"line\">        _default = <span class=\"string\">\"default\"</span>;</span><br><span class=\"line\">    Event = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> _listen,</span><br><span class=\"line\">            _trigger,</span><br><span class=\"line\">            _remove,</span><br><span class=\"line\">            _slice = Array.prototype.slice,</span><br><span class=\"line\">            _shift = Array.prototype.shift,</span><br><span class=\"line\">            _unshift = Array.prototype.unshift,</span><br><span class=\"line\">            namespaceCache = &#123;&#125;,</span><br><span class=\"line\">            _create,</span><br><span class=\"line\">            find,</span><br><span class=\"line\">            <span class=\"keyword\">each</span> = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(ary, fn)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> ret;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, l = ary.length; i &lt; l; i++) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">var</span> n = ary[i];</span><br><span class=\"line\">                    ret = fn.call(n, i, n);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">        _listen = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, cache)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!cache[key]) &#123;</span><br><span class=\"line\">                cache[key] = [];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            cache[key].push(fn);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        _remove = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, cache, fn)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (cache[key]) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (fn) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = cache[key].length; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (cache[key][i] === fn) &#123;</span><br><span class=\"line\">                            cache[key].splice(i, <span class=\"number\">1</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    cache[key] = [];</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        _trigger = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> cache = _shift.call(arguments),</span><br><span class=\"line\">                key = _shift.call(arguments),</span><br><span class=\"line\">                args = arguments,</span><br><span class=\"line\">                _self = <span class=\"keyword\">this</span>,</span><br><span class=\"line\">                ret,</span><br><span class=\"line\">                stack = cache[key];</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!stack || !stack.length) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">each</span>(stack, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.apply(_self, args);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        _create = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(namespace)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> <span class=\"keyword\">namespace</span> = <span class=\"keyword\">namespace</span> || _default;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> cache = &#123;&#125;,</span><br><span class=\"line\">                offlineStack = [], <span class=\"comment\">// 离线事件</span></span><br><span class=\"line\">                ret = &#123;</span><br><span class=\"line\">                    listen: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                        _listen(key, fn, cache);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (offlineStack === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (last === <span class=\"string\">'last'</span>) &#123;</span><br><span class=\"line\">                            offlineStack.length &amp;&amp; offlineStack.pop()();</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">each</span>(offlineStack, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                                <span class=\"keyword\">this</span>();</span><br><span class=\"line\">                            &#125;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        offlineStack = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    one: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                        _remove(key, cache);</span><br><span class=\"line\">                        <span class=\"keyword\">this</span>.listen(key, fn, last);</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    remove: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn)</span> </span>&#123;</span><br><span class=\"line\">                        _remove(key, cache, fn);</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    trigger: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                        <span class=\"keyword\">var</span> fn,</span><br><span class=\"line\">                            args,</span><br><span class=\"line\">                            _self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">                        _unshift.call(arguments, cache);</span><br><span class=\"line\">                        args = arguments;</span><br><span class=\"line\">                        fn = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> _trigger.apply(_self, args);</span><br><span class=\"line\">                        &#125;;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (offlineStack) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> offlineStack.push(fn);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> fn();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">namespace</span> ?</span><br><span class=\"line\">                (namespaceCache[<span class=\"keyword\">namespace</span>] ? namespaceCache[<span class=\"keyword\">namespace</span>] :</span><br><span class=\"line\">                    namespaceCache[<span class=\"keyword\">namespace</span>] = ret) :</span><br><span class=\"line\">                ret;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            create: _create,</span><br><span class=\"line\">            one: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.one(key, fn, last);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            remove: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.remove(key, fn);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            listen: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.listen(key, fn, last);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            trigger: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.trigger.apply(<span class=\"keyword\">this</span>, arguments);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Event;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"JavaScript-实现发布-－-订阅模式的便利性\"><a href=\"#JavaScript-实现发布-－-订阅模式的便利性\" class=\"headerlink\" title=\"JavaScript 实现发布 － 订阅模式的便利性\"></a>JavaScript 实现发布 － 订阅模式的便利性</h1><p>这里要提出的是，我们一直讨论的发布 — 订阅模式，跟一些别的语言（比如 Java）中的实现还是有区别的。在 Java中实现一个自己的发布 — 订阅模式，通常会把订阅者对象自身当成引用传入发布者对象中，同时订阅者对象还需提供一个名为诸如 update的方法，供发布者对象在适合的时候调用。而在 JavaScript中，我们用注册回调函数的形式来代替传统的发布 — 订阅模式，显得更加优雅和简单。<br>另外，在 JavaScript中，我们无需去选择使用推模型还是拉模型。推模型是指在事件发生时，发布者一次性把所有更改的状态和数据都推送给订阅者。拉模型不同的地方是，发布者仅仅通知订阅者事件已经发生了，此外发布者要提供一些公开的接口供订阅者来主动拉取数据。拉模型的好处是可以让订阅者“按需获取”，但同时有可能让发布者变成一个“门户大开”的对象，同时增加了代码量和复杂度。<br>刚好在 JavaScript中， arguments 可以很方便地表示参数列表，所以我们一般都会选择推模型，使用 Function.prototype.apply 方法把所有参数都推送给订阅者。</p>\n<h1 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h1><p>本章我们学习了发布 — 订阅模式，也就是常说的观察者模式。发布 — 订阅模式在实际开发中非常有用。<br>发布 — 订阅模式的优点非常明显，一为时间上的解耦，二为对象之间的解耦。它的应用非常广泛，既可以用在异步编程中，也可以帮助我们完成更松耦合的代码编写。发布 — 订阅模式还可以用来帮助实现一些别的设计模式，比如中介者模式。 从架构上来看，无论是 MVC还是 MVVM，都少不了发布 — 订阅模式的参与，而且 JavaScript本身也是一门基于事件驱动的语言。<br>当然，发布 — 订阅模式也不是完全没有缺点。创建订阅者本身要消耗一定的时间和内存，而且当你订阅一个消息后，也许此消息最后都未发生，但这个订阅者会始终存在于内存中。另外，发布 — 订阅模式虽然可以弱化对象之间的联系，但如果过度使用的话，对象和对象之间的必要联系也将被深埋在背后，会导致程序难以跟踪维护和理解。特别是有多个发布者和订阅者嵌套到一起的时候，要跟踪一个 bug不是件轻松的事情。<br>  <font color=\"#00ffff\" size=\"6\">End</font></p>\n","site":{"data":{}},"excerpt":"","more":"<p>发布 — 订阅模式又叫观察者模式，它定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。在 JavaScript开发中，我们一般用事件模型来替代传统的发布 — 订阅模式。</p>\n<h1 id=\"现实中的发布-－-订阅模式\"><a href=\"#现实中的发布-－-订阅模式\" class=\"headerlink\" title=\"现实中的发布 － 订阅模式\"></a>现实中的发布 － 订阅模式</h1><p>不论是在程序世界里还是现实生活中，发布 — 订阅模式的应用都非常之广泛。我们先看一个现实中的例子。<br>小明最近看上了一套房子，到了售楼处之后才被告知，该楼盘的房子早已售罄。好在售楼MM告诉小明，不久后还有一些尾盘推出，开发商正在办理相关手续，手续办好后便可以购买。但到底是什么时候，目前还没有人能够知道。<br>于是小明记下了售楼处的电话，以后每天都会打电话过去询问是不是已经到了购买时间。除了小明，还有小红、小强、小龙也会每天向售楼处咨询这个问题。一个星期过后，售楼 MM 决定辞职，因为厌倦了每天回答 1000个相同内容的电话。<br>当然现实中没有这么笨的销售公司，实际上故事是这样的：小明离开之前，把电话号码留在了售楼处。售楼 MM 答应他，新楼盘一推出就马上发信息通知小明。小红、小强和小龙也是一样，他们的电话号码都被记在售楼处的花名册上，新楼盘推出的时候，售楼 MM会翻开花名册，遍历上面的电话号码，依次发送一条短信来通知他们。</p>\n<h1 id=\"发布-－-订阅模式的作用\"><a href=\"#发布-－-订阅模式的作用\" class=\"headerlink\" title=\"发布 － 订阅模式的作用\"></a>发布 － 订阅模式的作用</h1><p>在刚刚的例子中，发送短信通知就是一个典型的发布 — 订阅模式，小明、小红等购买者都是订阅者，他们订阅了房子开售的消息。售楼处作为发布者，会在合适的时候遍历花名册上的电话号码，依次给购房者发布消息。<br>可以发现，在这个例子中使用发布 — 订阅模式有着显而易见的优点</p>\n<ul>\n<li>购房者不用再天天给售楼处打电话咨询开售时间，在合适的时间点，售楼处作为发布者<br>会通知这些消息订阅者。</li>\n<li>购房者和售楼处之间不再强耦合在一起，当有新的购房者出现时，他只需把手机号码留在售楼处，售楼处不关心购房者的任何情况，不管购房者是男是女还是一只猴子。 而售楼处的任何变动也不会影响购买者，比如售楼 MM 离职，售楼处从一楼搬到二楼，这些改变都跟购房者无关，只要售楼处记得发短信这件事情。</li>\n</ul>\n<p>第一点说明发布 — 订阅模式可以<code>广泛应用于异步编程中</code>，这是一种替代传递回调函数的方案。比如，我们可以订阅 ajax请求的 error 、 succ 等事件。 或者如果想在动画的每一帧完成之后做一些事情，那我们可以订阅一个事件，然后在动画的每一帧完成之后发布这个事件。在异步编程中使用发布 — 订阅模式，我们就无需过多关注对象在异步运行期间的内部状态，而只需要订阅感兴趣的事件发生点。<br>第二点说明发布 — 订阅模式可以<code>取代对象之间硬编码的通知机制</code>，一个对象不用再显式地调用另外一个对象的某个接口。发布 — 订阅模式让两个对象松耦合地联系在一起，虽然不太清楚彼此的细节，但这不影响它们之间相互通信。当有新的订阅者出现时，发布者的代码不需要任何修改；同样发布者需要改变时，也不会影响到之前的订阅者。只要之前约定的事件名没有变化，就可以自由地改变它们。</p>\n<h1 id=\"DOM-事件\"><a href=\"#DOM-事件\" class=\"headerlink\" title=\"DOM 事件\"></a>DOM 事件</h1><p>实际上，只要我们曾经在 DOM 节点上面绑定过事件函数，那我们就曾经使用过发布 — 订阅模式，来看看下面这两句简单的代码发生了什么事情：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.click(); <span class=\"comment\">// 模拟用户点击</span></span><br></pre></td></tr></table></figure></p>\n<p>在这里需要监控用户点击 document.body 的动作，但是我们没办法预知用户将在什么时候点击。所以我们订阅 document.body 上的 click 事件，当 body 节点被点击时， body 节点便会向订阅者发布这个消息。这很像购房的例子，购房者不知道房子什么时候开售，于是他在订阅消息后等待售楼处发布消息。<br>当然我们还可以随意增加或者删除订阅者，增加任何订阅者都不会影响发布者代码的编写:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener( <span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span> );</span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.click(); <span class=\"comment\">// 模拟用户点击</span></span><br></pre></td></tr></table></figure></p>\n<p>注意，手动触发事件更好的做法是 IE下用 fireEvent ，标准浏览器下用<code>dispatchEvent</code> 实现。</p>\n<h1 id=\"自定义事件\"><a href=\"#自定义事件\" class=\"headerlink\" title=\"自定义事件\"></a>自定义事件</h1><p>除了 DOM 事件，我们还会经常实现一些自定义的事件，这种依靠自定义事件完成的发布 —订阅模式可以用于任何 JavaScript代码中。<br>现在看看如何一步步实现发布 — 订阅模式。</p>\n<ul>\n<li>首先要指定好谁充当发布者（比如售楼处）；</li>\n<li>然后给发布者添加一个缓存列表，用于存放回调函数以便通知订阅者（售楼处的花名册）；</li>\n<li>最后发布消息的时候，发布者会遍历这个缓存列表，依次触发里面存放的订阅者回调函数（遍历花名册，挨个发短信）。</li>\n</ul>\n<p>另外，我们还可以往回调函数里填入一些参数，订阅者可以接收这些参数。这是很有必要的，比如售楼处可以在发给订阅者的短信里加上房子的单价、面积、容积率等信息，订阅者接收到这些信息之后可以进行各自的处理：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> salesOffices=&#123;&#125;;<span class=\"comment\">//定义售楼处</span></span><br><span class=\"line\">salesOffices.clientList=[];<span class=\"comment\">//缓存列表，存放订阅者的回调函数</span></span><br><span class=\"line\">salesOffices.listen=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">fn</span>)</span>&#123;<span class=\"comment\">//增加订阅者</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.clientList.push(fn);<span class=\"comment\">//订阅的消息添加进缓存列表</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">salesOffices.trigger=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"comment\">//发布消息</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>,fn;fn=<span class=\"keyword\">this</span>.clientList[i++];)&#123;</span><br><span class=\"line\">        fn.apply(<span class=\"keyword\">this</span>,<span class=\"built_in\">arguments</span>);<span class=\"comment\">//arguments是发布消息时候带的参数</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//测试</span></span><br><span class=\"line\">salesOffices.listen(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">price,squareMeter</span>)</span>&#123;<span class=\"comment\">//小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小明收到消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格='</span>+price);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'面积='</span>+squareMeter);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">price,squareMeter</span>)</span>&#123;<span class=\"comment\">//小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红收到消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格='</span>+price);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'面积='</span>+squareMeter);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"number\">200000</span>,<span class=\"number\">88</span>);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"number\">100000</span>,<span class=\"number\">100</span>);</span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小明收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=200000</span></span><br><span class=\"line\"><span class=\"comment\">面积=88</span></span><br><span class=\"line\"><span class=\"comment\">小红收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=200000</span></span><br><span class=\"line\"><span class=\"comment\">面积=88</span></span><br><span class=\"line\"><span class=\"comment\">小明收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=100000</span></span><br><span class=\"line\"><span class=\"comment\">面积=100</span></span><br><span class=\"line\"><span class=\"comment\">小红收到消息</span></span><br><span class=\"line\"><span class=\"comment\">价格=100000</span></span><br><span class=\"line\"><span class=\"comment\">面积=100</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<p>至此，我们已经实现了一个最简单的发布 — 订阅模式，但这里还存在一些问题。我们看到订阅者接收到了发布者发布的每个消息，虽然小明只想买 88 平方米的房子，但是发布者把 110 平方米的信息也推送给了小明，这对小明来说是不必要的困扰。所以我们有必要增加一个标示 key ，让订阅者只订阅自己感兴趣的消息。改写后的代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> salesOffices = &#123;&#125;; <span class=\"comment\">// 定义售楼处</span></span><br><span class=\"line\">salesOffices.clientList = &#123;&#125;; <span class=\"comment\">// 缓存列表，存放订阅者的回调函数</span></span><br><span class=\"line\">salesOffices.listen = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.clientList[key]) &#123; <span class=\"comment\">// 如果还没有订阅过此类消息，给该类消息创建一个缓存列表</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.clientList[key] = [];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.clientList[key].push(fn); <span class=\"comment\">// 订阅的消息添加进消息缓存列表</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">salesOffices.trigger = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// 发布消息</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> key = <span class=\"built_in\">Array</span>.prototype.shift.call(<span class=\"built_in\">arguments</span>), <span class=\"comment\">// 取出消息类型</span></span><br><span class=\"line\">        fns = <span class=\"keyword\">this</span>.clientList[key]; <span class=\"comment\">// 取出该消息对应的回调函数集合</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fns || fns.length === <span class=\"number\">0</span>) &#123; <span class=\"comment\">// 如果没有订阅该消息，则返回</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, fn; fn = fns[i++];) &#123;</span><br><span class=\"line\">        fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>); <span class=\"comment\">// (2) // arguments 是发布消息时附送的参数</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小明订阅 88 平方米房子的消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小明订阅 88 平方米房子的消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出： 2000000</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter110'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅 110 平方米房子的消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红订阅 110 平方米房子的消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出： 3000000</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 发布 88 平方米房子的价格</span></span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter110'</span>, <span class=\"number\">3000000</span>); <span class=\"comment\">// 发布 110 平方米房子的价格</span></span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小明订阅 88 平方米房子的消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小红订阅 110 平方米房子的消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 3000000</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<p>很明显，现在订阅者可以只订阅自己感兴趣的事件了。</p>\n<h1 id=\"发布-－-订阅模式的通用实现\"><a href=\"#发布-－-订阅模式的通用实现\" class=\"headerlink\" title=\"发布 － 订阅模式的通用实现\"></a>发布 － 订阅模式的通用实现</h1><p>现在我们已经看到了如何让售楼处拥有接受订阅和发布事件的功能。假设现在小明又去另一个售楼处买房子，那么这段代码是否必须在另一个售楼处对象上重写一次呢，有没有办法可以让所有对象都拥有发布 — 订阅功能呢？<br>答案显然是有的，JavaScript 作为一门解释执行的语言，给对象动态添加职责是理所当然的事情。<br>所以我们把发布 — 订阅的功能提取出来，放在一个单独的对象内：<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var event = &#123;</span><br><span class=\"line\">    clientList: [],</span><br><span class=\"line\">    listen: function (<span class=\"built_in\">key</span>, <span class=\"function\"><span class=\"keyword\">fn</span>) &#123;</span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">if</span> <span class=\"params\">(!this.clientList[<span class=\"built_in\">key</span>])</span> &#123;</span></span><br><span class=\"line\"><span class=\"function\">            this.clientList[<span class=\"built_in\">key</span>] = []</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        this.clientList[<span class=\"built_in\">key</span>].<span class=\"keyword\">push</span>(<span class=\"function\"><span class=\"keyword\">fn</span>)</span>; <span class=\"comment\">// 订阅的消息添加进缓存列表</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    trigger: function () &#123;</span><br><span class=\"line\">        var <span class=\"built_in\">key</span> = Array.prototype.shift.<span class=\"keyword\">call</span>(arguments), <span class=\"comment\">// (1);</span></span><br><span class=\"line\">            fns = this.clientList[<span class=\"built_in\">key</span>];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fns || fns.length === <span class=\"number\">0</span>) &#123; <span class=\"comment\">// 如果没有绑定对应的消息</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> false;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (var i = <span class=\"number\">0</span>, <span class=\"function\"><span class=\"keyword\">fn</span></span>; <span class=\"function\"><span class=\"keyword\">fn</span> = fns[i++]</span>;) &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">fn</span>.apply<span class=\"params\">(this, arguments)</span></span>; <span class=\"comment\">// (2) // arguments 是 trigger 时带上的参数</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>再定义一个 installEvent 函数，这个函数可以给所有的对象都动态安装发布 — 订阅功能：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> installEvent = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">(obj)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> event) &#123;</span><br><span class=\"line\">        obj[i] = event[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>再来测试一番，我们给售楼处对象 salesOffices 动态增加发布 — 订阅功能：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> salesOffices = &#123;&#125;;</span><br><span class=\"line\">installEvent(salesOffices);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小明订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter100'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 输出：2000000</span></span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter100'</span>, <span class=\"number\">3000000</span>); <span class=\"comment\">// 输出：3000000</span></span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小明订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小红订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 3000000</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"取消订阅的事件\"><a href=\"#取消订阅的事件\" class=\"headerlink\" title=\"取消订阅的事件\"></a>取消订阅的事件</h1><p>有时候，我们也许需要取消订阅事件的功能。比如小明突然不想买房子了，为了避免继续接收到售楼处推送过来的短信，小明需要取消之前订阅的事件。现在我们给 event 对象增加 remove方法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">event.remove = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> fns = <span class=\"keyword\">this</span>.clientList[key];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fns) &#123; <span class=\"comment\">// 如果 key 对应的消息没有被人订阅，则直接返回</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!fn) &#123; <span class=\"comment\">// 如果没有传入具体的回调函数，表示需要取消 key 对应消息的所有订阅</span></span><br><span class=\"line\">        fns &amp;&amp; (fns.length = <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> l = fns.length - <span class=\"number\">1</span>; l &gt;= <span class=\"number\">0</span>; l--) &#123; <span class=\"comment\">// 反向遍历订阅的回调函数列表</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> _fn = fns[l];</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (_fn === fn) &#123;</span><br><span class=\"line\">                fns.splice(l, <span class=\"number\">1</span>); <span class=\"comment\">// 删除订阅者的回调函数</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> salesOffices = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> installEvent = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> event) &#123;</span><br><span class=\"line\">        obj[i] = event[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">installEvent(salesOffices);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, fn1 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.listen(<span class=\"string\">'squareMeter88'</span>, fn2 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">salesOffices.remove(<span class=\"string\">'squareMeter88'</span>, fn1); <span class=\"comment\">// 删除小明的订阅</span></span><br><span class=\"line\">salesOffices.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 输出：2000000</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"真实的例子——网站登录\"><a href=\"#真实的例子——网站登录\" class=\"headerlink\" title=\"真实的例子——网站登录\"></a>真实的例子——网站登录</h1><p>通过售楼处的虚拟例子，我们对发布 — 订阅模式的概念和实现都已经熟悉了，那么现在就趁热打铁，看一个真实的项目。<br>假如我们正在开发一个商城网站，网站里有 header头部、nav导航、消息列表、购物车等模块。这几个模块的渲染有一个共同的前提条件，就是必须先用 ajax异步请求获取用户的登录信息。<br>这是很正常的，比如用户的名字和头像要显示在 header模块里，而这两个字段都来自用户登录后返回的信息。<br>至于 ajax请求什么时候能成功返回用户信息，这点我们没有办法确定。现在的情节看起来像极了售楼处的例子，小明不知道什么时候开发商的售楼手续能够成功办下来。<br>但现在还不足以说服我们在此使用发布 — 订阅模式，因为异步的问题通常也可以用回调函数来解决。更重要的一点是，我们不知道除了 header头部、nav导航、消息列表、购物车之外，将来还有哪些模块需要使用这些用户信息。如果它们和用户信息模块产生了强耦合，比如下面这样的形式：<br><figure class=\"highlight lasso\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">login.succ(function(<span class=\"built_in\">data</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">header</span>.setAvatar( <span class=\"built_in\">data</span>.avatar); <span class=\"comment\">// 设置 header 模块的头像</span></span><br><span class=\"line\">    nav.setAvatar( <span class=\"built_in\">data</span>.avatar ); <span class=\"comment\">// 设置导航模块的头像</span></span><br><span class=\"line\">    message.refresh(); <span class=\"comment\">// 刷新消息列表</span></span><br><span class=\"line\">    cart.refresh(); <span class=\"comment\">// 刷新购物车列表</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>现在登录模块是我们负责编写的，但我们还必须了解 header 模块里设置头像的方法叫setAvatar 、购物车模块里刷新的方法叫 refresh ，这种耦合性会使程序变得僵硬，header 模块不能随意再改变 setAvatar 的方法名，它自身的名字也不能被改为 header1、header2。 这是针对具体实现编程的典型例子，针对具体实现编程是不被赞同的。<br>等到有一天，项目中又新增了一个收货地址管理的模块，这个模块本来是另一个同事所写的，而此时你正在马来西亚度假，但是他却不得不给你打电话：“Hi，登录之后麻烦刷新一下收货地址列表。”于是你又翻开你 3个月前写的登录模块，在最后部分加上这行代码：<br><figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">login.succ(function( data )&#123;</span><br><span class=\"line\">    header.setAvatar( data.avatar)<span class=\"comment\">;</span></span><br><span class=\"line\">    nav.setAvatar( data.avatar )<span class=\"comment\">;</span></span><br><span class=\"line\">    message.refresh()<span class=\"comment\">;</span></span><br><span class=\"line\">    cart.refresh()<span class=\"comment\">;</span></span><br><span class=\"line\">    address.refresh()<span class=\"comment\">; // 增加这行代码</span></span><br><span class=\"line\">&#125;)<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure></p>\n<p>我们就会越来越疲于应付这些突如其来的业务要求，要么跳槽了事，要么必须来重构这些代码。<br>用发布 — 订阅模式重写之后，对用户信息感兴趣的业务模块将自行订阅登录成功的消息事件。当登录成功时，登录模块只需要发布登录成功的消息，而业务方接受到消息之后，就会开始进行各自的业务处理，登录模块并不关心业务方究竟要做什么，也不想去了解它们的内部细节。改善后的代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax( <span class=\"string\">'http:// xxx.com?login'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123; <span class=\"comment\">// 登录成功</span></span><br><span class=\"line\">    login.trigger( <span class=\"string\">'loginSucc'</span>, data); <span class=\"comment\">// 发布登录成功的消息</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>各模块监听登录成功的消息：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> header = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// header 模块</span></span><br><span class=\"line\">    login.listen(<span class=\"string\">'loginSucc'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        header.setAvatar(data.avatar);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        setAvatar: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'设置 header 模块的头像'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"><span class=\"keyword\">var</span> nav = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// nav 模块</span></span><br><span class=\"line\">    login.listen(<span class=\"string\">'loginSucc'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        nav.setAvatar(data.avatar);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        setAvatar: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">avatar</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'设置 nav 模块的头像'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></p>\n<p>如上所述，我们随时可以把 setAvatar 的方法名改成 setTouxiang 。如果有一天在登录完成之后，又增加一个刷新收货地址列表的行为，那么只要在收货地址模块里加上监听消息的方法即可，而这可以让开发该模块的同事自己完成，你作为登录模块的开发者，永远不用再关心这些行为了。代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> address = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// nav 模块</span></span><br><span class=\"line\">    login.listen(<span class=\"string\">'loginSucc'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">        address.refresh(obj);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        refresh: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">avatar</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'刷新收货地址列表'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"全局的发布-－-订阅对象\"><a href=\"#全局的发布-－-订阅对象\" class=\"headerlink\" title=\"全局的发布 － 订阅对象\"></a>全局的发布 － 订阅对象</h1><p>回想下刚刚实现的发布 — 订阅模式，我们给售楼处对象和登录对象都添加了订阅和发布的功能，这里还存在两个小问题。</p>\n<ul>\n<li>我们给每个发布者对象都添加了 listen 和 trigger 方法，以及一个缓存列表 clientList ，这其实是一种资源浪费。</li>\n<li>小明跟售楼处对象还是存在一定的耦合性，小明至少要知道售楼处对象的名字是salesOffices ，才能顺利的订阅到事件。见如下代码：<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salesOffices.listen( <span class=\"string\">'squareMeter100'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> price </span>)</span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log( <span class=\"string\">'价格= '</span> + price );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>如果小明还关心 300平方米的房子，而这套房子的卖家是 salesOffices2 ，这意味着小明要开始订阅 salesOffices2 对象。见如下代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salesOffices2.listen( <span class=\"string\">'squareMeter300'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> price </span>)</span>&#123; <span class=\"comment\">// 小明订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log( <span class=\"string\">'价格= '</span> + price );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>其实在现实中，买房子未必要亲自去售楼处，我们只要把订阅的请求交给中介公司，而各大房产公司也只需要通过中介公司来发布房子信息。这样一来，我们不用关心消息是来自哪个房产公司，我们在意的是能否顺利收到消息。当然，为了保证订阅者和发布者能顺利通信，订阅者和发布者都必须知道这个中介公司。<br>同样在程序中，发布 — 订阅模式可以用一个全局的 <code>Event</code>对象来实现，订阅者不需要了解消息来自哪个发布者，发布者也不知道消息会推送给哪些订阅者， Event 作为一个类似“中介者”的角色，把订阅者和发布者联系起来。见如下代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Event = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> clientList = &#123;&#125;,</span><br><span class=\"line\">        listen,</span><br><span class=\"line\">        trigger,</span><br><span class=\"line\">        remove;</span><br><span class=\"line\">    listen = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!clientList[key]) &#123;</span><br><span class=\"line\">            clientList[key] = [];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        clientList[key].push(fn);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    trigger = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> key = <span class=\"built_in\">Array</span>.prototype.shift.call(<span class=\"built_in\">arguments</span>),</span><br><span class=\"line\">        </span><br><span class=\"line\">            fns = clientList[key];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fns || fns.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, fn; fn = fns[i++];) &#123;</span><br><span class=\"line\">            fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    remove = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, fn</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> fns = clientList[key];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fns) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fn) &#123;</span><br><span class=\"line\">            fns &amp;&amp; (fns.length = <span class=\"number\">0</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> l = fns.length - <span class=\"number\">1</span>; l &gt;= <span class=\"number\">0</span>; l--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> _fn = fns[l];</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (_fn === fn) &#123;</span><br><span class=\"line\">                    fns.splice(l, <span class=\"number\">1</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        listen: listen,</span><br><span class=\"line\">        trigger: trigger,</span><br><span class=\"line\">        remove: remove</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\">Event.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小红订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出：'价格=2000000'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.listen(<span class=\"string\">'squareMeter88'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小ming订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出：'价格=2000000'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.listen(<span class=\"string\">'squareMeter11'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">price</span>) </span>&#123; <span class=\"comment\">// 小红订阅消息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"小ming订阅消息\"</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'价格= '</span> + price); <span class=\"comment\">// 输出：'价格=2000000'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.trigger(<span class=\"string\">'squareMeter88'</span>, <span class=\"number\">2000000</span>); <span class=\"comment\">// 售楼处发布消息</span></span><br><span class=\"line\">Event.trigger(<span class=\"string\">'squareMeter11'</span>, <span class=\"number\">4000000</span>); <span class=\"comment\">// 售楼处发布消息</span></span><br><span class=\"line\"><span class=\"comment\">//输出结果</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">小红订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小ming订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 2000000</span></span><br><span class=\"line\"><span class=\"comment\">小ming订阅消息</span></span><br><span class=\"line\"><span class=\"comment\">价格= 4000000</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"模块间通信\"><a href=\"#模块间通信\" class=\"headerlink\" title=\"模块间通信\"></a>模块间通信</h1><p>上一节中实现的发布 — 订阅模式的实现，是基于一个全局的 Event 对象，我们利用它可以在两个封装良好的模块中进行通信，这两个模块可以完全不知道对方的存在。就如同有了中介公司之后，我们不再需要知道房子开售的消息来自哪个售楼处。<br>比如现在有两个模块，a模块里面有一个按钮，每次点击按钮之后，b模块里的 div中会显示按钮的总点击次数，我们用全局发布 — 订阅模式完成下面的代码，使得 a 模块和 b 模块可以在保持封装性的前提下进行通信。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">\"count\"</span>&gt;</span>点我<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"show\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"keyword\">var</span> a = (<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"keyword\">var</span> count = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> button = <span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'count'</span> );</span></span><br><span class=\"line\"><span class=\"actionscript\">    button.onclick = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">            Event.trigger( <span class=\"string\">'add'</span>, count++ );</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)();</span></span><br><span class=\"line\"><span class=\"actionscript\">    <span class=\"keyword\">var</span> b = (<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> div = <span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'show'</span> );</span></span><br><span class=\"line\"><span class=\"actionscript\">    Event.listen( <span class=\"string\">'add'</span>, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">( count )</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        div.innerHTML = count;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)();</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>但在这里我们要留意另一个问题，模块之间如果用了太多的全局发布 — 订阅模式来通信，那么模块与模块之间的联系就被隐藏到了背后。我们最终会搞不清楚消息来自哪个模块，或者消息会流向哪些模块，这又会给我们的维护带来一些麻烦，也许某个模块的作用就是暴露一些接口给其他模块调用。</p>\n<h1 id=\"必须先订阅再发布吗\"><a href=\"#必须先订阅再发布吗\" class=\"headerlink\" title=\"必须先订阅再发布吗\"></a>必须先订阅再发布吗</h1><p>我们所了解到的发布 — 订阅模式，都是订阅者必须先订阅一个消息，随后才能接收到发布者发布的消息。如果把顺序反过来，发布者先发布一条消息，而在此之前并没有对象来订阅它，这条消息无疑将消失在宇宙中。<br>在某些情况下，我们需要先将这条消息保存下来，等到有对象来订阅它的时候，再重新把消息发布给订阅者。就如同 QQ中的离线消息一样，离线消息被保存在服务器中，接收人下次登录上线之后，可以重新收到这条消息。<br>这种需求在实际项目中是存在的，比如在之前的商城网站中，获取到用户信息之后才能渲染用户导航模块，而获取用户信息的操作是一个 ajax 异步请求。当 ajax 请求成功返回之后会发布一个事件，在此之前订阅了此事件的用户导航模块可以接收到这些用户信息。<br>但是这只是理想的状况，因为异步的原因，我们不能保证 ajax请求返回的时间，有时候它返回得比较快，而此时用户导航模块的代码还没有加载好（还没有订阅相应事件），特别是在用了一些模块化惰性加载的技术后，这是很可能发生的事情。也许我们还需要一个方案，使得我们的发布 — 订阅对象拥有先发布后订阅的能力。<br>为了满足这个需求，我们要建立一个存放离线事件的堆栈，当事件发布的时候，如果此时还没有订阅者来订阅这个事件，我们暂时把发布事件的动作包裹在一个函数里，这些包装函数将被存入堆栈中，等到终于有对象来订阅此事件的时候，我们将遍历堆栈并且依次执行这些包装函数，也就是重新发布里面的事件。当然离线事件的生命周期只有一次，就像 QQ的未读消息只会被重新阅读一次，所以刚才的操作我们只能进行一次。</p>\n<h1 id=\"全局事件的命名冲突\"><a href=\"#全局事件的命名冲突\" class=\"headerlink\" title=\"全局事件的命名冲突\"></a>全局事件的命名冲突</h1><p>全局的发布 — 订阅对象里只有一个 clinetList 来存放消息名和回调函数，大家都通过它来订阅和发布各种消息，久而久之，难免会出现事件名冲突的情况，所以我们还可以给 Event 对象提供创建命名空间的功能。<br>在提供最终的代码之前，我们来感受一下怎么使用这两个新增的功能。<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"><span class=\"markdown\">/<span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">**** 先发布后订阅 **</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"emphasis\">***</span>/</span></span></span><br><span class=\"line\">Event.trigger(<span class=\"string\">'click'</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">Event.listen(<span class=\"string\">'click'</span>, function(a) &#123;</span><br><span class=\"line\">    console.log(a); <span class=\"comment\">// 输出：1</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\"><span class=\"markdown\">/<span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">**** 使用命名空间 **</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"emphasis\">***</span>/</span></span></span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace1'</span>).listen(<span class=\"string\">'click'</span>, function(a) &#123;</span><br><span class=\"line\">    console.log(a); <span class=\"comment\">// 输出：1</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace1'</span>).trigger(<span class=\"string\">'click'</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace2'</span>).listen(<span class=\"string\">'click'</span>, function(a) &#123;</span><br><span class=\"line\">    console.log(a); <span class=\"comment\">// 输出：2</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Event.create(<span class=\"string\">'namespace2'</span>).trigger(<span class=\"string\">'click'</span>, <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure></p>\n<p>具体实现代码如下：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Event = (<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> global = <span class=\"keyword\">this</span>,</span><br><span class=\"line\">        Event,</span><br><span class=\"line\">        _default = <span class=\"string\">\"default\"</span>;</span><br><span class=\"line\">    Event = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> _listen,</span><br><span class=\"line\">            _trigger,</span><br><span class=\"line\">            _remove,</span><br><span class=\"line\">            _slice = Array.prototype.slice,</span><br><span class=\"line\">            _shift = Array.prototype.shift,</span><br><span class=\"line\">            _unshift = Array.prototype.unshift,</span><br><span class=\"line\">            namespaceCache = &#123;&#125;,</span><br><span class=\"line\">            _create,</span><br><span class=\"line\">            find,</span><br><span class=\"line\">            <span class=\"keyword\">each</span> = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(ary, fn)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> ret;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, l = ary.length; i &lt; l; i++) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">var</span> n = ary[i];</span><br><span class=\"line\">                    ret = fn.call(n, i, n);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">        _listen = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, cache)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!cache[key]) &#123;</span><br><span class=\"line\">                cache[key] = [];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            cache[key].push(fn);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        _remove = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, cache, fn)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (cache[key]) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (fn) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = cache[key].length; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (cache[key][i] === fn) &#123;</span><br><span class=\"line\">                            cache[key].splice(i, <span class=\"number\">1</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    cache[key] = [];</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        _trigger = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> cache = _shift.call(arguments),</span><br><span class=\"line\">                key = _shift.call(arguments),</span><br><span class=\"line\">                args = arguments,</span><br><span class=\"line\">                _self = <span class=\"keyword\">this</span>,</span><br><span class=\"line\">                ret,</span><br><span class=\"line\">                stack = cache[key];</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!stack || !stack.length) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">each</span>(stack, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.apply(_self, args);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        _create = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(namespace)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> <span class=\"keyword\">namespace</span> = <span class=\"keyword\">namespace</span> || _default;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> cache = &#123;&#125;,</span><br><span class=\"line\">                offlineStack = [], <span class=\"comment\">// 离线事件</span></span><br><span class=\"line\">                ret = &#123;</span><br><span class=\"line\">                    listen: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                        _listen(key, fn, cache);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (offlineStack === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (last === <span class=\"string\">'last'</span>) &#123;</span><br><span class=\"line\">                            offlineStack.length &amp;&amp; offlineStack.pop()();</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">each</span>(offlineStack, <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                                <span class=\"keyword\">this</span>();</span><br><span class=\"line\">                            &#125;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        offlineStack = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    one: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                        _remove(key, cache);</span><br><span class=\"line\">                        <span class=\"keyword\">this</span>.listen(key, fn, last);</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    remove: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn)</span> </span>&#123;</span><br><span class=\"line\">                        _remove(key, cache, fn);</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    trigger: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                        <span class=\"keyword\">var</span> fn,</span><br><span class=\"line\">                            args,</span><br><span class=\"line\">                            _self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">                        _unshift.call(arguments, cache);</span><br><span class=\"line\">                        args = arguments;</span><br><span class=\"line\">                        fn = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> _trigger.apply(_self, args);</span><br><span class=\"line\">                        &#125;;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (offlineStack) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> offlineStack.push(fn);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> fn();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">namespace</span> ?</span><br><span class=\"line\">                (namespaceCache[<span class=\"keyword\">namespace</span>] ? namespaceCache[<span class=\"keyword\">namespace</span>] :</span><br><span class=\"line\">                    namespaceCache[<span class=\"keyword\">namespace</span>] = ret) :</span><br><span class=\"line\">                ret;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            create: _create,</span><br><span class=\"line\">            one: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.one(key, fn, last);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            remove: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.remove(key, fn);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            listen: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key, fn, last)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.listen(key, fn, last);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            trigger: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> event = <span class=\"keyword\">this</span>.create();</span><br><span class=\"line\">                event.trigger.apply(<span class=\"keyword\">this</span>, arguments);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Event;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"JavaScript-实现发布-－-订阅模式的便利性\"><a href=\"#JavaScript-实现发布-－-订阅模式的便利性\" class=\"headerlink\" title=\"JavaScript 实现发布 － 订阅模式的便利性\"></a>JavaScript 实现发布 － 订阅模式的便利性</h1><p>这里要提出的是，我们一直讨论的发布 — 订阅模式，跟一些别的语言（比如 Java）中的实现还是有区别的。在 Java中实现一个自己的发布 — 订阅模式，通常会把订阅者对象自身当成引用传入发布者对象中，同时订阅者对象还需提供一个名为诸如 update的方法，供发布者对象在适合的时候调用。而在 JavaScript中，我们用注册回调函数的形式来代替传统的发布 — 订阅模式，显得更加优雅和简单。<br>另外，在 JavaScript中，我们无需去选择使用推模型还是拉模型。推模型是指在事件发生时，发布者一次性把所有更改的状态和数据都推送给订阅者。拉模型不同的地方是，发布者仅仅通知订阅者事件已经发生了，此外发布者要提供一些公开的接口供订阅者来主动拉取数据。拉模型的好处是可以让订阅者“按需获取”，但同时有可能让发布者变成一个“门户大开”的对象，同时增加了代码量和复杂度。<br>刚好在 JavaScript中， arguments 可以很方便地表示参数列表，所以我们一般都会选择推模型，使用 Function.prototype.apply 方法把所有参数都推送给订阅者。</p>\n<h1 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h1><p>本章我们学习了发布 — 订阅模式，也就是常说的观察者模式。发布 — 订阅模式在实际开发中非常有用。<br>发布 — 订阅模式的优点非常明显，一为时间上的解耦，二为对象之间的解耦。它的应用非常广泛，既可以用在异步编程中，也可以帮助我们完成更松耦合的代码编写。发布 — 订阅模式还可以用来帮助实现一些别的设计模式，比如中介者模式。 从架构上来看，无论是 MVC还是 MVVM，都少不了发布 — 订阅模式的参与，而且 JavaScript本身也是一门基于事件驱动的语言。<br>当然，发布 — 订阅模式也不是完全没有缺点。创建订阅者本身要消耗一定的时间和内存，而且当你订阅一个消息后，也许此消息最后都未发生，但这个订阅者会始终存在于内存中。另外，发布 — 订阅模式虽然可以弱化对象之间的联系，但如果过度使用的话，对象和对象之间的必要联系也将被深埋在背后，会导致程序难以跟踪维护和理解。特别是有多个发布者和订阅者嵌套到一起的时候，要跟踪一个 bug不是件轻松的事情。<br>  <font color=\"#00ffff\" size=\"6\">End</font></p>\n"},{"title":"Porxy 实现vue MVVM","date":"2019-01-02T02:19:52.000Z","_content":"**hahahha**\n~~dahsdas~~ ","source":"_posts/Porxy-实现vue-MVVM.md","raw":"---\ntitle: Porxy 实现vue MVVM\ndate: 2019-01-02 10:19:52\ntags:\n---\n**hahahha**\n~~dahsdas~~ ","slug":"Porxy-实现vue-MVVM","published":1,"updated":"2020-03-12T13:55:48.637Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7otizq600067guiy6j3jowt","content":"<p><strong>hahahha</strong><br><del>dahsdas</del> </p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>hahahha</strong><br><del>dahsdas</del> </p>\n"},{"title":"git使用总结","reward":true,"date":"2017-08-24T06:31:21.000Z","_content":"# 一、Git工作流程\n![git_1](/assets/img/git-1.png)\n以上包括一些简单而常用的命令，但是先不关心这些，先来了解下面这4个专有名词。\n- Workspace：工作区\n- Index / Stage：暂存区\n- Repository：仓库区（或本地仓库）\n- Remote：远程仓库\n### 工作区\n程序员进行开发改动的地方，是你当前看到的，也是最新的。\n\n平常我们开发就是拷贝远程仓库中的一个分支，基于该分支进行开发。在开发过程中就是对工作区的操作。\n### 暂存区\n.git目录下的index文件, 暂存区会记录`git add`添加文件的相关信息(文件名、大小、timestamp...)，不保存文件实体, 通过id指向每个文件实体。可以使用`git status`查看暂存区的状态。暂存区标记了你当前工作区中，哪些内容是被git管理的。\n\n当你完成某个需求或功能后需要提交到远程仓库，那么第一步就是通过`git add`先提交到暂存区，被git管理。\n### 本地仓库\n保存了对象被提交 过的各个版本，比起工作区和暂存区的内容，它要更旧一些。\n`git commit`后同步index的目录树到本地仓库，方便从下一步通过`git push`同步本地仓库与远程仓库的同步。\n### 远程仓库\n远程仓库的内容可能被分布在多个地点的处于协作关系的本地仓库修改，因此它可能与本地仓库同步，也可能不同步，但是它的内容是最旧的。\n## 小结\n1、任何对象都是在工作区中诞生和被修改；\n2、任何修改都是从进入index区才开始被版本控制；\n3、只有把修改提交到本地仓库，该修改才能在仓库中留下痕迹；\n4、与协作者分享本地的修改，可以把它们push到远程仓库来共享。\n下面这幅图更加直接阐述了四个区域之间的关系，可能有些命令不太清楚，没关系，下部分会详细介绍。\n![git_2](/assets/img/git-2.png)\n# 二、常用Git命令\n![git_3](/assets/img/git-3.png)\n## HEAD\n![git_4](/assets/img/git-4.png)\n在掌握具体命令前，先理解下HEAD。\nHEAD，它始终指向当前所处分支的最新的提交点。你所处的分支变化了，或者产生了新的提交点，HEAD就会跟着改变。\n## add\n![git_5](/assets/img/git-5.png)\nadd相关命令很简单，主要实现将工作区修改的内容提交到暂存区，交由git管理。\n> git add .       添加当前目录的所有文件到暂存区    \n git add [dir]    添加指定目录到暂存区，包括子目录 \n git add [file1]     添加指定文件到暂存区   \n\n## commit\n![git_6](/assets/img/git-6.png)\ncommit相关命令也很简单，主要实现将暂存区的内容提交到本地仓库，并使得当前分支的HEAD向后移动一个提交点。\n> git commit -m [message]\t提交暂存区到本地仓库,message代表说明信息\ngit commit [file1] -m [message]\t提交暂存区的指定文件到本地仓库\ngit commit --amend -m [message]\t使用一次新的commit，替代上一次提交\n\n## branch\n![git_7](/assets/img/git-7.png)\n涉及到协作，自然会涉及到分支，关于分支，大概有展示分支，切换分支，创建分支，删除分支这四种操作。\n> git branch\t列出所有本地分支\ngit branch -r\t列出所有远程分支\ngit branch -a\t列出所有本地分支和远程分支\ngit branch [branch-name]\t新建一个分支，但依然停留在当前分支\ngit checkout -b [branch-name]\t新建一个分支，并切换到该分支\ngit branch --track [branch][remote-branch]\t新建一个分支，与指定的远程分支建立追踪关系\ngit checkout [branch-name]\t切换到指定分支，并更新工作区\ngit branch -d [branch-name]\t删除分支\ngit push origin --delete [branch-name]\t删除远程分支\n\n关于分支的操作虽然比较多，但都比较简单好记。\n##　merge\n![git_8](/assets/img/git-8.png)\nmerge命令把不同的分支合并起来。如上图，在实际开放中，我们可能从master分支中切出一个分支，然后进行开发完成需求，中间经过R3,R4,R5的commit记录，最后开发完成需要合入master中，这便用到了merge。\n> git fetch [remote]\tmerge之前先拉一下远程仓库最新代码\ngit merge [branch]\t合并指定分支到当前分支\n\n一般在merge之后，会出现conflict，需要针对冲突情况，手动解除冲突。主要是因为两个用户修改了同一文件的同一块区域。如下图所示，需要手动解除。\n![git_9](/assets/img/git-9.png)\n## rebase\n![git_10](/assets/img/git-10.png)\nrebase又称为衍合，是合并的另外一种选择。\n\n在开始阶段，我们处于new分支上，执行`git rebase dev`，那么new分支上新的commit都在master分支上重演一遍，最后checkout切换回到new分支。这一点与merge是一样的，合并前后所处的分支并没有改变。`git rebase dev`，通俗的解释就是new分支想站在dev的肩膀上继续下去。rebase也需要手动解决冲突。\n现在我们有这样的两个分支,test和master，提交如下：\n>   D---E test\n     /\nA---B---C---F master\n\n在master执行git merge test,然后会得到如下结果：\n>    D--------E\n     /          \\\nA---B---C---F----G   test, master\n\n在master执行git rebase test，然后得到如下结果：\n> A---B---D---E---C'---F'   test, master\n\n可以看到，merge操作会生成一个新的节点，之前的提交分开显示。而rebase操作不会生成新的节点，是将两个分支融合成一个线性的提交。\n\n如果你想要一个干净的，没有merge commit的线性历史树，那么你应该选择git rebase\n如果你想保留完整的历史记录，并且想要避免重写commit history的风险，你应该选择使用git merge\n## reset\n![git_11](/assets/img/git-11.png)\nreset命令把当前分支指向另一个位置，并且相应的变动工作区和暂存区。\n> git reset —soft [commit]\t只改变提交点，暂存区和工作目录的内容都不改变\ngit reset —mixed [commit]\t改变提交点，同时改变暂存区的内容\ngit reset —hard [commit]\t暂存区、工作区的内容都会被修改到与提交点完全一致的状态\ngit reset --hard HEAD\t让工作区回到上次提交时的状态\n\n## revert\n![git_12](/assets/img/git-12.png)\ngit revert用一个新提交来消除一个历史提交所做的任何修改。\n### revert与reset的区别\n![git_13](/assets/img/git-13.png)\n- git revert是用一次新的commit来回滚之前的commit，git reset是直接删除指定的commit。\n- 在回滚这一操作上看，效果差不多。但是在日后继续merge以前的老版本时有区别。因为git revert是用一次逆向的commit“中和”之前的提交，因此日后合并老的branch时，导致这部分改变不会再次出现，减少冲突。但是git reset是之间把某些commit在某个branch上删除，因而和老的branch再次merge时，这些被回滚的commit应该还会被引入，产生很多冲突。关于这一点，不太理解的可以看这篇文章。\n- git reset 是把HEAD向后移动了一下，而git revert是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。\n## push\n上传本地仓库分支到远程仓库分支，实现同步。\n> git push [remote][branch]\t上传本地指定分支到远程仓库\ngit push [remote] --force\t强行推送当前分支到远程仓库，即使有冲突\ngit push [remote] --all\t推送所有分支到远程仓库\n\n## 其他命令\n> git status\t显示有变更的文件\ngit log\t显示当前分支的版本历史\ngit diff\t显示暂存区和工作区的差异\ngit diff HEAD\t显示工作区与当前分支最新commit之间的差异\ngit cherry-pick [commit]\t选择一个commit，合并进当前分支\n\n\n以上就是关于Git的一些常用命令及详细阐述，相信能对Git有一个初步的认识。","source":"_posts/git使用总结.md","raw":"---\ntitle: git使用总结\nreward: true\ndate: 2017-08-24 14:31:21\ntags:\n    -git\n---\n# 一、Git工作流程\n![git_1](/assets/img/git-1.png)\n以上包括一些简单而常用的命令，但是先不关心这些，先来了解下面这4个专有名词。\n- Workspace：工作区\n- Index / Stage：暂存区\n- Repository：仓库区（或本地仓库）\n- Remote：远程仓库\n### 工作区\n程序员进行开发改动的地方，是你当前看到的，也是最新的。\n\n平常我们开发就是拷贝远程仓库中的一个分支，基于该分支进行开发。在开发过程中就是对工作区的操作。\n### 暂存区\n.git目录下的index文件, 暂存区会记录`git add`添加文件的相关信息(文件名、大小、timestamp...)，不保存文件实体, 通过id指向每个文件实体。可以使用`git status`查看暂存区的状态。暂存区标记了你当前工作区中，哪些内容是被git管理的。\n\n当你完成某个需求或功能后需要提交到远程仓库，那么第一步就是通过`git add`先提交到暂存区，被git管理。\n### 本地仓库\n保存了对象被提交 过的各个版本，比起工作区和暂存区的内容，它要更旧一些。\n`git commit`后同步index的目录树到本地仓库，方便从下一步通过`git push`同步本地仓库与远程仓库的同步。\n### 远程仓库\n远程仓库的内容可能被分布在多个地点的处于协作关系的本地仓库修改，因此它可能与本地仓库同步，也可能不同步，但是它的内容是最旧的。\n## 小结\n1、任何对象都是在工作区中诞生和被修改；\n2、任何修改都是从进入index区才开始被版本控制；\n3、只有把修改提交到本地仓库，该修改才能在仓库中留下痕迹；\n4、与协作者分享本地的修改，可以把它们push到远程仓库来共享。\n下面这幅图更加直接阐述了四个区域之间的关系，可能有些命令不太清楚，没关系，下部分会详细介绍。\n![git_2](/assets/img/git-2.png)\n# 二、常用Git命令\n![git_3](/assets/img/git-3.png)\n## HEAD\n![git_4](/assets/img/git-4.png)\n在掌握具体命令前，先理解下HEAD。\nHEAD，它始终指向当前所处分支的最新的提交点。你所处的分支变化了，或者产生了新的提交点，HEAD就会跟着改变。\n## add\n![git_5](/assets/img/git-5.png)\nadd相关命令很简单，主要实现将工作区修改的内容提交到暂存区，交由git管理。\n> git add .       添加当前目录的所有文件到暂存区    \n git add [dir]    添加指定目录到暂存区，包括子目录 \n git add [file1]     添加指定文件到暂存区   \n\n## commit\n![git_6](/assets/img/git-6.png)\ncommit相关命令也很简单，主要实现将暂存区的内容提交到本地仓库，并使得当前分支的HEAD向后移动一个提交点。\n> git commit -m [message]\t提交暂存区到本地仓库,message代表说明信息\ngit commit [file1] -m [message]\t提交暂存区的指定文件到本地仓库\ngit commit --amend -m [message]\t使用一次新的commit，替代上一次提交\n\n## branch\n![git_7](/assets/img/git-7.png)\n涉及到协作，自然会涉及到分支，关于分支，大概有展示分支，切换分支，创建分支，删除分支这四种操作。\n> git branch\t列出所有本地分支\ngit branch -r\t列出所有远程分支\ngit branch -a\t列出所有本地分支和远程分支\ngit branch [branch-name]\t新建一个分支，但依然停留在当前分支\ngit checkout -b [branch-name]\t新建一个分支，并切换到该分支\ngit branch --track [branch][remote-branch]\t新建一个分支，与指定的远程分支建立追踪关系\ngit checkout [branch-name]\t切换到指定分支，并更新工作区\ngit branch -d [branch-name]\t删除分支\ngit push origin --delete [branch-name]\t删除远程分支\n\n关于分支的操作虽然比较多，但都比较简单好记。\n##　merge\n![git_8](/assets/img/git-8.png)\nmerge命令把不同的分支合并起来。如上图，在实际开放中，我们可能从master分支中切出一个分支，然后进行开发完成需求，中间经过R3,R4,R5的commit记录，最后开发完成需要合入master中，这便用到了merge。\n> git fetch [remote]\tmerge之前先拉一下远程仓库最新代码\ngit merge [branch]\t合并指定分支到当前分支\n\n一般在merge之后，会出现conflict，需要针对冲突情况，手动解除冲突。主要是因为两个用户修改了同一文件的同一块区域。如下图所示，需要手动解除。\n![git_9](/assets/img/git-9.png)\n## rebase\n![git_10](/assets/img/git-10.png)\nrebase又称为衍合，是合并的另外一种选择。\n\n在开始阶段，我们处于new分支上，执行`git rebase dev`，那么new分支上新的commit都在master分支上重演一遍，最后checkout切换回到new分支。这一点与merge是一样的，合并前后所处的分支并没有改变。`git rebase dev`，通俗的解释就是new分支想站在dev的肩膀上继续下去。rebase也需要手动解决冲突。\n现在我们有这样的两个分支,test和master，提交如下：\n>   D---E test\n     /\nA---B---C---F master\n\n在master执行git merge test,然后会得到如下结果：\n>    D--------E\n     /          \\\nA---B---C---F----G   test, master\n\n在master执行git rebase test，然后得到如下结果：\n> A---B---D---E---C'---F'   test, master\n\n可以看到，merge操作会生成一个新的节点，之前的提交分开显示。而rebase操作不会生成新的节点，是将两个分支融合成一个线性的提交。\n\n如果你想要一个干净的，没有merge commit的线性历史树，那么你应该选择git rebase\n如果你想保留完整的历史记录，并且想要避免重写commit history的风险，你应该选择使用git merge\n## reset\n![git_11](/assets/img/git-11.png)\nreset命令把当前分支指向另一个位置，并且相应的变动工作区和暂存区。\n> git reset —soft [commit]\t只改变提交点，暂存区和工作目录的内容都不改变\ngit reset —mixed [commit]\t改变提交点，同时改变暂存区的内容\ngit reset —hard [commit]\t暂存区、工作区的内容都会被修改到与提交点完全一致的状态\ngit reset --hard HEAD\t让工作区回到上次提交时的状态\n\n## revert\n![git_12](/assets/img/git-12.png)\ngit revert用一个新提交来消除一个历史提交所做的任何修改。\n### revert与reset的区别\n![git_13](/assets/img/git-13.png)\n- git revert是用一次新的commit来回滚之前的commit，git reset是直接删除指定的commit。\n- 在回滚这一操作上看，效果差不多。但是在日后继续merge以前的老版本时有区别。因为git revert是用一次逆向的commit“中和”之前的提交，因此日后合并老的branch时，导致这部分改变不会再次出现，减少冲突。但是git reset是之间把某些commit在某个branch上删除，因而和老的branch再次merge时，这些被回滚的commit应该还会被引入，产生很多冲突。关于这一点，不太理解的可以看这篇文章。\n- git reset 是把HEAD向后移动了一下，而git revert是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。\n## push\n上传本地仓库分支到远程仓库分支，实现同步。\n> git push [remote][branch]\t上传本地指定分支到远程仓库\ngit push [remote] --force\t强行推送当前分支到远程仓库，即使有冲突\ngit push [remote] --all\t推送所有分支到远程仓库\n\n## 其他命令\n> git status\t显示有变更的文件\ngit log\t显示当前分支的版本历史\ngit diff\t显示暂存区和工作区的差异\ngit diff HEAD\t显示工作区与当前分支最新commit之间的差异\ngit cherry-pick [commit]\t选择一个commit，合并进当前分支\n\n\n以上就是关于Git的一些常用命令及详细阐述，相信能对Git有一个初步的认识。","slug":"git使用总结","published":1,"updated":"2020-03-12T13:55:48.638Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7otizq900087guisx7zr1a1","content":"<h1 id=\"一、Git工作流程\"><a href=\"#一、Git工作流程\" class=\"headerlink\" title=\"一、Git工作流程\"></a>一、Git工作流程</h1><p><img src=\"/assets/img/git-1.png\" alt=\"git_1\"><br>以上包括一些简单而常用的命令，但是先不关心这些，先来了解下面这4个专有名词。</p>\n<ul>\n<li>Workspace：工作区</li>\n<li>Index / Stage：暂存区</li>\n<li>Repository：仓库区（或本地仓库）</li>\n<li>Remote：远程仓库<h3 id=\"工作区\"><a href=\"#工作区\" class=\"headerlink\" title=\"工作区\"></a>工作区</h3>程序员进行开发改动的地方，是你当前看到的，也是最新的。</li>\n</ul>\n<p>平常我们开发就是拷贝远程仓库中的一个分支，基于该分支进行开发。在开发过程中就是对工作区的操作。</p>\n<h3 id=\"暂存区\"><a href=\"#暂存区\" class=\"headerlink\" title=\"暂存区\"></a>暂存区</h3><p>.git目录下的index文件, 暂存区会记录<code>git add</code>添加文件的相关信息(文件名、大小、timestamp…)，不保存文件实体, 通过id指向每个文件实体。可以使用<code>git status</code>查看暂存区的状态。暂存区标记了你当前工作区中，哪些内容是被git管理的。</p>\n<p>当你完成某个需求或功能后需要提交到远程仓库，那么第一步就是通过<code>git add</code>先提交到暂存区，被git管理。</p>\n<h3 id=\"本地仓库\"><a href=\"#本地仓库\" class=\"headerlink\" title=\"本地仓库\"></a>本地仓库</h3><p>保存了对象被提交 过的各个版本，比起工作区和暂存区的内容，它要更旧一些。<br><code>git commit</code>后同步index的目录树到本地仓库，方便从下一步通过<code>git push</code>同步本地仓库与远程仓库的同步。</p>\n<h3 id=\"远程仓库\"><a href=\"#远程仓库\" class=\"headerlink\" title=\"远程仓库\"></a>远程仓库</h3><p>远程仓库的内容可能被分布在多个地点的处于协作关系的本地仓库修改，因此它可能与本地仓库同步，也可能不同步，但是它的内容是最旧的。</p>\n<h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h2><p>1、任何对象都是在工作区中诞生和被修改；<br>2、任何修改都是从进入index区才开始被版本控制；<br>3、只有把修改提交到本地仓库，该修改才能在仓库中留下痕迹；<br>4、与协作者分享本地的修改，可以把它们push到远程仓库来共享。<br>下面这幅图更加直接阐述了四个区域之间的关系，可能有些命令不太清楚，没关系，下部分会详细介绍。<br><img src=\"/assets/img/git-2.png\" alt=\"git_2\"></p>\n<h1 id=\"二、常用Git命令\"><a href=\"#二、常用Git命令\" class=\"headerlink\" title=\"二、常用Git命令\"></a>二、常用Git命令</h1><p><img src=\"/assets/img/git-3.png\" alt=\"git_3\"></p>\n<h2 id=\"HEAD\"><a href=\"#HEAD\" class=\"headerlink\" title=\"HEAD\"></a>HEAD</h2><p><img src=\"/assets/img/git-4.png\" alt=\"git_4\"><br>在掌握具体命令前，先理解下HEAD。<br>HEAD，它始终指向当前所处分支的最新的提交点。你所处的分支变化了，或者产生了新的提交点，HEAD就会跟着改变。</p>\n<h2 id=\"add\"><a href=\"#add\" class=\"headerlink\" title=\"add\"></a>add</h2><p><img src=\"/assets/img/git-5.png\" alt=\"git_5\"><br>add相关命令很简单，主要实现将工作区修改的内容提交到暂存区，交由git管理。</p>\n<blockquote>\n<p>git add .       添加当前目录的所有文件到暂存区<br> git add [dir]    添加指定目录到暂存区，包括子目录<br> git add [file1]     添加指定文件到暂存区   </p>\n</blockquote>\n<h2 id=\"commit\"><a href=\"#commit\" class=\"headerlink\" title=\"commit\"></a>commit</h2><p><img src=\"/assets/img/git-6.png\" alt=\"git_6\"><br>commit相关命令也很简单，主要实现将暂存区的内容提交到本地仓库，并使得当前分支的HEAD向后移动一个提交点。</p>\n<blockquote>\n<p>git commit -m [message]    提交暂存区到本地仓库,message代表说明信息<br>git commit [file1] -m [message]    提交暂存区的指定文件到本地仓库<br>git commit –amend -m [message]    使用一次新的commit，替代上一次提交</p>\n</blockquote>\n<h2 id=\"branch\"><a href=\"#branch\" class=\"headerlink\" title=\"branch\"></a>branch</h2><p><img src=\"/assets/img/git-7.png\" alt=\"git_7\"><br>涉及到协作，自然会涉及到分支，关于分支，大概有展示分支，切换分支，创建分支，删除分支这四种操作。</p>\n<blockquote>\n<p>git branch    列出所有本地分支<br>git branch -r    列出所有远程分支<br>git branch -a    列出所有本地分支和远程分支<br>git branch [branch-name]    新建一个分支，但依然停留在当前分支<br>git checkout -b [branch-name]    新建一个分支，并切换到该分支<br>git branch –track [branch][remote-branch]    新建一个分支，与指定的远程分支建立追踪关系<br>git checkout [branch-name]    切换到指定分支，并更新工作区<br>git branch -d [branch-name]    删除分支<br>git push origin –delete [branch-name]    删除远程分支</p>\n</blockquote>\n<p>关于分支的操作虽然比较多，但都比较简单好记。</p>\n<p>##　merge<br><img src=\"/assets/img/git-8.png\" alt=\"git_8\"><br>merge命令把不同的分支合并起来。如上图，在实际开放中，我们可能从master分支中切出一个分支，然后进行开发完成需求，中间经过R3,R4,R5的commit记录，最后开发完成需要合入master中，这便用到了merge。</p>\n<blockquote>\n<p>git fetch [remote]    merge之前先拉一下远程仓库最新代码<br>git merge [branch]    合并指定分支到当前分支</p>\n</blockquote>\n<p>一般在merge之后，会出现conflict，需要针对冲突情况，手动解除冲突。主要是因为两个用户修改了同一文件的同一块区域。如下图所示，需要手动解除。<br><img src=\"/assets/img/git-9.png\" alt=\"git_9\"></p>\n<h2 id=\"rebase\"><a href=\"#rebase\" class=\"headerlink\" title=\"rebase\"></a>rebase</h2><p><img src=\"/assets/img/git-10.png\" alt=\"git_10\"><br>rebase又称为衍合，是合并的另外一种选择。</p>\n<p>在开始阶段，我们处于new分支上，执行<code>git rebase dev</code>，那么new分支上新的commit都在master分支上重演一遍，最后checkout切换回到new分支。这一点与merge是一样的，合并前后所处的分支并没有改变。<code>git rebase dev</code>，通俗的解释就是new分支想站在dev的肩膀上继续下去。rebase也需要手动解决冲突。<br>现在我们有这样的两个分支,test和master，提交如下：</p>\n<blockquote>\n<p>  D—E test<br>     /<br>A—B—C—F master</p>\n</blockquote>\n<p>在master执行git merge test,然后会得到如下结果：</p>\n<blockquote>\n<p>   D——–E<br>     /          \\<br>A—B—C—F—-G   test, master</p>\n</blockquote>\n<p>在master执行git rebase test，然后得到如下结果：</p>\n<blockquote>\n<p>A—B—D—E—C’—F’   test, master</p>\n</blockquote>\n<p>可以看到，merge操作会生成一个新的节点，之前的提交分开显示。而rebase操作不会生成新的节点，是将两个分支融合成一个线性的提交。</p>\n<p>如果你想要一个干净的，没有merge commit的线性历史树，那么你应该选择git rebase<br>如果你想保留完整的历史记录，并且想要避免重写commit history的风险，你应该选择使用git merge</p>\n<h2 id=\"reset\"><a href=\"#reset\" class=\"headerlink\" title=\"reset\"></a>reset</h2><p><img src=\"/assets/img/git-11.png\" alt=\"git_11\"><br>reset命令把当前分支指向另一个位置，并且相应的变动工作区和暂存区。</p>\n<blockquote>\n<p>git reset —soft [commit]    只改变提交点，暂存区和工作目录的内容都不改变<br>git reset —mixed [commit]    改变提交点，同时改变暂存区的内容<br>git reset —hard [commit]    暂存区、工作区的内容都会被修改到与提交点完全一致的状态<br>git reset –hard HEAD    让工作区回到上次提交时的状态</p>\n</blockquote>\n<h2 id=\"revert\"><a href=\"#revert\" class=\"headerlink\" title=\"revert\"></a>revert</h2><p><img src=\"/assets/img/git-12.png\" alt=\"git_12\"><br>git revert用一个新提交来消除一个历史提交所做的任何修改。</p>\n<h3 id=\"revert与reset的区别\"><a href=\"#revert与reset的区别\" class=\"headerlink\" title=\"revert与reset的区别\"></a>revert与reset的区别</h3><p><img src=\"/assets/img/git-13.png\" alt=\"git_13\"></p>\n<ul>\n<li>git revert是用一次新的commit来回滚之前的commit，git reset是直接删除指定的commit。</li>\n<li>在回滚这一操作上看，效果差不多。但是在日后继续merge以前的老版本时有区别。因为git revert是用一次逆向的commit“中和”之前的提交，因此日后合并老的branch时，导致这部分改变不会再次出现，减少冲突。但是git reset是之间把某些commit在某个branch上删除，因而和老的branch再次merge时，这些被回滚的commit应该还会被引入，产生很多冲突。关于这一点，不太理解的可以看这篇文章。</li>\n<li>git reset 是把HEAD向后移动了一下，而git revert是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。<h2 id=\"push\"><a href=\"#push\" class=\"headerlink\" title=\"push\"></a>push</h2>上传本地仓库分支到远程仓库分支，实现同步。<blockquote>\n<p>git push [remote][branch]    上传本地指定分支到远程仓库<br>git push [remote] –force    强行推送当前分支到远程仓库，即使有冲突<br>git push [remote] –all    推送所有分支到远程仓库</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h2><blockquote>\n<p>git status    显示有变更的文件<br>git log    显示当前分支的版本历史<br>git diff    显示暂存区和工作区的差异<br>git diff HEAD    显示工作区与当前分支最新commit之间的差异<br>git cherry-pick [commit]    选择一个commit，合并进当前分支</p>\n</blockquote>\n<p>以上就是关于Git的一些常用命令及详细阐述，相信能对Git有一个初步的认识。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"一、Git工作流程\"><a href=\"#一、Git工作流程\" class=\"headerlink\" title=\"一、Git工作流程\"></a>一、Git工作流程</h1><p><img src=\"/assets/img/git-1.png\" alt=\"git_1\"><br>以上包括一些简单而常用的命令，但是先不关心这些，先来了解下面这4个专有名词。</p>\n<ul>\n<li>Workspace：工作区</li>\n<li>Index / Stage：暂存区</li>\n<li>Repository：仓库区（或本地仓库）</li>\n<li>Remote：远程仓库<h3 id=\"工作区\"><a href=\"#工作区\" class=\"headerlink\" title=\"工作区\"></a>工作区</h3>程序员进行开发改动的地方，是你当前看到的，也是最新的。</li>\n</ul>\n<p>平常我们开发就是拷贝远程仓库中的一个分支，基于该分支进行开发。在开发过程中就是对工作区的操作。</p>\n<h3 id=\"暂存区\"><a href=\"#暂存区\" class=\"headerlink\" title=\"暂存区\"></a>暂存区</h3><p>.git目录下的index文件, 暂存区会记录<code>git add</code>添加文件的相关信息(文件名、大小、timestamp…)，不保存文件实体, 通过id指向每个文件实体。可以使用<code>git status</code>查看暂存区的状态。暂存区标记了你当前工作区中，哪些内容是被git管理的。</p>\n<p>当你完成某个需求或功能后需要提交到远程仓库，那么第一步就是通过<code>git add</code>先提交到暂存区，被git管理。</p>\n<h3 id=\"本地仓库\"><a href=\"#本地仓库\" class=\"headerlink\" title=\"本地仓库\"></a>本地仓库</h3><p>保存了对象被提交 过的各个版本，比起工作区和暂存区的内容，它要更旧一些。<br><code>git commit</code>后同步index的目录树到本地仓库，方便从下一步通过<code>git push</code>同步本地仓库与远程仓库的同步。</p>\n<h3 id=\"远程仓库\"><a href=\"#远程仓库\" class=\"headerlink\" title=\"远程仓库\"></a>远程仓库</h3><p>远程仓库的内容可能被分布在多个地点的处于协作关系的本地仓库修改，因此它可能与本地仓库同步，也可能不同步，但是它的内容是最旧的。</p>\n<h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h2><p>1、任何对象都是在工作区中诞生和被修改；<br>2、任何修改都是从进入index区才开始被版本控制；<br>3、只有把修改提交到本地仓库，该修改才能在仓库中留下痕迹；<br>4、与协作者分享本地的修改，可以把它们push到远程仓库来共享。<br>下面这幅图更加直接阐述了四个区域之间的关系，可能有些命令不太清楚，没关系，下部分会详细介绍。<br><img src=\"/assets/img/git-2.png\" alt=\"git_2\"></p>\n<h1 id=\"二、常用Git命令\"><a href=\"#二、常用Git命令\" class=\"headerlink\" title=\"二、常用Git命令\"></a>二、常用Git命令</h1><p><img src=\"/assets/img/git-3.png\" alt=\"git_3\"></p>\n<h2 id=\"HEAD\"><a href=\"#HEAD\" class=\"headerlink\" title=\"HEAD\"></a>HEAD</h2><p><img src=\"/assets/img/git-4.png\" alt=\"git_4\"><br>在掌握具体命令前，先理解下HEAD。<br>HEAD，它始终指向当前所处分支的最新的提交点。你所处的分支变化了，或者产生了新的提交点，HEAD就会跟着改变。</p>\n<h2 id=\"add\"><a href=\"#add\" class=\"headerlink\" title=\"add\"></a>add</h2><p><img src=\"/assets/img/git-5.png\" alt=\"git_5\"><br>add相关命令很简单，主要实现将工作区修改的内容提交到暂存区，交由git管理。</p>\n<blockquote>\n<p>git add .       添加当前目录的所有文件到暂存区<br> git add [dir]    添加指定目录到暂存区，包括子目录<br> git add [file1]     添加指定文件到暂存区   </p>\n</blockquote>\n<h2 id=\"commit\"><a href=\"#commit\" class=\"headerlink\" title=\"commit\"></a>commit</h2><p><img src=\"/assets/img/git-6.png\" alt=\"git_6\"><br>commit相关命令也很简单，主要实现将暂存区的内容提交到本地仓库，并使得当前分支的HEAD向后移动一个提交点。</p>\n<blockquote>\n<p>git commit -m [message]    提交暂存区到本地仓库,message代表说明信息<br>git commit [file1] -m [message]    提交暂存区的指定文件到本地仓库<br>git commit –amend -m [message]    使用一次新的commit，替代上一次提交</p>\n</blockquote>\n<h2 id=\"branch\"><a href=\"#branch\" class=\"headerlink\" title=\"branch\"></a>branch</h2><p><img src=\"/assets/img/git-7.png\" alt=\"git_7\"><br>涉及到协作，自然会涉及到分支，关于分支，大概有展示分支，切换分支，创建分支，删除分支这四种操作。</p>\n<blockquote>\n<p>git branch    列出所有本地分支<br>git branch -r    列出所有远程分支<br>git branch -a    列出所有本地分支和远程分支<br>git branch [branch-name]    新建一个分支，但依然停留在当前分支<br>git checkout -b [branch-name]    新建一个分支，并切换到该分支<br>git branch –track [branch][remote-branch]    新建一个分支，与指定的远程分支建立追踪关系<br>git checkout [branch-name]    切换到指定分支，并更新工作区<br>git branch -d [branch-name]    删除分支<br>git push origin –delete [branch-name]    删除远程分支</p>\n</blockquote>\n<p>关于分支的操作虽然比较多，但都比较简单好记。</p>\n<p>##　merge<br><img src=\"/assets/img/git-8.png\" alt=\"git_8\"><br>merge命令把不同的分支合并起来。如上图，在实际开放中，我们可能从master分支中切出一个分支，然后进行开发完成需求，中间经过R3,R4,R5的commit记录，最后开发完成需要合入master中，这便用到了merge。</p>\n<blockquote>\n<p>git fetch [remote]    merge之前先拉一下远程仓库最新代码<br>git merge [branch]    合并指定分支到当前分支</p>\n</blockquote>\n<p>一般在merge之后，会出现conflict，需要针对冲突情况，手动解除冲突。主要是因为两个用户修改了同一文件的同一块区域。如下图所示，需要手动解除。<br><img src=\"/assets/img/git-9.png\" alt=\"git_9\"></p>\n<h2 id=\"rebase\"><a href=\"#rebase\" class=\"headerlink\" title=\"rebase\"></a>rebase</h2><p><img src=\"/assets/img/git-10.png\" alt=\"git_10\"><br>rebase又称为衍合，是合并的另外一种选择。</p>\n<p>在开始阶段，我们处于new分支上，执行<code>git rebase dev</code>，那么new分支上新的commit都在master分支上重演一遍，最后checkout切换回到new分支。这一点与merge是一样的，合并前后所处的分支并没有改变。<code>git rebase dev</code>，通俗的解释就是new分支想站在dev的肩膀上继续下去。rebase也需要手动解决冲突。<br>现在我们有这样的两个分支,test和master，提交如下：</p>\n<blockquote>\n<p>  D—E test<br>     /<br>A—B—C—F master</p>\n</blockquote>\n<p>在master执行git merge test,然后会得到如下结果：</p>\n<blockquote>\n<p>   D——–E<br>     /          \\<br>A—B—C—F—-G   test, master</p>\n</blockquote>\n<p>在master执行git rebase test，然后得到如下结果：</p>\n<blockquote>\n<p>A—B—D—E—C’—F’   test, master</p>\n</blockquote>\n<p>可以看到，merge操作会生成一个新的节点，之前的提交分开显示。而rebase操作不会生成新的节点，是将两个分支融合成一个线性的提交。</p>\n<p>如果你想要一个干净的，没有merge commit的线性历史树，那么你应该选择git rebase<br>如果你想保留完整的历史记录，并且想要避免重写commit history的风险，你应该选择使用git merge</p>\n<h2 id=\"reset\"><a href=\"#reset\" class=\"headerlink\" title=\"reset\"></a>reset</h2><p><img src=\"/assets/img/git-11.png\" alt=\"git_11\"><br>reset命令把当前分支指向另一个位置，并且相应的变动工作区和暂存区。</p>\n<blockquote>\n<p>git reset —soft [commit]    只改变提交点，暂存区和工作目录的内容都不改变<br>git reset —mixed [commit]    改变提交点，同时改变暂存区的内容<br>git reset —hard [commit]    暂存区、工作区的内容都会被修改到与提交点完全一致的状态<br>git reset –hard HEAD    让工作区回到上次提交时的状态</p>\n</blockquote>\n<h2 id=\"revert\"><a href=\"#revert\" class=\"headerlink\" title=\"revert\"></a>revert</h2><p><img src=\"/assets/img/git-12.png\" alt=\"git_12\"><br>git revert用一个新提交来消除一个历史提交所做的任何修改。</p>\n<h3 id=\"revert与reset的区别\"><a href=\"#revert与reset的区别\" class=\"headerlink\" title=\"revert与reset的区别\"></a>revert与reset的区别</h3><p><img src=\"/assets/img/git-13.png\" alt=\"git_13\"></p>\n<ul>\n<li>git revert是用一次新的commit来回滚之前的commit，git reset是直接删除指定的commit。</li>\n<li>在回滚这一操作上看，效果差不多。但是在日后继续merge以前的老版本时有区别。因为git revert是用一次逆向的commit“中和”之前的提交，因此日后合并老的branch时，导致这部分改变不会再次出现，减少冲突。但是git reset是之间把某些commit在某个branch上删除，因而和老的branch再次merge时，这些被回滚的commit应该还会被引入，产生很多冲突。关于这一点，不太理解的可以看这篇文章。</li>\n<li>git reset 是把HEAD向后移动了一下，而git revert是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。<h2 id=\"push\"><a href=\"#push\" class=\"headerlink\" title=\"push\"></a>push</h2>上传本地仓库分支到远程仓库分支，实现同步。<blockquote>\n<p>git push [remote][branch]    上传本地指定分支到远程仓库<br>git push [remote] –force    强行推送当前分支到远程仓库，即使有冲突<br>git push [remote] –all    推送所有分支到远程仓库</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h2><blockquote>\n<p>git status    显示有变更的文件<br>git log    显示当前分支的版本历史<br>git diff    显示暂存区和工作区的差异<br>git diff HEAD    显示工作区与当前分支最新commit之间的差异<br>git cherry-pick [commit]    选择一个commit，合并进当前分支</p>\n</blockquote>\n<p>以上就是关于Git的一些常用命令及详细阐述，相信能对Git有一个初步的认识。</p>\n"},{"title":"javascript中this、call和apply","date":"2017-08-28T08:16:59.000Z","_content":"\n在 JavaScript 编程中， this 关键字总是让初学者感到迷惑， Function.prototype.call 和\nFunction.prototype.apply 这两个方法也有着广泛的运用。我们有必要在学习设计模式之前先理解\n这几个概念。\n# 1.this\n## 1.1 this的指向\n除去不常用的 with 和 eval 的情况，具体到实际应用中， this 的指向大致可以分为以下 4种。\n- 作为对象的方法调用。\n- 作为普通函数调用。\n- 构造器调用。\n- Function.prototype.call 或 Function.prototype.apply 调用。\n\n### 1. 作为对象的方法调用\n当函数作为对象的方法被调用时， this 指向该对象：\n```\nvar obj = {\na: 1,\ngetA: function(){\nalert ( this === obj ); // 输出：true\nalert ( this.a ); // 输出: 1\n}\n};\nobj.getA();\n```\n### 2. 作为普通函数调用\n当函数不作为对象的属性被调用时，也就是我们常说的普通函数方式，此时的 this 总是指向全局对象。在浏览器的 JavaScript里，这个全局对象是 window 对象。\n```\nwindow.name = 'globalName';\nvar getName = function(){\nreturn this.name;\n};\nconsole.log( getName() ); // 输出：globalName\n或者：\nwindow.name = 'globalName';\nvar myObject = {\nname: 'sven',\ngetName: function(){\nreturn this.name;\n}\n};\nvar getName = myObject.getName;\nconsole.log( getName() ); // globalName\n```\n有时候我们会遇到一些困扰，比如在 div 节点的事件函数内部，有一个局部的 callback 方法，callback被作为普通函数调用时， callback 内部的 this 指向了 window ，但我们往往是想让它指向该 div 节点，见如下代码：\n```\n<html>\n    <body>\n        <div id=\"div1\">我是一个 div</div>\n    </body>\n    <script>\n        window.id = 'window';\n        document.getElementById( 'div1' ).onclick = function(){\n        alert ( this.id ); // 输出：'div1'\n        var callback = function(){\n        alert ( this.id ); // 输出：'window'\n        }\n        callback();\n        };\n    </script>\n</html>\n```\n此时有一种简单的解决方案，可以用一个变量保存 div 节点的引用：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    var that = this; // 保存 div 的引用\n    var callback = function(){\n    alert ( that.id ); // 输出：'div1'\n    }\n    callback();\n};\n```\n在 ECMAScript 5的 strict 模式下，这种情况下的 this 已经被规定为不会指向全局对象，而是 undefined ：\n```\nfunction func(){\n    \"use strict\"\n    alert ( this ); // 输出：undefined\n}\nfunc();\n```\n### 3. 构造器调用\nJavaScript 中没有类，但是可以从构造器中创建对象，同时也提供了 new 运算符，使得构造器看起来更像一个类。\n除了宿主提供的一些内置函数，大部分 JavaScript函数都可以当作构造器使用。构造器的外表跟普通函数一模一样，它们的区别在于被调用的方式。当用 new 运算符调用函数时，该函数总会返回一个对象，通常情况下，构造器里的 this 就指向返回的这个对象，见如下代码：\n```\nvar MyClass = function(){\n    this.name = 'sven';\n};\nvar obj = new MyClass();\nalert ( obj.name ); // 输出：sven\n```\n但用 new 调用构造器时，还要注意一个问题，如果构造器显式地返回了一个 object 类型的对象，那么此次运算结果最终会返回这个对象，而不是我们之前期待的 this ：\n```\nvar MyClass = function(){\n    this.name = 'sven';\n    return { // 显式地返回一个对象\n        name: 'anne'\n    }\n};\nvar obj = new MyClass();\nalert ( obj.name ); // 输出：anne\n```\n如果构造器不显式地返回任何数据，或者是返回一个非对象类型的数据，就不会造成上述问题：\n```\nvar MyClass = function(){\n    this.name = 'sven'\n    return 'anne'; // 返回 string 类型\n};\nvar obj = new MyClass();\nalert ( obj.name ); // 输出：sven\n```\n### 4.  Function.prototype.call 或 Function.prototype.apply 调用\n跟普通的函数调用相比，用 Function.prototype.call 或 Function.prototype.apply 可以动态地改变传入函数的 this ：\n```\nvar obj1 = {\n    name: 'sven',\n    getName: function(){\n    return this.name;\n    }\n};\nvar obj2 = {\n    name: 'anne'\n};\nconsole.log( obj1.getName() ); // 输出: sven\nconsole.log( obj1.getName.call( obj2 ) ); // 输出：anne\n```\ncall 和 apply 方法能很好地体现 JavaScript的函数式语言特性，在 JavaScript中，几乎每一次编写函数式语言风格的代码，都离不开 call 和 apply 。\n## 1.2 丢失的this\n这是一个经常遇到的问题，我们先看下面的代码：\n```\nvar obj = {\n    myName: 'sven',\n    getName: function(){\n        return this.myName;\n    }\n};\nconsole.log( obj.getName() ); // 输出：'sven'\nvar getName2 = obj.getName;\nconsole.log( getName2() ); // 输出：undefined\n```\n当调用 obj.getName 时， getName 方法是作为 obj 对象的属性被调用的，根据之前提到的规律，此时的 this 指向 obj 对象，所以 obj.getName() 输出 'sven' 。\n当用另外一个变量 getName2 来引用 obj.getName ，并且调用 getName2 时，根据之前提到的规律，此时是普通函数调用方式， this是指向全局window的，所以程序的执行结果是 undefined 。\n再看另一个例子， document.getElementById 这个方法名实在有点过长，我们大概尝试过用一个短的函数来代替它，如同 prototype.js 等一些框架所做过的事情：\n```\nvar getId = function( id ){\n    return document.getElementById( id );\n};\ngetId( 'div1' );\n```\n我们也许思考过为什么不能用下面这种更简单的方式：\n```\nvar getId = document.getElementById;\ngetId( 'div1' );\n```\n现在不妨花 1分钟时间，让这段代码在浏览器中运行一次：\n```\n<html>\n    <body>\n        <div id=\"div1\">我是一个 div</div>\n    </body>\n    <script>\n        var getId = document.getElementById;\n        getId( 'div1' );\n    </script>\n</html>\n```\n在 Chrome、Firefox、IE10 中执行过后就会发现，这段代码抛出了一个异常。这是因为许多引擎的 document.getElementById 方法的内部实现中需要用到 this 。这个 this 本来被期望指向document ，当 getElementById 方法作为 document 对象的属性被调用时，方法内部的 this 确实是指向 document 的。\n但当用 getId 来引用 document.getElementById 之后，再调用 getId ，此时就成了普通函数调用，函数内部的 this 指向了 window ，而不是原来的 document 。\n我们可以尝试利用 apply 把 document 当作 this 传入 getId 函数，帮助“修正” this ：\n```\ndocument.getElementById = (function( func ){\n    return function(){\n        return func.apply( document, arguments );\n    }\n})( document.getElementById );\nvar getId = document.getElementById;\nvar div = getId( 'div1' );\nalert (div.id); // 输出： div1\n```\n# 2.call 和 apply\nECAMScript 3给 Function 的原型定义了两个方法，它们是 Function.prototype.call 和 Function.\nprototype.apply 。在实际开发中，特别是在一些函数式风格的代码编写中， call 和 apply 方法尤为有用。\n## 2.1call 和 apply 的区别\nFunction.prototype.call 和 Function.prototype.apply 都是非常常用的方法。它们的作用一模一样，区别仅在于传入参数形式的不同。\napply 接受两个参数，第一个参数指定了函数体内 this 对象的指向，第二个参数为一个带下标的集合，这个集合可以为数组，也可以为类数组， apply 方法把这个集合中的元素作为参数传递给被调用的函数：\n```\nvar func = function( a, b, c ){\n    alert ( [ a, b, c ] ); // 输出 [ 1, 2, 3 ]\n};\nfunc.apply( null, [ 1, 2, 3 ] );\n```\n在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。\n在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。\n```\nvar func = function( a, b, c ){\n    alert ( [ a, b, c ] ); // 输出 [ 1, 2, 3 ]\n};\nfunc.call( null, 1, 2, 3 );\n```\n当调用一个函数时，JavaScript 的解释器并不会计较形参和实参在数量、类型以及顺序上的区别，JavaScript的参数在内部就是用一个数组来表示的。从这个意义上说， apply 比 call 的使用率更高，我们不必关心具体有多少参数被传入函数，只要用 apply 一股脑地推过去就可以了。\ncall 是包装在 apply 上面的一颗语法糖，如果我们明确地知道函数接受多少个参数，而且想一目了然地表达形参和实参的对应关系，那么也可以用 call 来传送参数。\n当使用 call 或者 apply 的时候，如果我们传入的第一个参数为 null ，函数体内的 this 会指向默认的宿主对象，在浏览器中则是 window ：\n```\nvar func = function( a, b, c ){\n    alert ( this === window ); // 输出 true\n    };\nfunc.apply( null, [ 1, 2, 3 ] );\n```\n但如果是在严格模式下，函数体内的 this 还是为 null ：\n```\nvar func = function( a, b, c ){\n    \"use strict\";\n    alert ( this === null ); // 输出 true\n}\nfunc.apply( null, [ 1, 2, 3 ] );\n```\n有时候我们使用 call 或者 apply 的目的不在于指定 this 指向，而是另有用途，比如借用其他对象的方法。那么我们可以传入 null 来代替某个具体的对象：\n```\nMath.max.apply( null, [ 1, 2, 5, 3, 4 ] ) // 输出：5\n```\n## 2.2call 和 apply 的用途\n### 1.改变 this 指向\ncall 和 apply 最常见的用途是改变函数内部的 this 指向，我们来看个例子：\n```\nvar obj1 = {\n    name: 'sven'\n};\nvar obj2 = {\n    name: 'anne'\n};\nwindow.name = 'window';\nvar getName = function(){\n    alert ( this.name );\n};\ngetName(); // 输出: window\ngetName.call( obj1 ); // 输出: sven\ngetName.call( obj2 ); // 输出: anne\n```\n当执行 getName.call( obj1 ) 这句代码时， getName 函数体内的 this 就指向 obj1 对象，所以\n此处的\n```\nvar getName = function(){\n    alert ( this.name );\n};\n```\n实际上相当于:\n```\nvar getName = function(){\n    alert ( obj1.name ); // 输出: sven\n};\n```\n在实际开发中，经常会遇到 this 指向被不经意改变的场景，比如有一个 div 节点， div 节点的 onclick 事件中的 this 本来是指向这个 div 的：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    alert( this.id ); // 输出：div1\n};\n```\n假如该事件函数中有一个内部函数 func ，在事件内部调用 func 函数时， func 函数体内的 this就指向了 window ，而不是我们预期的 div ，见如下代码：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    alert( this.id ); // 输出：div1\n    var func = function(){\n        alert ( this.id ); // 输出：undefined\n    }\nfunc();\n};\n```\n这时候我们用 call 来修正 func 函数内的 this ，使其依然指向 div ：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    var func = function(){\n        alert ( this.id ); // 输出：div1\n    }\n    func.call( this );\n};\n```\n### 2. Function.prototype.bind\n大部分高级浏览器都实现了内置的 Function.prototype.bind ，用来指定函数内部的 this 指向，即使没有原生的 Function.prototype.bind 实现，我们来模拟一个也不是难事，代码如下：\n```\nFunction.prototype.bind = function( context ){\n    var self = this; // 保存原函数\n    return function(){ // 返回一个新的函数\n        return self.apply( context, arguments ); // 执行新的函数的时候，会把之前传入的 context\n        // 当作新函数体内的 this\n}\n};\nvar obj = {\n    name: 'sven'\n};\nvar func = function(){\n    alert ( this.name ); // 输出：sven\n}.bind( obj);\nfunc();\n```\n我们通过 Function.prototype.bind 来“包装” func 函数，并且传入一个对象 context 当作参数，这个 context 对象就是我们想修正的 this 对象。\n在 Function.prototype.bind 的内部实现中，我们先把 func 函数的引用保存起来，然后返回一个新的函数。当我们在将来执行 func 函数时，实际上先执行的是这个刚刚返回的新函数。在新函数内部，self.apply( context, arguments ) 这句代码才是执行原来的 func 函数，并且指定 context对象为 func 函数体内的 this 。\n这是一个简化版的 Function.prototype.bind 实现，通常我们还会把它实现得稍微复杂一点，使得可以往 func 函数中预先填入一些参数：\n```\nFunction.prototype.bind = function(){\n    var self = this, // 保存原函数\n        context = [].shift.call( arguments ), // 需要绑定的 this 上下文\n        args = [].slice.call( arguments ); // 剩余的参数转成数组\n        return function(){ // 返回一个新的函数\n            return self.apply( context, [].concat.call( args, [].slice.call( arguments ) ) );\n         // 执行新的函数的时候，会把之前传入的 context 当作新函数体内的 this\n         // 并且组合两次分别传入的参数，作为新函数的参数\n        }\n    };\n    var obj = {\n    name: 'sven'\n};\nvar func = function( a, b, c, d ){\n    alert ( this.name ); // 输出：sven\n    alert ( [ a, b, c, d ] ) // 输出：[ 1, 2, 3, 4 ]\n}.bind( obj, 1, 2 );\nfunc( 3, 4 );\n```\n### 3.借用其他对象的方法\n我们知道，杜鹃既不会筑巢，也不会孵雏，而是把自己的蛋寄托给云雀等其他鸟类，让它们代为孵化和养育。同样，在 JavaScript中也存在类似的借用现象。\n借用方法的第一种场景是“借用构造函数”，通过这种技术，可以实现一些类似继承的效果：\n```\nvar A = function( name ){\n    this.name = name;\n};\nvar B = function(){\n    A.apply( this, arguments );\n};\nB.prototype.getName = function(){\n    return this.name;\n};\nvar b = new B( 'sven' );\nconsole.log( b.getName() ); // 输出： 'sven'\n```\n借用方法的第二种运用场景跟我们的关系更加密切。\n函数的参数列表 arguments 是一个类数组对象，虽然它也有“下标”，但它并非真正的数组，所以也不能像数组一样，进行排序操作或者往集合里添加一个新的元素。这种情况下，我们常常会借用 Array.prototype 对象上的方法。比如想往 arguments 中添加一个新的元素，通常会借用Array.prototype.push ：\n```\n(function(){\n    Array.prototype.push.call( arguments, 3 );\n    console.log ( arguments ); // 输出[1,2,3]\n})( 1, 2 );\n```\n在操作 arguments 的时候，我们经常非常频繁地找 Array.prototype 对象借用方法。\n想把 arguments 转成真正的数组的时候，可以借用 Array.prototype.slice 方法；想截去arguments 列表中的头一个元素时，又可以借用 Array.prototype.shift 方法。那么这种机制的内部实现原理是什么呢？我们不妨翻开 V8的引擎源码，以 Array.prototype.push 为例，看看 V8引擎中的具体实现：\n```\nfunction ArrayPush() {\n    var n = TO_UINT32( this.length ); // 被 push 的对象的 length\n    var m = %_ArgumentsLength(); // push 的参数个数\n    for (var i = 0; i < m; i++) {\n    this[ i + n ] = %_Arguments( i ); // 复制元素 (1)\n    }\n    this.length = n + m; // 修正 length 属性的值 (2)\n    return this.length;\n};\n```\n通过这段代码可以看到， Array.prototype.push 实际上是一个属性复制的过程，把参数按照下标依次添加到被 push 的对象上面，顺便修改了这个对象的 length 属性。至于被修改的对象是谁，到底是数组还是类数组对象，这一点并不重要。\n由此可以推断，我们可以把“任意”对象传入 Array.prototype.push ：\n```\nvar a = {};\nArray.prototype.push.call( a, 'first' );\nalert ( a.length ); // 输出：1\nalert ( a[ 0 ] ); // first\n```\n这段代码在绝大部分浏览器里都能顺利执行，但由于引擎的内部实现存在差异，如果在低版\n本的 IE浏览器中执行，必须显式地给对象 a 设置 length 属性：\n```\nvar a = {\n    length: 0\n};\n```\n前面我们之所以把“任意”两字加了双引号，是因为可以借用 Array.prototype.push 方法的对象还要满足以下两个条件，从 ArrayPush 函数的(1)处和(2)处也可以猜到，这个对象至少还要满足：\n- 对象本身要可以存取属性；\n- 对象的 length 属性可读写。\n对于第一个条件，对象本身存取属性并没有问题，但如果借用 Array.prototype.push 方法的不是一个 object 类型的数据，而是一个 number 类型的数据呢? 我们无法在 number 身上存取其他数据，那么从下面的测试代码可以发现，一个 number 类型的数据不可能借用到 Array.prototype.push 方法：\n```\nvar a = 1;\nArray.prototype.push.call( a, 'first' );\nalert ( a.length ); // 输出：undefined\nalert ( a[ 0 ] ); // 输出：undefined\n```\n对于第二个条件，函数的 length 属性就是一个只读的属性，表示形参的个数，我们尝试把一个函数当作 this 传入 Array.prototype.push ：\n```\nvar func = function(){};\nArray.prototype.push.call( func, 'first' );\nalert ( func.length );\n// 报错：cannot assign to read only property ‘length’ of function(){}\n```\n<font color=#00ffff size=6>End</font>","source":"_posts/javascript中this、call和apply.md","raw":"---\ntitle: javascript中this、call和apply\ndate: 2017-08-28 16:16:59\ntags:\n    - this,\n    - call,\n    - apply\n---\n\n在 JavaScript 编程中， this 关键字总是让初学者感到迷惑， Function.prototype.call 和\nFunction.prototype.apply 这两个方法也有着广泛的运用。我们有必要在学习设计模式之前先理解\n这几个概念。\n# 1.this\n## 1.1 this的指向\n除去不常用的 with 和 eval 的情况，具体到实际应用中， this 的指向大致可以分为以下 4种。\n- 作为对象的方法调用。\n- 作为普通函数调用。\n- 构造器调用。\n- Function.prototype.call 或 Function.prototype.apply 调用。\n\n### 1. 作为对象的方法调用\n当函数作为对象的方法被调用时， this 指向该对象：\n```\nvar obj = {\na: 1,\ngetA: function(){\nalert ( this === obj ); // 输出：true\nalert ( this.a ); // 输出: 1\n}\n};\nobj.getA();\n```\n### 2. 作为普通函数调用\n当函数不作为对象的属性被调用时，也就是我们常说的普通函数方式，此时的 this 总是指向全局对象。在浏览器的 JavaScript里，这个全局对象是 window 对象。\n```\nwindow.name = 'globalName';\nvar getName = function(){\nreturn this.name;\n};\nconsole.log( getName() ); // 输出：globalName\n或者：\nwindow.name = 'globalName';\nvar myObject = {\nname: 'sven',\ngetName: function(){\nreturn this.name;\n}\n};\nvar getName = myObject.getName;\nconsole.log( getName() ); // globalName\n```\n有时候我们会遇到一些困扰，比如在 div 节点的事件函数内部，有一个局部的 callback 方法，callback被作为普通函数调用时， callback 内部的 this 指向了 window ，但我们往往是想让它指向该 div 节点，见如下代码：\n```\n<html>\n    <body>\n        <div id=\"div1\">我是一个 div</div>\n    </body>\n    <script>\n        window.id = 'window';\n        document.getElementById( 'div1' ).onclick = function(){\n        alert ( this.id ); // 输出：'div1'\n        var callback = function(){\n        alert ( this.id ); // 输出：'window'\n        }\n        callback();\n        };\n    </script>\n</html>\n```\n此时有一种简单的解决方案，可以用一个变量保存 div 节点的引用：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    var that = this; // 保存 div 的引用\n    var callback = function(){\n    alert ( that.id ); // 输出：'div1'\n    }\n    callback();\n};\n```\n在 ECMAScript 5的 strict 模式下，这种情况下的 this 已经被规定为不会指向全局对象，而是 undefined ：\n```\nfunction func(){\n    \"use strict\"\n    alert ( this ); // 输出：undefined\n}\nfunc();\n```\n### 3. 构造器调用\nJavaScript 中没有类，但是可以从构造器中创建对象，同时也提供了 new 运算符，使得构造器看起来更像一个类。\n除了宿主提供的一些内置函数，大部分 JavaScript函数都可以当作构造器使用。构造器的外表跟普通函数一模一样，它们的区别在于被调用的方式。当用 new 运算符调用函数时，该函数总会返回一个对象，通常情况下，构造器里的 this 就指向返回的这个对象，见如下代码：\n```\nvar MyClass = function(){\n    this.name = 'sven';\n};\nvar obj = new MyClass();\nalert ( obj.name ); // 输出：sven\n```\n但用 new 调用构造器时，还要注意一个问题，如果构造器显式地返回了一个 object 类型的对象，那么此次运算结果最终会返回这个对象，而不是我们之前期待的 this ：\n```\nvar MyClass = function(){\n    this.name = 'sven';\n    return { // 显式地返回一个对象\n        name: 'anne'\n    }\n};\nvar obj = new MyClass();\nalert ( obj.name ); // 输出：anne\n```\n如果构造器不显式地返回任何数据，或者是返回一个非对象类型的数据，就不会造成上述问题：\n```\nvar MyClass = function(){\n    this.name = 'sven'\n    return 'anne'; // 返回 string 类型\n};\nvar obj = new MyClass();\nalert ( obj.name ); // 输出：sven\n```\n### 4.  Function.prototype.call 或 Function.prototype.apply 调用\n跟普通的函数调用相比，用 Function.prototype.call 或 Function.prototype.apply 可以动态地改变传入函数的 this ：\n```\nvar obj1 = {\n    name: 'sven',\n    getName: function(){\n    return this.name;\n    }\n};\nvar obj2 = {\n    name: 'anne'\n};\nconsole.log( obj1.getName() ); // 输出: sven\nconsole.log( obj1.getName.call( obj2 ) ); // 输出：anne\n```\ncall 和 apply 方法能很好地体现 JavaScript的函数式语言特性，在 JavaScript中，几乎每一次编写函数式语言风格的代码，都离不开 call 和 apply 。\n## 1.2 丢失的this\n这是一个经常遇到的问题，我们先看下面的代码：\n```\nvar obj = {\n    myName: 'sven',\n    getName: function(){\n        return this.myName;\n    }\n};\nconsole.log( obj.getName() ); // 输出：'sven'\nvar getName2 = obj.getName;\nconsole.log( getName2() ); // 输出：undefined\n```\n当调用 obj.getName 时， getName 方法是作为 obj 对象的属性被调用的，根据之前提到的规律，此时的 this 指向 obj 对象，所以 obj.getName() 输出 'sven' 。\n当用另外一个变量 getName2 来引用 obj.getName ，并且调用 getName2 时，根据之前提到的规律，此时是普通函数调用方式， this是指向全局window的，所以程序的执行结果是 undefined 。\n再看另一个例子， document.getElementById 这个方法名实在有点过长，我们大概尝试过用一个短的函数来代替它，如同 prototype.js 等一些框架所做过的事情：\n```\nvar getId = function( id ){\n    return document.getElementById( id );\n};\ngetId( 'div1' );\n```\n我们也许思考过为什么不能用下面这种更简单的方式：\n```\nvar getId = document.getElementById;\ngetId( 'div1' );\n```\n现在不妨花 1分钟时间，让这段代码在浏览器中运行一次：\n```\n<html>\n    <body>\n        <div id=\"div1\">我是一个 div</div>\n    </body>\n    <script>\n        var getId = document.getElementById;\n        getId( 'div1' );\n    </script>\n</html>\n```\n在 Chrome、Firefox、IE10 中执行过后就会发现，这段代码抛出了一个异常。这是因为许多引擎的 document.getElementById 方法的内部实现中需要用到 this 。这个 this 本来被期望指向document ，当 getElementById 方法作为 document 对象的属性被调用时，方法内部的 this 确实是指向 document 的。\n但当用 getId 来引用 document.getElementById 之后，再调用 getId ，此时就成了普通函数调用，函数内部的 this 指向了 window ，而不是原来的 document 。\n我们可以尝试利用 apply 把 document 当作 this 传入 getId 函数，帮助“修正” this ：\n```\ndocument.getElementById = (function( func ){\n    return function(){\n        return func.apply( document, arguments );\n    }\n})( document.getElementById );\nvar getId = document.getElementById;\nvar div = getId( 'div1' );\nalert (div.id); // 输出： div1\n```\n# 2.call 和 apply\nECAMScript 3给 Function 的原型定义了两个方法，它们是 Function.prototype.call 和 Function.\nprototype.apply 。在实际开发中，特别是在一些函数式风格的代码编写中， call 和 apply 方法尤为有用。\n## 2.1call 和 apply 的区别\nFunction.prototype.call 和 Function.prototype.apply 都是非常常用的方法。它们的作用一模一样，区别仅在于传入参数形式的不同。\napply 接受两个参数，第一个参数指定了函数体内 this 对象的指向，第二个参数为一个带下标的集合，这个集合可以为数组，也可以为类数组， apply 方法把这个集合中的元素作为参数传递给被调用的函数：\n```\nvar func = function( a, b, c ){\n    alert ( [ a, b, c ] ); // 输出 [ 1, 2, 3 ]\n};\nfunc.apply( null, [ 1, 2, 3 ] );\n```\n在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。\n在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。\n```\nvar func = function( a, b, c ){\n    alert ( [ a, b, c ] ); // 输出 [ 1, 2, 3 ]\n};\nfunc.call( null, 1, 2, 3 );\n```\n当调用一个函数时，JavaScript 的解释器并不会计较形参和实参在数量、类型以及顺序上的区别，JavaScript的参数在内部就是用一个数组来表示的。从这个意义上说， apply 比 call 的使用率更高，我们不必关心具体有多少参数被传入函数，只要用 apply 一股脑地推过去就可以了。\ncall 是包装在 apply 上面的一颗语法糖，如果我们明确地知道函数接受多少个参数，而且想一目了然地表达形参和实参的对应关系，那么也可以用 call 来传送参数。\n当使用 call 或者 apply 的时候，如果我们传入的第一个参数为 null ，函数体内的 this 会指向默认的宿主对象，在浏览器中则是 window ：\n```\nvar func = function( a, b, c ){\n    alert ( this === window ); // 输出 true\n    };\nfunc.apply( null, [ 1, 2, 3 ] );\n```\n但如果是在严格模式下，函数体内的 this 还是为 null ：\n```\nvar func = function( a, b, c ){\n    \"use strict\";\n    alert ( this === null ); // 输出 true\n}\nfunc.apply( null, [ 1, 2, 3 ] );\n```\n有时候我们使用 call 或者 apply 的目的不在于指定 this 指向，而是另有用途，比如借用其他对象的方法。那么我们可以传入 null 来代替某个具体的对象：\n```\nMath.max.apply( null, [ 1, 2, 5, 3, 4 ] ) // 输出：5\n```\n## 2.2call 和 apply 的用途\n### 1.改变 this 指向\ncall 和 apply 最常见的用途是改变函数内部的 this 指向，我们来看个例子：\n```\nvar obj1 = {\n    name: 'sven'\n};\nvar obj2 = {\n    name: 'anne'\n};\nwindow.name = 'window';\nvar getName = function(){\n    alert ( this.name );\n};\ngetName(); // 输出: window\ngetName.call( obj1 ); // 输出: sven\ngetName.call( obj2 ); // 输出: anne\n```\n当执行 getName.call( obj1 ) 这句代码时， getName 函数体内的 this 就指向 obj1 对象，所以\n此处的\n```\nvar getName = function(){\n    alert ( this.name );\n};\n```\n实际上相当于:\n```\nvar getName = function(){\n    alert ( obj1.name ); // 输出: sven\n};\n```\n在实际开发中，经常会遇到 this 指向被不经意改变的场景，比如有一个 div 节点， div 节点的 onclick 事件中的 this 本来是指向这个 div 的：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    alert( this.id ); // 输出：div1\n};\n```\n假如该事件函数中有一个内部函数 func ，在事件内部调用 func 函数时， func 函数体内的 this就指向了 window ，而不是我们预期的 div ，见如下代码：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    alert( this.id ); // 输出：div1\n    var func = function(){\n        alert ( this.id ); // 输出：undefined\n    }\nfunc();\n};\n```\n这时候我们用 call 来修正 func 函数内的 this ，使其依然指向 div ：\n```\ndocument.getElementById( 'div1' ).onclick = function(){\n    var func = function(){\n        alert ( this.id ); // 输出：div1\n    }\n    func.call( this );\n};\n```\n### 2. Function.prototype.bind\n大部分高级浏览器都实现了内置的 Function.prototype.bind ，用来指定函数内部的 this 指向，即使没有原生的 Function.prototype.bind 实现，我们来模拟一个也不是难事，代码如下：\n```\nFunction.prototype.bind = function( context ){\n    var self = this; // 保存原函数\n    return function(){ // 返回一个新的函数\n        return self.apply( context, arguments ); // 执行新的函数的时候，会把之前传入的 context\n        // 当作新函数体内的 this\n}\n};\nvar obj = {\n    name: 'sven'\n};\nvar func = function(){\n    alert ( this.name ); // 输出：sven\n}.bind( obj);\nfunc();\n```\n我们通过 Function.prototype.bind 来“包装” func 函数，并且传入一个对象 context 当作参数，这个 context 对象就是我们想修正的 this 对象。\n在 Function.prototype.bind 的内部实现中，我们先把 func 函数的引用保存起来，然后返回一个新的函数。当我们在将来执行 func 函数时，实际上先执行的是这个刚刚返回的新函数。在新函数内部，self.apply( context, arguments ) 这句代码才是执行原来的 func 函数，并且指定 context对象为 func 函数体内的 this 。\n这是一个简化版的 Function.prototype.bind 实现，通常我们还会把它实现得稍微复杂一点，使得可以往 func 函数中预先填入一些参数：\n```\nFunction.prototype.bind = function(){\n    var self = this, // 保存原函数\n        context = [].shift.call( arguments ), // 需要绑定的 this 上下文\n        args = [].slice.call( arguments ); // 剩余的参数转成数组\n        return function(){ // 返回一个新的函数\n            return self.apply( context, [].concat.call( args, [].slice.call( arguments ) ) );\n         // 执行新的函数的时候，会把之前传入的 context 当作新函数体内的 this\n         // 并且组合两次分别传入的参数，作为新函数的参数\n        }\n    };\n    var obj = {\n    name: 'sven'\n};\nvar func = function( a, b, c, d ){\n    alert ( this.name ); // 输出：sven\n    alert ( [ a, b, c, d ] ) // 输出：[ 1, 2, 3, 4 ]\n}.bind( obj, 1, 2 );\nfunc( 3, 4 );\n```\n### 3.借用其他对象的方法\n我们知道，杜鹃既不会筑巢，也不会孵雏，而是把自己的蛋寄托给云雀等其他鸟类，让它们代为孵化和养育。同样，在 JavaScript中也存在类似的借用现象。\n借用方法的第一种场景是“借用构造函数”，通过这种技术，可以实现一些类似继承的效果：\n```\nvar A = function( name ){\n    this.name = name;\n};\nvar B = function(){\n    A.apply( this, arguments );\n};\nB.prototype.getName = function(){\n    return this.name;\n};\nvar b = new B( 'sven' );\nconsole.log( b.getName() ); // 输出： 'sven'\n```\n借用方法的第二种运用场景跟我们的关系更加密切。\n函数的参数列表 arguments 是一个类数组对象，虽然它也有“下标”，但它并非真正的数组，所以也不能像数组一样，进行排序操作或者往集合里添加一个新的元素。这种情况下，我们常常会借用 Array.prototype 对象上的方法。比如想往 arguments 中添加一个新的元素，通常会借用Array.prototype.push ：\n```\n(function(){\n    Array.prototype.push.call( arguments, 3 );\n    console.log ( arguments ); // 输出[1,2,3]\n})( 1, 2 );\n```\n在操作 arguments 的时候，我们经常非常频繁地找 Array.prototype 对象借用方法。\n想把 arguments 转成真正的数组的时候，可以借用 Array.prototype.slice 方法；想截去arguments 列表中的头一个元素时，又可以借用 Array.prototype.shift 方法。那么这种机制的内部实现原理是什么呢？我们不妨翻开 V8的引擎源码，以 Array.prototype.push 为例，看看 V8引擎中的具体实现：\n```\nfunction ArrayPush() {\n    var n = TO_UINT32( this.length ); // 被 push 的对象的 length\n    var m = %_ArgumentsLength(); // push 的参数个数\n    for (var i = 0; i < m; i++) {\n    this[ i + n ] = %_Arguments( i ); // 复制元素 (1)\n    }\n    this.length = n + m; // 修正 length 属性的值 (2)\n    return this.length;\n};\n```\n通过这段代码可以看到， Array.prototype.push 实际上是一个属性复制的过程，把参数按照下标依次添加到被 push 的对象上面，顺便修改了这个对象的 length 属性。至于被修改的对象是谁，到底是数组还是类数组对象，这一点并不重要。\n由此可以推断，我们可以把“任意”对象传入 Array.prototype.push ：\n```\nvar a = {};\nArray.prototype.push.call( a, 'first' );\nalert ( a.length ); // 输出：1\nalert ( a[ 0 ] ); // first\n```\n这段代码在绝大部分浏览器里都能顺利执行，但由于引擎的内部实现存在差异，如果在低版\n本的 IE浏览器中执行，必须显式地给对象 a 设置 length 属性：\n```\nvar a = {\n    length: 0\n};\n```\n前面我们之所以把“任意”两字加了双引号，是因为可以借用 Array.prototype.push 方法的对象还要满足以下两个条件，从 ArrayPush 函数的(1)处和(2)处也可以猜到，这个对象至少还要满足：\n- 对象本身要可以存取属性；\n- 对象的 length 属性可读写。\n对于第一个条件，对象本身存取属性并没有问题，但如果借用 Array.prototype.push 方法的不是一个 object 类型的数据，而是一个 number 类型的数据呢? 我们无法在 number 身上存取其他数据，那么从下面的测试代码可以发现，一个 number 类型的数据不可能借用到 Array.prototype.push 方法：\n```\nvar a = 1;\nArray.prototype.push.call( a, 'first' );\nalert ( a.length ); // 输出：undefined\nalert ( a[ 0 ] ); // 输出：undefined\n```\n对于第二个条件，函数的 length 属性就是一个只读的属性，表示形参的个数，我们尝试把一个函数当作 this 传入 Array.prototype.push ：\n```\nvar func = function(){};\nArray.prototype.push.call( func, 'first' );\nalert ( func.length );\n// 报错：cannot assign to read only property ‘length’ of function(){}\n```\n<font color=#00ffff size=6>End</font>","slug":"javascript中this、call和apply","published":1,"updated":"2020-03-12T13:55:48.639Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7otizqe000a7guiwyw866cs","content":"<p>在 JavaScript 编程中， this 关键字总是让初学者感到迷惑， Function.prototype.call 和<br>Function.prototype.apply 这两个方法也有着广泛的运用。我们有必要在学习设计模式之前先理解<br>这几个概念。</p>\n<h1 id=\"1-this\"><a href=\"#1-this\" class=\"headerlink\" title=\"1.this\"></a>1.this</h1><h2 id=\"1-1-this的指向\"><a href=\"#1-1-this的指向\" class=\"headerlink\" title=\"1.1 this的指向\"></a>1.1 this的指向</h2><p>除去不常用的 with 和 eval 的情况，具体到实际应用中， this 的指向大致可以分为以下 4种。</p>\n<ul>\n<li>作为对象的方法调用。</li>\n<li>作为普通函数调用。</li>\n<li>构造器调用。</li>\n<li>Function.prototype.call 或 Function.prototype.apply 调用。</li>\n</ul>\n<h3 id=\"1-作为对象的方法调用\"><a href=\"#1-作为对象的方法调用\" class=\"headerlink\" title=\"1. 作为对象的方法调用\"></a>1. 作为对象的方法调用</h3><p>当函数作为对象的方法被调用时， this 指向该对象：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">a: <span class=\"number\">1</span>,</span><br><span class=\"line\">getA: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">alert ( <span class=\"keyword\">this</span> === obj ); <span class=\"comment\">// 输出：true</span></span><br><span class=\"line\">alert ( <span class=\"keyword\">this</span>.a ); <span class=\"comment\">// 输出: 1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">obj.getA();</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-作为普通函数调用\"><a href=\"#2-作为普通函数调用\" class=\"headerlink\" title=\"2. 作为普通函数调用\"></a>2. 作为普通函数调用</h3><p>当函数不作为对象的属性被调用时，也就是我们常说的普通函数方式，此时的 this 总是指向全局对象。在浏览器的 JavaScript里，这个全局对象是 window 对象。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'globalName'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( getName() ); <span class=\"comment\">// 输出：globalName</span></span><br><span class=\"line\">或者：</span><br><span class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'globalName'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> myObject = &#123;</span><br><span class=\"line\">name: <span class=\"string\">'sven'</span>,</span><br><span class=\"line\">getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = myObject.getName;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( getName() ); <span class=\"comment\">// globalName</span></span><br></pre></td></tr></table></figure></p>\n<p>有时候我们会遇到一些困扰，比如在 div 节点的事件函数内部，有一个局部的 callback 方法，callback被作为普通函数调用时， callback 内部的 this 指向了 window ，但我们往往是想让它指向该 div 节点，见如下代码：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div1\"</span>&gt;</span>我是一个 div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">window</span>.id = <span class=\"string\">'window'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：'div1'</span></span></span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"keyword\">var</span> callback = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：'window'</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        callback();</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;;</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>此时有一种简单的解决方案，可以用一个变量保存 div 节点的引用：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>; <span class=\"comment\">// 保存 div 的引用</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> callback = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert ( that.id ); <span class=\"comment\">// 输出：'div1'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    callback();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>在 ECMAScript 5的 strict 模式下，这种情况下的 this 已经被规定为不会指向全局对象，而是 undefined ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"meta\">    \"use strict\"</span></span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span> ); <span class=\"comment\">// 输出：undefined</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">func();</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-构造器调用\"><a href=\"#3-构造器调用\" class=\"headerlink\" title=\"3. 构造器调用\"></a>3. 构造器调用</h3><p>JavaScript 中没有类，但是可以从构造器中创建对象，同时也提供了 new 运算符，使得构造器看起来更像一个类。<br>除了宿主提供的一些内置函数，大部分 JavaScript函数都可以当作构造器使用。构造器的外表跟普通函数一模一样，它们的区别在于被调用的方式。当用 new 运算符调用函数时，该函数总会返回一个对象，通常情况下，构造器里的 this 就指向返回的这个对象，见如下代码：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> MyClass = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'sven'</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> MyClass();</span><br><span class=\"line\">alert ( obj.name ); <span class=\"comment\">// 输出：sven</span></span><br></pre></td></tr></table></figure></p>\n<p>但用 new 调用构造器时，还要注意一个问题，如果构造器显式地返回了一个 object 类型的对象，那么此次运算结果最终会返回这个对象，而不是我们之前期待的 this ：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> MyClass = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'sven'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"comment\">// 显式地返回一个对象</span></span><br><span class=\"line\">        name: <span class=\"string\">'anne'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> MyClass();</span><br><span class=\"line\">alert ( obj.name ); <span class=\"comment\">// 输出：anne</span></span><br></pre></td></tr></table></figure></p>\n<p>如果构造器不显式地返回任何数据，或者是返回一个非对象类型的数据，就不会造成上述问题：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> MyClass = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'sven'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'anne'</span>; <span class=\"comment\">// 返回 string 类型</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> MyClass();</span><br><span class=\"line\">alert ( obj.name ); <span class=\"comment\">// 输出：sven</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4-Function-prototype-call-或-Function-prototype-apply-调用\"><a href=\"#4-Function-prototype-call-或-Function-prototype-apply-调用\" class=\"headerlink\" title=\"4.  Function.prototype.call 或 Function.prototype.apply 调用\"></a>4.  Function.prototype.call 或 Function.prototype.apply 调用</h3><p>跟普通的函数调用相比，用 Function.prototype.call 或 Function.prototype.apply 可以动态地改变传入函数的 this ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span>,</span><br><span class=\"line\">    getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'anne'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( obj1.getName() ); <span class=\"comment\">// 输出: sven</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( obj1.getName.call( obj2 ) ); <span class=\"comment\">// 输出：anne</span></span><br></pre></td></tr></table></figure></p>\n<p>call 和 apply 方法能很好地体现 JavaScript的函数式语言特性，在 JavaScript中，几乎每一次编写函数式语言风格的代码，都离不开 call 和 apply 。</p>\n<h2 id=\"1-2-丢失的this\"><a href=\"#1-2-丢失的this\" class=\"headerlink\" title=\"1.2 丢失的this\"></a>1.2 丢失的this</h2><p>这是一个经常遇到的问题，我们先看下面的代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    myName: <span class=\"string\">'sven'</span>,</span><br><span class=\"line\">    getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.myName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( obj.getName() ); <span class=\"comment\">// 输出：'sven'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> getName2 = obj.getName;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( getName2() ); <span class=\"comment\">// 输出：undefined</span></span><br></pre></td></tr></table></figure></p>\n<p>当调用 obj.getName 时， getName 方法是作为 obj 对象的属性被调用的，根据之前提到的规律，此时的 this 指向 obj 对象，所以 obj.getName() 输出 ‘sven’ 。<br>当用另外一个变量 getName2 来引用 obj.getName ，并且调用 getName2 时，根据之前提到的规律，此时是普通函数调用方式， this是指向全局window的，所以程序的执行结果是 undefined 。<br>再看另一个例子， document.getElementById 这个方法名实在有点过长，我们大概尝试过用一个短的函数来代替它，如同 prototype.js 等一些框架所做过的事情：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getId = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> id </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.getElementById( id );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">getId( <span class=\"string\">'div1'</span> );</span><br></pre></td></tr></table></figure></p>\n<p>我们也许思考过为什么不能用下面这种更简单的方式：<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getId = <span class=\"built_in\">document</span>.getElementById;</span><br><span class=\"line\">getId( <span class=\"string\">'div1'</span> );</span><br></pre></td></tr></table></figure></p>\n<p>现在不妨花 1分钟时间，让这段代码在浏览器中运行一次：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div1\"</span>&gt;</span>我是一个 div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> getId = <span class=\"built_in\">document</span>.getElementById;</span></span><br><span class=\"line\"><span class=\"actionscript\">        getId( <span class=\"string\">'div1'</span> );</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>在 Chrome、Firefox、IE10 中执行过后就会发现，这段代码抛出了一个异常。这是因为许多引擎的 document.getElementById 方法的内部实现中需要用到 this 。这个 this 本来被期望指向document ，当 getElementById 方法作为 document 对象的属性被调用时，方法内部的 this 确实是指向 document 的。<br>但当用 getId 来引用 document.getElementById 之后，再调用 getId ，此时就成了普通函数调用，函数内部的 this 指向了 window ，而不是原来的 document 。<br>我们可以尝试利用 apply 把 document 当作 this 传入 getId 函数，帮助“修正” this ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> func </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func.apply( <span class=\"built_in\">document</span>, <span class=\"built_in\">arguments</span> );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)( <span class=\"built_in\">document</span>.getElementById );</span><br><span class=\"line\"><span class=\"keyword\">var</span> getId = <span class=\"built_in\">document</span>.getElementById;</span><br><span class=\"line\"><span class=\"keyword\">var</span> div = getId( <span class=\"string\">'div1'</span> );</span><br><span class=\"line\">alert (div.id); <span class=\"comment\">// 输出： div1</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"2-call-和-apply\"><a href=\"#2-call-和-apply\" class=\"headerlink\" title=\"2.call 和 apply\"></a>2.call 和 apply</h1><p>ECAMScript 3给 Function 的原型定义了两个方法，它们是 Function.prototype.call 和 Function.<br>prototype.apply 。在实际开发中，特别是在一些函数式风格的代码编写中， call 和 apply 方法尤为有用。</p>\n<h2 id=\"2-1call-和-apply-的区别\"><a href=\"#2-1call-和-apply-的区别\" class=\"headerlink\" title=\"2.1call 和 apply 的区别\"></a>2.1call 和 apply 的区别</h2><p>Function.prototype.call 和 Function.prototype.apply 都是非常常用的方法。它们的作用一模一样，区别仅在于传入参数形式的不同。<br>apply 接受两个参数，第一个参数指定了函数体内 this 对象的指向，第二个参数为一个带下标的集合，这个集合可以为数组，也可以为类数组， apply 方法把这个集合中的元素作为参数传递给被调用的函数：<br><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">( a, b, <span class=\"built_in\">c</span> )</span></span>&#123;</span><br><span class=\"line\">    alert ( [ a, b, <span class=\"built_in\">c</span> ] ); <span class=\"comment\">// 输出 [ 1, 2, 3 ]</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">apply</span><span class=\"params\">( null, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ] )</span></span>;</span><br></pre></td></tr></table></figure></p>\n<p>在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。<br>在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。<br><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">( a, b, <span class=\"built_in\">c</span> )</span></span>&#123;</span><br><span class=\"line\">    alert ( [ a, b, <span class=\"built_in\">c</span> ] ); <span class=\"comment\">// 输出 [ 1, 2, 3 ]</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">call</span><span class=\"params\">( null, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> )</span></span>;</span><br></pre></td></tr></table></figure></p>\n<p>当调用一个函数时，JavaScript 的解释器并不会计较形参和实参在数量、类型以及顺序上的区别，JavaScript的参数在内部就是用一个数组来表示的。从这个意义上说， apply 比 call 的使用率更高，我们不必关心具体有多少参数被传入函数，只要用 apply 一股脑地推过去就可以了。<br>call 是包装在 apply 上面的一颗语法糖，如果我们明确地知道函数接受多少个参数，而且想一目了然地表达形参和实参的对应关系，那么也可以用 call 来传送参数。<br>当使用 call 或者 apply 的时候，如果我们传入的第一个参数为 null ，函数体内的 this 会指向默认的宿主对象，在浏览器中则是 window ：<br><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">( a, b, <span class=\"built_in\">c</span> )</span></span>&#123;</span><br><span class=\"line\">    alert ( this === window ); <span class=\"comment\">// 输出 true</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">apply</span><span class=\"params\">( null, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ] )</span></span>;</span><br></pre></td></tr></table></figure></p>\n<p>但如果是在严格模式下，函数体内的 this 还是为 null ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> a, b, c </span>)</span>&#123;</span><br><span class=\"line\"><span class=\"meta\">    \"use strict\"</span>;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span> === <span class=\"literal\">null</span> ); <span class=\"comment\">// 输出 true</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">func.apply( <span class=\"literal\">null</span>, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ] );</span><br></pre></td></tr></table></figure></p>\n<p>有时候我们使用 call 或者 apply 的目的不在于指定 this 指向，而是另有用途，比如借用其他对象的方法。那么我们可以传入 null 来代替某个具体的对象：<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Math.max.apply( null, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ] ) <span class=\"comment\">// 输出：5</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"2-2call-和-apply-的用途\"><a href=\"#2-2call-和-apply-的用途\" class=\"headerlink\" title=\"2.2call 和 apply 的用途\"></a>2.2call 和 apply 的用途</h2><h3 id=\"1-改变-this-指向\"><a href=\"#1-改变-this-指向\" class=\"headerlink\" title=\"1.改变 this 指向\"></a>1.改变 this 指向</h3><p>call 和 apply 最常见的用途是改变函数内部的 this 指向，我们来看个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'anne'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'window'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">getName(); <span class=\"comment\">// 输出: window</span></span><br><span class=\"line\">getName.call( obj1 ); <span class=\"comment\">// 输出: sven</span></span><br><span class=\"line\">getName.call( obj2 ); <span class=\"comment\">// 输出: anne</span></span><br></pre></td></tr></table></figure></p>\n<p>当执行 getName.call( obj1 ) 这句代码时， getName 函数体内的 this 就指向 obj1 对象，所以<br>此处的<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>实际上相当于:<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    alert ( obj1.name ); <span class=\"comment\">// 输出: sven</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>在实际开发中，经常会遇到 this 指向被不经意改变的场景，比如有一个 div 节点， div 节点的 onclick 事件中的 this 本来是指向这个 div 的：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：div1</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>假如该事件函数中有一个内部函数 func ，在事件内部调用 func 函数时， func 函数体内的 this就指向了 window ，而不是我们预期的 div ，见如下代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：div1</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：undefined</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">func();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>这时候我们用 call 来修正 func 函数内的 this ，使其依然指向 div ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：div1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    func.call( <span class=\"keyword\">this</span> );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-Function-prototype-bind\"><a href=\"#2-Function-prototype-bind\" class=\"headerlink\" title=\"2. Function.prototype.bind\"></a>2. Function.prototype.bind</h3><p>大部分高级浏览器都实现了内置的 Function.prototype.bind ，用来指定函数内部的 this 指向，即使没有原生的 Function.prototype.bind 实现，我们来模拟一个也不是难事，代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> context </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>; <span class=\"comment\">// 保存原函数</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; <span class=\"comment\">// 返回一个新的函数</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.apply( context, <span class=\"built_in\">arguments</span> ); <span class=\"comment\">// 执行新的函数的时候，会把之前传入的 context</span></span><br><span class=\"line\">        <span class=\"comment\">// 当作新函数体内的 this</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name ); <span class=\"comment\">// 输出：sven</span></span><br><span class=\"line\">&#125;.bind( obj);</span><br><span class=\"line\">func();</span><br></pre></td></tr></table></figure></p>\n<p>我们通过 Function.prototype.bind 来“包装” func 函数，并且传入一个对象 context 当作参数，这个 context 对象就是我们想修正的 this 对象。<br>在 Function.prototype.bind 的内部实现中，我们先把 func 函数的引用保存起来，然后返回一个新的函数。当我们在将来执行 func 函数时，实际上先执行的是这个刚刚返回的新函数。在新函数内部，self.apply( context, arguments ) 这句代码才是执行原来的 func 函数，并且指定 context对象为 func 函数体内的 this 。<br>这是一个简化版的 Function.prototype.bind 实现，通常我们还会把它实现得稍微复杂一点，使得可以往 func 函数中预先填入一些参数：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>, <span class=\"comment\">// 保存原函数</span></span><br><span class=\"line\">        context = [].shift.call( <span class=\"built_in\">arguments</span> ), <span class=\"comment\">// 需要绑定的 this 上下文</span></span><br><span class=\"line\">        args = [].slice.call( <span class=\"built_in\">arguments</span> ); <span class=\"comment\">// 剩余的参数转成数组</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; <span class=\"comment\">// 返回一个新的函数</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> self.apply( context, [].concat.call( args, [].slice.call( <span class=\"built_in\">arguments</span> ) ) );</span><br><span class=\"line\">         <span class=\"comment\">// 执行新的函数的时候，会把之前传入的 context 当作新函数体内的 this</span></span><br><span class=\"line\">         <span class=\"comment\">// 并且组合两次分别传入的参数，作为新函数的参数</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> a, b, c, d </span>)</span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name ); <span class=\"comment\">// 输出：sven</span></span><br><span class=\"line\">    alert ( [ a, b, c, d ] ) <span class=\"comment\">// 输出：[ 1, 2, 3, 4 ]</span></span><br><span class=\"line\">&#125;.bind( obj, <span class=\"number\">1</span>, <span class=\"number\">2</span> );</span><br><span class=\"line\">func( <span class=\"number\">3</span>, <span class=\"number\">4</span> );</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-借用其他对象的方法\"><a href=\"#3-借用其他对象的方法\" class=\"headerlink\" title=\"3.借用其他对象的方法\"></a>3.借用其他对象的方法</h3><p>我们知道，杜鹃既不会筑巢，也不会孵雏，而是把自己的蛋寄托给云雀等其他鸟类，让它们代为孵化和养育。同样，在 JavaScript中也存在类似的借用现象。<br>借用方法的第一种场景是“借用构造函数”，通过这种技术，可以实现一些类似继承的效果：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> A = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> name </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> B = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    A.apply( <span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span> );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">B.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"keyword\">new</span> B( <span class=\"string\">'sven'</span> );</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( b.getName() ); <span class=\"comment\">// 输出： 'sven'</span></span><br></pre></td></tr></table></figure></p>\n<p>借用方法的第二种运用场景跟我们的关系更加密切。<br>函数的参数列表 arguments 是一个类数组对象，虽然它也有“下标”，但它并非真正的数组，所以也不能像数组一样，进行排序操作或者往集合里添加一个新的元素。这种情况下，我们常常会借用 Array.prototype 对象上的方法。比如想往 arguments 中添加一个新的元素，通常会借用Array.prototype.push ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.prototype.push.call( <span class=\"built_in\">arguments</span>, <span class=\"number\">3</span> );</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log ( <span class=\"built_in\">arguments</span> ); <span class=\"comment\">// 输出[1,2,3]</span></span><br><span class=\"line\">&#125;)( <span class=\"number\">1</span>, <span class=\"number\">2</span> );</span><br></pre></td></tr></table></figure></p>\n<p>在操作 arguments 的时候，我们经常非常频繁地找 Array.prototype 对象借用方法。<br>想把 arguments 转成真正的数组的时候，可以借用 Array.prototype.slice 方法；想截去arguments 列表中的头一个元素时，又可以借用 Array.prototype.shift 方法。那么这种机制的内部实现原理是什么呢？我们不妨翻开 V8的引擎源码，以 Array.prototype.push 为例，看看 V8引擎中的具体实现：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function ArrayPush() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> n = TO_UINT32( <span class=\"keyword\">this</span>.length ); <span class=\"comment\">// 被 push 的对象的 length</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> m = %_ArgumentsLength(); <span class=\"comment\">// push 的参数个数</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; m; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>[ i + n ] = %_Arguments( i ); <span class=\"comment\">// 复制元素 (1)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.length = n + m; <span class=\"comment\">// 修正 length 属性的值 (2)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.length;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>通过这段代码可以看到， Array.prototype.push 实际上是一个属性复制的过程，把参数按照下标依次添加到被 push 的对象上面，顺便修改了这个对象的 length 属性。至于被修改的对象是谁，到底是数组还是类数组对象，这一点并不重要。<br>由此可以推断，我们可以把“任意”对象传入 Array.prototype.push ：<br><figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = &#123;&#125;;</span><br><span class=\"line\">Array.prototype.push.call<span class=\"comment\">( a, 'first' )</span>;</span><br><span class=\"line\">alert <span class=\"comment\">( a.length )</span>; <span class=\"comment\">// 输出：1</span></span><br><span class=\"line\">alert <span class=\"comment\">( a[ 0 ] )</span>; <span class=\"comment\">// first</span></span><br></pre></td></tr></table></figure></p>\n<p>这段代码在绝大部分浏览器里都能顺利执行，但由于引擎的内部实现存在差异，如果在低版<br>本的 IE浏览器中执行，必须显式地给对象 a 设置 length 属性：<br><figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">var a</span> = &#123;</span><br><span class=\"line\">    length: 0</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>前面我们之所以把“任意”两字加了双引号，是因为可以借用 Array.prototype.push 方法的对象还要满足以下两个条件，从 ArrayPush 函数的(1)处和(2)处也可以猜到，这个对象至少还要满足：</p>\n<ul>\n<li>对象本身要可以存取属性；</li>\n<li>对象的 length 属性可读写。<br>对于第一个条件，对象本身存取属性并没有问题，但如果借用 Array.prototype.push 方法的不是一个 object 类型的数据，而是一个 number 类型的数据呢? 我们无法在 number 身上存取其他数据，那么从下面的测试代码可以发现，一个 number 类型的数据不可能借用到 Array.prototype.push 方法：<figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = <span class=\"number\">1</span>;</span><br><span class=\"line\">Array.prototype.push.call<span class=\"comment\">( a, 'first' )</span>;</span><br><span class=\"line\">alert <span class=\"comment\">( a.length )</span>; <span class=\"comment\">// 输出：undefined</span></span><br><span class=\"line\">alert <span class=\"comment\">( a[ 0 ] )</span>; <span class=\"comment\">// 输出：undefined</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>对于第二个条件，函数的 length 属性就是一个只读的属性，表示形参的个数，我们尝试把一个函数当作 this 传入 Array.prototype.push ：<br><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">()</span>&#123;&#125;;</span></span><br><span class=\"line\">Array.prototype.push.<span class=\"built_in\">call</span>( <span class=\"function\"><span class=\"keyword\">func</span>, '<span class=\"title\">first</span>' );</span></span><br><span class=\"line\">alert ( <span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">length</span> );</span></span><br><span class=\"line\">// 报错：cannot <span class=\"built_in\">assign</span> <span class=\"keyword\">to</span> read only property ‘length’ of function()&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<font color=\"#00ffff\" size=\"6\">End</font>","site":{"data":{}},"excerpt":"","more":"<p>在 JavaScript 编程中， this 关键字总是让初学者感到迷惑， Function.prototype.call 和<br>Function.prototype.apply 这两个方法也有着广泛的运用。我们有必要在学习设计模式之前先理解<br>这几个概念。</p>\n<h1 id=\"1-this\"><a href=\"#1-this\" class=\"headerlink\" title=\"1.this\"></a>1.this</h1><h2 id=\"1-1-this的指向\"><a href=\"#1-1-this的指向\" class=\"headerlink\" title=\"1.1 this的指向\"></a>1.1 this的指向</h2><p>除去不常用的 with 和 eval 的情况，具体到实际应用中， this 的指向大致可以分为以下 4种。</p>\n<ul>\n<li>作为对象的方法调用。</li>\n<li>作为普通函数调用。</li>\n<li>构造器调用。</li>\n<li>Function.prototype.call 或 Function.prototype.apply 调用。</li>\n</ul>\n<h3 id=\"1-作为对象的方法调用\"><a href=\"#1-作为对象的方法调用\" class=\"headerlink\" title=\"1. 作为对象的方法调用\"></a>1. 作为对象的方法调用</h3><p>当函数作为对象的方法被调用时， this 指向该对象：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">a: <span class=\"number\">1</span>,</span><br><span class=\"line\">getA: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">alert ( <span class=\"keyword\">this</span> === obj ); <span class=\"comment\">// 输出：true</span></span><br><span class=\"line\">alert ( <span class=\"keyword\">this</span>.a ); <span class=\"comment\">// 输出: 1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">obj.getA();</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-作为普通函数调用\"><a href=\"#2-作为普通函数调用\" class=\"headerlink\" title=\"2. 作为普通函数调用\"></a>2. 作为普通函数调用</h3><p>当函数不作为对象的属性被调用时，也就是我们常说的普通函数方式，此时的 this 总是指向全局对象。在浏览器的 JavaScript里，这个全局对象是 window 对象。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'globalName'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( getName() ); <span class=\"comment\">// 输出：globalName</span></span><br><span class=\"line\">或者：</span><br><span class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'globalName'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> myObject = &#123;</span><br><span class=\"line\">name: <span class=\"string\">'sven'</span>,</span><br><span class=\"line\">getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = myObject.getName;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( getName() ); <span class=\"comment\">// globalName</span></span><br></pre></td></tr></table></figure></p>\n<p>有时候我们会遇到一些困扰，比如在 div 节点的事件函数内部，有一个局部的 callback 方法，callback被作为普通函数调用时， callback 内部的 this 指向了 window ，但我们往往是想让它指向该 div 节点，见如下代码：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div1\"</span>&gt;</span>我是一个 div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">window</span>.id = <span class=\"string\">'window'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：'div1'</span></span></span><br><span class=\"line\"><span class=\"actionscript\">        <span class=\"keyword\">var</span> callback = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：'window'</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        callback();</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;;</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>此时有一种简单的解决方案，可以用一个变量保存 div 节点的引用：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>; <span class=\"comment\">// 保存 div 的引用</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> callback = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert ( that.id ); <span class=\"comment\">// 输出：'div1'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    callback();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>在 ECMAScript 5的 strict 模式下，这种情况下的 this 已经被规定为不会指向全局对象，而是 undefined ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"meta\">    \"use strict\"</span></span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span> ); <span class=\"comment\">// 输出：undefined</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">func();</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-构造器调用\"><a href=\"#3-构造器调用\" class=\"headerlink\" title=\"3. 构造器调用\"></a>3. 构造器调用</h3><p>JavaScript 中没有类，但是可以从构造器中创建对象，同时也提供了 new 运算符，使得构造器看起来更像一个类。<br>除了宿主提供的一些内置函数，大部分 JavaScript函数都可以当作构造器使用。构造器的外表跟普通函数一模一样，它们的区别在于被调用的方式。当用 new 运算符调用函数时，该函数总会返回一个对象，通常情况下，构造器里的 this 就指向返回的这个对象，见如下代码：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> MyClass = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'sven'</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> MyClass();</span><br><span class=\"line\">alert ( obj.name ); <span class=\"comment\">// 输出：sven</span></span><br></pre></td></tr></table></figure></p>\n<p>但用 new 调用构造器时，还要注意一个问题，如果构造器显式地返回了一个 object 类型的对象，那么此次运算结果最终会返回这个对象，而不是我们之前期待的 this ：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> MyClass = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'sven'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"comment\">// 显式地返回一个对象</span></span><br><span class=\"line\">        name: <span class=\"string\">'anne'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> MyClass();</span><br><span class=\"line\">alert ( obj.name ); <span class=\"comment\">// 输出：anne</span></span><br></pre></td></tr></table></figure></p>\n<p>如果构造器不显式地返回任何数据，或者是返回一个非对象类型的数据，就不会造成上述问题：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> MyClass = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">'sven'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'anne'</span>; <span class=\"comment\">// 返回 string 类型</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> MyClass();</span><br><span class=\"line\">alert ( obj.name ); <span class=\"comment\">// 输出：sven</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4-Function-prototype-call-或-Function-prototype-apply-调用\"><a href=\"#4-Function-prototype-call-或-Function-prototype-apply-调用\" class=\"headerlink\" title=\"4.  Function.prototype.call 或 Function.prototype.apply 调用\"></a>4.  Function.prototype.call 或 Function.prototype.apply 调用</h3><p>跟普通的函数调用相比，用 Function.prototype.call 或 Function.prototype.apply 可以动态地改变传入函数的 this ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span>,</span><br><span class=\"line\">    getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'anne'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( obj1.getName() ); <span class=\"comment\">// 输出: sven</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( obj1.getName.call( obj2 ) ); <span class=\"comment\">// 输出：anne</span></span><br></pre></td></tr></table></figure></p>\n<p>call 和 apply 方法能很好地体现 JavaScript的函数式语言特性，在 JavaScript中，几乎每一次编写函数式语言风格的代码，都离不开 call 和 apply 。</p>\n<h2 id=\"1-2-丢失的this\"><a href=\"#1-2-丢失的this\" class=\"headerlink\" title=\"1.2 丢失的this\"></a>1.2 丢失的this</h2><p>这是一个经常遇到的问题，我们先看下面的代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    myName: <span class=\"string\">'sven'</span>,</span><br><span class=\"line\">    getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.myName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( obj.getName() ); <span class=\"comment\">// 输出：'sven'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> getName2 = obj.getName;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( getName2() ); <span class=\"comment\">// 输出：undefined</span></span><br></pre></td></tr></table></figure></p>\n<p>当调用 obj.getName 时， getName 方法是作为 obj 对象的属性被调用的，根据之前提到的规律，此时的 this 指向 obj 对象，所以 obj.getName() 输出 ‘sven’ 。<br>当用另外一个变量 getName2 来引用 obj.getName ，并且调用 getName2 时，根据之前提到的规律，此时是普通函数调用方式， this是指向全局window的，所以程序的执行结果是 undefined 。<br>再看另一个例子， document.getElementById 这个方法名实在有点过长，我们大概尝试过用一个短的函数来代替它，如同 prototype.js 等一些框架所做过的事情：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getId = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> id </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.getElementById( id );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">getId( <span class=\"string\">'div1'</span> );</span><br></pre></td></tr></table></figure></p>\n<p>我们也许思考过为什么不能用下面这种更简单的方式：<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getId = <span class=\"built_in\">document</span>.getElementById;</span><br><span class=\"line\">getId( <span class=\"string\">'div1'</span> );</span><br></pre></td></tr></table></figure></p>\n<p>现在不妨花 1分钟时间，让这段代码在浏览器中运行一次：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div1\"</span>&gt;</span>我是一个 div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> getId = <span class=\"built_in\">document</span>.getElementById;</span></span><br><span class=\"line\"><span class=\"actionscript\">        getId( <span class=\"string\">'div1'</span> );</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>在 Chrome、Firefox、IE10 中执行过后就会发现，这段代码抛出了一个异常。这是因为许多引擎的 document.getElementById 方法的内部实现中需要用到 this 。这个 this 本来被期望指向document ，当 getElementById 方法作为 document 对象的属性被调用时，方法内部的 this 确实是指向 document 的。<br>但当用 getId 来引用 document.getElementById 之后，再调用 getId ，此时就成了普通函数调用，函数内部的 this 指向了 window ，而不是原来的 document 。<br>我们可以尝试利用 apply 把 document 当作 this 传入 getId 函数，帮助“修正” this ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> func </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func.apply( <span class=\"built_in\">document</span>, <span class=\"built_in\">arguments</span> );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)( <span class=\"built_in\">document</span>.getElementById );</span><br><span class=\"line\"><span class=\"keyword\">var</span> getId = <span class=\"built_in\">document</span>.getElementById;</span><br><span class=\"line\"><span class=\"keyword\">var</span> div = getId( <span class=\"string\">'div1'</span> );</span><br><span class=\"line\">alert (div.id); <span class=\"comment\">// 输出： div1</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"2-call-和-apply\"><a href=\"#2-call-和-apply\" class=\"headerlink\" title=\"2.call 和 apply\"></a>2.call 和 apply</h1><p>ECAMScript 3给 Function 的原型定义了两个方法，它们是 Function.prototype.call 和 Function.<br>prototype.apply 。在实际开发中，特别是在一些函数式风格的代码编写中， call 和 apply 方法尤为有用。</p>\n<h2 id=\"2-1call-和-apply-的区别\"><a href=\"#2-1call-和-apply-的区别\" class=\"headerlink\" title=\"2.1call 和 apply 的区别\"></a>2.1call 和 apply 的区别</h2><p>Function.prototype.call 和 Function.prototype.apply 都是非常常用的方法。它们的作用一模一样，区别仅在于传入参数形式的不同。<br>apply 接受两个参数，第一个参数指定了函数体内 this 对象的指向，第二个参数为一个带下标的集合，这个集合可以为数组，也可以为类数组， apply 方法把这个集合中的元素作为参数传递给被调用的函数：<br><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">( a, b, <span class=\"built_in\">c</span> )</span></span>&#123;</span><br><span class=\"line\">    alert ( [ a, b, <span class=\"built_in\">c</span> ] ); <span class=\"comment\">// 输出 [ 1, 2, 3 ]</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">apply</span><span class=\"params\">( null, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ] )</span></span>;</span><br></pre></td></tr></table></figure></p>\n<p>在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。<br>在这段代码中，参数 1、2、3 被放在数组中一起传入 func 函数，它们分别对应 func 参数列表中的 a 、 b 、 c 。<br><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">( a, b, <span class=\"built_in\">c</span> )</span></span>&#123;</span><br><span class=\"line\">    alert ( [ a, b, <span class=\"built_in\">c</span> ] ); <span class=\"comment\">// 输出 [ 1, 2, 3 ]</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">call</span><span class=\"params\">( null, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> )</span></span>;</span><br></pre></td></tr></table></figure></p>\n<p>当调用一个函数时，JavaScript 的解释器并不会计较形参和实参在数量、类型以及顺序上的区别，JavaScript的参数在内部就是用一个数组来表示的。从这个意义上说， apply 比 call 的使用率更高，我们不必关心具体有多少参数被传入函数，只要用 apply 一股脑地推过去就可以了。<br>call 是包装在 apply 上面的一颗语法糖，如果我们明确地知道函数接受多少个参数，而且想一目了然地表达形参和实参的对应关系，那么也可以用 call 来传送参数。<br>当使用 call 或者 apply 的时候，如果我们传入的第一个参数为 null ，函数体内的 this 会指向默认的宿主对象，在浏览器中则是 window ：<br><figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">( a, b, <span class=\"built_in\">c</span> )</span></span>&#123;</span><br><span class=\"line\">    alert ( this === window ); <span class=\"comment\">// 输出 true</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">apply</span><span class=\"params\">( null, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ] )</span></span>;</span><br></pre></td></tr></table></figure></p>\n<p>但如果是在严格模式下，函数体内的 this 还是为 null ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> a, b, c </span>)</span>&#123;</span><br><span class=\"line\"><span class=\"meta\">    \"use strict\"</span>;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span> === <span class=\"literal\">null</span> ); <span class=\"comment\">// 输出 true</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">func.apply( <span class=\"literal\">null</span>, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> ] );</span><br></pre></td></tr></table></figure></p>\n<p>有时候我们使用 call 或者 apply 的目的不在于指定 this 指向，而是另有用途，比如借用其他对象的方法。那么我们可以传入 null 来代替某个具体的对象：<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Math.max.apply( null, [ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ] ) <span class=\"comment\">// 输出：5</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"2-2call-和-apply-的用途\"><a href=\"#2-2call-和-apply-的用途\" class=\"headerlink\" title=\"2.2call 和 apply 的用途\"></a>2.2call 和 apply 的用途</h2><h3 id=\"1-改变-this-指向\"><a href=\"#1-改变-this-指向\" class=\"headerlink\" title=\"1.改变 this 指向\"></a>1.改变 this 指向</h3><p>call 和 apply 最常见的用途是改变函数内部的 this 指向，我们来看个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj1 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj2 = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'anne'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'window'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">getName(); <span class=\"comment\">// 输出: window</span></span><br><span class=\"line\">getName.call( obj1 ); <span class=\"comment\">// 输出: sven</span></span><br><span class=\"line\">getName.call( obj2 ); <span class=\"comment\">// 输出: anne</span></span><br></pre></td></tr></table></figure></p>\n<p>当执行 getName.call( obj1 ) 这句代码时， getName 函数体内的 this 就指向 obj1 对象，所以<br>此处的<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>实际上相当于:<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    alert ( obj1.name ); <span class=\"comment\">// 输出: sven</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>在实际开发中，经常会遇到 this 指向被不经意改变的场景，比如有一个 div 节点， div 节点的 onclick 事件中的 this 本来是指向这个 div 的：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：div1</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>假如该事件函数中有一个内部函数 func ，在事件内部调用 func 函数时， func 函数体内的 this就指向了 window ，而不是我们预期的 div ，见如下代码：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：div1</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：undefined</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">func();</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>这时候我们用 call 来修正 func 函数内的 this ，使其依然指向 div ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'div1'</span> ).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert ( <span class=\"keyword\">this</span>.id ); <span class=\"comment\">// 输出：div1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    func.call( <span class=\"keyword\">this</span> );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-Function-prototype-bind\"><a href=\"#2-Function-prototype-bind\" class=\"headerlink\" title=\"2. Function.prototype.bind\"></a>2. Function.prototype.bind</h3><p>大部分高级浏览器都实现了内置的 Function.prototype.bind ，用来指定函数内部的 this 指向，即使没有原生的 Function.prototype.bind 实现，我们来模拟一个也不是难事，代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> context </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>; <span class=\"comment\">// 保存原函数</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; <span class=\"comment\">// 返回一个新的函数</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.apply( context, <span class=\"built_in\">arguments</span> ); <span class=\"comment\">// 执行新的函数的时候，会把之前传入的 context</span></span><br><span class=\"line\">        <span class=\"comment\">// 当作新函数体内的 this</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name ); <span class=\"comment\">// 输出：sven</span></span><br><span class=\"line\">&#125;.bind( obj);</span><br><span class=\"line\">func();</span><br></pre></td></tr></table></figure></p>\n<p>我们通过 Function.prototype.bind 来“包装” func 函数，并且传入一个对象 context 当作参数，这个 context 对象就是我们想修正的 this 对象。<br>在 Function.prototype.bind 的内部实现中，我们先把 func 函数的引用保存起来，然后返回一个新的函数。当我们在将来执行 func 函数时，实际上先执行的是这个刚刚返回的新函数。在新函数内部，self.apply( context, arguments ) 这句代码才是执行原来的 func 函数，并且指定 context对象为 func 函数体内的 this 。<br>这是一个简化版的 Function.prototype.bind 实现，通常我们还会把它实现得稍微复杂一点，使得可以往 func 函数中预先填入一些参数：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>, <span class=\"comment\">// 保存原函数</span></span><br><span class=\"line\">        context = [].shift.call( <span class=\"built_in\">arguments</span> ), <span class=\"comment\">// 需要绑定的 this 上下文</span></span><br><span class=\"line\">        args = [].slice.call( <span class=\"built_in\">arguments</span> ); <span class=\"comment\">// 剩余的参数转成数组</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; <span class=\"comment\">// 返回一个新的函数</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> self.apply( context, [].concat.call( args, [].slice.call( <span class=\"built_in\">arguments</span> ) ) );</span><br><span class=\"line\">         <span class=\"comment\">// 执行新的函数的时候，会把之前传入的 context 当作新函数体内的 this</span></span><br><span class=\"line\">         <span class=\"comment\">// 并且组合两次分别传入的参数，作为新函数的参数</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sven'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> a, b, c, d </span>)</span>&#123;</span><br><span class=\"line\">    alert ( <span class=\"keyword\">this</span>.name ); <span class=\"comment\">// 输出：sven</span></span><br><span class=\"line\">    alert ( [ a, b, c, d ] ) <span class=\"comment\">// 输出：[ 1, 2, 3, 4 ]</span></span><br><span class=\"line\">&#125;.bind( obj, <span class=\"number\">1</span>, <span class=\"number\">2</span> );</span><br><span class=\"line\">func( <span class=\"number\">3</span>, <span class=\"number\">4</span> );</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-借用其他对象的方法\"><a href=\"#3-借用其他对象的方法\" class=\"headerlink\" title=\"3.借用其他对象的方法\"></a>3.借用其他对象的方法</h3><p>我们知道，杜鹃既不会筑巢，也不会孵雏，而是把自己的蛋寄托给云雀等其他鸟类，让它们代为孵化和养育。同样，在 JavaScript中也存在类似的借用现象。<br>借用方法的第一种场景是“借用构造函数”，通过这种技术，可以实现一些类似继承的效果：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> A = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> name </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> B = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    A.apply( <span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span> );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">B.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"keyword\">new</span> B( <span class=\"string\">'sven'</span> );</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( b.getName() ); <span class=\"comment\">// 输出： 'sven'</span></span><br></pre></td></tr></table></figure></p>\n<p>借用方法的第二种运用场景跟我们的关系更加密切。<br>函数的参数列表 arguments 是一个类数组对象，虽然它也有“下标”，但它并非真正的数组，所以也不能像数组一样，进行排序操作或者往集合里添加一个新的元素。这种情况下，我们常常会借用 Array.prototype 对象上的方法。比如想往 arguments 中添加一个新的元素，通常会借用Array.prototype.push ：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.prototype.push.call( <span class=\"built_in\">arguments</span>, <span class=\"number\">3</span> );</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log ( <span class=\"built_in\">arguments</span> ); <span class=\"comment\">// 输出[1,2,3]</span></span><br><span class=\"line\">&#125;)( <span class=\"number\">1</span>, <span class=\"number\">2</span> );</span><br></pre></td></tr></table></figure></p>\n<p>在操作 arguments 的时候，我们经常非常频繁地找 Array.prototype 对象借用方法。<br>想把 arguments 转成真正的数组的时候，可以借用 Array.prototype.slice 方法；想截去arguments 列表中的头一个元素时，又可以借用 Array.prototype.shift 方法。那么这种机制的内部实现原理是什么呢？我们不妨翻开 V8的引擎源码，以 Array.prototype.push 为例，看看 V8引擎中的具体实现：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function ArrayPush() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> n = TO_UINT32( <span class=\"keyword\">this</span>.length ); <span class=\"comment\">// 被 push 的对象的 length</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> m = %_ArgumentsLength(); <span class=\"comment\">// push 的参数个数</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; m; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>[ i + n ] = %_Arguments( i ); <span class=\"comment\">// 复制元素 (1)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.length = n + m; <span class=\"comment\">// 修正 length 属性的值 (2)</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.length;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>通过这段代码可以看到， Array.prototype.push 实际上是一个属性复制的过程，把参数按照下标依次添加到被 push 的对象上面，顺便修改了这个对象的 length 属性。至于被修改的对象是谁，到底是数组还是类数组对象，这一点并不重要。<br>由此可以推断，我们可以把“任意”对象传入 Array.prototype.push ：<br><figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = &#123;&#125;;</span><br><span class=\"line\">Array.prototype.push.call<span class=\"comment\">( a, 'first' )</span>;</span><br><span class=\"line\">alert <span class=\"comment\">( a.length )</span>; <span class=\"comment\">// 输出：1</span></span><br><span class=\"line\">alert <span class=\"comment\">( a[ 0 ] )</span>; <span class=\"comment\">// first</span></span><br></pre></td></tr></table></figure></p>\n<p>这段代码在绝大部分浏览器里都能顺利执行，但由于引擎的内部实现存在差异，如果在低版<br>本的 IE浏览器中执行，必须显式地给对象 a 设置 length 属性：<br><figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">var a</span> = &#123;</span><br><span class=\"line\">    length: 0</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>前面我们之所以把“任意”两字加了双引号，是因为可以借用 Array.prototype.push 方法的对象还要满足以下两个条件，从 ArrayPush 函数的(1)处和(2)处也可以猜到，这个对象至少还要满足：</p>\n<ul>\n<li>对象本身要可以存取属性；</li>\n<li>对象的 length 属性可读写。<br>对于第一个条件，对象本身存取属性并没有问题，但如果借用 Array.prototype.push 方法的不是一个 object 类型的数据，而是一个 number 类型的数据呢? 我们无法在 number 身上存取其他数据，那么从下面的测试代码可以发现，一个 number 类型的数据不可能借用到 Array.prototype.push 方法：<figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = <span class=\"number\">1</span>;</span><br><span class=\"line\">Array.prototype.push.call<span class=\"comment\">( a, 'first' )</span>;</span><br><span class=\"line\">alert <span class=\"comment\">( a.length )</span>; <span class=\"comment\">// 输出：undefined</span></span><br><span class=\"line\">alert <span class=\"comment\">( a[ 0 ] )</span>; <span class=\"comment\">// 输出：undefined</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>对于第二个条件，函数的 length 属性就是一个只读的属性，表示形参的个数，我们尝试把一个函数当作 this 传入 Array.prototype.push ：<br><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var <span class=\"function\"><span class=\"keyword\">func</span> = <span class=\"title\">function</span><span class=\"params\">()</span>&#123;&#125;;</span></span><br><span class=\"line\">Array.prototype.push.<span class=\"built_in\">call</span>( <span class=\"function\"><span class=\"keyword\">func</span>, '<span class=\"title\">first</span>' );</span></span><br><span class=\"line\">alert ( <span class=\"function\"><span class=\"keyword\">func</span>.<span class=\"title\">length</span> );</span></span><br><span class=\"line\">// 报错：cannot <span class=\"built_in\">assign</span> <span class=\"keyword\">to</span> read only property ‘length’ of function()&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<font color=\"#00ffff\" size=\"6\">End</font>"},{"layout":"post","title":"vue组件封装及npm包发布","date":"2017-08-21T01:36:39.000Z","_content":"\n# vue组件封装\nvue2是基于web components标准的前端框架，它支持用户自定义组件，构建vue项目的过程中我们无处不在使用自定义组件，需要引入第三方组件库则需npm install,下面就简单介绍一下如何将自己自定义的组件按照vue制定的组件封装方式封装并发布到npm，这样便实现了自定义组件第三方化。\n1、首先建一个自定义组件的文件夹，比如叫loading，里面有一个`index.js`，还有一个自定义组件`loading.vue`,在这个loading.vue里面就是这个组件的具体的内容，比如：\n```\n<template>\n    <div>\n        loading..............\n    </div>\n</template>\n\n<script>\n    export default {\n\n    }\n</script>\n\n<style scoped>\n    div{\n        font-size:40px;\n        color:#f60;\n        text-align:center;\n    }\n</style>\n```\n2、在index.js中，规定使用这个组件的名字，以及使用方法，如：\n```\nimport loadingComponent from './loading.vue'\n\nconst loading={\n    install:function(Vue){\n        Vue.component('Loading',loadingComponent)\n    }  //'Loading'这就是后面可以使用的组件的名字，install是默认的一个方法\n};\n\nexport default loading;\n```\n3、经过1、2两个步骤就已经完成了组件的封装，只要在index.js中规定了install方法，就可以像一些公共的插件一样使用Vue.use()来使用，如：：\n```\nimport loading from './loading'\n\nVue.use(loading)\n```\n这是在入口文件中引入的方法，可以看到就像vue-resource一样，可以在项目中的任何地方使用自定义的组件了，比如在home.vue中使用\n```\n<template>\n    <div>\n        <Loading></Loading>\n    </div>\n</template>\n```\n# npm包发布\n## 准备工具\n- 安装nodeJS\n- 注册一个github账户用于托管代码\n- 注册一个npm账户\n- 开发你的module，更新至github\n- 发布module至npm\n安装nodeJS已经github账户的使用在此不做介绍，需要将自己准备发布的代码托管到github上，然后你需要注册一个npm账户，接下来说明发布过程：\n终端进入到项目文件夹，执行`npm init`命令，构建模块的描述文件，系统会提示你输入所需的信息，不想输入就直接Enter跳过。这里主要的几个配置如下:\n- `name`就是你要发布的module名；\n- `version`版本信息（每发布一次版本号都必须大于上一次发布的版本号）；\n- `entry`入口文件\n```\n$ npm init\n\nThis utility will walk you through creating a package.json file.\nIt only covers the most common items, and tries to guess sane defaults.\n\nSee `npm help json` for definitive documentation on these fields\nand exactly what they do.\n\nUse `npm install <pkg> --save` afterwards to install a package and\nsave it as a dependency in the package.json file.\n\nPress ^C at any time to quit.\nname: (node) easy_mongo\nversion: (0.0.0) 0.1.0\ndescription: An easy mongodb client for node.js based on native mongodb driver.\nentry point: (index.js) \ntest command: test\ngit repository: https://github.com/Myqilixiang/zsh-koa-cli.git\nkeywords: koa2\nauthor: zsh\nlicense: (BSD-2-Clause) MIT\n```\n### npm注册\n输入完用户名，密码，邮箱后没有错误信息就完成了。\n```\n$ npm adduser\nUsername: your name\nPassword: your password\nEmail: (this IS public) your email\n```\n查询或者登陆别的用户命令\n```\n$ npm whoami\n$ npm login\n```\n### npm module 发布\nmodule开发完毕后，剩下的就是发布啦，进入项目根目录，输入命令。\n```\n$ npm publish\n```\n这里有时候会遇到几个问题,问题1：\n```\nnpm ERR! no_perms Private mode enable, only admin can publish this module:\n```\n这里注意的是因为国内网络问题，许多小伙伴把npm的镜像代理到淘宝或者别的地方了，这里要设置回原来的镜像。\n```\nnpm config set registry=http://registry.npmjs.org\n```\n问题2：\n```\nnpm ERR! you do not have permission to publish \"your module name\". Are you logged in as the correct user? \n```\n提示没有权限，其实就是你的module名在npm上已经被占用啦，这时候你就去需要去npm搜索你的模块名称，如果搜索不到，就可以用，并且把package.json里的name修改过来，重新npm publish，看到如下信息就表示安装完成了，zsh-koa-cli就是我的模块名。\n+ zsh-koa-cli@0.1.0\n更新版本，发布\n```\n$ npm version 0.1.1\n$ npm publish\n```\n### 版本号规范\nnpm社区版本号规则采用的是semver（语义化版本），主要规则版本格式：主版本号.次版本号.修订号，版本号递增规则如下：\n\n- 主版本号：当你做了不兼容的 API 修改，\n- 次版本号：当你做了向下兼容的功能性新增，\n- 修订号：当你做了向下兼容的问题修正。\n先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。\n### 持续集成\n目前npm上开源的项目实在是太多，从中找出靠谱的项目要花费一定的精力跟时间去验证，所以开发者都会对自己的开源项目持续更新，并且经过测试的项目更加值得信赖。对于刚上线并且github上star星数很少的项目，使用者都会怀疑，这个项目靠谱不？所以这时候你需要告诉他，老子靠谱，怎么做？持续集成。\n\n目前Github已经整合了持续集成服务travis，我们只需要在项目中添加.travis.yml文件，在下一次push之后，travis就会定时执行npm test来测试你的项目，并且会在测试失败的时候通知到你，你也可以把项目当前的状态显示在README.md中，让人一目了然，比如React里的\n![npm-version](/assets/img/npm-version.png)\n`.travis.yml` 是一个YAML文件，具体的相关的配置见This，例子如下：\n```\nlanguage: node_js\nnode_js:\n  - \"6\"\n  - \"6.1\"\n  - \"5.11\"\nservices:\n  - mongodb\n  ```\n  这个例子的是让travis在node.js的0.6.x，0.6.1，0.5.11三个版本下对项目进行测试，并且需要mongodb的服务。\n\n  <font color=green size=35>End</font>\n  至此你的一个module就开发完成了。\n\n","source":"_posts/vue组件封装及npm包发布.md","raw":"---\nlayout: post\ntitle: vue组件封装及npm包发布\ndate: 2017-08-21 09:36:39\ntags:\n    - vue组件封装\n    - npm发布\n---\n\n# vue组件封装\nvue2是基于web components标准的前端框架，它支持用户自定义组件，构建vue项目的过程中我们无处不在使用自定义组件，需要引入第三方组件库则需npm install,下面就简单介绍一下如何将自己自定义的组件按照vue制定的组件封装方式封装并发布到npm，这样便实现了自定义组件第三方化。\n1、首先建一个自定义组件的文件夹，比如叫loading，里面有一个`index.js`，还有一个自定义组件`loading.vue`,在这个loading.vue里面就是这个组件的具体的内容，比如：\n```\n<template>\n    <div>\n        loading..............\n    </div>\n</template>\n\n<script>\n    export default {\n\n    }\n</script>\n\n<style scoped>\n    div{\n        font-size:40px;\n        color:#f60;\n        text-align:center;\n    }\n</style>\n```\n2、在index.js中，规定使用这个组件的名字，以及使用方法，如：\n```\nimport loadingComponent from './loading.vue'\n\nconst loading={\n    install:function(Vue){\n        Vue.component('Loading',loadingComponent)\n    }  //'Loading'这就是后面可以使用的组件的名字，install是默认的一个方法\n};\n\nexport default loading;\n```\n3、经过1、2两个步骤就已经完成了组件的封装，只要在index.js中规定了install方法，就可以像一些公共的插件一样使用Vue.use()来使用，如：：\n```\nimport loading from './loading'\n\nVue.use(loading)\n```\n这是在入口文件中引入的方法，可以看到就像vue-resource一样，可以在项目中的任何地方使用自定义的组件了，比如在home.vue中使用\n```\n<template>\n    <div>\n        <Loading></Loading>\n    </div>\n</template>\n```\n# npm包发布\n## 准备工具\n- 安装nodeJS\n- 注册一个github账户用于托管代码\n- 注册一个npm账户\n- 开发你的module，更新至github\n- 发布module至npm\n安装nodeJS已经github账户的使用在此不做介绍，需要将自己准备发布的代码托管到github上，然后你需要注册一个npm账户，接下来说明发布过程：\n终端进入到项目文件夹，执行`npm init`命令，构建模块的描述文件，系统会提示你输入所需的信息，不想输入就直接Enter跳过。这里主要的几个配置如下:\n- `name`就是你要发布的module名；\n- `version`版本信息（每发布一次版本号都必须大于上一次发布的版本号）；\n- `entry`入口文件\n```\n$ npm init\n\nThis utility will walk you through creating a package.json file.\nIt only covers the most common items, and tries to guess sane defaults.\n\nSee `npm help json` for definitive documentation on these fields\nand exactly what they do.\n\nUse `npm install <pkg> --save` afterwards to install a package and\nsave it as a dependency in the package.json file.\n\nPress ^C at any time to quit.\nname: (node) easy_mongo\nversion: (0.0.0) 0.1.0\ndescription: An easy mongodb client for node.js based on native mongodb driver.\nentry point: (index.js) \ntest command: test\ngit repository: https://github.com/Myqilixiang/zsh-koa-cli.git\nkeywords: koa2\nauthor: zsh\nlicense: (BSD-2-Clause) MIT\n```\n### npm注册\n输入完用户名，密码，邮箱后没有错误信息就完成了。\n```\n$ npm adduser\nUsername: your name\nPassword: your password\nEmail: (this IS public) your email\n```\n查询或者登陆别的用户命令\n```\n$ npm whoami\n$ npm login\n```\n### npm module 发布\nmodule开发完毕后，剩下的就是发布啦，进入项目根目录，输入命令。\n```\n$ npm publish\n```\n这里有时候会遇到几个问题,问题1：\n```\nnpm ERR! no_perms Private mode enable, only admin can publish this module:\n```\n这里注意的是因为国内网络问题，许多小伙伴把npm的镜像代理到淘宝或者别的地方了，这里要设置回原来的镜像。\n```\nnpm config set registry=http://registry.npmjs.org\n```\n问题2：\n```\nnpm ERR! you do not have permission to publish \"your module name\". Are you logged in as the correct user? \n```\n提示没有权限，其实就是你的module名在npm上已经被占用啦，这时候你就去需要去npm搜索你的模块名称，如果搜索不到，就可以用，并且把package.json里的name修改过来，重新npm publish，看到如下信息就表示安装完成了，zsh-koa-cli就是我的模块名。\n+ zsh-koa-cli@0.1.0\n更新版本，发布\n```\n$ npm version 0.1.1\n$ npm publish\n```\n### 版本号规范\nnpm社区版本号规则采用的是semver（语义化版本），主要规则版本格式：主版本号.次版本号.修订号，版本号递增规则如下：\n\n- 主版本号：当你做了不兼容的 API 修改，\n- 次版本号：当你做了向下兼容的功能性新增，\n- 修订号：当你做了向下兼容的问题修正。\n先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。\n### 持续集成\n目前npm上开源的项目实在是太多，从中找出靠谱的项目要花费一定的精力跟时间去验证，所以开发者都会对自己的开源项目持续更新，并且经过测试的项目更加值得信赖。对于刚上线并且github上star星数很少的项目，使用者都会怀疑，这个项目靠谱不？所以这时候你需要告诉他，老子靠谱，怎么做？持续集成。\n\n目前Github已经整合了持续集成服务travis，我们只需要在项目中添加.travis.yml文件，在下一次push之后，travis就会定时执行npm test来测试你的项目，并且会在测试失败的时候通知到你，你也可以把项目当前的状态显示在README.md中，让人一目了然，比如React里的\n![npm-version](/assets/img/npm-version.png)\n`.travis.yml` 是一个YAML文件，具体的相关的配置见This，例子如下：\n```\nlanguage: node_js\nnode_js:\n  - \"6\"\n  - \"6.1\"\n  - \"5.11\"\nservices:\n  - mongodb\n  ```\n  这个例子的是让travis在node.js的0.6.x，0.6.1，0.5.11三个版本下对项目进行测试，并且需要mongodb的服务。\n\n  <font color=green size=35>End</font>\n  至此你的一个module就开发完成了。\n\n","slug":"vue组件封装及npm包发布","published":1,"updated":"2020-03-12T13:55:48.639Z","comments":1,"photos":[],"link":"","_id":"ck7otizqh000c7gui1jgylkhj","content":"<h1 id=\"vue组件封装\"><a href=\"#vue组件封装\" class=\"headerlink\" title=\"vue组件封装\"></a>vue组件封装</h1><p>vue2是基于web components标准的前端框架，它支持用户自定义组件，构建vue项目的过程中我们无处不在使用自定义组件，需要引入第三方组件库则需npm install,下面就简单介绍一下如何将自己自定义的组件按照vue制定的组件封装方式封装并发布到npm，这样便实现了自定义组件第三方化。<br>1、首先建一个自定义组件的文件夹，比如叫loading，里面有一个<code>index.js</code>，还有一个自定义组件<code>loading.vue</code>,在这个loading.vue里面就是这个组件的具体的内容，比如：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        loading..............</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    div&#123;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">font-size</span><span class=\"selector-pseudo\">:40px</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>:<span class=\"selector-id\">#f60</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">text-align</span><span class=\"selector-pseudo\">:center</span>;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>2、在index.js中，规定使用这个组件的名字，以及使用方法，如：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> loadingComponent <span class=\"keyword\">from</span> <span class=\"string\">'./loading.vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> loading=&#123;</span><br><span class=\"line\">    install:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">Vue</span>)</span>&#123;</span><br><span class=\"line\">        Vue.component(<span class=\"string\">'Loading'</span>,loadingComponent)</span><br><span class=\"line\">    &#125;  <span class=\"comment\">//'Loading'这就是后面可以使用的组件的名字，install是默认的一个方法</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> loading;</span><br></pre></td></tr></table></figure></p>\n<p>3、经过1、2两个步骤就已经完成了组件的封装，只要在index.js中规定了install方法，就可以像一些公共的插件一样使用Vue.use()来使用，如：：<br><figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> loading <span class=\"keyword\">from</span> <span class=\"string\">'./loading'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(loading)</span><br></pre></td></tr></table></figure></p>\n<p>这是在入口文件中引入的方法，可以看到就像vue-resource一样，可以在项目中的任何地方使用自定义的组件了，比如在home.vue中使用<br><figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">&lt;template&gt;</span></span><br><span class=\"line\">    <span class=\"section\">&lt;div&gt;</span></span><br><span class=\"line\">        <span class=\"section\">&lt;Loading&gt;</span><span class=\"section\">&lt;/Loading&gt;</span></span><br><span class=\"line\">    <span class=\"section\">&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"section\">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"npm包发布\"><a href=\"#npm包发布\" class=\"headerlink\" title=\"npm包发布\"></a>npm包发布</h1><h2 id=\"准备工具\"><a href=\"#准备工具\" class=\"headerlink\" title=\"准备工具\"></a>准备工具</h2><ul>\n<li>安装nodeJS</li>\n<li>注册一个github账户用于托管代码</li>\n<li>注册一个npm账户</li>\n<li>开发你的module，更新至github</li>\n<li>发布module至npm<br>安装nodeJS已经github账户的使用在此不做介绍，需要将自己准备发布的代码托管到github上，然后你需要注册一个npm账户，接下来说明发布过程：<br>终端进入到项目文件夹，执行<code>npm init</code>命令，构建模块的描述文件，系统会提示你输入所需的信息，不想输入就直接Enter跳过。这里主要的几个配置如下:</li>\n<li><code>name</code>就是你要发布的module名；</li>\n<li><code>version</code>版本信息（每发布一次版本号都必须大于上一次发布的版本号）；</li>\n<li><code>entry</code>入口文件<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm init</span><br><span class=\"line\"></span><br><span class=\"line\">This utility will walk you through creating <span class=\"keyword\">a</span> package.json <span class=\"built_in\">file</span>.</span><br><span class=\"line\">It only covers <span class=\"keyword\">the</span> most common <span class=\"keyword\">items</span>, <span class=\"keyword\">and</span> tries <span class=\"built_in\">to</span> guess sane defaults.</span><br><span class=\"line\"></span><br><span class=\"line\">See `npm help json` <span class=\"keyword\">for</span> definitive documentation <span class=\"keyword\">on</span> <span class=\"title\">these</span> <span class=\"title\">fields</span></span><br><span class=\"line\"><span class=\"keyword\">and</span> exactly what they <span class=\"built_in\">do</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">Use `npm install &lt;pkg&gt; <span class=\"comment\">--save` afterwards to install a package and</span></span><br><span class=\"line\">save <span class=\"keyword\">it</span> <span class=\"keyword\">as</span> <span class=\"keyword\">a</span> dependency <span class=\"keyword\">in</span> <span class=\"keyword\">the</span> package.json <span class=\"built_in\">file</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">Press ^C <span class=\"keyword\">at</span> <span class=\"keyword\">any</span> <span class=\"built_in\">time</span> <span class=\"built_in\">to</span> quit.</span><br><span class=\"line\">name: (node) easy_mongo</span><br><span class=\"line\"><span class=\"built_in\">version</span>: (<span class=\"number\">0.0</span><span class=\"number\">.0</span>) <span class=\"number\">0.1</span><span class=\"number\">.0</span></span><br><span class=\"line\">description: An easy mongodb client <span class=\"keyword\">for</span> node.js based <span class=\"keyword\">on</span> <span class=\"title\">native</span> <span class=\"title\">mongodb</span> <span class=\"title\">driver</span>.</span><br><span class=\"line\">entry point: (index.js) </span><br><span class=\"line\">test <span class=\"keyword\">command</span>: <span class=\"title\">test</span></span><br><span class=\"line\">git repository: <span class=\"keyword\">https</span>://github.com/Myqilixiang/zsh-koa-cli.git</span><br><span class=\"line\">keywords: koa2</span><br><span class=\"line\">author: zsh</span><br><span class=\"line\">license: (BSD<span class=\"number\">-2</span>-Clause) MIT</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"npm注册\"><a href=\"#npm注册\" class=\"headerlink\" title=\"npm注册\"></a>npm注册</h3><p>输入完用户名，密码，邮箱后没有错误信息就完成了。<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm adduser</span><br><span class=\"line\"><span class=\"string\">Username:</span> your name</span><br><span class=\"line\"><span class=\"string\">Password:</span> your password</span><br><span class=\"line\"><span class=\"string\">Email:</span> (<span class=\"keyword\">this</span> IS <span class=\"keyword\">public</span>) your email</span><br></pre></td></tr></table></figure></p>\n<p>查询或者登陆别的用户命令<br><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">npm</span> whoami</span><br><span class=\"line\">$ <span class=\"built_in\">npm</span> login</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"npm-module-发布\"><a href=\"#npm-module-发布\" class=\"headerlink\" title=\"npm module 发布\"></a>npm module 发布</h3><p>module开发完毕后，剩下的就是发布啦，进入项目根目录，输入命令。<br><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">npm</span> publish</span><br></pre></td></tr></table></figure></p>\n<p>这里有时候会遇到几个问题,问题1：<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm ERR! no_perms Private mode enable, only admin can publish <span class=\"keyword\">this</span> <span class=\"keyword\">module</span>:</span><br></pre></td></tr></table></figure></p>\n<p>这里注意的是因为国内网络问题，许多小伙伴把npm的镜像代理到淘宝或者别的地方了，这里要设置回原来的镜像。<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm<span class=\"built_in\"> config </span><span class=\"builtin-name\">set</span> <span class=\"attribute\">registry</span>=http://registry.npmjs.org</span><br></pre></td></tr></table></figure></p>\n<p>问题2：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm ERR! you <span class=\"keyword\">do</span> <span class=\"keyword\">not</span> have permission <span class=\"keyword\">to</span> publish <span class=\"string\">\"your module name\"</span>. <span class=\"keyword\">Are</span> you logged <span class=\"keyword\">in</span> <span class=\"keyword\">as</span> the correct <span class=\"keyword\">user</span>?</span><br></pre></td></tr></table></figure></p>\n<p>提示没有权限，其实就是你的module名在npm上已经被占用啦，这时候你就去需要去npm搜索你的模块名称，如果搜索不到，就可以用，并且把package.json里的name修改过来，重新npm publish，看到如下信息就表示安装完成了，zsh-koa-cli就是我的模块名。</p>\n<ul>\n<li><a href=\"mailto:zsh-koa-cli@0.1.0\" target=\"_blank\" rel=\"noopener\">zsh-koa-cli@0.1.0</a><br>更新版本，发布<figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">npm</span> version <span class=\"number\">0.1</span><span class=\"number\">.1</span></span><br><span class=\"line\">$ <span class=\"built_in\">npm</span> publish</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"版本号规范\"><a href=\"#版本号规范\" class=\"headerlink\" title=\"版本号规范\"></a>版本号规范</h3><p>npm社区版本号规则采用的是semver（语义化版本），主要规则版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</p>\n<ul>\n<li>主版本号：当你做了不兼容的 API 修改，</li>\n<li>次版本号：当你做了向下兼容的功能性新增，</li>\n<li>修订号：当你做了向下兼容的问题修正。<br>先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。<h3 id=\"持续集成\"><a href=\"#持续集成\" class=\"headerlink\" title=\"持续集成\"></a>持续集成</h3>目前npm上开源的项目实在是太多，从中找出靠谱的项目要花费一定的精力跟时间去验证，所以开发者都会对自己的开源项目持续更新，并且经过测试的项目更加值得信赖。对于刚上线并且github上star星数很少的项目，使用者都会怀疑，这个项目靠谱不？所以这时候你需要告诉他，老子靠谱，怎么做？持续集成。</li>\n</ul>\n<p>目前Github已经整合了持续集成服务travis，我们只需要在项目中添加.travis.yml文件，在下一次push之后，travis就会定时执行npm test来测试你的项目，并且会在测试失败的时候通知到你，你也可以把项目当前的状态显示在README.md中，让人一目了然，比如React里的<br><img src=\"/assets/img/npm-version.png\" alt=\"npm-version\"><br><code>.travis.yml</code> 是一个YAML文件，具体的相关的配置见This，例子如下：<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">language: node_js</span><br><span class=\"line\">node_js:</span><br><span class=\"line\">  -<span class=\"ruby\"> <span class=\"string\">\"6\"</span></span></span><br><span class=\"line\"><span class=\"ruby\">  - <span class=\"string\">\"6.1\"</span></span></span><br><span class=\"line\"><span class=\"ruby\">  - <span class=\"string\">\"5.11\"</span></span></span><br><span class=\"line\"><span class=\"ruby\"><span class=\"symbol\">services:</span></span></span><br><span class=\"line\"><span class=\"ruby\">  - mongodb</span></span><br></pre></td></tr></table></figure></p>\n<p>  这个例子的是让travis在node.js的0.6.x，0.6.1，0.5.11三个版本下对项目进行测试，并且需要mongodb的服务。</p>\n<p>  <font color=\"green\" size=\"35\">End</font><br>  至此你的一个module就开发完成了。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"vue组件封装\"><a href=\"#vue组件封装\" class=\"headerlink\" title=\"vue组件封装\"></a>vue组件封装</h1><p>vue2是基于web components标准的前端框架，它支持用户自定义组件，构建vue项目的过程中我们无处不在使用自定义组件，需要引入第三方组件库则需npm install,下面就简单介绍一下如何将自己自定义的组件按照vue制定的组件封装方式封装并发布到npm，这样便实现了自定义组件第三方化。<br>1、首先建一个自定义组件的文件夹，比如叫loading，里面有一个<code>index.js</code>，还有一个自定义组件<code>loading.vue</code>,在这个loading.vue里面就是这个组件的具体的内容，比如：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        loading..............</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">    div&#123;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">font-size</span><span class=\"selector-pseudo\">:40px</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>:<span class=\"selector-id\">#f60</span>;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">text-align</span><span class=\"selector-pseudo\">:center</span>;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>2、在index.js中，规定使用这个组件的名字，以及使用方法，如：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> loadingComponent <span class=\"keyword\">from</span> <span class=\"string\">'./loading.vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> loading=&#123;</span><br><span class=\"line\">    install:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">Vue</span>)</span>&#123;</span><br><span class=\"line\">        Vue.component(<span class=\"string\">'Loading'</span>,loadingComponent)</span><br><span class=\"line\">    &#125;  <span class=\"comment\">//'Loading'这就是后面可以使用的组件的名字，install是默认的一个方法</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> loading;</span><br></pre></td></tr></table></figure></p>\n<p>3、经过1、2两个步骤就已经完成了组件的封装，只要在index.js中规定了install方法，就可以像一些公共的插件一样使用Vue.use()来使用，如：：<br><figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> loading <span class=\"keyword\">from</span> <span class=\"string\">'./loading'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(loading)</span><br></pre></td></tr></table></figure></p>\n<p>这是在入口文件中引入的方法，可以看到就像vue-resource一样，可以在项目中的任何地方使用自定义的组件了，比如在home.vue中使用<br><figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">&lt;template&gt;</span></span><br><span class=\"line\">    <span class=\"section\">&lt;div&gt;</span></span><br><span class=\"line\">        <span class=\"section\">&lt;Loading&gt;</span><span class=\"section\">&lt;/Loading&gt;</span></span><br><span class=\"line\">    <span class=\"section\">&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"section\">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"npm包发布\"><a href=\"#npm包发布\" class=\"headerlink\" title=\"npm包发布\"></a>npm包发布</h1><h2 id=\"准备工具\"><a href=\"#准备工具\" class=\"headerlink\" title=\"准备工具\"></a>准备工具</h2><ul>\n<li>安装nodeJS</li>\n<li>注册一个github账户用于托管代码</li>\n<li>注册一个npm账户</li>\n<li>开发你的module，更新至github</li>\n<li>发布module至npm<br>安装nodeJS已经github账户的使用在此不做介绍，需要将自己准备发布的代码托管到github上，然后你需要注册一个npm账户，接下来说明发布过程：<br>终端进入到项目文件夹，执行<code>npm init</code>命令，构建模块的描述文件，系统会提示你输入所需的信息，不想输入就直接Enter跳过。这里主要的几个配置如下:</li>\n<li><code>name</code>就是你要发布的module名；</li>\n<li><code>version</code>版本信息（每发布一次版本号都必须大于上一次发布的版本号）；</li>\n<li><code>entry</code>入口文件<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm init</span><br><span class=\"line\"></span><br><span class=\"line\">This utility will walk you through creating <span class=\"keyword\">a</span> package.json <span class=\"built_in\">file</span>.</span><br><span class=\"line\">It only covers <span class=\"keyword\">the</span> most common <span class=\"keyword\">items</span>, <span class=\"keyword\">and</span> tries <span class=\"built_in\">to</span> guess sane defaults.</span><br><span class=\"line\"></span><br><span class=\"line\">See `npm help json` <span class=\"keyword\">for</span> definitive documentation <span class=\"keyword\">on</span> <span class=\"title\">these</span> <span class=\"title\">fields</span></span><br><span class=\"line\"><span class=\"keyword\">and</span> exactly what they <span class=\"built_in\">do</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">Use `npm install &lt;pkg&gt; <span class=\"comment\">--save` afterwards to install a package and</span></span><br><span class=\"line\">save <span class=\"keyword\">it</span> <span class=\"keyword\">as</span> <span class=\"keyword\">a</span> dependency <span class=\"keyword\">in</span> <span class=\"keyword\">the</span> package.json <span class=\"built_in\">file</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">Press ^C <span class=\"keyword\">at</span> <span class=\"keyword\">any</span> <span class=\"built_in\">time</span> <span class=\"built_in\">to</span> quit.</span><br><span class=\"line\">name: (node) easy_mongo</span><br><span class=\"line\"><span class=\"built_in\">version</span>: (<span class=\"number\">0.0</span><span class=\"number\">.0</span>) <span class=\"number\">0.1</span><span class=\"number\">.0</span></span><br><span class=\"line\">description: An easy mongodb client <span class=\"keyword\">for</span> node.js based <span class=\"keyword\">on</span> <span class=\"title\">native</span> <span class=\"title\">mongodb</span> <span class=\"title\">driver</span>.</span><br><span class=\"line\">entry point: (index.js) </span><br><span class=\"line\">test <span class=\"keyword\">command</span>: <span class=\"title\">test</span></span><br><span class=\"line\">git repository: <span class=\"keyword\">https</span>://github.com/Myqilixiang/zsh-koa-cli.git</span><br><span class=\"line\">keywords: koa2</span><br><span class=\"line\">author: zsh</span><br><span class=\"line\">license: (BSD<span class=\"number\">-2</span>-Clause) MIT</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"npm注册\"><a href=\"#npm注册\" class=\"headerlink\" title=\"npm注册\"></a>npm注册</h3><p>输入完用户名，密码，邮箱后没有错误信息就完成了。<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm adduser</span><br><span class=\"line\"><span class=\"string\">Username:</span> your name</span><br><span class=\"line\"><span class=\"string\">Password:</span> your password</span><br><span class=\"line\"><span class=\"string\">Email:</span> (<span class=\"keyword\">this</span> IS <span class=\"keyword\">public</span>) your email</span><br></pre></td></tr></table></figure></p>\n<p>查询或者登陆别的用户命令<br><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">npm</span> whoami</span><br><span class=\"line\">$ <span class=\"built_in\">npm</span> login</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"npm-module-发布\"><a href=\"#npm-module-发布\" class=\"headerlink\" title=\"npm module 发布\"></a>npm module 发布</h3><p>module开发完毕后，剩下的就是发布啦，进入项目根目录，输入命令。<br><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">npm</span> publish</span><br></pre></td></tr></table></figure></p>\n<p>这里有时候会遇到几个问题,问题1：<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm ERR! no_perms Private mode enable, only admin can publish <span class=\"keyword\">this</span> <span class=\"keyword\">module</span>:</span><br></pre></td></tr></table></figure></p>\n<p>这里注意的是因为国内网络问题，许多小伙伴把npm的镜像代理到淘宝或者别的地方了，这里要设置回原来的镜像。<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm<span class=\"built_in\"> config </span><span class=\"builtin-name\">set</span> <span class=\"attribute\">registry</span>=http://registry.npmjs.org</span><br></pre></td></tr></table></figure></p>\n<p>问题2：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm ERR! you <span class=\"keyword\">do</span> <span class=\"keyword\">not</span> have permission <span class=\"keyword\">to</span> publish <span class=\"string\">\"your module name\"</span>. <span class=\"keyword\">Are</span> you logged <span class=\"keyword\">in</span> <span class=\"keyword\">as</span> the correct <span class=\"keyword\">user</span>?</span><br></pre></td></tr></table></figure></p>\n<p>提示没有权限，其实就是你的module名在npm上已经被占用啦，这时候你就去需要去npm搜索你的模块名称，如果搜索不到，就可以用，并且把package.json里的name修改过来，重新npm publish，看到如下信息就表示安装完成了，zsh-koa-cli就是我的模块名。</p>\n<ul>\n<li><a href=\"mailto:zsh-koa-cli@0.1.0\" target=\"_blank\" rel=\"noopener\">zsh-koa-cli@0.1.0</a><br>更新版本，发布<figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">npm</span> version <span class=\"number\">0.1</span><span class=\"number\">.1</span></span><br><span class=\"line\">$ <span class=\"built_in\">npm</span> publish</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"版本号规范\"><a href=\"#版本号规范\" class=\"headerlink\" title=\"版本号规范\"></a>版本号规范</h3><p>npm社区版本号规则采用的是semver（语义化版本），主要规则版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</p>\n<ul>\n<li>主版本号：当你做了不兼容的 API 修改，</li>\n<li>次版本号：当你做了向下兼容的功能性新增，</li>\n<li>修订号：当你做了向下兼容的问题修正。<br>先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。<h3 id=\"持续集成\"><a href=\"#持续集成\" class=\"headerlink\" title=\"持续集成\"></a>持续集成</h3>目前npm上开源的项目实在是太多，从中找出靠谱的项目要花费一定的精力跟时间去验证，所以开发者都会对自己的开源项目持续更新，并且经过测试的项目更加值得信赖。对于刚上线并且github上star星数很少的项目，使用者都会怀疑，这个项目靠谱不？所以这时候你需要告诉他，老子靠谱，怎么做？持续集成。</li>\n</ul>\n<p>目前Github已经整合了持续集成服务travis，我们只需要在项目中添加.travis.yml文件，在下一次push之后，travis就会定时执行npm test来测试你的项目，并且会在测试失败的时候通知到你，你也可以把项目当前的状态显示在README.md中，让人一目了然，比如React里的<br><img src=\"/assets/img/npm-version.png\" alt=\"npm-version\"><br><code>.travis.yml</code> 是一个YAML文件，具体的相关的配置见This，例子如下：<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">language: node_js</span><br><span class=\"line\">node_js:</span><br><span class=\"line\">  -<span class=\"ruby\"> <span class=\"string\">\"6\"</span></span></span><br><span class=\"line\"><span class=\"ruby\">  - <span class=\"string\">\"6.1\"</span></span></span><br><span class=\"line\"><span class=\"ruby\">  - <span class=\"string\">\"5.11\"</span></span></span><br><span class=\"line\"><span class=\"ruby\"><span class=\"symbol\">services:</span></span></span><br><span class=\"line\"><span class=\"ruby\">  - mongodb</span></span><br></pre></td></tr></table></figure></p>\n<p>  这个例子的是让travis在node.js的0.6.x，0.6.1，0.5.11三个版本下对项目进行测试，并且需要mongodb的服务。</p>\n<p>  <font color=\"green\" size=\"35\">End</font><br>  至此你的一个module就开发完成了。</p>\n"},{"title":"了解mvvm数据双向绑定","date":"2017-08-22T01:17:04.000Z","reward":true,"_content":"先来看看最终实现效果：\n```\n<div id=\"mvvm-app\">\n    <input type=\"text\" v-model=\"word\">\n    <p>{{word}}</p>\n    <button v-on:click=\"sayHi\">change model</button>\n</div>\n\n<script src=\"./js/observer.js\"></script>\n<script src=\"./js/watcher.js\"></script>\n<script src=\"./js/compile.js\"></script>\n<script src=\"./js/mvvm.js\"></script>\n<script>\nvar vm = new MVVM({\n    el: '#mvvm-app',\n        data: {\n            word: 'Hello World!'\n        },\n        methods: {\n            sayHi: function() {\n                this.word = 'Hi, everybody!';\n            }\n        }\n    });\n</script>\n```\n![mvvm-gif](/assets/img/mvvm-result.gif)\n## 实现数据双向绑定的几种方法\n目前几种主流的mvc(vm)框架都实现了单向数据绑定，而我所理解的双向数据绑定无非就是在单向绑定的基础上给可输入元素（input、textare等）添加了change(input)事件，来动态修改model和 view，并没有多高深。所以无需太过介怀是实现的单向或双向绑定。\n实现数据绑定的做法有大致如下几种：\n\n> 发布者-订阅者模式（backbone.js）\n> 脏值检查（angular.js） \n> 数据劫持（vue.js）\n\n**发布者-订阅者模式**:一般通过sub, pub的方式实现数据和视图的绑定监听，更新数据方式通常做法是 vm.set('property', value)\n这种方式现在毕竟太low了，我们更希望通过`vm.property = value`这种方式更新数据，同时自动更新视图，于是有了下面两种方式\n**脏值检查**: angular.js 是通过脏值检测的方式比对数据是否有变更，来决定是否更新视图，最简单的方式就是通过 setInterval() 定时轮询检测数据变动，当然Google不会这么low，angular只有在指定的事件触发时进入脏值检测，大致如下：\n- DOM事件，譬如用户输入文本，点击按钮等。( ng-click )\n- XHR响应事件 ( $http )\n- 浏览器Location变更事件 ( $location )\n- Timer事件( $timeout , $interval )\n- 执行 $digest() 或 $apply()\n\n**数据劫持**: vue.js 则是采用数据劫持结合发布者-订阅者模式的方式，通过`Object.defineProperty()`来劫持各个属性的`setter`，`getter`，在数据变动时发布消息给订阅者，触发相应的监听回调。\n\n##　思路整理\n已经了解到vue是通过数据劫持的方式来做数据绑定的，其中最核心的方法便是通过`Object.defineProperty()`来实现对属性的劫持，达到监听数据变动的目的，无疑这个方法是本文中最重要、最基础的内容之一，如果不熟悉defineProperty，猛戳[这里](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty) \n整理了一下，要实现mvvm的双向绑定，就必须要实现以下几点： \n1、实现一个数据监听器Observer，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者\n2、实现一个指令解析器Compile，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数 \n3、实现一个Watcher，作为连接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图 \n4、mvvm入口函数，整合以上三者\n绘制流程图如下：\n![mvvm-process](/assets/img/mvvm-2.png)\n\n### 1、实现Observer\nok, 思路已经整理完毕，也已经比较明确相关逻辑和模块功能了，let's do it 我们知道可以利用Obeject.defineProperty()来监听属性变动 那么将需要observe的数据对象进行递归遍历，包括子属性对象的属性，都加上\tsetter和getter 这样的话，给这个对象的某个值赋值，就会触发setter，那么就能监听到了数据变化。。相关代码可以是这样：\n```\nvar data = {name: 'kindeng'};\nobserve(data);\ndata.name = 'dmq'; // 哈哈哈，监听到值变化了 kindeng --> dmq\n\nfunction observe(data) {\n    if (!data || typeof data !== 'object') {\n        return;\n    }\n    // 取出所有属性遍历\n    Object.keys(data).forEach(function(key) {\n\t    defineReactive(data, key, data[key]);\n\t});\n};\n\nfunction defineReactive(data, key, val) {\n    observe(val); // 监听子属性\n    Object.defineProperty(data, key, {\n        enumerable: true, // 可枚举\n        configurable: false, // 不能再define\n        get: function() {\n            return val;\n        },\n        set: function(newVal) {\n            console.log('哈哈哈，监听到值变化了 ', val, ' --> ', newVal);\n            val = newVal;\n        }\n    });\n}\n```\n\n这样我们已经可以监听每个数据的变化了，那么监听到变化之后就是怎么通知订阅者了，所以接下来我们需要实现一个消息订阅器，很简单，维护一个数组，用来收集订阅者，数据变动触发notify，再调用订阅者的update方法，代码改善之后是这样：\n\n```\n// ... 省略\nfunction defineReactive(data, key, val) {\n\tvar dep = new Dep();\n    observe(val); // 监听子属性\n\n    Object.defineProperty(data, key, {\n        // ... 省略\n        set: function(newVal) {\n        \tif (val === newVal) return;\n            console.log('哈哈哈，监听到值变化了 ', val, ' --> ', newVal);\n            val = newVal;\n            dep.notify(); // 通知所有订阅者\n        }\n    });\n}\n\nfunction Dep() {\n    this.subs = [];\n}\nDep.prototype = {\n    addSub: function(sub) {\n        this.subs.push(sub);\n    },\n    notify: function() {\n        this.subs.forEach(function(sub) {\n            sub.update();\n        });\n    }\n};\n```\n\n那么问题来了，谁是订阅者？怎么往订阅器添加订阅者？ 没错，上面的思路整理中我们已经明确订阅者应该是Watcher, 而且`var dep = new Dep()`;是在 `defineReactive`方法内部定义的，所以想通过`dep`添加订阅者，就必须要在闭包内操作，所以我们可以在`getter`里面动手脚：\n```\n// Observer.js\n// ...省略\nObject.defineProperty(data, key, {\n\tget: function() {\n\t\t// 由于需要在闭包内添加watcher，所以通过Dep定义一个全局target属性，暂存watcher, 添加完移除\n\t\tDep.target && dep.addDep(Dep.target);\n\t\treturn val;\n\t}\n    // ... 省略\n});\n\n// Watcher.js\nWatcher.prototype = {\n\tget: function(key) {\n\t\tDep.target = this;\n\t\tthis.value = data[key];\t// 这里会触发属性的getter，从而添加订阅者\n\t\tDep.target = null;\n\t}\n}\n```\n这里已经实现了一个Observer了，已经具备了监听数据和数据变化通知订阅者的功能，[完整代码](https://github.com/Myqilixiang/mvvm/blob/master/js/observer.js)。那么接下来就是实现Compile了\n### 2、实现Compile\ncompile主要做的事情是解析模板指令，将模板中的变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，更新视图，如图所示：\n![compiler](/assets/img/mvvm-3.png) \n因为遍历解析的过程有多次操作dom节点，为提高性能和效率，会先将跟节点`el`转换成文档碎片`fragment`进行解析编译操作，解析完成，再将`fragment`添加回原来的真实dom节点中\n```\nfunction Compile(el) {\n    this.$el = this.isElementNode(el) ? el : document.querySelector(el);\n    if (this.$el) {\n        this.$fragment = this.node2Fragment(this.$el);\n        this.init();\n        this.$el.appendChild(this.$fragment);\n    }\n}\nCompile.prototype = {\n\tinit: function() { this.compileElement(this.$fragment); },\n    node2Fragment: function(el) {\n        var fragment = document.createDocumentFragment(), child;\n        // 将原生节点拷贝到fragment\n        while (child = el.firstChild) {\n            fragment.appendChild(child);\n        }\n        return fragment;\n    }\n};\n```\n\ncompileElement方法将遍历所有节点及其子节点，进行扫描解析编译，调用对应的指令渲染函数进行数据渲染，并调用对应的指令更新函数进行绑定，详看代码及注释说明：\n```\nCompile.prototype = {\n\t// ... 省略\n\tcompileElement: function(el) {\n        var childNodes = el.childNodes, me = this;\n        [].slice.call(childNodes).forEach(function(node) {\n            var text = node.textContent;\n            var reg = /\\{\\{(.*)\\}\\}/;\t// 表达式文本\n            // 按元素节点方式编译\n            if (me.isElementNode(node)) {\n                me.compile(node);\n            } else if (me.isTextNode(node) && reg.test(text)) {\n                me.compileText(node, RegExp.$1);\n            }\n            // 遍历编译子节点\n            if (node.childNodes && node.childNodes.length) {\n                me.compileElement(node);\n            }\n        });\n    }\n    // ...省略\n};\n```\n这里通过递归遍历保证了每个节点及子节点都会解析编译到，包括了`{`{}`}`表达式声明的文本节点。指令的声明规定是通过特定前缀的节点属性来标记，如`<span v-text=\"content\" other-attr`中`v-text`便是指令，而`other-attr`不是指令，只是普通的属性。 监听数据、绑定更新函数的处理是在`compileUtil.bind()`这个方法中，通过`new Watcher()`添加回调来接收数据变化的通知\n至此，一个简单的Compile就完成了，[完整代码](https://github.com/Myqilixiang/mvvm/blob/master/js/compile.js)。接下来要看看Watcher这个订阅者的具体实现了\n\n### 3、实现Watcher\nWatcher订阅者作为Observer和Compile之间通信的桥梁，主要做的事情是: \n1、在自身实例化时往属性订阅器(dep)里面添加自己 \n2、自身必须有一个update()方法 \n3、待属性变动dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调，则功成身退。 如果有点乱，可以回顾下前面的思路整理 \n```\nfunction Watcher(vm, exp, cb) {\n    this.cb = cb;\n    this.vm = vm;\n    this.exp = exp;\n    // 此处为了触发属性的getter，从而在dep添加自己，结合Observer更易理解\n    this.value = this.get(); \n}\nWatcher.prototype = {\n    update: function() {\n        this.run();\t// 属性值变化收到通知\n    },\n    run: function() {\n        var value = this.get(); // 取到最新值\n        var oldVal = this.value;\n        if (value !== oldVal) {\n            this.value = value;\n            this.cb.call(this.vm, value, oldVal); // 执行Compile中绑定的回调，更新视图\n        }\n    },\n    get: function() {\n        Dep.target = this;\t// 将当前订阅者指向自己\n        var value = this.vm[exp];\t// 触发getter，添加自己到属性订阅器中\n        Dep.target = null;\t// 添加完毕，重置\n        return value;\n    }\n};\n// 这里再次列出Observer和Dep，方便理解\nObject.defineProperty(data, key, {\n\tget: function() {\n\t\t// 由于需要在闭包内添加watcher，所以可以在Dep定义一个全局target属性，暂存watcher, 添加完移除\n\t\tDep.target && dep.addDep(Dep.target);\n\t\treturn val;\n\t}\n    // ... 省略\n});\nDep.prototype = {\n    notify: function() {\n        this.subs.forEach(function(sub) {\n            sub.update(); // 调用订阅者的update方法，通知变化\n        });\n    }\n};\n```\n实例化`Watcher`的时候，调用`get()`方法，通过`Dep.target = watcherInstance`标记订阅者是当前watcher实例，强行触发属性定义的`getter`方法，getter方法执行的时候，就会在属性的订阅器`dep`添加当前watcher实例，从而在属性值有变化的时候，watcherInstance就能收到更新通知。\n\nok, Watcher也已经实现了，[完整代码](https://github.com/Myqilixiang/mvvm/blob/master/js/watcher.js)。 基本上vue中数据绑定相关比较核心的几个模块也是这几个，猛戳[这里](https://github.com/vuejs/vue) , 在`src`目录可找到vue源码。\n\n最后来讲讲MVVM入口文件的相关逻辑和实现吧，相对就比较简单了~ \n### 4、实现MVVM\nMVVM作为数据绑定的入口，整合Observer、Compile和Watcher三者，通过Observer来监听自己的model数据变化，通过Compile来解析编译模板指令，最终利用Watcher搭起Observer和Compile之间的通信桥梁，达到数据变化 -> 视图更新；视图交互变化(input) -> 数据model变更的双向绑定效果。\n一个简单的MVVM构造器是这样子：\n```\nfunction MVVM(options) {\n    this.$options = options;\n    var data = this._data = this.$options.data;\n    observe(data, this);\n    this.$compile = new Compile(options.el || document.body, this)\n}\n```\n但是这里有个问题，从代码中可看出监听的数据对象是options.data，每次需要更新视图，则必须通过`var vm = new MVVM({data:{name: 'kindeng'}}); vm._data.name = 'dmq';`这样的方式来改变数据。\n显然不符合我们一开始的期望，我们所期望的调用方式应该是这样的： `var vm = new MVVM({data: {name: 'kindeng'}}); vm.name = 'dmq';`\n所以这里需要给MVVM实例添加一个属性代理的方法，使访问vm的属性代理为访问vm._data的属性，改造后的代码如下：\n```\nfunction MVVM(options) {\n    this.$options = options;\n    var data = this._data = this.$options.data, me = this;\n    // 属性代理，实现 vm.xxx -> vm._data.xxx\n    Object.keys(data).forEach(function(key) {\n        me._proxy(key);\n    });\n    observe(data, this);\n    this.$compile = new Compile(options.el || document.body, this)\n}\n\nMVVM.prototype = {\n\t_proxy: function(key) {\n\t\tvar me = this;\n        Object.defineProperty(me, key, {\n            configurable: false,\n            enumerable: true,\n            get: function proxyGetter() {\n                return me._data[key];\n            },\n            set: function proxySetter(newVal) {\n                me._data[key] = newVal;\n            }\n        });\n\t}\n};\n```\n这里主要还是利用了`Object.defineProperty()`这个方法来劫持了vm实例对象的属性的读写权，使读写vm实例的属性转成读写了`vm._data`的属性值，达到鱼目混珠的效果\n至此，全部模块和功能已经完成了，如本文开头所承诺的两点。一个简单的MVVM模块已经实现，其思想和原理大部分来自经过简化改造的vue源码，猛戳[这里](https://github.com/Myqilixiang/mvvm)可以看到本文的所有相关代码。 由于本文内容偏实践，所以代码量较多，且不宜列出大篇幅代码，所以建议想深入了解的童鞋可以再次结合本文源代码来进行阅读，这样会更加容易理解和掌握。\n## 总结\n本文主要围绕“几种实现双向绑定的做法”、“实现Observer”、“实现Compile”、“实现Watcher”、“实现MVVM”这几个模块来阐述了双向绑定的原理和实现。并根据思路流程渐进梳理讲解了一些细节思路和比较关键的内容点，以及通过展示部分关键代码讲述了怎样一步步实现一个双向绑定MVVM。\n[相关文章继续学习](http://www.jianshu.com/p/04d77c6b64ee)\n\n\n","source":"_posts/了解mvvm数据双向绑定.md","raw":"---\ntitle: 了解mvvm数据双向绑定\ndate: 2017-08-22 09:17:04\nreward: true\ntags:\n    - mvvm\n---\n先来看看最终实现效果：\n```\n<div id=\"mvvm-app\">\n    <input type=\"text\" v-model=\"word\">\n    <p>{{word}}</p>\n    <button v-on:click=\"sayHi\">change model</button>\n</div>\n\n<script src=\"./js/observer.js\"></script>\n<script src=\"./js/watcher.js\"></script>\n<script src=\"./js/compile.js\"></script>\n<script src=\"./js/mvvm.js\"></script>\n<script>\nvar vm = new MVVM({\n    el: '#mvvm-app',\n        data: {\n            word: 'Hello World!'\n        },\n        methods: {\n            sayHi: function() {\n                this.word = 'Hi, everybody!';\n            }\n        }\n    });\n</script>\n```\n![mvvm-gif](/assets/img/mvvm-result.gif)\n## 实现数据双向绑定的几种方法\n目前几种主流的mvc(vm)框架都实现了单向数据绑定，而我所理解的双向数据绑定无非就是在单向绑定的基础上给可输入元素（input、textare等）添加了change(input)事件，来动态修改model和 view，并没有多高深。所以无需太过介怀是实现的单向或双向绑定。\n实现数据绑定的做法有大致如下几种：\n\n> 发布者-订阅者模式（backbone.js）\n> 脏值检查（angular.js） \n> 数据劫持（vue.js）\n\n**发布者-订阅者模式**:一般通过sub, pub的方式实现数据和视图的绑定监听，更新数据方式通常做法是 vm.set('property', value)\n这种方式现在毕竟太low了，我们更希望通过`vm.property = value`这种方式更新数据，同时自动更新视图，于是有了下面两种方式\n**脏值检查**: angular.js 是通过脏值检测的方式比对数据是否有变更，来决定是否更新视图，最简单的方式就是通过 setInterval() 定时轮询检测数据变动，当然Google不会这么low，angular只有在指定的事件触发时进入脏值检测，大致如下：\n- DOM事件，譬如用户输入文本，点击按钮等。( ng-click )\n- XHR响应事件 ( $http )\n- 浏览器Location变更事件 ( $location )\n- Timer事件( $timeout , $interval )\n- 执行 $digest() 或 $apply()\n\n**数据劫持**: vue.js 则是采用数据劫持结合发布者-订阅者模式的方式，通过`Object.defineProperty()`来劫持各个属性的`setter`，`getter`，在数据变动时发布消息给订阅者，触发相应的监听回调。\n\n##　思路整理\n已经了解到vue是通过数据劫持的方式来做数据绑定的，其中最核心的方法便是通过`Object.defineProperty()`来实现对属性的劫持，达到监听数据变动的目的，无疑这个方法是本文中最重要、最基础的内容之一，如果不熟悉defineProperty，猛戳[这里](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty) \n整理了一下，要实现mvvm的双向绑定，就必须要实现以下几点： \n1、实现一个数据监听器Observer，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者\n2、实现一个指令解析器Compile，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数 \n3、实现一个Watcher，作为连接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图 \n4、mvvm入口函数，整合以上三者\n绘制流程图如下：\n![mvvm-process](/assets/img/mvvm-2.png)\n\n### 1、实现Observer\nok, 思路已经整理完毕，也已经比较明确相关逻辑和模块功能了，let's do it 我们知道可以利用Obeject.defineProperty()来监听属性变动 那么将需要observe的数据对象进行递归遍历，包括子属性对象的属性，都加上\tsetter和getter 这样的话，给这个对象的某个值赋值，就会触发setter，那么就能监听到了数据变化。。相关代码可以是这样：\n```\nvar data = {name: 'kindeng'};\nobserve(data);\ndata.name = 'dmq'; // 哈哈哈，监听到值变化了 kindeng --> dmq\n\nfunction observe(data) {\n    if (!data || typeof data !== 'object') {\n        return;\n    }\n    // 取出所有属性遍历\n    Object.keys(data).forEach(function(key) {\n\t    defineReactive(data, key, data[key]);\n\t});\n};\n\nfunction defineReactive(data, key, val) {\n    observe(val); // 监听子属性\n    Object.defineProperty(data, key, {\n        enumerable: true, // 可枚举\n        configurable: false, // 不能再define\n        get: function() {\n            return val;\n        },\n        set: function(newVal) {\n            console.log('哈哈哈，监听到值变化了 ', val, ' --> ', newVal);\n            val = newVal;\n        }\n    });\n}\n```\n\n这样我们已经可以监听每个数据的变化了，那么监听到变化之后就是怎么通知订阅者了，所以接下来我们需要实现一个消息订阅器，很简单，维护一个数组，用来收集订阅者，数据变动触发notify，再调用订阅者的update方法，代码改善之后是这样：\n\n```\n// ... 省略\nfunction defineReactive(data, key, val) {\n\tvar dep = new Dep();\n    observe(val); // 监听子属性\n\n    Object.defineProperty(data, key, {\n        // ... 省略\n        set: function(newVal) {\n        \tif (val === newVal) return;\n            console.log('哈哈哈，监听到值变化了 ', val, ' --> ', newVal);\n            val = newVal;\n            dep.notify(); // 通知所有订阅者\n        }\n    });\n}\n\nfunction Dep() {\n    this.subs = [];\n}\nDep.prototype = {\n    addSub: function(sub) {\n        this.subs.push(sub);\n    },\n    notify: function() {\n        this.subs.forEach(function(sub) {\n            sub.update();\n        });\n    }\n};\n```\n\n那么问题来了，谁是订阅者？怎么往订阅器添加订阅者？ 没错，上面的思路整理中我们已经明确订阅者应该是Watcher, 而且`var dep = new Dep()`;是在 `defineReactive`方法内部定义的，所以想通过`dep`添加订阅者，就必须要在闭包内操作，所以我们可以在`getter`里面动手脚：\n```\n// Observer.js\n// ...省略\nObject.defineProperty(data, key, {\n\tget: function() {\n\t\t// 由于需要在闭包内添加watcher，所以通过Dep定义一个全局target属性，暂存watcher, 添加完移除\n\t\tDep.target && dep.addDep(Dep.target);\n\t\treturn val;\n\t}\n    // ... 省略\n});\n\n// Watcher.js\nWatcher.prototype = {\n\tget: function(key) {\n\t\tDep.target = this;\n\t\tthis.value = data[key];\t// 这里会触发属性的getter，从而添加订阅者\n\t\tDep.target = null;\n\t}\n}\n```\n这里已经实现了一个Observer了，已经具备了监听数据和数据变化通知订阅者的功能，[完整代码](https://github.com/Myqilixiang/mvvm/blob/master/js/observer.js)。那么接下来就是实现Compile了\n### 2、实现Compile\ncompile主要做的事情是解析模板指令，将模板中的变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，更新视图，如图所示：\n![compiler](/assets/img/mvvm-3.png) \n因为遍历解析的过程有多次操作dom节点，为提高性能和效率，会先将跟节点`el`转换成文档碎片`fragment`进行解析编译操作，解析完成，再将`fragment`添加回原来的真实dom节点中\n```\nfunction Compile(el) {\n    this.$el = this.isElementNode(el) ? el : document.querySelector(el);\n    if (this.$el) {\n        this.$fragment = this.node2Fragment(this.$el);\n        this.init();\n        this.$el.appendChild(this.$fragment);\n    }\n}\nCompile.prototype = {\n\tinit: function() { this.compileElement(this.$fragment); },\n    node2Fragment: function(el) {\n        var fragment = document.createDocumentFragment(), child;\n        // 将原生节点拷贝到fragment\n        while (child = el.firstChild) {\n            fragment.appendChild(child);\n        }\n        return fragment;\n    }\n};\n```\n\ncompileElement方法将遍历所有节点及其子节点，进行扫描解析编译，调用对应的指令渲染函数进行数据渲染，并调用对应的指令更新函数进行绑定，详看代码及注释说明：\n```\nCompile.prototype = {\n\t// ... 省略\n\tcompileElement: function(el) {\n        var childNodes = el.childNodes, me = this;\n        [].slice.call(childNodes).forEach(function(node) {\n            var text = node.textContent;\n            var reg = /\\{\\{(.*)\\}\\}/;\t// 表达式文本\n            // 按元素节点方式编译\n            if (me.isElementNode(node)) {\n                me.compile(node);\n            } else if (me.isTextNode(node) && reg.test(text)) {\n                me.compileText(node, RegExp.$1);\n            }\n            // 遍历编译子节点\n            if (node.childNodes && node.childNodes.length) {\n                me.compileElement(node);\n            }\n        });\n    }\n    // ...省略\n};\n```\n这里通过递归遍历保证了每个节点及子节点都会解析编译到，包括了`{`{}`}`表达式声明的文本节点。指令的声明规定是通过特定前缀的节点属性来标记，如`<span v-text=\"content\" other-attr`中`v-text`便是指令，而`other-attr`不是指令，只是普通的属性。 监听数据、绑定更新函数的处理是在`compileUtil.bind()`这个方法中，通过`new Watcher()`添加回调来接收数据变化的通知\n至此，一个简单的Compile就完成了，[完整代码](https://github.com/Myqilixiang/mvvm/blob/master/js/compile.js)。接下来要看看Watcher这个订阅者的具体实现了\n\n### 3、实现Watcher\nWatcher订阅者作为Observer和Compile之间通信的桥梁，主要做的事情是: \n1、在自身实例化时往属性订阅器(dep)里面添加自己 \n2、自身必须有一个update()方法 \n3、待属性变动dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调，则功成身退。 如果有点乱，可以回顾下前面的思路整理 \n```\nfunction Watcher(vm, exp, cb) {\n    this.cb = cb;\n    this.vm = vm;\n    this.exp = exp;\n    // 此处为了触发属性的getter，从而在dep添加自己，结合Observer更易理解\n    this.value = this.get(); \n}\nWatcher.prototype = {\n    update: function() {\n        this.run();\t// 属性值变化收到通知\n    },\n    run: function() {\n        var value = this.get(); // 取到最新值\n        var oldVal = this.value;\n        if (value !== oldVal) {\n            this.value = value;\n            this.cb.call(this.vm, value, oldVal); // 执行Compile中绑定的回调，更新视图\n        }\n    },\n    get: function() {\n        Dep.target = this;\t// 将当前订阅者指向自己\n        var value = this.vm[exp];\t// 触发getter，添加自己到属性订阅器中\n        Dep.target = null;\t// 添加完毕，重置\n        return value;\n    }\n};\n// 这里再次列出Observer和Dep，方便理解\nObject.defineProperty(data, key, {\n\tget: function() {\n\t\t// 由于需要在闭包内添加watcher，所以可以在Dep定义一个全局target属性，暂存watcher, 添加完移除\n\t\tDep.target && dep.addDep(Dep.target);\n\t\treturn val;\n\t}\n    // ... 省略\n});\nDep.prototype = {\n    notify: function() {\n        this.subs.forEach(function(sub) {\n            sub.update(); // 调用订阅者的update方法，通知变化\n        });\n    }\n};\n```\n实例化`Watcher`的时候，调用`get()`方法，通过`Dep.target = watcherInstance`标记订阅者是当前watcher实例，强行触发属性定义的`getter`方法，getter方法执行的时候，就会在属性的订阅器`dep`添加当前watcher实例，从而在属性值有变化的时候，watcherInstance就能收到更新通知。\n\nok, Watcher也已经实现了，[完整代码](https://github.com/Myqilixiang/mvvm/blob/master/js/watcher.js)。 基本上vue中数据绑定相关比较核心的几个模块也是这几个，猛戳[这里](https://github.com/vuejs/vue) , 在`src`目录可找到vue源码。\n\n最后来讲讲MVVM入口文件的相关逻辑和实现吧，相对就比较简单了~ \n### 4、实现MVVM\nMVVM作为数据绑定的入口，整合Observer、Compile和Watcher三者，通过Observer来监听自己的model数据变化，通过Compile来解析编译模板指令，最终利用Watcher搭起Observer和Compile之间的通信桥梁，达到数据变化 -> 视图更新；视图交互变化(input) -> 数据model变更的双向绑定效果。\n一个简单的MVVM构造器是这样子：\n```\nfunction MVVM(options) {\n    this.$options = options;\n    var data = this._data = this.$options.data;\n    observe(data, this);\n    this.$compile = new Compile(options.el || document.body, this)\n}\n```\n但是这里有个问题，从代码中可看出监听的数据对象是options.data，每次需要更新视图，则必须通过`var vm = new MVVM({data:{name: 'kindeng'}}); vm._data.name = 'dmq';`这样的方式来改变数据。\n显然不符合我们一开始的期望，我们所期望的调用方式应该是这样的： `var vm = new MVVM({data: {name: 'kindeng'}}); vm.name = 'dmq';`\n所以这里需要给MVVM实例添加一个属性代理的方法，使访问vm的属性代理为访问vm._data的属性，改造后的代码如下：\n```\nfunction MVVM(options) {\n    this.$options = options;\n    var data = this._data = this.$options.data, me = this;\n    // 属性代理，实现 vm.xxx -> vm._data.xxx\n    Object.keys(data).forEach(function(key) {\n        me._proxy(key);\n    });\n    observe(data, this);\n    this.$compile = new Compile(options.el || document.body, this)\n}\n\nMVVM.prototype = {\n\t_proxy: function(key) {\n\t\tvar me = this;\n        Object.defineProperty(me, key, {\n            configurable: false,\n            enumerable: true,\n            get: function proxyGetter() {\n                return me._data[key];\n            },\n            set: function proxySetter(newVal) {\n                me._data[key] = newVal;\n            }\n        });\n\t}\n};\n```\n这里主要还是利用了`Object.defineProperty()`这个方法来劫持了vm实例对象的属性的读写权，使读写vm实例的属性转成读写了`vm._data`的属性值，达到鱼目混珠的效果\n至此，全部模块和功能已经完成了，如本文开头所承诺的两点。一个简单的MVVM模块已经实现，其思想和原理大部分来自经过简化改造的vue源码，猛戳[这里](https://github.com/Myqilixiang/mvvm)可以看到本文的所有相关代码。 由于本文内容偏实践，所以代码量较多，且不宜列出大篇幅代码，所以建议想深入了解的童鞋可以再次结合本文源代码来进行阅读，这样会更加容易理解和掌握。\n## 总结\n本文主要围绕“几种实现双向绑定的做法”、“实现Observer”、“实现Compile”、“实现Watcher”、“实现MVVM”这几个模块来阐述了双向绑定的原理和实现。并根据思路流程渐进梳理讲解了一些细节思路和比较关键的内容点，以及通过展示部分关键代码讲述了怎样一步步实现一个双向绑定MVVM。\n[相关文章继续学习](http://www.jianshu.com/p/04d77c6b64ee)\n\n\n","slug":"了解mvvm数据双向绑定","published":1,"updated":"2020-03-12T13:55:48.640Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7otizqj000d7gui6882p7zy","content":"<p>先来看看最终实现效果：<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"mvvm-app\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"word\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;word&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">v-on:click</span>=<span class=\"string\">\"sayHi\"</span>&gt;</span>change model<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/observer.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/watcher.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/compile.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/mvvm.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span></span><br><span class=\"line\"><span class=\"xml\">var vm = new MVVM(&#123;</span></span><br><span class=\"line\"><span class=\"xml\">    el: '#mvvm-app',</span></span><br><span class=\"line\"><span class=\"xml\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"xml\">            word: 'Hello World!'</span></span><br><span class=\"line\"><span class=\"xml\">        &#125;,</span></span><br><span class=\"line\"><span class=\"xml\">        methods: &#123;</span></span><br><span class=\"line\"><span class=\"xml\">            sayHi: function() &#123;</span></span><br><span class=\"line\"><span class=\"xml\">                this.word = 'Hi, everybody!';</span></span><br><span class=\"line\"><span class=\"xml\">            &#125;</span></span><br><span class=\"line\"><span class=\"xml\">        &#125;</span></span><br><span class=\"line\"><span class=\"xml\">    &#125;);</span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>\n<p><img src=\"/assets/img/mvvm-result.gif\" alt=\"mvvm-gif\"></p>\n<h2 id=\"实现数据双向绑定的几种方法\"><a href=\"#实现数据双向绑定的几种方法\" class=\"headerlink\" title=\"实现数据双向绑定的几种方法\"></a>实现数据双向绑定的几种方法</h2><p>目前几种主流的mvc(vm)框架都实现了单向数据绑定，而我所理解的双向数据绑定无非就是在单向绑定的基础上给可输入元素（input、textare等）添加了change(input)事件，来动态修改model和 view，并没有多高深。所以无需太过介怀是实现的单向或双向绑定。<br>实现数据绑定的做法有大致如下几种：</p>\n<blockquote>\n<p>发布者-订阅者模式（backbone.js）<br>脏值检查（angular.js）<br>数据劫持（vue.js）</p>\n</blockquote>\n<p><strong>发布者-订阅者模式</strong>:一般通过sub, pub的方式实现数据和视图的绑定监听，更新数据方式通常做法是 vm.set(‘property’, value)<br>这种方式现在毕竟太low了，我们更希望通过<code>vm.property = value</code>这种方式更新数据，同时自动更新视图，于是有了下面两种方式<br><strong>脏值检查</strong>: angular.js 是通过脏值检测的方式比对数据是否有变更，来决定是否更新视图，最简单的方式就是通过 setInterval() 定时轮询检测数据变动，当然Google不会这么low，angular只有在指定的事件触发时进入脏值检测，大致如下：</p>\n<ul>\n<li>DOM事件，譬如用户输入文本，点击按钮等。( ng-click )</li>\n<li>XHR响应事件 ( $http )</li>\n<li>浏览器Location变更事件 ( $location )</li>\n<li>Timer事件( $timeout , $interval )</li>\n<li>执行 $digest() 或 $apply()</li>\n</ul>\n<p><strong>数据劫持</strong>: vue.js 则是采用数据劫持结合发布者-订阅者模式的方式，通过<code>Object.defineProperty()</code>来劫持各个属性的<code>setter</code>，<code>getter</code>，在数据变动时发布消息给订阅者，触发相应的监听回调。</p>\n<p>##　思路整理<br>已经了解到vue是通过数据劫持的方式来做数据绑定的，其中最核心的方法便是通过<code>Object.defineProperty()</code>来实现对属性的劫持，达到监听数据变动的目的，无疑这个方法是本文中最重要、最基础的内容之一，如果不熟悉defineProperty，猛戳<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\" target=\"_blank\" rel=\"noopener\">这里</a><br>整理了一下，要实现mvvm的双向绑定，就必须要实现以下几点：<br>1、实现一个数据监听器Observer，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者<br>2、实现一个指令解析器Compile，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数<br>3、实现一个Watcher，作为连接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图<br>4、mvvm入口函数，整合以上三者<br>绘制流程图如下：<br><img src=\"/assets/img/mvvm-2.png\" alt=\"mvvm-process\"></p>\n<h3 id=\"1、实现Observer\"><a href=\"#1、实现Observer\" class=\"headerlink\" title=\"1、实现Observer\"></a>1、实现Observer</h3><p>ok, 思路已经整理完毕，也已经比较明确相关逻辑和模块功能了，let’s do it 我们知道可以利用Obeject.defineProperty()来监听属性变动 那么将需要observe的数据对象进行递归遍历，包括子属性对象的属性，都加上    setter和getter 这样的话，给这个对象的某个值赋值，就会触发setter，那么就能监听到了数据变化。。相关代码可以是这样：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">data</span> = &#123;name: <span class=\"string\">'kindeng'</span>&#125;;</span><br><span class=\"line\">observe(<span class=\"keyword\">data</span>);</span><br><span class=\"line\"><span class=\"keyword\">data</span>.name = <span class=\"string\">'dmq'</span>; <span class=\"comment\">// 哈哈哈，监听到值变化了 kindeng --&gt; dmq</span></span><br><span class=\"line\"></span><br><span class=\"line\">function observe(<span class=\"keyword\">data</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">data</span> || typeof <span class=\"keyword\">data</span> !== <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 取出所有属性遍历</span></span><br><span class=\"line\">    Object.keys(<span class=\"keyword\">data</span>).forEach(function(key) &#123;</span><br><span class=\"line\">\t    defineReactive(<span class=\"keyword\">data</span>, key, <span class=\"keyword\">data</span>[key]);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function defineReactive(<span class=\"keyword\">data</span>, key, <span class=\"keyword\">val</span>) &#123;</span><br><span class=\"line\">    observe(<span class=\"keyword\">val</span>); <span class=\"comment\">// 监听子属性</span></span><br><span class=\"line\">    Object.defineProperty(<span class=\"keyword\">data</span>, key, &#123;</span><br><span class=\"line\">        enumerable: <span class=\"literal\">true</span>, <span class=\"comment\">// 可枚举</span></span><br><span class=\"line\">        configurable: <span class=\"literal\">false</span>, <span class=\"comment\">// 不能再define</span></span><br><span class=\"line\">        <span class=\"keyword\">get</span>: function() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">val</span>;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"keyword\">set</span>: function(newVal) &#123;</span><br><span class=\"line\">            console.log(<span class=\"string\">'哈哈哈，监听到值变化了 '</span>, <span class=\"keyword\">val</span>, <span class=\"string\">' --&gt; '</span>, newVal);</span><br><span class=\"line\">            <span class=\"keyword\">val</span> = newVal;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这样我们已经可以监听每个数据的变化了，那么监听到变化之后就是怎么通知订阅者了，所以接下来我们需要实现一个消息订阅器，很简单，维护一个数组，用来收集订阅者，数据变动触发notify，再调用订阅者的update方法，代码改善之后是这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ... 省略</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">defineReactive</span>(<span class=\"params\">data, key, val</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> dep = <span class=\"keyword\">new</span> Dep();</span><br><span class=\"line\">    observe(val); <span class=\"comment\">// 监听子属性</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(data, key, &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ... 省略</span></span><br><span class=\"line\">        set: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newVal</span>) </span>&#123;</span><br><span class=\"line\">        \t<span class=\"keyword\">if</span> (val === newVal) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'哈哈哈，监听到值变化了 '</span>, val, <span class=\"string\">' --&gt; '</span>, newVal);</span><br><span class=\"line\">            val = newVal;</span><br><span class=\"line\">            dep.notify(); <span class=\"comment\">// 通知所有订阅者</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dep</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subs = [];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Dep.prototype = &#123;</span><br><span class=\"line\">    addSub: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sub</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.subs.push(sub);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    notify: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.subs.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sub</span>) </span>&#123;</span><br><span class=\"line\">            sub.update();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>那么问题来了，谁是订阅者？怎么往订阅器添加订阅者？ 没错，上面的思路整理中我们已经明确订阅者应该是Watcher, 而且<code>var dep = new Dep()</code>;是在 <code>defineReactive</code>方法内部定义的，所以想通过<code>dep</code>添加订阅者，就必须要在闭包内操作，所以我们可以在<code>getter</code>里面动手脚：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Observer.js</span></span><br><span class=\"line\"><span class=\"comment\">// ...省略</span></span><br><span class=\"line\">Object.defineProperty(data, key, &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 由于需要在闭包内添加watcher，所以通过Dep定义一个全局target属性，暂存watcher, 添加完移除</span></span><br><span class=\"line\">\t\tDep.target &amp;&amp; dep.addDep(Dep.target);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> val;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">// ... 省略</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Watcher.js</span></span><br><span class=\"line\">Watcher.prototype = &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key)</span> </span>&#123;</span><br><span class=\"line\">\t\tDep.target = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.value = data[key];\t<span class=\"comment\">// 这里会触发属性的getter，从而添加订阅者</span></span><br><span class=\"line\">\t\tDep.target = <span class=\"literal\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这里已经实现了一个Observer了，已经具备了监听数据和数据变化通知订阅者的功能，<a href=\"https://github.com/Myqilixiang/mvvm/blob/master/js/observer.js\" target=\"_blank\" rel=\"noopener\">完整代码</a>。那么接下来就是实现Compile了</p>\n<h3 id=\"2、实现Compile\"><a href=\"#2、实现Compile\" class=\"headerlink\" title=\"2、实现Compile\"></a>2、实现Compile</h3><p>compile主要做的事情是解析模板指令，将模板中的变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，更新视图，如图所示：<br><img src=\"/assets/img/mvvm-3.png\" alt=\"compiler\"><br>因为遍历解析的过程有多次操作dom节点，为提高性能和效率，会先将跟节点<code>el</code>转换成文档碎片<code>fragment</code>进行解析编译操作，解析完成，再将<code>fragment</code>添加回原来的真实dom节点中<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Compile(el) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$el = <span class=\"keyword\">this</span>.isElementNode(el) ? el : document.querySelector(el);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.$el) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$fragment = <span class=\"keyword\">this</span>.node2Fragment(<span class=\"keyword\">this</span>.$el);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.<span class=\"keyword\">init</span>();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$el.appendChild(<span class=\"keyword\">this</span>.$fragment);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Compile.prototype = &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">init</span>: function() &#123; <span class=\"keyword\">this</span>.compileElement(<span class=\"keyword\">this</span>.$fragment); &#125;,</span><br><span class=\"line\">    node2Fragment: function(el) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> fragment = document.createDocumentFragment(), child;</span><br><span class=\"line\">        <span class=\"comment\">// 将原生节点拷贝到fragment</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (child = el.firstChild) &#123;</span><br><span class=\"line\">            fragment.appendChild(child);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fragment;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>compileElement方法将遍历所有节点及其子节点，进行扫描解析编译，调用对应的指令渲染函数进行数据渲染，并调用对应的指令更新函数进行绑定，详看代码及注释说明：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Compile.prototype = &#123;</span><br><span class=\"line\">\t// ... 省略</span><br><span class=\"line\">\tcompileElement: function(el) &#123;</span><br><span class=\"line\">        var childNodes = el.childNodes, me = this;</span><br><span class=\"line\">        [].slice.call(childNodes).forEach(function(<span class=\"keyword\">node</span><span class=\"title\">) &#123;</span></span><br><span class=\"line\"><span class=\"title\">            var</span> text = <span class=\"keyword\">node</span>.<span class=\"title\">textContent</span>;</span><br><span class=\"line\">            var reg = /\\&#123;\\&#123;(.*)\\&#125;\\&#125;/;\t// 表达式文本</span><br><span class=\"line\">            // 按元素节点方式编译</span><br><span class=\"line\">            if (me.isElementNode(<span class=\"keyword\">node</span><span class=\"title\">)) &#123;</span></span><br><span class=\"line\"><span class=\"title\">                me</span>.compile(<span class=\"keyword\">node</span><span class=\"title\">);</span></span><br><span class=\"line\"><span class=\"title\">            &#125; else</span> if (me.isTextNode(<span class=\"keyword\">node</span><span class=\"title\">) &amp;&amp; reg</span>.test(text)) &#123;</span><br><span class=\"line\">                me.compileText(<span class=\"keyword\">node</span><span class=\"title\">, RegExp</span>.$<span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            // 遍历编译子节点</span><br><span class=\"line\">            if (<span class=\"keyword\">node</span>.<span class=\"title\">childNodes</span> &amp;&amp; <span class=\"keyword\">node</span>.<span class=\"title\">childNodes</span>.length) &#123;</span><br><span class=\"line\">                me.compileElement(<span class=\"keyword\">node</span><span class=\"title\">);</span></span><br><span class=\"line\"><span class=\"title\">            &#125;</span></span><br><span class=\"line\"><span class=\"title\">        &#125;);</span></span><br><span class=\"line\"><span class=\"title\">    &#125;</span></span><br><span class=\"line\"><span class=\"title\">    // ...省略</span></span><br><span class=\"line\"><span class=\"title\">&#125;;</span></span><br></pre></td></tr></table></figure></p>\n<p>这里通过递归遍历保证了每个节点及子节点都会解析编译到，包括了<code>{</code>{}<code>}</code>表达式声明的文本节点。指令的声明规定是通过特定前缀的节点属性来标记，如<code>&lt;span v-text=&quot;content&quot; other-attr</code>中<code>v-text</code>便是指令，而<code>other-attr</code>不是指令，只是普通的属性。 监听数据、绑定更新函数的处理是在<code>compileUtil.bind()</code>这个方法中，通过<code>new Watcher()</code>添加回调来接收数据变化的通知<br>至此，一个简单的Compile就完成了，<a href=\"https://github.com/Myqilixiang/mvvm/blob/master/js/compile.js\" target=\"_blank\" rel=\"noopener\">完整代码</a>。接下来要看看Watcher这个订阅者的具体实现了</p>\n<h3 id=\"3、实现Watcher\"><a href=\"#3、实现Watcher\" class=\"headerlink\" title=\"3、实现Watcher\"></a>3、实现Watcher</h3><p>Watcher订阅者作为Observer和Compile之间通信的桥梁，主要做的事情是:<br>1、在自身实例化时往属性订阅器(dep)里面添加自己<br>2、自身必须有一个update()方法<br>3、待属性变动dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调，则功成身退。 如果有点乱，可以回顾下前面的思路整理<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Watcher</span><span class=\"params\">(vm, exp, cb)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.cb = cb;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.vm = vm;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.exp = exp;</span><br><span class=\"line\">    <span class=\"comment\">// 此处为了触发属性的getter，从而在dep添加自己，结合Observer更易理解</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.value = <span class=\"keyword\">this</span>.get(); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Watcher.prototype = &#123;</span><br><span class=\"line\">    update: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.run();\t<span class=\"comment\">// 属性值变化收到通知</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    run: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> value = <span class=\"keyword\">this</span>.get(); <span class=\"comment\">// 取到最新值</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> oldVal = <span class=\"keyword\">this</span>.value;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value !== oldVal) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.cb.call(<span class=\"keyword\">this</span>.vm, value, oldVal); <span class=\"comment\">// 执行Compile中绑定的回调，更新视图</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Dep.target = <span class=\"keyword\">this</span>;\t<span class=\"comment\">// 将当前订阅者指向自己</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> value = <span class=\"keyword\">this</span>.vm[exp];\t<span class=\"comment\">// 触发getter，添加自己到属性订阅器中</span></span><br><span class=\"line\">        Dep.target = <span class=\"literal\">null</span>;\t<span class=\"comment\">// 添加完毕，重置</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// 这里再次列出Observer和Dep，方便理解</span></span><br><span class=\"line\">Object.defineProperty(data, key, &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 由于需要在闭包内添加watcher，所以可以在Dep定义一个全局target属性，暂存watcher, 添加完移除</span></span><br><span class=\"line\">\t\tDep.target &amp;&amp; dep.addDep(Dep.target);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> val;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">// ... 省略</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Dep.prototype = &#123;</span><br><span class=\"line\">    notify: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.subs.forEach(<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(sub)</span> </span>&#123;</span><br><span class=\"line\">            sub.update(); <span class=\"comment\">// 调用订阅者的update方法，通知变化</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>实例化<code>Watcher</code>的时候，调用<code>get()</code>方法，通过<code>Dep.target = watcherInstance</code>标记订阅者是当前watcher实例，强行触发属性定义的<code>getter</code>方法，getter方法执行的时候，就会在属性的订阅器<code>dep</code>添加当前watcher实例，从而在属性值有变化的时候，watcherInstance就能收到更新通知。</p>\n<p>ok, Watcher也已经实现了，<a href=\"https://github.com/Myqilixiang/mvvm/blob/master/js/watcher.js\" target=\"_blank\" rel=\"noopener\">完整代码</a>。 基本上vue中数据绑定相关比较核心的几个模块也是这几个，猛戳<a href=\"https://github.com/vuejs/vue\" target=\"_blank\" rel=\"noopener\">这里</a> , 在<code>src</code>目录可找到vue源码。</p>\n<p>最后来讲讲MVVM入口文件的相关逻辑和实现吧，相对就比较简单了~ </p>\n<h3 id=\"4、实现MVVM\"><a href=\"#4、实现MVVM\" class=\"headerlink\" title=\"4、实现MVVM\"></a>4、实现MVVM</h3><p>MVVM作为数据绑定的入口，整合Observer、Compile和Watcher三者，通过Observer来监听自己的model数据变化，通过Compile来解析编译模板指令，最终利用Watcher搭起Observer和Compile之间的通信桥梁，达到数据变化 -&gt; 视图更新；视图交互变化(input) -&gt; 数据model变更的双向绑定效果。<br>一个简单的MVVM构造器是这样子：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function MVVM(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$options = options;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"keyword\">data</span> = <span class=\"keyword\">this</span>._data = <span class=\"keyword\">this</span>.$options.<span class=\"keyword\">data</span>;</span><br><span class=\"line\">    observe(<span class=\"keyword\">data</span>, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$compile = new Compile(options.el || document.body, <span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>但是这里有个问题，从代码中可看出监听的数据对象是options.data，每次需要更新视图，则必须通过<code>var vm = new MVVM({data:{name: &#39;kindeng&#39;}}); vm._data.name = &#39;dmq&#39;;</code>这样的方式来改变数据。<br>显然不符合我们一开始的期望，我们所期望的调用方式应该是这样的： <code>var vm = new MVVM({data: {name: &#39;kindeng&#39;}}); vm.name = &#39;dmq&#39;;</code><br>所以这里需要给MVVM实例添加一个属性代理的方法，使访问vm的属性代理为访问vm._data的属性，改造后的代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MVVM</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$options = options;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = <span class=\"keyword\">this</span>._data = <span class=\"keyword\">this</span>.$options.data, me = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 属性代理，实现 vm.xxx -&gt; vm._data.xxx</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.keys(data).forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</span><br><span class=\"line\">        me._proxy(key);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    observe(data, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$compile = <span class=\"keyword\">new</span> Compile(options.el || <span class=\"built_in\">document</span>.body, <span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">MVVM.prototype = &#123;</span><br><span class=\"line\">\t_proxy: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> me = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(me, key, &#123;</span><br><span class=\"line\">            configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            get: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxyGetter</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> me._data[key];</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            set: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxySetter</span>(<span class=\"params\">newVal</span>) </span>&#123;</span><br><span class=\"line\">                me._data[key] = newVal;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>这里主要还是利用了<code>Object.defineProperty()</code>这个方法来劫持了vm实例对象的属性的读写权，使读写vm实例的属性转成读写了<code>vm._data</code>的属性值，达到鱼目混珠的效果<br>至此，全部模块和功能已经完成了，如本文开头所承诺的两点。一个简单的MVVM模块已经实现，其思想和原理大部分来自经过简化改造的vue源码，猛戳<a href=\"https://github.com/Myqilixiang/mvvm\" target=\"_blank\" rel=\"noopener\">这里</a>可以看到本文的所有相关代码。 由于本文内容偏实践，所以代码量较多，且不宜列出大篇幅代码，所以建议想深入了解的童鞋可以再次结合本文源代码来进行阅读，这样会更加容易理解和掌握。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本文主要围绕“几种实现双向绑定的做法”、“实现Observer”、“实现Compile”、“实现Watcher”、“实现MVVM”这几个模块来阐述了双向绑定的原理和实现。并根据思路流程渐进梳理讲解了一些细节思路和比较关键的内容点，以及通过展示部分关键代码讲述了怎样一步步实现一个双向绑定MVVM。<br><a href=\"http://www.jianshu.com/p/04d77c6b64ee\" target=\"_blank\" rel=\"noopener\">相关文章继续学习</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>先来看看最终实现效果：<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"mvvm-app\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"word\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;word&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">v-on:click</span>=<span class=\"string\">\"sayHi\"</span>&gt;</span>change model<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/observer.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/watcher.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/compile.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./js/mvvm.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span></span><br><span class=\"line\"><span class=\"xml\">var vm = new MVVM(&#123;</span></span><br><span class=\"line\"><span class=\"xml\">    el: '#mvvm-app',</span></span><br><span class=\"line\"><span class=\"xml\">        data: &#123;</span></span><br><span class=\"line\"><span class=\"xml\">            word: 'Hello World!'</span></span><br><span class=\"line\"><span class=\"xml\">        &#125;,</span></span><br><span class=\"line\"><span class=\"xml\">        methods: &#123;</span></span><br><span class=\"line\"><span class=\"xml\">            sayHi: function() &#123;</span></span><br><span class=\"line\"><span class=\"xml\">                this.word = 'Hi, everybody!';</span></span><br><span class=\"line\"><span class=\"xml\">            &#125;</span></span><br><span class=\"line\"><span class=\"xml\">        &#125;</span></span><br><span class=\"line\"><span class=\"xml\">    &#125;);</span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>\n<p><img src=\"/assets/img/mvvm-result.gif\" alt=\"mvvm-gif\"></p>\n<h2 id=\"实现数据双向绑定的几种方法\"><a href=\"#实现数据双向绑定的几种方法\" class=\"headerlink\" title=\"实现数据双向绑定的几种方法\"></a>实现数据双向绑定的几种方法</h2><p>目前几种主流的mvc(vm)框架都实现了单向数据绑定，而我所理解的双向数据绑定无非就是在单向绑定的基础上给可输入元素（input、textare等）添加了change(input)事件，来动态修改model和 view，并没有多高深。所以无需太过介怀是实现的单向或双向绑定。<br>实现数据绑定的做法有大致如下几种：</p>\n<blockquote>\n<p>发布者-订阅者模式（backbone.js）<br>脏值检查（angular.js）<br>数据劫持（vue.js）</p>\n</blockquote>\n<p><strong>发布者-订阅者模式</strong>:一般通过sub, pub的方式实现数据和视图的绑定监听，更新数据方式通常做法是 vm.set(‘property’, value)<br>这种方式现在毕竟太low了，我们更希望通过<code>vm.property = value</code>这种方式更新数据，同时自动更新视图，于是有了下面两种方式<br><strong>脏值检查</strong>: angular.js 是通过脏值检测的方式比对数据是否有变更，来决定是否更新视图，最简单的方式就是通过 setInterval() 定时轮询检测数据变动，当然Google不会这么low，angular只有在指定的事件触发时进入脏值检测，大致如下：</p>\n<ul>\n<li>DOM事件，譬如用户输入文本，点击按钮等。( ng-click )</li>\n<li>XHR响应事件 ( $http )</li>\n<li>浏览器Location变更事件 ( $location )</li>\n<li>Timer事件( $timeout , $interval )</li>\n<li>执行 $digest() 或 $apply()</li>\n</ul>\n<p><strong>数据劫持</strong>: vue.js 则是采用数据劫持结合发布者-订阅者模式的方式，通过<code>Object.defineProperty()</code>来劫持各个属性的<code>setter</code>，<code>getter</code>，在数据变动时发布消息给订阅者，触发相应的监听回调。</p>\n<p>##　思路整理<br>已经了解到vue是通过数据劫持的方式来做数据绑定的，其中最核心的方法便是通过<code>Object.defineProperty()</code>来实现对属性的劫持，达到监听数据变动的目的，无疑这个方法是本文中最重要、最基础的内容之一，如果不熟悉defineProperty，猛戳<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\" target=\"_blank\" rel=\"noopener\">这里</a><br>整理了一下，要实现mvvm的双向绑定，就必须要实现以下几点：<br>1、实现一个数据监听器Observer，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者<br>2、实现一个指令解析器Compile，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数<br>3、实现一个Watcher，作为连接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图<br>4、mvvm入口函数，整合以上三者<br>绘制流程图如下：<br><img src=\"/assets/img/mvvm-2.png\" alt=\"mvvm-process\"></p>\n<h3 id=\"1、实现Observer\"><a href=\"#1、实现Observer\" class=\"headerlink\" title=\"1、实现Observer\"></a>1、实现Observer</h3><p>ok, 思路已经整理完毕，也已经比较明确相关逻辑和模块功能了，let’s do it 我们知道可以利用Obeject.defineProperty()来监听属性变动 那么将需要observe的数据对象进行递归遍历，包括子属性对象的属性，都加上    setter和getter 这样的话，给这个对象的某个值赋值，就会触发setter，那么就能监听到了数据变化。。相关代码可以是这样：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"keyword\">data</span> = &#123;name: <span class=\"string\">'kindeng'</span>&#125;;</span><br><span class=\"line\">observe(<span class=\"keyword\">data</span>);</span><br><span class=\"line\"><span class=\"keyword\">data</span>.name = <span class=\"string\">'dmq'</span>; <span class=\"comment\">// 哈哈哈，监听到值变化了 kindeng --&gt; dmq</span></span><br><span class=\"line\"></span><br><span class=\"line\">function observe(<span class=\"keyword\">data</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">data</span> || typeof <span class=\"keyword\">data</span> !== <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 取出所有属性遍历</span></span><br><span class=\"line\">    Object.keys(<span class=\"keyword\">data</span>).forEach(function(key) &#123;</span><br><span class=\"line\">\t    defineReactive(<span class=\"keyword\">data</span>, key, <span class=\"keyword\">data</span>[key]);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function defineReactive(<span class=\"keyword\">data</span>, key, <span class=\"keyword\">val</span>) &#123;</span><br><span class=\"line\">    observe(<span class=\"keyword\">val</span>); <span class=\"comment\">// 监听子属性</span></span><br><span class=\"line\">    Object.defineProperty(<span class=\"keyword\">data</span>, key, &#123;</span><br><span class=\"line\">        enumerable: <span class=\"literal\">true</span>, <span class=\"comment\">// 可枚举</span></span><br><span class=\"line\">        configurable: <span class=\"literal\">false</span>, <span class=\"comment\">// 不能再define</span></span><br><span class=\"line\">        <span class=\"keyword\">get</span>: function() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">val</span>;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"keyword\">set</span>: function(newVal) &#123;</span><br><span class=\"line\">            console.log(<span class=\"string\">'哈哈哈，监听到值变化了 '</span>, <span class=\"keyword\">val</span>, <span class=\"string\">' --&gt; '</span>, newVal);</span><br><span class=\"line\">            <span class=\"keyword\">val</span> = newVal;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这样我们已经可以监听每个数据的变化了，那么监听到变化之后就是怎么通知订阅者了，所以接下来我们需要实现一个消息订阅器，很简单，维护一个数组，用来收集订阅者，数据变动触发notify，再调用订阅者的update方法，代码改善之后是这样：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ... 省略</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">defineReactive</span>(<span class=\"params\">data, key, val</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> dep = <span class=\"keyword\">new</span> Dep();</span><br><span class=\"line\">    observe(val); <span class=\"comment\">// 监听子属性</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(data, key, &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ... 省略</span></span><br><span class=\"line\">        set: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newVal</span>) </span>&#123;</span><br><span class=\"line\">        \t<span class=\"keyword\">if</span> (val === newVal) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'哈哈哈，监听到值变化了 '</span>, val, <span class=\"string\">' --&gt; '</span>, newVal);</span><br><span class=\"line\">            val = newVal;</span><br><span class=\"line\">            dep.notify(); <span class=\"comment\">// 通知所有订阅者</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dep</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subs = [];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Dep.prototype = &#123;</span><br><span class=\"line\">    addSub: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sub</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.subs.push(sub);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    notify: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.subs.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sub</span>) </span>&#123;</span><br><span class=\"line\">            sub.update();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>那么问题来了，谁是订阅者？怎么往订阅器添加订阅者？ 没错，上面的思路整理中我们已经明确订阅者应该是Watcher, 而且<code>var dep = new Dep()</code>;是在 <code>defineReactive</code>方法内部定义的，所以想通过<code>dep</code>添加订阅者，就必须要在闭包内操作，所以我们可以在<code>getter</code>里面动手脚：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Observer.js</span></span><br><span class=\"line\"><span class=\"comment\">// ...省略</span></span><br><span class=\"line\">Object.defineProperty(data, key, &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 由于需要在闭包内添加watcher，所以通过Dep定义一个全局target属性，暂存watcher, 添加完移除</span></span><br><span class=\"line\">\t\tDep.target &amp;&amp; dep.addDep(Dep.target);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> val;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">// ... 省略</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Watcher.js</span></span><br><span class=\"line\">Watcher.prototype = &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(key)</span> </span>&#123;</span><br><span class=\"line\">\t\tDep.target = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.value = data[key];\t<span class=\"comment\">// 这里会触发属性的getter，从而添加订阅者</span></span><br><span class=\"line\">\t\tDep.target = <span class=\"literal\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这里已经实现了一个Observer了，已经具备了监听数据和数据变化通知订阅者的功能，<a href=\"https://github.com/Myqilixiang/mvvm/blob/master/js/observer.js\" target=\"_blank\" rel=\"noopener\">完整代码</a>。那么接下来就是实现Compile了</p>\n<h3 id=\"2、实现Compile\"><a href=\"#2、实现Compile\" class=\"headerlink\" title=\"2、实现Compile\"></a>2、实现Compile</h3><p>compile主要做的事情是解析模板指令，将模板中的变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，更新视图，如图所示：<br><img src=\"/assets/img/mvvm-3.png\" alt=\"compiler\"><br>因为遍历解析的过程有多次操作dom节点，为提高性能和效率，会先将跟节点<code>el</code>转换成文档碎片<code>fragment</code>进行解析编译操作，解析完成，再将<code>fragment</code>添加回原来的真实dom节点中<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function Compile(el) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$el = <span class=\"keyword\">this</span>.isElementNode(el) ? el : document.querySelector(el);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.$el) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$fragment = <span class=\"keyword\">this</span>.node2Fragment(<span class=\"keyword\">this</span>.$el);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.<span class=\"keyword\">init</span>();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$el.appendChild(<span class=\"keyword\">this</span>.$fragment);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Compile.prototype = &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">init</span>: function() &#123; <span class=\"keyword\">this</span>.compileElement(<span class=\"keyword\">this</span>.$fragment); &#125;,</span><br><span class=\"line\">    node2Fragment: function(el) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> fragment = document.createDocumentFragment(), child;</span><br><span class=\"line\">        <span class=\"comment\">// 将原生节点拷贝到fragment</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (child = el.firstChild) &#123;</span><br><span class=\"line\">            fragment.appendChild(child);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fragment;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>compileElement方法将遍历所有节点及其子节点，进行扫描解析编译，调用对应的指令渲染函数进行数据渲染，并调用对应的指令更新函数进行绑定，详看代码及注释说明：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Compile.prototype = &#123;</span><br><span class=\"line\">\t// ... 省略</span><br><span class=\"line\">\tcompileElement: function(el) &#123;</span><br><span class=\"line\">        var childNodes = el.childNodes, me = this;</span><br><span class=\"line\">        [].slice.call(childNodes).forEach(function(<span class=\"keyword\">node</span><span class=\"title\">) &#123;</span></span><br><span class=\"line\"><span class=\"title\">            var</span> text = <span class=\"keyword\">node</span>.<span class=\"title\">textContent</span>;</span><br><span class=\"line\">            var reg = /\\&#123;\\&#123;(.*)\\&#125;\\&#125;/;\t// 表达式文本</span><br><span class=\"line\">            // 按元素节点方式编译</span><br><span class=\"line\">            if (me.isElementNode(<span class=\"keyword\">node</span><span class=\"title\">)) &#123;</span></span><br><span class=\"line\"><span class=\"title\">                me</span>.compile(<span class=\"keyword\">node</span><span class=\"title\">);</span></span><br><span class=\"line\"><span class=\"title\">            &#125; else</span> if (me.isTextNode(<span class=\"keyword\">node</span><span class=\"title\">) &amp;&amp; reg</span>.test(text)) &#123;</span><br><span class=\"line\">                me.compileText(<span class=\"keyword\">node</span><span class=\"title\">, RegExp</span>.$<span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            // 遍历编译子节点</span><br><span class=\"line\">            if (<span class=\"keyword\">node</span>.<span class=\"title\">childNodes</span> &amp;&amp; <span class=\"keyword\">node</span>.<span class=\"title\">childNodes</span>.length) &#123;</span><br><span class=\"line\">                me.compileElement(<span class=\"keyword\">node</span><span class=\"title\">);</span></span><br><span class=\"line\"><span class=\"title\">            &#125;</span></span><br><span class=\"line\"><span class=\"title\">        &#125;);</span></span><br><span class=\"line\"><span class=\"title\">    &#125;</span></span><br><span class=\"line\"><span class=\"title\">    // ...省略</span></span><br><span class=\"line\"><span class=\"title\">&#125;;</span></span><br></pre></td></tr></table></figure></p>\n<p>这里通过递归遍历保证了每个节点及子节点都会解析编译到，包括了<code>{</code>{}<code>}</code>表达式声明的文本节点。指令的声明规定是通过特定前缀的节点属性来标记，如<code>&lt;span v-text=&quot;content&quot; other-attr</code>中<code>v-text</code>便是指令，而<code>other-attr</code>不是指令，只是普通的属性。 监听数据、绑定更新函数的处理是在<code>compileUtil.bind()</code>这个方法中，通过<code>new Watcher()</code>添加回调来接收数据变化的通知<br>至此，一个简单的Compile就完成了，<a href=\"https://github.com/Myqilixiang/mvvm/blob/master/js/compile.js\" target=\"_blank\" rel=\"noopener\">完整代码</a>。接下来要看看Watcher这个订阅者的具体实现了</p>\n<h3 id=\"3、实现Watcher\"><a href=\"#3、实现Watcher\" class=\"headerlink\" title=\"3、实现Watcher\"></a>3、实现Watcher</h3><p>Watcher订阅者作为Observer和Compile之间通信的桥梁，主要做的事情是:<br>1、在自身实例化时往属性订阅器(dep)里面添加自己<br>2、自身必须有一个update()方法<br>3、待属性变动dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调，则功成身退。 如果有点乱，可以回顾下前面的思路整理<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Watcher</span><span class=\"params\">(vm, exp, cb)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.cb = cb;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.vm = vm;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.exp = exp;</span><br><span class=\"line\">    <span class=\"comment\">// 此处为了触发属性的getter，从而在dep添加自己，结合Observer更易理解</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.value = <span class=\"keyword\">this</span>.get(); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Watcher.prototype = &#123;</span><br><span class=\"line\">    update: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.run();\t<span class=\"comment\">// 属性值变化收到通知</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    run: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> value = <span class=\"keyword\">this</span>.get(); <span class=\"comment\">// 取到最新值</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> oldVal = <span class=\"keyword\">this</span>.value;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value !== oldVal) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.cb.call(<span class=\"keyword\">this</span>.vm, value, oldVal); <span class=\"comment\">// 执行Compile中绑定的回调，更新视图</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Dep.target = <span class=\"keyword\">this</span>;\t<span class=\"comment\">// 将当前订阅者指向自己</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> value = <span class=\"keyword\">this</span>.vm[exp];\t<span class=\"comment\">// 触发getter，添加自己到属性订阅器中</span></span><br><span class=\"line\">        Dep.target = <span class=\"literal\">null</span>;\t<span class=\"comment\">// 添加完毕，重置</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// 这里再次列出Observer和Dep，方便理解</span></span><br><span class=\"line\">Object.defineProperty(data, key, &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 由于需要在闭包内添加watcher，所以可以在Dep定义一个全局target属性，暂存watcher, 添加完移除</span></span><br><span class=\"line\">\t\tDep.target &amp;&amp; dep.addDep(Dep.target);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> val;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">// ... 省略</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">Dep.prototype = &#123;</span><br><span class=\"line\">    notify: <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.subs.forEach(<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(sub)</span> </span>&#123;</span><br><span class=\"line\">            sub.update(); <span class=\"comment\">// 调用订阅者的update方法，通知变化</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>实例化<code>Watcher</code>的时候，调用<code>get()</code>方法，通过<code>Dep.target = watcherInstance</code>标记订阅者是当前watcher实例，强行触发属性定义的<code>getter</code>方法，getter方法执行的时候，就会在属性的订阅器<code>dep</code>添加当前watcher实例，从而在属性值有变化的时候，watcherInstance就能收到更新通知。</p>\n<p>ok, Watcher也已经实现了，<a href=\"https://github.com/Myqilixiang/mvvm/blob/master/js/watcher.js\" target=\"_blank\" rel=\"noopener\">完整代码</a>。 基本上vue中数据绑定相关比较核心的几个模块也是这几个，猛戳<a href=\"https://github.com/vuejs/vue\" target=\"_blank\" rel=\"noopener\">这里</a> , 在<code>src</code>目录可找到vue源码。</p>\n<p>最后来讲讲MVVM入口文件的相关逻辑和实现吧，相对就比较简单了~ </p>\n<h3 id=\"4、实现MVVM\"><a href=\"#4、实现MVVM\" class=\"headerlink\" title=\"4、实现MVVM\"></a>4、实现MVVM</h3><p>MVVM作为数据绑定的入口，整合Observer、Compile和Watcher三者，通过Observer来监听自己的model数据变化，通过Compile来解析编译模板指令，最终利用Watcher搭起Observer和Compile之间的通信桥梁，达到数据变化 -&gt; 视图更新；视图交互变化(input) -&gt; 数据model变更的双向绑定效果。<br>一个简单的MVVM构造器是这样子：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function MVVM(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$options = options;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"keyword\">data</span> = <span class=\"keyword\">this</span>._data = <span class=\"keyword\">this</span>.$options.<span class=\"keyword\">data</span>;</span><br><span class=\"line\">    observe(<span class=\"keyword\">data</span>, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$compile = new Compile(options.el || document.body, <span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>但是这里有个问题，从代码中可看出监听的数据对象是options.data，每次需要更新视图，则必须通过<code>var vm = new MVVM({data:{name: &#39;kindeng&#39;}}); vm._data.name = &#39;dmq&#39;;</code>这样的方式来改变数据。<br>显然不符合我们一开始的期望，我们所期望的调用方式应该是这样的： <code>var vm = new MVVM({data: {name: &#39;kindeng&#39;}}); vm.name = &#39;dmq&#39;;</code><br>所以这里需要给MVVM实例添加一个属性代理的方法，使访问vm的属性代理为访问vm._data的属性，改造后的代码如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MVVM</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$options = options;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = <span class=\"keyword\">this</span>._data = <span class=\"keyword\">this</span>.$options.data, me = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 属性代理，实现 vm.xxx -&gt; vm._data.xxx</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.keys(data).forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</span><br><span class=\"line\">        me._proxy(key);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    observe(data, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$compile = <span class=\"keyword\">new</span> Compile(options.el || <span class=\"built_in\">document</span>.body, <span class=\"keyword\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">MVVM.prototype = &#123;</span><br><span class=\"line\">\t_proxy: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> me = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"built_in\">Object</span>.defineProperty(me, key, &#123;</span><br><span class=\"line\">            configurable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            get: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxyGetter</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> me._data[key];</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            set: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxySetter</span>(<span class=\"params\">newVal</span>) </span>&#123;</span><br><span class=\"line\">                me._data[key] = newVal;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>这里主要还是利用了<code>Object.defineProperty()</code>这个方法来劫持了vm实例对象的属性的读写权，使读写vm实例的属性转成读写了<code>vm._data</code>的属性值，达到鱼目混珠的效果<br>至此，全部模块和功能已经完成了，如本文开头所承诺的两点。一个简单的MVVM模块已经实现，其思想和原理大部分来自经过简化改造的vue源码，猛戳<a href=\"https://github.com/Myqilixiang/mvvm\" target=\"_blank\" rel=\"noopener\">这里</a>可以看到本文的所有相关代码。 由于本文内容偏实践，所以代码量较多，且不宜列出大篇幅代码，所以建议想深入了解的童鞋可以再次结合本文源代码来进行阅读，这样会更加容易理解和掌握。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本文主要围绕“几种实现双向绑定的做法”、“实现Observer”、“实现Compile”、“实现Watcher”、“实现MVVM”这几个模块来阐述了双向绑定的原理和实现。并根据思路流程渐进梳理讲解了一些细节思路和比较关键的内容点，以及通过展示部分关键代码讲述了怎样一步步实现一个双向绑定MVVM。<br><a href=\"http://www.jianshu.com/p/04d77c6b64ee\" target=\"_blank\" rel=\"noopener\">相关文章继续学习</a></p>\n"},{"layout":"post","title":"自定义脚手架","date":"2017-08-18T07:57:41.000Z","reward":true,"_content":"\n# 前言\n在实际的开发过程中，从零开始建立项目的结构是一件让人头疼的事情，所以各种各样的脚手架工具应运而生。笔者使用较多的yoeman，express-generator和vue-cli便是当中之一。它们功能丰富，但最核心的功能都是能够快速搭建一个完整的项目的结构，开发者只需要在生成的项目结构的基础上进行开发即可，非常简单高效。之前已经上传了koa-boilerplate项目，是一个koa2的模板，此次将其构建为脚手架，并发布。\n# 核心原理\n脚手架功能其实就是将模板文件拷贝到本地，模板可以内置在脚手架中，也可以部署在远程仓库。\n# 技术选型\n- `node.js`：整个脚手架工具的根本组成部分，推荐使用最新的版本。\n- `es6`：新版本的node.js对于es6的支持度已经非常高，使用es6能够极大地提升开发效率和开发感受。\n- `commander`：TJ大神开发的工具，能够更好地组织和处理命令行的输入。\n- `co`：TJ大神开发的异步流程控制工具，用更舒服的方式写异步代码。\n- `co-prompt`：还是TJ大神的作品……传统的命令行只能单行一次性地输入所有参数和选项，使用这个工具可以自动提供提示信息，并且分步接收用户的输入，体验类似npm init时的一步一步输入参数的过程。\n# 整体架构\n架构图如下：\n![construct](/assets/img/construct.jpg)\n首先明白`模版`的概念。一个模版就是一个项目的样板，包含项目的完整结构和信息。\n模版的信息都存放在一个叫做`templates.json`的文件当中。\n用户可以通过命令行对`templates.json`进行添加、删除、罗列的操作。\n通过选择不同的模版，koa-init会自动从远程仓库把相应的模板拉取到本地，完成项目的搭建。\n最终整个脚手架的文件结构如下：\n```\n =================\n  |__ bin\n    |__ koa\n  |__ command\n    |__ add.js\n    |__ delete.js\n    |__ init.js\n    |__ list.js\n  |__ node_modules\n  |__ package.json\n  |__ templates.json\n  ```\n# 入口文件\n首先建立项目，在`package.json`里面写入依赖并执行`npm install`：\n```\n\"dependencies\": {\n    \"chalk\": \"^1.1.3\",\n    \"co\": \"^4.6.0\",\n    \"co-prompt\": \"^1.0.0\",\n    \"commander\": \"^2.9.0\"\n  }\n  ```\n  在根目录下建立`\\bin`文件夹，在里面建立一个无后缀名的koa文件。这个`bin\\koa`文件是整个脚手架的入口文件，所以我们首先对它进行编写。\n  首先是一些初始化的代码：\n  ```\n  #!/usr/bin/env node --harmony\n'use strict'\n // 定义脚手架的文件路径\nprocess.env.NODE_PATH = __dirname + '/../node_modules/'\n\nconst program = require('commander')\n\n // 定义当前版本\nprogram\n    .version(require('../package').version )\n\n// 定义使用方法\nprogram\n    .usage('<command>')\n```\n从前文的架构图中可以知道，脚手架支持用户输入4种不同的命令。现在我们来写处理这4种命令的方法：\n```\nprogram\n    .command('add')\n    .description('Add a new template')\n  .alias('a')\n  .action(() => {\n    require('../command/add')()\n  })\n\nprogram\n    .command('list')\n    .description('List all the templates')\n    .alias('l')\n    .action(() => {\n        require('../command/list')()\n    })\n\nprogram\n    .command('init')\n    .description('Generate a new project')\n  .alias('i')\n  .action(() => {\n    require('../command/init')()\n  })\n\nprogram\n    .command('delete')\n    .description('Delete a template')\n    .alias('d')\n    .action(() => {\n        require('../command/delete')()\n    })\n```\n`commander`的具体使用方法在这里就不展开了，可以直接到[官网](https://github.com/tj/commander)去看详细的文档。\n最后别忘了处理参数和提供帮助信息：\n```\nprogram.parse(process.argv)\n\nif(!program.args.length){\n  program.help()\n}\n```\n完整的代码请看[这里](https://github.com/Myqilixiang/zsh-koa-cli/blob/master/bin/koa)。\n使用`node`运行这个文件，看到输出如下，证明入口文件已经编写完成了。\n```\nUsage: koa-init <command>\n\n\n  Commands:\n\n    add|a      Add a new template\n    list|l     List all the templates\n    init|i     Generate a new project\n    delete|d   Delete a template\n\n  Options:\n\n    -h, --help     output usage information\n    -V, --version  output the version number\n```\n# 处理用户输入\n在项目根目录下建立`\\command`文件夹，专门用来存放命令处理文件。\n在根目录下建立`templates.json`文件并写入如下内容，用来存放模版信息：\n```\n{\"tpl\":{}}\n```\n## 添加模板\n进入`\\command`并新建`add.js`文件：\n```\n'use strict'\nconst co = require('co')\nconst prompt = require('co-prompt')\nconst config = require('../templates')\nconst chalk = require('chalk')\nconst fs = require('fs')\n\nmodule.exports = () => {\n co(function *() {\n\n   // 分步接收用户输入的参数\n   let tplName = yield prompt('Template name: ')\n   let gitUrl = yield prompt('Git https link: ')\n   let branch = yield prompt('Branch: ')\n    \n   // 避免重复添加\n   if (!config.tpl[tplName]) {\n     config.tpl[tplName] = {}\n     config.tpl[tplName]['url'] = gitUrl.replace(/[\\u0000-\\u0019]/g, '') // 过滤unicode字符\n     config.tpl[tplName]['branch'] = branch\n   } else {\n     console.log(chalk.red('Template has already existed!'))\n     process.exit()\n   }\n   \n   // 把模板信息写入templates.json\n   fs.writeFile(__dirname + '/../templates.json', JSON.stringify(config), 'utf-8', (err) => {\n     if (err) console.log(err)\n     console.log(chalk.green('New template added!\\n'))\n     console.log(chalk.grey('The last template list is: \\n'))\n     console.log(config)\n     console.log('\\n')\n     process.exit()\n    })\n })\n}\n```\n## 删除模板\n同样的，在`\\command`文件夹下建立`delete.js`文件：\n```\n'use strict'\nconst co = require('co')\nconst prompt = require('co-prompt')\nconst config = require('../templates')\nconst chalk = require('chalk')\nconst fs = require('fs')\n\nmodule.exports = () => {\n    co(function *() {\n        // 接收用户输入的参数\n        let tplName = yield prompt('Template name: ')\n\n        // 删除对应的模板\n        if (config.tpl[tplName]) {\n            config.tpl[tplName] = undefined\n        } else {\n            console.log(chalk.red('Template does not exist!'))\n            process.exit()\n        }\n        \n        // 写入template.json\n        fs.writeFile(__dirname + '/../templates.json', JSON.stringify(config),     'utf-8', (err) => {\n            if (err) console.log(err)\n            console.log(chalk.green('Template deleted!'))\n            console.log(chalk.grey('The last template list is: \\n'))\n            console.log(config)\n            console.log('\\n')\n            process.exit()\n        })\n    })\n}\n```\n## 罗列模板\n建立`list.js`文件：\n```\n'use strict'\nconst config = require('../templates')\n\nmodule.exports = () => {\n     console.log(config.tpl)\n     process.exit()\n}\n```\n# 构建项目\n现在来到我们最重要的部分——构建项目。同样的，在`\\command`目录下新建一个叫做`init.js`的文件：\n```\nconst { prompt } = require('inquirer')\nconst { writeFile } = require('fs')\nconst { listTable } = require(`${__dirname}/../utils`)\nconst { resolve } = require('path')\nconst chalk = require('chalk')\nconst download = require('download-git-repo')\nconst ora = require('ora')\n\nlet tplList = require(`${__dirname}/../templates`)\n\nconst question = [\n  {\n    type: 'input',\n    name: 'name',\n    message: 'Template name:',\n    validate (val) {\n      if (tplList[val]) {\n        return true\n      } else if (val === '') {\n        return 'Name is required!'\n      } else if (!tplList[val]) {\n        return 'This template doesn\\'t exists.'\n      }\n    }\n  },\n  {\n    type: 'input',\n    name: 'project',\n    message: 'Project name:',\n    validate (val) {\n      if (val !== '') {\n        return true\n      }\n      return 'Project name is required!'\n    }\n  },\n  {\n    type: 'input',\n    name: 'place',\n    message: 'Where to init the project:',\n    default: './'\n  }\n]\n\nmodule.exports = prompt(question).then(({ name, project, place }) => {\n  const gitPlace = tplList[name]['owner/name']\n  const gitBranch = tplList[name]['branch']\n  const spinner = ora('Downloading template...')\n\n  spinner.start()\n\n  download(`${gitPlace}#${gitBranch}`, `${place}/${project}`, (err) => {\n    if (err) {\n      console.log(chalk.red(err))\n      process.exit()\n    }\n    spinner.stop()\n    console.log(chalk.green('New project has been initialized successfully!'))\n  })\n})\n\n```\n这里使用了[download-git-repo](https://github.com/flipxfx/download-git-repo)用于从远程仓库克隆到自定义目录。\n# 全局使用\n为了可以全局使用，我们需要在`package.json`里面设置一下：\n```\n\"bin\": {\n    \"koa-init\": \"bin/koa\"\n  },\n  ```\n  本地调试的时候，在根目录下执行\n  ```\n  npm link\n  ```\n  即可把koa-cli命令绑定到全局，以后就可以直接以koa-init作为命令开头而无需敲入长长的node koa之类的命令了。\n  # 部署\n  将完成的项目部署在git上\n  # 发布脚手架\n  参考[npm包发布](https://segmentfault.com/a/1190000006250554)发布脚手架\n  # 测试使用\n  发布成功后，运行下列命令安装\n```\n   npm install zsh-koa --save\n```\n  构建工程\n```\n zsh-koa init\n```\n  按照提示输入工程名和下载位置\n  <font color=#00ffff size=6>End</font>\n","source":"_posts/自定义脚手架.md","raw":"---\nlayout: post\ntitle: 自定义脚手架\ndate: 2017-08-18 15:57:41\nreward: true\ntags: \n\t- commander \n\t- init\n    - cli\n---\n\n# 前言\n在实际的开发过程中，从零开始建立项目的结构是一件让人头疼的事情，所以各种各样的脚手架工具应运而生。笔者使用较多的yoeman，express-generator和vue-cli便是当中之一。它们功能丰富，但最核心的功能都是能够快速搭建一个完整的项目的结构，开发者只需要在生成的项目结构的基础上进行开发即可，非常简单高效。之前已经上传了koa-boilerplate项目，是一个koa2的模板，此次将其构建为脚手架，并发布。\n# 核心原理\n脚手架功能其实就是将模板文件拷贝到本地，模板可以内置在脚手架中，也可以部署在远程仓库。\n# 技术选型\n- `node.js`：整个脚手架工具的根本组成部分，推荐使用最新的版本。\n- `es6`：新版本的node.js对于es6的支持度已经非常高，使用es6能够极大地提升开发效率和开发感受。\n- `commander`：TJ大神开发的工具，能够更好地组织和处理命令行的输入。\n- `co`：TJ大神开发的异步流程控制工具，用更舒服的方式写异步代码。\n- `co-prompt`：还是TJ大神的作品……传统的命令行只能单行一次性地输入所有参数和选项，使用这个工具可以自动提供提示信息，并且分步接收用户的输入，体验类似npm init时的一步一步输入参数的过程。\n# 整体架构\n架构图如下：\n![construct](/assets/img/construct.jpg)\n首先明白`模版`的概念。一个模版就是一个项目的样板，包含项目的完整结构和信息。\n模版的信息都存放在一个叫做`templates.json`的文件当中。\n用户可以通过命令行对`templates.json`进行添加、删除、罗列的操作。\n通过选择不同的模版，koa-init会自动从远程仓库把相应的模板拉取到本地，完成项目的搭建。\n最终整个脚手架的文件结构如下：\n```\n =================\n  |__ bin\n    |__ koa\n  |__ command\n    |__ add.js\n    |__ delete.js\n    |__ init.js\n    |__ list.js\n  |__ node_modules\n  |__ package.json\n  |__ templates.json\n  ```\n# 入口文件\n首先建立项目，在`package.json`里面写入依赖并执行`npm install`：\n```\n\"dependencies\": {\n    \"chalk\": \"^1.1.3\",\n    \"co\": \"^4.6.0\",\n    \"co-prompt\": \"^1.0.0\",\n    \"commander\": \"^2.9.0\"\n  }\n  ```\n  在根目录下建立`\\bin`文件夹，在里面建立一个无后缀名的koa文件。这个`bin\\koa`文件是整个脚手架的入口文件，所以我们首先对它进行编写。\n  首先是一些初始化的代码：\n  ```\n  #!/usr/bin/env node --harmony\n'use strict'\n // 定义脚手架的文件路径\nprocess.env.NODE_PATH = __dirname + '/../node_modules/'\n\nconst program = require('commander')\n\n // 定义当前版本\nprogram\n    .version(require('../package').version )\n\n// 定义使用方法\nprogram\n    .usage('<command>')\n```\n从前文的架构图中可以知道，脚手架支持用户输入4种不同的命令。现在我们来写处理这4种命令的方法：\n```\nprogram\n    .command('add')\n    .description('Add a new template')\n  .alias('a')\n  .action(() => {\n    require('../command/add')()\n  })\n\nprogram\n    .command('list')\n    .description('List all the templates')\n    .alias('l')\n    .action(() => {\n        require('../command/list')()\n    })\n\nprogram\n    .command('init')\n    .description('Generate a new project')\n  .alias('i')\n  .action(() => {\n    require('../command/init')()\n  })\n\nprogram\n    .command('delete')\n    .description('Delete a template')\n    .alias('d')\n    .action(() => {\n        require('../command/delete')()\n    })\n```\n`commander`的具体使用方法在这里就不展开了，可以直接到[官网](https://github.com/tj/commander)去看详细的文档。\n最后别忘了处理参数和提供帮助信息：\n```\nprogram.parse(process.argv)\n\nif(!program.args.length){\n  program.help()\n}\n```\n完整的代码请看[这里](https://github.com/Myqilixiang/zsh-koa-cli/blob/master/bin/koa)。\n使用`node`运行这个文件，看到输出如下，证明入口文件已经编写完成了。\n```\nUsage: koa-init <command>\n\n\n  Commands:\n\n    add|a      Add a new template\n    list|l     List all the templates\n    init|i     Generate a new project\n    delete|d   Delete a template\n\n  Options:\n\n    -h, --help     output usage information\n    -V, --version  output the version number\n```\n# 处理用户输入\n在项目根目录下建立`\\command`文件夹，专门用来存放命令处理文件。\n在根目录下建立`templates.json`文件并写入如下内容，用来存放模版信息：\n```\n{\"tpl\":{}}\n```\n## 添加模板\n进入`\\command`并新建`add.js`文件：\n```\n'use strict'\nconst co = require('co')\nconst prompt = require('co-prompt')\nconst config = require('../templates')\nconst chalk = require('chalk')\nconst fs = require('fs')\n\nmodule.exports = () => {\n co(function *() {\n\n   // 分步接收用户输入的参数\n   let tplName = yield prompt('Template name: ')\n   let gitUrl = yield prompt('Git https link: ')\n   let branch = yield prompt('Branch: ')\n    \n   // 避免重复添加\n   if (!config.tpl[tplName]) {\n     config.tpl[tplName] = {}\n     config.tpl[tplName]['url'] = gitUrl.replace(/[\\u0000-\\u0019]/g, '') // 过滤unicode字符\n     config.tpl[tplName]['branch'] = branch\n   } else {\n     console.log(chalk.red('Template has already existed!'))\n     process.exit()\n   }\n   \n   // 把模板信息写入templates.json\n   fs.writeFile(__dirname + '/../templates.json', JSON.stringify(config), 'utf-8', (err) => {\n     if (err) console.log(err)\n     console.log(chalk.green('New template added!\\n'))\n     console.log(chalk.grey('The last template list is: \\n'))\n     console.log(config)\n     console.log('\\n')\n     process.exit()\n    })\n })\n}\n```\n## 删除模板\n同样的，在`\\command`文件夹下建立`delete.js`文件：\n```\n'use strict'\nconst co = require('co')\nconst prompt = require('co-prompt')\nconst config = require('../templates')\nconst chalk = require('chalk')\nconst fs = require('fs')\n\nmodule.exports = () => {\n    co(function *() {\n        // 接收用户输入的参数\n        let tplName = yield prompt('Template name: ')\n\n        // 删除对应的模板\n        if (config.tpl[tplName]) {\n            config.tpl[tplName] = undefined\n        } else {\n            console.log(chalk.red('Template does not exist!'))\n            process.exit()\n        }\n        \n        // 写入template.json\n        fs.writeFile(__dirname + '/../templates.json', JSON.stringify(config),     'utf-8', (err) => {\n            if (err) console.log(err)\n            console.log(chalk.green('Template deleted!'))\n            console.log(chalk.grey('The last template list is: \\n'))\n            console.log(config)\n            console.log('\\n')\n            process.exit()\n        })\n    })\n}\n```\n## 罗列模板\n建立`list.js`文件：\n```\n'use strict'\nconst config = require('../templates')\n\nmodule.exports = () => {\n     console.log(config.tpl)\n     process.exit()\n}\n```\n# 构建项目\n现在来到我们最重要的部分——构建项目。同样的，在`\\command`目录下新建一个叫做`init.js`的文件：\n```\nconst { prompt } = require('inquirer')\nconst { writeFile } = require('fs')\nconst { listTable } = require(`${__dirname}/../utils`)\nconst { resolve } = require('path')\nconst chalk = require('chalk')\nconst download = require('download-git-repo')\nconst ora = require('ora')\n\nlet tplList = require(`${__dirname}/../templates`)\n\nconst question = [\n  {\n    type: 'input',\n    name: 'name',\n    message: 'Template name:',\n    validate (val) {\n      if (tplList[val]) {\n        return true\n      } else if (val === '') {\n        return 'Name is required!'\n      } else if (!tplList[val]) {\n        return 'This template doesn\\'t exists.'\n      }\n    }\n  },\n  {\n    type: 'input',\n    name: 'project',\n    message: 'Project name:',\n    validate (val) {\n      if (val !== '') {\n        return true\n      }\n      return 'Project name is required!'\n    }\n  },\n  {\n    type: 'input',\n    name: 'place',\n    message: 'Where to init the project:',\n    default: './'\n  }\n]\n\nmodule.exports = prompt(question).then(({ name, project, place }) => {\n  const gitPlace = tplList[name]['owner/name']\n  const gitBranch = tplList[name]['branch']\n  const spinner = ora('Downloading template...')\n\n  spinner.start()\n\n  download(`${gitPlace}#${gitBranch}`, `${place}/${project}`, (err) => {\n    if (err) {\n      console.log(chalk.red(err))\n      process.exit()\n    }\n    spinner.stop()\n    console.log(chalk.green('New project has been initialized successfully!'))\n  })\n})\n\n```\n这里使用了[download-git-repo](https://github.com/flipxfx/download-git-repo)用于从远程仓库克隆到自定义目录。\n# 全局使用\n为了可以全局使用，我们需要在`package.json`里面设置一下：\n```\n\"bin\": {\n    \"koa-init\": \"bin/koa\"\n  },\n  ```\n  本地调试的时候，在根目录下执行\n  ```\n  npm link\n  ```\n  即可把koa-cli命令绑定到全局，以后就可以直接以koa-init作为命令开头而无需敲入长长的node koa之类的命令了。\n  # 部署\n  将完成的项目部署在git上\n  # 发布脚手架\n  参考[npm包发布](https://segmentfault.com/a/1190000006250554)发布脚手架\n  # 测试使用\n  发布成功后，运行下列命令安装\n```\n   npm install zsh-koa --save\n```\n  构建工程\n```\n zsh-koa init\n```\n  按照提示输入工程名和下载位置\n  <font color=#00ffff size=6>End</font>\n","slug":"自定义脚手架","published":1,"updated":"2020-03-12T13:55:48.640Z","comments":1,"photos":[],"link":"","_id":"ck7otizql000f7guio1hxmrb6","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>在实际的开发过程中，从零开始建立项目的结构是一件让人头疼的事情，所以各种各样的脚手架工具应运而生。笔者使用较多的yoeman，express-generator和vue-cli便是当中之一。它们功能丰富，但最核心的功能都是能够快速搭建一个完整的项目的结构，开发者只需要在生成的项目结构的基础上进行开发即可，非常简单高效。之前已经上传了koa-boilerplate项目，是一个koa2的模板，此次将其构建为脚手架，并发布。</p>\n<h1 id=\"核心原理\"><a href=\"#核心原理\" class=\"headerlink\" title=\"核心原理\"></a>核心原理</h1><p>脚手架功能其实就是将模板文件拷贝到本地，模板可以内置在脚手架中，也可以部署在远程仓库。</p>\n<h1 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h1><ul>\n<li><code>node.js</code>：整个脚手架工具的根本组成部分，推荐使用最新的版本。</li>\n<li><code>es6</code>：新版本的node.js对于es6的支持度已经非常高，使用es6能够极大地提升开发效率和开发感受。</li>\n<li><code>commander</code>：TJ大神开发的工具，能够更好地组织和处理命令行的输入。</li>\n<li><code>co</code>：TJ大神开发的异步流程控制工具，用更舒服的方式写异步代码。</li>\n<li><code>co-prompt</code>：还是TJ大神的作品……传统的命令行只能单行一次性地输入所有参数和选项，使用这个工具可以自动提供提示信息，并且分步接收用户的输入，体验类似npm init时的一步一步输入参数的过程。<h1 id=\"整体架构\"><a href=\"#整体架构\" class=\"headerlink\" title=\"整体架构\"></a>整体架构</h1>架构图如下：<br><img src=\"/assets/img/construct.jpg\" alt=\"construct\"><br>首先明白<code>模版</code>的概念。一个模版就是一个项目的样板，包含项目的完整结构和信息。<br>模版的信息都存放在一个叫做<code>templates.json</code>的文件当中。<br>用户可以通过命令行对<code>templates.json</code>进行添加、删除、罗列的操作。<br>通过选择不同的模版，koa-init会自动从远程仓库把相应的模板拉取到本地，完成项目的搭建。<br>最终整个脚手架的文件结构如下：<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=================</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> bin</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> koa</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> command</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> add.js</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> <span class=\"built_in\">delete</span>.js</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> init.js</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> list.js</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> node_modules</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> package.json</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> templates.json</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"入口文件\"><a href=\"#入口文件\" class=\"headerlink\" title=\"入口文件\"></a>入口文件</h1><p>首先建立项目，在<code>package.json</code>里面写入依赖并执行<code>npm install</code>：<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"chalk\"</span>: <span class=\"string\">\"^1.1.3\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"co\"</span>: <span class=\"string\">\"^4.6.0\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"co-prompt\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"commander\"</span>: <span class=\"string\">\"^2.9.0\"</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>  在根目录下建立<code>\\bin</code>文件夹，在里面建立一个无后缀名的koa文件。这个<code>bin\\koa</code>文件是整个脚手架的入口文件，所以我们首先对它进行编写。<br>  首先是一些初始化的代码：<br>  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  #!<span class=\"regexp\">/usr/</span>bin/env node --harmony</span><br><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"> <span class=\"comment\">// 定义脚手架的文件路径</span></span><br><span class=\"line\">process.env.NODE_PATH = __dirname + <span class=\"string\">'/../node_modules/'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> program = <span class=\"built_in\">require</span>(<span class=\"string\">'commander'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">// 定义当前版本</span></span><br><span class=\"line\">program</span><br><span class=\"line\">    .version(<span class=\"built_in\">require</span>(<span class=\"string\">'../package'</span>).version )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义使用方法</span></span><br><span class=\"line\">program</span><br><span class=\"line\">    .usage(<span class=\"string\">'&lt;command&gt;'</span>)</span><br></pre></td></tr></table></figure></p>\n<p>从前文的架构图中可以知道，脚手架支持用户输入4种不同的命令。现在我们来写处理这4种命令的方法：<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'add'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'Add a new template'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.alias</span>(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/add'</span>)()</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'list'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'List all the templates'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.alias</span>(<span class=\"string\">'l'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/list'</span>)()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'init'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'Generate a new project'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.alias</span>(<span class=\"string\">'i'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/init'</span>)()</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'delete'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'Delete a template'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.alias</span>(<span class=\"string\">'d'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/delete'</span>)()</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure></p>\n<p><code>commander</code>的具体使用方法在这里就不展开了，可以直接到<a href=\"https://github.com/tj/commander\" target=\"_blank\" rel=\"noopener\">官网</a>去看详细的文档。<br>最后别忘了处理参数和提供帮助信息：<br><figure class=\"highlight fortran\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">program</span>.<span class=\"title\">parse</span><span class=\"params\">(process.argv)</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"comment\">!program.args.length)&#123;</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">program</span>.<span class=\"title\">help</span><span class=\"params\">()</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>完整的代码请看<a href=\"https://github.com/Myqilixiang/zsh-koa-cli/blob/master/bin/koa\" target=\"_blank\" rel=\"noopener\">这里</a>。<br>使用<code>node</code>运行这个文件，看到输出如下，证明入口文件已经编写完成了。<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">Usage</span>: koa-init &lt;command&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attribute\">Commands:</span></span><br><span class=\"line\"><span class=\"attribute\"></span></span><br><span class=\"line\">    add|a      Add a new template</span><br><span class=\"line\">    list|l     List all the templates</span><br><span class=\"line\">    init|i     Generate a new project</span><br><span class=\"line\">    delete|d   Delete a template</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attribute\">Options:</span></span><br><span class=\"line\"><span class=\"attribute\"></span></span><br><span class=\"line\">    -h, --help     output usage information</span><br><span class=\"line\">    -V, --version  output the version number</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"处理用户输入\"><a href=\"#处理用户输入\" class=\"headerlink\" title=\"处理用户输入\"></a>处理用户输入</h1><p>在项目根目录下建立<code>\\command</code>文件夹，专门用来存放命令处理文件。<br>在根目录下建立<code>templates.json</code>文件并写入如下内容，用来存放模版信息：<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"attr\">\"tpl\"</span>:&#123;&#125;&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"添加模板\"><a href=\"#添加模板\" class=\"headerlink\" title=\"添加模板\"></a>添加模板</h2><p>进入<code>\\command</code>并新建<code>add.js</code>文件：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> co = <span class=\"built_in\">require</span>(<span class=\"string\">'co'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> prompt = <span class=\"built_in\">require</span>(<span class=\"string\">'co-prompt'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../templates'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"> co(<span class=\"function\"><span class=\"keyword\">function</span> *(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// 分步接收用户输入的参数</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> tplName = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Template name: '</span>)</span><br><span class=\"line\">   <span class=\"keyword\">let</span> gitUrl = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Git https link: '</span>)</span><br><span class=\"line\">   <span class=\"keyword\">let</span> branch = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Branch: '</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"comment\">// 避免重复添加</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!config.tpl[tplName]) &#123;</span><br><span class=\"line\">     config.tpl[tplName] = &#123;&#125;</span><br><span class=\"line\">     config.tpl[tplName][<span class=\"string\">'url'</span>] = gitUrl.replace(<span class=\"regexp\">/[\\u0000-\\u0019]/g</span>, <span class=\"string\">''</span>) <span class=\"comment\">// 过滤unicode字符</span></span><br><span class=\"line\">     config.tpl[tplName][<span class=\"string\">'branch'</span>] = branch</span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(chalk.red(<span class=\"string\">'Template has already existed!'</span>))</span><br><span class=\"line\">     process.exit()</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">// 把模板信息写入templates.json</span></span><br><span class=\"line\">   fs.writeFile(__dirname + <span class=\"string\">'/../templates.json'</span>, <span class=\"built_in\">JSON</span>.stringify(config), <span class=\"string\">'utf-8'</span>, (err) =&gt; &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (err) <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(chalk.green(<span class=\"string\">'New template added!\\n'</span>))</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(chalk.grey(<span class=\"string\">'The last template list is: \\n'</span>))</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(config)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">     process.exit()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"> &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"删除模板\"><a href=\"#删除模板\" class=\"headerlink\" title=\"删除模板\"></a>删除模板</h2><p>同样的，在<code>\\command</code>文件夹下建立<code>delete.js</code>文件：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> co = <span class=\"built_in\">require</span>(<span class=\"string\">'co'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> prompt = <span class=\"built_in\">require</span>(<span class=\"string\">'co-prompt'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../templates'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    co(<span class=\"function\"><span class=\"keyword\">function</span> *(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 接收用户输入的参数</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> tplName = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Template name: '</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 删除对应的模板</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (config.tpl[tplName]) &#123;</span><br><span class=\"line\">            config.tpl[tplName] = <span class=\"literal\">undefined</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(chalk.red(<span class=\"string\">'Template does not exist!'</span>))</span><br><span class=\"line\">            process.exit()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 写入template.json</span></span><br><span class=\"line\">        fs.writeFile(__dirname + <span class=\"string\">'/../templates.json'</span>, <span class=\"built_in\">JSON</span>.stringify(config),     <span class=\"string\">'utf-8'</span>, (err) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(chalk.green(<span class=\"string\">'Template deleted!'</span>))</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(chalk.grey(<span class=\"string\">'The last template list is: \\n'</span>))</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(config)</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">            process.exit()</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"罗列模板\"><a href=\"#罗列模板\" class=\"headerlink\" title=\"罗列模板\"></a>罗列模板</h2><p>建立<code>list.js</code>文件：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../templates'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(config.tpl)</span><br><span class=\"line\">     process.exit()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"构建项目\"><a href=\"#构建项目\" class=\"headerlink\" title=\"构建项目\"></a>构建项目</h1><p>现在来到我们最重要的部分——构建项目。同样的，在<code>\\command</code>目录下新建一个叫做<code>init.js</code>的文件：<br><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; prompt &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'inquirer'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; writeFile &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; listTable &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">`<span class=\"subst\">$&#123;__dirname&#125;</span>/../utils`</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> download = <span class=\"built_in\">require</span>(<span class=\"string\">'download-git-repo'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> ora = <span class=\"built_in\">require</span>(<span class=\"string\">'ora'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> tplList = <span class=\"built_in\">require</span>(<span class=\"string\">`<span class=\"subst\">$&#123;__dirname&#125;</span>/../templates`</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> question = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">type</span>: <span class=\"string\">'input'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'name'</span>,</span><br><span class=\"line\">    message: <span class=\"string\">'Template name:'</span>,</span><br><span class=\"line\">    validate (val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (tplList[val]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (val === <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Name is required!'</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!tplList[val]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'This template doesn\\'t exists.'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">type</span>: <span class=\"string\">'input'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'project'</span>,</span><br><span class=\"line\">    message: <span class=\"string\">'Project name:'</span>,</span><br><span class=\"line\">    validate (val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (val !== <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Project name is required!'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">type</span>: <span class=\"string\">'input'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'place'</span>,</span><br><span class=\"line\">    message: <span class=\"string\">'Where to init the project:'</span>,</span><br><span class=\"line\">    <span class=\"keyword\">default</span>: <span class=\"string\">'./'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = prompt(question).then(<span class=\"function\">(<span class=\"params\">&#123; name, project, place &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> gitPlace = tplList[name][<span class=\"string\">'owner/name'</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> gitBranch = tplList[name][<span class=\"string\">'branch'</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> spinner = ora(<span class=\"string\">'Downloading template...'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  spinner.start()</span><br><span class=\"line\"></span><br><span class=\"line\">  download(<span class=\"string\">`<span class=\"subst\">$&#123;gitPlace&#125;</span>#<span class=\"subst\">$&#123;gitBranch&#125;</span>`</span>, <span class=\"string\">`<span class=\"subst\">$&#123;place&#125;</span>/<span class=\"subst\">$&#123;project&#125;</span>`</span>, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(chalk.red(err))</span><br><span class=\"line\">      process.exit()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    spinner.stop()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(chalk.green(<span class=\"string\">'New project has been initialized successfully!'</span>))</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>这里使用了<a href=\"https://github.com/flipxfx/download-git-repo\" target=\"_blank\" rel=\"noopener\">download-git-repo</a>用于从远程仓库克隆到自定义目录。</p>\n<h1 id=\"全局使用\"><a href=\"#全局使用\" class=\"headerlink\" title=\"全局使用\"></a>全局使用</h1><p>为了可以全局使用，我们需要在<code>package.json</code>里面设置一下：<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"bin\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"koa-init\"</span>: <span class=\"string\">\"bin/koa\"</span></span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure></p>\n<p>  本地调试的时候，在根目录下执行<br>  <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">npm</span> link</span><br></pre></td></tr></table></figure></p>\n<p>  即可把koa-cli命令绑定到全局，以后就可以直接以koa-init作为命令开头而无需敲入长长的node koa之类的命令了。</p>\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><p>  将完成的项目部署在git上</p>\n<h1 id=\"发布脚手架\"><a href=\"#发布脚手架\" class=\"headerlink\" title=\"发布脚手架\"></a>发布脚手架</h1><p>  参考<a href=\"https://segmentfault.com/a/1190000006250554\" target=\"_blank\" rel=\"noopener\">npm包发布</a>发布脚手架</p>\n<h1 id=\"测试使用\"><a href=\"#测试使用\" class=\"headerlink\" title=\"测试使用\"></a>测试使用</h1><p>  发布成功后，运行下列命令安装<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm <span class=\"keyword\">install</span> zsh-koa <span class=\"comment\">--save</span></span><br></pre></td></tr></table></figure></p>\n<p>  构建工程<br><figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">zsh-koa init</span></span><br></pre></td></tr></table></figure></p>\n<p>  按照提示输入工程名和下载位置<br>  <font color=\"#00ffff\" size=\"6\">End</font></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>在实际的开发过程中，从零开始建立项目的结构是一件让人头疼的事情，所以各种各样的脚手架工具应运而生。笔者使用较多的yoeman，express-generator和vue-cli便是当中之一。它们功能丰富，但最核心的功能都是能够快速搭建一个完整的项目的结构，开发者只需要在生成的项目结构的基础上进行开发即可，非常简单高效。之前已经上传了koa-boilerplate项目，是一个koa2的模板，此次将其构建为脚手架，并发布。</p>\n<h1 id=\"核心原理\"><a href=\"#核心原理\" class=\"headerlink\" title=\"核心原理\"></a>核心原理</h1><p>脚手架功能其实就是将模板文件拷贝到本地，模板可以内置在脚手架中，也可以部署在远程仓库。</p>\n<h1 id=\"技术选型\"><a href=\"#技术选型\" class=\"headerlink\" title=\"技术选型\"></a>技术选型</h1><ul>\n<li><code>node.js</code>：整个脚手架工具的根本组成部分，推荐使用最新的版本。</li>\n<li><code>es6</code>：新版本的node.js对于es6的支持度已经非常高，使用es6能够极大地提升开发效率和开发感受。</li>\n<li><code>commander</code>：TJ大神开发的工具，能够更好地组织和处理命令行的输入。</li>\n<li><code>co</code>：TJ大神开发的异步流程控制工具，用更舒服的方式写异步代码。</li>\n<li><code>co-prompt</code>：还是TJ大神的作品……传统的命令行只能单行一次性地输入所有参数和选项，使用这个工具可以自动提供提示信息，并且分步接收用户的输入，体验类似npm init时的一步一步输入参数的过程。<h1 id=\"整体架构\"><a href=\"#整体架构\" class=\"headerlink\" title=\"整体架构\"></a>整体架构</h1>架构图如下：<br><img src=\"/assets/img/construct.jpg\" alt=\"construct\"><br>首先明白<code>模版</code>的概念。一个模版就是一个项目的样板，包含项目的完整结构和信息。<br>模版的信息都存放在一个叫做<code>templates.json</code>的文件当中。<br>用户可以通过命令行对<code>templates.json</code>进行添加、删除、罗列的操作。<br>通过选择不同的模版，koa-init会自动从远程仓库把相应的模板拉取到本地，完成项目的搭建。<br>最终整个脚手架的文件结构如下：<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=================</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> bin</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> koa</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> command</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> add.js</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> <span class=\"built_in\">delete</span>.js</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> init.js</span><br><span class=\"line\">   |<span class=\"symbol\">__</span> list.js</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> node_modules</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> package.json</span><br><span class=\"line\"> |<span class=\"symbol\">__</span> templates.json</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"入口文件\"><a href=\"#入口文件\" class=\"headerlink\" title=\"入口文件\"></a>入口文件</h1><p>首先建立项目，在<code>package.json</code>里面写入依赖并执行<code>npm install</code>：<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"chalk\"</span>: <span class=\"string\">\"^1.1.3\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"co\"</span>: <span class=\"string\">\"^4.6.0\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"co-prompt\"</span>: <span class=\"string\">\"^1.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"commander\"</span>: <span class=\"string\">\"^2.9.0\"</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>  在根目录下建立<code>\\bin</code>文件夹，在里面建立一个无后缀名的koa文件。这个<code>bin\\koa</code>文件是整个脚手架的入口文件，所以我们首先对它进行编写。<br>  首先是一些初始化的代码：<br>  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  #!<span class=\"regexp\">/usr/</span>bin/env node --harmony</span><br><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"> <span class=\"comment\">// 定义脚手架的文件路径</span></span><br><span class=\"line\">process.env.NODE_PATH = __dirname + <span class=\"string\">'/../node_modules/'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> program = <span class=\"built_in\">require</span>(<span class=\"string\">'commander'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">// 定义当前版本</span></span><br><span class=\"line\">program</span><br><span class=\"line\">    .version(<span class=\"built_in\">require</span>(<span class=\"string\">'../package'</span>).version )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义使用方法</span></span><br><span class=\"line\">program</span><br><span class=\"line\">    .usage(<span class=\"string\">'&lt;command&gt;'</span>)</span><br></pre></td></tr></table></figure></p>\n<p>从前文的架构图中可以知道，脚手架支持用户输入4种不同的命令。现在我们来写处理这4种命令的方法：<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'add'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'Add a new template'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.alias</span>(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/add'</span>)()</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'list'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'List all the templates'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.alias</span>(<span class=\"string\">'l'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/list'</span>)()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'init'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'Generate a new project'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.alias</span>(<span class=\"string\">'i'</span>)</span><br><span class=\"line\">  <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/init'</span>)()</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">program</span></span><br><span class=\"line\">    <span class=\"selector-class\">.command</span>(<span class=\"string\">'delete'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.description</span>(<span class=\"string\">'Delete a template'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.alias</span>(<span class=\"string\">'d'</span>)</span><br><span class=\"line\">    <span class=\"selector-class\">.action</span>(() =&gt; &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">require</span>(<span class=\"string\">'../command/delete'</span>)()</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure></p>\n<p><code>commander</code>的具体使用方法在这里就不展开了，可以直接到<a href=\"https://github.com/tj/commander\" target=\"_blank\" rel=\"noopener\">官网</a>去看详细的文档。<br>最后别忘了处理参数和提供帮助信息：<br><figure class=\"highlight fortran\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">program</span>.<span class=\"title\">parse</span><span class=\"params\">(process.argv)</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"comment\">!program.args.length)&#123;</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">program</span>.<span class=\"title\">help</span><span class=\"params\">()</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>完整的代码请看<a href=\"https://github.com/Myqilixiang/zsh-koa-cli/blob/master/bin/koa\" target=\"_blank\" rel=\"noopener\">这里</a>。<br>使用<code>node</code>运行这个文件，看到输出如下，证明入口文件已经编写完成了。<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">Usage</span>: koa-init &lt;command&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attribute\">Commands:</span></span><br><span class=\"line\"><span class=\"attribute\"></span></span><br><span class=\"line\">    add|a      Add a new template</span><br><span class=\"line\">    list|l     List all the templates</span><br><span class=\"line\">    init|i     Generate a new project</span><br><span class=\"line\">    delete|d   Delete a template</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attribute\">Options:</span></span><br><span class=\"line\"><span class=\"attribute\"></span></span><br><span class=\"line\">    -h, --help     output usage information</span><br><span class=\"line\">    -V, --version  output the version number</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"处理用户输入\"><a href=\"#处理用户输入\" class=\"headerlink\" title=\"处理用户输入\"></a>处理用户输入</h1><p>在项目根目录下建立<code>\\command</code>文件夹，专门用来存放命令处理文件。<br>在根目录下建立<code>templates.json</code>文件并写入如下内容，用来存放模版信息：<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"attr\">\"tpl\"</span>:&#123;&#125;&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"添加模板\"><a href=\"#添加模板\" class=\"headerlink\" title=\"添加模板\"></a>添加模板</h2><p>进入<code>\\command</code>并新建<code>add.js</code>文件：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> co = <span class=\"built_in\">require</span>(<span class=\"string\">'co'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> prompt = <span class=\"built_in\">require</span>(<span class=\"string\">'co-prompt'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../templates'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"> co(<span class=\"function\"><span class=\"keyword\">function</span> *(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// 分步接收用户输入的参数</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> tplName = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Template name: '</span>)</span><br><span class=\"line\">   <span class=\"keyword\">let</span> gitUrl = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Git https link: '</span>)</span><br><span class=\"line\">   <span class=\"keyword\">let</span> branch = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Branch: '</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"comment\">// 避免重复添加</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!config.tpl[tplName]) &#123;</span><br><span class=\"line\">     config.tpl[tplName] = &#123;&#125;</span><br><span class=\"line\">     config.tpl[tplName][<span class=\"string\">'url'</span>] = gitUrl.replace(<span class=\"regexp\">/[\\u0000-\\u0019]/g</span>, <span class=\"string\">''</span>) <span class=\"comment\">// 过滤unicode字符</span></span><br><span class=\"line\">     config.tpl[tplName][<span class=\"string\">'branch'</span>] = branch</span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(chalk.red(<span class=\"string\">'Template has already existed!'</span>))</span><br><span class=\"line\">     process.exit()</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">// 把模板信息写入templates.json</span></span><br><span class=\"line\">   fs.writeFile(__dirname + <span class=\"string\">'/../templates.json'</span>, <span class=\"built_in\">JSON</span>.stringify(config), <span class=\"string\">'utf-8'</span>, (err) =&gt; &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (err) <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(chalk.green(<span class=\"string\">'New template added!\\n'</span>))</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(chalk.grey(<span class=\"string\">'The last template list is: \\n'</span>))</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(config)</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">     process.exit()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"> &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"删除模板\"><a href=\"#删除模板\" class=\"headerlink\" title=\"删除模板\"></a>删除模板</h2><p>同样的，在<code>\\command</code>文件夹下建立<code>delete.js</code>文件：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> co = <span class=\"built_in\">require</span>(<span class=\"string\">'co'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> prompt = <span class=\"built_in\">require</span>(<span class=\"string\">'co-prompt'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../templates'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    co(<span class=\"function\"><span class=\"keyword\">function</span> *(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 接收用户输入的参数</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> tplName = <span class=\"keyword\">yield</span> prompt(<span class=\"string\">'Template name: '</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 删除对应的模板</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (config.tpl[tplName]) &#123;</span><br><span class=\"line\">            config.tpl[tplName] = <span class=\"literal\">undefined</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(chalk.red(<span class=\"string\">'Template does not exist!'</span>))</span><br><span class=\"line\">            process.exit()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 写入template.json</span></span><br><span class=\"line\">        fs.writeFile(__dirname + <span class=\"string\">'/../templates.json'</span>, <span class=\"built_in\">JSON</span>.stringify(config),     <span class=\"string\">'utf-8'</span>, (err) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(chalk.green(<span class=\"string\">'Template deleted!'</span>))</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(chalk.grey(<span class=\"string\">'The last template list is: \\n'</span>))</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(config)</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">            process.exit()</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"罗列模板\"><a href=\"#罗列模板\" class=\"headerlink\" title=\"罗列模板\"></a>罗列模板</h2><p>建立<code>list.js</code>文件：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">'../templates'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(config.tpl)</span><br><span class=\"line\">     process.exit()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"构建项目\"><a href=\"#构建项目\" class=\"headerlink\" title=\"构建项目\"></a>构建项目</h1><p>现在来到我们最重要的部分——构建项目。同样的，在<code>\\command</code>目录下新建一个叫做<code>init.js</code>的文件：<br><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; prompt &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'inquirer'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; writeFile &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; listTable &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">`<span class=\"subst\">$&#123;__dirname&#125;</span>/../utils`</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> download = <span class=\"built_in\">require</span>(<span class=\"string\">'download-git-repo'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> ora = <span class=\"built_in\">require</span>(<span class=\"string\">'ora'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> tplList = <span class=\"built_in\">require</span>(<span class=\"string\">`<span class=\"subst\">$&#123;__dirname&#125;</span>/../templates`</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> question = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">type</span>: <span class=\"string\">'input'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'name'</span>,</span><br><span class=\"line\">    message: <span class=\"string\">'Template name:'</span>,</span><br><span class=\"line\">    validate (val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (tplList[val]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (val === <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Name is required!'</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!tplList[val]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'This template doesn\\'t exists.'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">type</span>: <span class=\"string\">'input'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'project'</span>,</span><br><span class=\"line\">    message: <span class=\"string\">'Project name:'</span>,</span><br><span class=\"line\">    validate (val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (val !== <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Project name is required!'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">type</span>: <span class=\"string\">'input'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'place'</span>,</span><br><span class=\"line\">    message: <span class=\"string\">'Where to init the project:'</span>,</span><br><span class=\"line\">    <span class=\"keyword\">default</span>: <span class=\"string\">'./'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = prompt(question).then(<span class=\"function\">(<span class=\"params\">&#123; name, project, place &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> gitPlace = tplList[name][<span class=\"string\">'owner/name'</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> gitBranch = tplList[name][<span class=\"string\">'branch'</span>]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> spinner = ora(<span class=\"string\">'Downloading template...'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  spinner.start()</span><br><span class=\"line\"></span><br><span class=\"line\">  download(<span class=\"string\">`<span class=\"subst\">$&#123;gitPlace&#125;</span>#<span class=\"subst\">$&#123;gitBranch&#125;</span>`</span>, <span class=\"string\">`<span class=\"subst\">$&#123;place&#125;</span>/<span class=\"subst\">$&#123;project&#125;</span>`</span>, <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(chalk.red(err))</span><br><span class=\"line\">      process.exit()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    spinner.stop()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(chalk.green(<span class=\"string\">'New project has been initialized successfully!'</span>))</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>这里使用了<a href=\"https://github.com/flipxfx/download-git-repo\" target=\"_blank\" rel=\"noopener\">download-git-repo</a>用于从远程仓库克隆到自定义目录。</p>\n<h1 id=\"全局使用\"><a href=\"#全局使用\" class=\"headerlink\" title=\"全局使用\"></a>全局使用</h1><p>为了可以全局使用，我们需要在<code>package.json</code>里面设置一下：<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"bin\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"koa-init\"</span>: <span class=\"string\">\"bin/koa\"</span></span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure></p>\n<p>  本地调试的时候，在根目录下执行<br>  <figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">npm</span> link</span><br></pre></td></tr></table></figure></p>\n<p>  即可把koa-cli命令绑定到全局，以后就可以直接以koa-init作为命令开头而无需敲入长长的node koa之类的命令了。</p>\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><p>  将完成的项目部署在git上</p>\n<h1 id=\"发布脚手架\"><a href=\"#发布脚手架\" class=\"headerlink\" title=\"发布脚手架\"></a>发布脚手架</h1><p>  参考<a href=\"https://segmentfault.com/a/1190000006250554\" target=\"_blank\" rel=\"noopener\">npm包发布</a>发布脚手架</p>\n<h1 id=\"测试使用\"><a href=\"#测试使用\" class=\"headerlink\" title=\"测试使用\"></a>测试使用</h1><p>  发布成功后，运行下列命令安装<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm <span class=\"keyword\">install</span> zsh-koa <span class=\"comment\">--save</span></span><br></pre></td></tr></table></figure></p>\n<p>  构建工程<br><figure class=\"highlight ebnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">zsh-koa init</span></span><br></pre></td></tr></table></figure></p>\n<p>  按照提示输入工程名和下载位置<br>  <font color=\"#00ffff\" size=\"6\">End</font></p>\n"},{"title":"前端开发中IOC的理解","date":"2019-01-16T10:13:14.000Z","_content":"\n# 背景\n\n前端应用在不断壮大的过程中，内部模块间的依赖可能也会随之越来越复杂，模块间的 **低复用性** 导致应用 **难以维护**，不过我们可以借助计算机领域的一些优秀的编程理念来一定程度上解决这些问题，接下来要讲述的`_IoC_` 就是其中之一。\n\n# 什么是 IOC\n\n`IoC` 的全称叫做 `Inversion of Control`，可翻译为为**「控制反转」** 或 **「依赖倒置」**，它主要包含了三个准则：\n\n1、高层次的模块不应该依赖于低层次的模块，它们都应该依赖于抽象\n2、抽象不应该依赖于具体实现，具体实现应该依赖于抽象\n3、面向接口编程 而不要面向实现编程\n\n概念总是抽象的，所以下面将以一个例子来解释上述的概念：\n\n假设需要构建一款应用叫 `App`，它包含一个路由模块 `Router`和一个页面监控模块 `Track`，一开始可能会这么实现：\n\n```javascript\n// app.js\nimport Router from './modules/Router';\nimport Track from './modules/Track';\n\nclass App {\n  constructor(options) {\n    this.options = options;\n    this.router = new Router();\n    this.track = new Track();\n\n    this.init();\n  }\n\n  init() {\n    window.addEventListener('DOMContentLoaded', () => {\n      this.router.to('home');\n      this.track.tracking();\n      this.options.onReady();\n    });\n  }\n}\n\n// index.js\nimport App from 'path/to/App';\nnew App({\n  onReady() {\n    // do something here...\n  },\n});\n```\n\n嗯，看起来没什么问题，但是实际应用中需求是非常多变的，可能需要给路由新增功能（比如实现 `history` 模式）或者更新配置（启用 `history`, `new Router({ mode: 'history' })）`。这就不得不在 App 内部去修改这两个模块，这是一个 `INNER BREAKING` 的操作，而对于之前测试通过了的 `App` 来说，也必须重新测试。\n\n很明显，这不是一个好的应用结构，高层次的模块 `App`依赖了两个低层次的模块 `Router`和 `Track`，对低层次模块的修改都会影响高层次的模块`App`。那么如何解决这个问题呢，解决方案就是接下来要讲述的 **依赖注入（Dependency Injection）**。\n\n# 依赖注入\n\n所谓的依赖注入，简单来说就是把高层模块所依赖的模块通过传参的方式把依赖「注入」到模块内部，上面的代码可以通过依赖注入的方式改造成如下方式：\n\n```javascript\n// app.js\nclass App {\n  constructor(options) {\n    this.options = options;\n    this.router = options.router;\n    this.track = options.track;\n\n    this.init();\n  }\n\n  init() {\n    window.addEventListener('DOMContentLoaded', () => {\n      this.router.to('home');\n      this.track.tracking();\n      this.options.onReady();\n    });\n  }\n}\n\n// index.js\nimport App from 'path/to/App';\nimport Router from './modules/Router';\nimport Track from './modules/Track';\n\nnew App({\n  router: new Router(),\n  track: new Track(),\n  onReady() {\n    // do something here...\n  },\n});\n```\n\n可以看到，通过依赖注入解决了上面所说的 `INNER BREAKING` 的问题，可以直接在 `App` 外部对各个模块进行修改而不影响内部。\n\n是不是就万事大吉了？理想很丰满，但现实却是很骨感的，没过两天产品就给你提了一个新需求，给 `App` 添加一个分享模块`Share`。这样的话又回到了上面所提到的 `INNER BREAKING` 的问题上：你不得不对`App`模块进行修改加上一行 `this.share = options.share`，这明显不是我们所期望的。\n\n虽然 `App`通过依赖注入的方式在一定程度上解耦了与其他几个模块的依赖关系，但是还不够彻底，其中的 `this.router` 和 `this.track`等属性其实都还是对「具体实现」的依赖，明显违背了`IoC` 思想的准则，那如何进一步抽象`App`模块呢。\n\n**Talk is cheap, show you the code**\n\n```javascript\nclass App {\n  static modules = [];\n  constructor(options) {\n    this.options = options;\n    this.init();\n  }\n  init() {\n    window.addEventListener('DOMContentLoaded', () => {\n      this.initModules();\n      this.options.onReady(this);\n    });\n  }\n  initModules() {\n    //调用所有module的init方法\n    App.modules.map(module => {\n      modules.init && typeof module.init === 'function' && module.init(this);\n    });\n  }\n  //使用use将模块注入到App的modules数组中  可以传入数组  如果是数组的话采用递归实现\n  static use(module) {\n    Array.isArray(module)\n      ? module.map(item => {\n          App.use(item);\n        })\n      : App.modules.push(module);\n  }\n}\n```\n\n经过改造后 `App` 内已经没有「具体实现」了，看不到任何业务代码了，那么如何使用 `App` 来管理我们的依赖呢：\n\n```javascript\n// modules/Router.js\nimport  Router from 'path/to/Router'\nexport default {\n  init(app){\n    app.router=new Router(app.options.router)\n    app.router.to('home')\n  }\n}\n\n// modules/Track.js\nimport  Track from 'path/to/Track'\nexport default {\n  init(app){\n    app.track=new Track(app.options.track)\n    app.track.tracking()\n  }\n}\n\n\n// index.js\nimport App from 'path/to/App';\nimport Router from './modules/Router';\nimport Track from './modules/Track';\n\nApp.use([Router,Track])\nnew App({\n  router:{\n    mode:'history'\n  },\n  track:{\n\n  },\n  onReady(app){\n    //app.options\n  }\n})\n```\n\n可以发现 `App` 模块在使用上也非常的方便，通过 `App.use()` 方法来「注入」依赖，在 `./modules/some-module.js` 中按照一定的「约定」去初始化相关配置，比如此时需要新增一个 `Share` 模块的话，无需到 `App` 内部去修改内容：\n\n```javascript\n// modules/Share.js\nimport Share from 'path/to/Share';\nexport default {\n  init(app) {\n    app.share = new Share();\n    app.setShare = data => app.share.setShare(data);\n  },\n};\n\n// index.js\nApp.use(Share);\nnew App({\n  // ...\n  onReady(app) {\n    app.setShare({\n      title: 'Hello IoC.',\n      description: 'description here...',\n      // some other data here...\n    });\n  },\n});\n```\n\n直接在 `App`外部去`use`这个 `Share`模块即可，对模块的注入和配置极为方便。\n\n那么在`App` 内部到底做了哪些工作呢，首先从 `App.use`方法说起：\n\n```javascript\nclass App {\n  static modules = [];\n  static use(module) {\n    Array.isArray(module)\n      ? module.map(item => App.use(item))\n      : App.modules.push(module);\n  }\n}\n```\n\n可以很清楚的发现，`App.use` 做了一件非常简单的事情，就是把依赖保存在了 `App.modules` 属性中，等待后续初始化模块的时候被调用。\n\n接下来我们看一下模块初始化方法 `this.initModules()` 具体做了什么事情：\n\n```javascript\nclass App {\n    initModules() {\n        App.modules.map(module => module.init && typeof module.init == 'function' && module.init(this));\n    }\n}\n```\n\n可以发现该方法同样做了一件非常简单的事情，就是遍历 `App.modules` 中所有的模块，判断模块是否包含 `init` 属性且该属性必须是一个函数，如果判断通过的话，该方法就会去执行模块的 `init` 方法并把 `App` 的实例` this` 传入其中，以便在模块中引用它。\n\n从这个方法中可以看出，要实现一个可以被 `App.use() `的模块，就必须满足两个**「约定」**：\n\n储和同步功能，带来前所未有的书写体验。特点概述：\n\n1、模块必须包含 `init` 属性\n2、`init` 必须是一个函数\n\n这其实就是 `IoC` 思想中对「**面向接口编程 而不要面向实现编程**」这一准则的很好的体现。App 不关心模块具体实现了什么，只要满足对 **接口** `init` 的「约定」就可以了。\n\n此时回去看 Router 的模块的实现就可以很容易理解为什么要怎么写了：\n\n```javascript\n// modules/Router.js\nimport Router from 'path/to/Router';\nexport default {\n    init(app) {\n        app.router = new Router(app.options.router);\n        app.router.to('home');\n    }\n};\n```\n# 总结\n`App `模块此时应该称之为**「容器」**比较合适了，跟业务已经没有任何关系了，它仅仅只是提供了一些方法来辅助管理注入的依赖和控制模块如何执行。·\n\n控制反转（`Inversion of Control`）是一种「**思想**」，依赖注入（`Dependency Injection`）则是这一思想的一种具体「**实现方式**」，而这里的 `App` 则是辅助依赖管理的一个「**容器**」。\n````\n","source":"_posts/前端开发中IOC的理解.md","raw":"---\ntitle: 前端开发中IOC的理解\ndate: 2019-01-16 18:13:14\ntags:\n---\n\n# 背景\n\n前端应用在不断壮大的过程中，内部模块间的依赖可能也会随之越来越复杂，模块间的 **低复用性** 导致应用 **难以维护**，不过我们可以借助计算机领域的一些优秀的编程理念来一定程度上解决这些问题，接下来要讲述的`_IoC_` 就是其中之一。\n\n# 什么是 IOC\n\n`IoC` 的全称叫做 `Inversion of Control`，可翻译为为**「控制反转」** 或 **「依赖倒置」**，它主要包含了三个准则：\n\n1、高层次的模块不应该依赖于低层次的模块，它们都应该依赖于抽象\n2、抽象不应该依赖于具体实现，具体实现应该依赖于抽象\n3、面向接口编程 而不要面向实现编程\n\n概念总是抽象的，所以下面将以一个例子来解释上述的概念：\n\n假设需要构建一款应用叫 `App`，它包含一个路由模块 `Router`和一个页面监控模块 `Track`，一开始可能会这么实现：\n\n```javascript\n// app.js\nimport Router from './modules/Router';\nimport Track from './modules/Track';\n\nclass App {\n  constructor(options) {\n    this.options = options;\n    this.router = new Router();\n    this.track = new Track();\n\n    this.init();\n  }\n\n  init() {\n    window.addEventListener('DOMContentLoaded', () => {\n      this.router.to('home');\n      this.track.tracking();\n      this.options.onReady();\n    });\n  }\n}\n\n// index.js\nimport App from 'path/to/App';\nnew App({\n  onReady() {\n    // do something here...\n  },\n});\n```\n\n嗯，看起来没什么问题，但是实际应用中需求是非常多变的，可能需要给路由新增功能（比如实现 `history` 模式）或者更新配置（启用 `history`, `new Router({ mode: 'history' })）`。这就不得不在 App 内部去修改这两个模块，这是一个 `INNER BREAKING` 的操作，而对于之前测试通过了的 `App` 来说，也必须重新测试。\n\n很明显，这不是一个好的应用结构，高层次的模块 `App`依赖了两个低层次的模块 `Router`和 `Track`，对低层次模块的修改都会影响高层次的模块`App`。那么如何解决这个问题呢，解决方案就是接下来要讲述的 **依赖注入（Dependency Injection）**。\n\n# 依赖注入\n\n所谓的依赖注入，简单来说就是把高层模块所依赖的模块通过传参的方式把依赖「注入」到模块内部，上面的代码可以通过依赖注入的方式改造成如下方式：\n\n```javascript\n// app.js\nclass App {\n  constructor(options) {\n    this.options = options;\n    this.router = options.router;\n    this.track = options.track;\n\n    this.init();\n  }\n\n  init() {\n    window.addEventListener('DOMContentLoaded', () => {\n      this.router.to('home');\n      this.track.tracking();\n      this.options.onReady();\n    });\n  }\n}\n\n// index.js\nimport App from 'path/to/App';\nimport Router from './modules/Router';\nimport Track from './modules/Track';\n\nnew App({\n  router: new Router(),\n  track: new Track(),\n  onReady() {\n    // do something here...\n  },\n});\n```\n\n可以看到，通过依赖注入解决了上面所说的 `INNER BREAKING` 的问题，可以直接在 `App` 外部对各个模块进行修改而不影响内部。\n\n是不是就万事大吉了？理想很丰满，但现实却是很骨感的，没过两天产品就给你提了一个新需求，给 `App` 添加一个分享模块`Share`。这样的话又回到了上面所提到的 `INNER BREAKING` 的问题上：你不得不对`App`模块进行修改加上一行 `this.share = options.share`，这明显不是我们所期望的。\n\n虽然 `App`通过依赖注入的方式在一定程度上解耦了与其他几个模块的依赖关系，但是还不够彻底，其中的 `this.router` 和 `this.track`等属性其实都还是对「具体实现」的依赖，明显违背了`IoC` 思想的准则，那如何进一步抽象`App`模块呢。\n\n**Talk is cheap, show you the code**\n\n```javascript\nclass App {\n  static modules = [];\n  constructor(options) {\n    this.options = options;\n    this.init();\n  }\n  init() {\n    window.addEventListener('DOMContentLoaded', () => {\n      this.initModules();\n      this.options.onReady(this);\n    });\n  }\n  initModules() {\n    //调用所有module的init方法\n    App.modules.map(module => {\n      modules.init && typeof module.init === 'function' && module.init(this);\n    });\n  }\n  //使用use将模块注入到App的modules数组中  可以传入数组  如果是数组的话采用递归实现\n  static use(module) {\n    Array.isArray(module)\n      ? module.map(item => {\n          App.use(item);\n        })\n      : App.modules.push(module);\n  }\n}\n```\n\n经过改造后 `App` 内已经没有「具体实现」了，看不到任何业务代码了，那么如何使用 `App` 来管理我们的依赖呢：\n\n```javascript\n// modules/Router.js\nimport  Router from 'path/to/Router'\nexport default {\n  init(app){\n    app.router=new Router(app.options.router)\n    app.router.to('home')\n  }\n}\n\n// modules/Track.js\nimport  Track from 'path/to/Track'\nexport default {\n  init(app){\n    app.track=new Track(app.options.track)\n    app.track.tracking()\n  }\n}\n\n\n// index.js\nimport App from 'path/to/App';\nimport Router from './modules/Router';\nimport Track from './modules/Track';\n\nApp.use([Router,Track])\nnew App({\n  router:{\n    mode:'history'\n  },\n  track:{\n\n  },\n  onReady(app){\n    //app.options\n  }\n})\n```\n\n可以发现 `App` 模块在使用上也非常的方便，通过 `App.use()` 方法来「注入」依赖，在 `./modules/some-module.js` 中按照一定的「约定」去初始化相关配置，比如此时需要新增一个 `Share` 模块的话，无需到 `App` 内部去修改内容：\n\n```javascript\n// modules/Share.js\nimport Share from 'path/to/Share';\nexport default {\n  init(app) {\n    app.share = new Share();\n    app.setShare = data => app.share.setShare(data);\n  },\n};\n\n// index.js\nApp.use(Share);\nnew App({\n  // ...\n  onReady(app) {\n    app.setShare({\n      title: 'Hello IoC.',\n      description: 'description here...',\n      // some other data here...\n    });\n  },\n});\n```\n\n直接在 `App`外部去`use`这个 `Share`模块即可，对模块的注入和配置极为方便。\n\n那么在`App` 内部到底做了哪些工作呢，首先从 `App.use`方法说起：\n\n```javascript\nclass App {\n  static modules = [];\n  static use(module) {\n    Array.isArray(module)\n      ? module.map(item => App.use(item))\n      : App.modules.push(module);\n  }\n}\n```\n\n可以很清楚的发现，`App.use` 做了一件非常简单的事情，就是把依赖保存在了 `App.modules` 属性中，等待后续初始化模块的时候被调用。\n\n接下来我们看一下模块初始化方法 `this.initModules()` 具体做了什么事情：\n\n```javascript\nclass App {\n    initModules() {\n        App.modules.map(module => module.init && typeof module.init == 'function' && module.init(this));\n    }\n}\n```\n\n可以发现该方法同样做了一件非常简单的事情，就是遍历 `App.modules` 中所有的模块，判断模块是否包含 `init` 属性且该属性必须是一个函数，如果判断通过的话，该方法就会去执行模块的 `init` 方法并把 `App` 的实例` this` 传入其中，以便在模块中引用它。\n\n从这个方法中可以看出，要实现一个可以被 `App.use() `的模块，就必须满足两个**「约定」**：\n\n储和同步功能，带来前所未有的书写体验。特点概述：\n\n1、模块必须包含 `init` 属性\n2、`init` 必须是一个函数\n\n这其实就是 `IoC` 思想中对「**面向接口编程 而不要面向实现编程**」这一准则的很好的体现。App 不关心模块具体实现了什么，只要满足对 **接口** `init` 的「约定」就可以了。\n\n此时回去看 Router 的模块的实现就可以很容易理解为什么要怎么写了：\n\n```javascript\n// modules/Router.js\nimport Router from 'path/to/Router';\nexport default {\n    init(app) {\n        app.router = new Router(app.options.router);\n        app.router.to('home');\n    }\n};\n```\n# 总结\n`App `模块此时应该称之为**「容器」**比较合适了，跟业务已经没有任何关系了，它仅仅只是提供了一些方法来辅助管理注入的依赖和控制模块如何执行。·\n\n控制反转（`Inversion of Control`）是一种「**思想**」，依赖注入（`Dependency Injection`）则是这一思想的一种具体「**实现方式**」，而这里的 `App` 则是辅助依赖管理的一个「**容器**」。\n````\n","slug":"前端开发中IOC的理解","published":1,"updated":"2020-03-12T13:55:48.640Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7otizqn000h7gui1taqcg49","content":"<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>前端应用在不断壮大的过程中，内部模块间的依赖可能也会随之越来越复杂，模块间的 <strong>低复用性</strong> 导致应用 <strong>难以维护</strong>，不过我们可以借助计算机领域的一些优秀的编程理念来一定程度上解决这些问题，接下来要讲述的<code>_IoC_</code> 就是其中之一。</p>\n<h1 id=\"什么是-IOC\"><a href=\"#什么是-IOC\" class=\"headerlink\" title=\"什么是 IOC\"></a>什么是 IOC</h1><p><code>IoC</code> 的全称叫做 <code>Inversion of Control</code>，可翻译为为<strong>「控制反转」</strong> 或 <strong>「依赖倒置」</strong>，它主要包含了三个准则：</p>\n<p>1、高层次的模块不应该依赖于低层次的模块，它们都应该依赖于抽象<br>2、抽象不应该依赖于具体实现，具体实现应该依赖于抽象<br>3、面向接口编程 而不要面向实现编程</p>\n<p>概念总是抽象的，所以下面将以一个例子来解释上述的概念：</p>\n<p>假设需要构建一款应用叫 <code>App</code>，它包含一个路由模块 <code>Router</code>和一个页面监控模块 <code>Track</code>，一开始可能会这么实现：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Track <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Track'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.options = options;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.router = <span class=\"keyword\">new</span> Router();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.track = <span class=\"keyword\">new</span> Track();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  init() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.router.to(<span class=\"string\">'home'</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.track.tracking();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.options.onReady();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'path/to/App'</span>;</span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  onReady() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something here...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>嗯，看起来没什么问题，但是实际应用中需求是非常多变的，可能需要给路由新增功能（比如实现 <code>history</code> 模式）或者更新配置（启用 <code>history</code>, <code>new Router({ mode: &#39;history&#39; })）</code>。这就不得不在 App 内部去修改这两个模块，这是一个 <code>INNER BREAKING</code> 的操作，而对于之前测试通过了的 <code>App</code> 来说，也必须重新测试。</p>\n<p>很明显，这不是一个好的应用结构，高层次的模块 <code>App</code>依赖了两个低层次的模块 <code>Router</code>和 <code>Track</code>，对低层次模块的修改都会影响高层次的模块<code>App</code>。那么如何解决这个问题呢，解决方案就是接下来要讲述的 <strong>依赖注入（Dependency Injection）</strong>。</p>\n<h1 id=\"依赖注入\"><a href=\"#依赖注入\" class=\"headerlink\" title=\"依赖注入\"></a>依赖注入</h1><p>所谓的依赖注入，简单来说就是把高层模块所依赖的模块通过传参的方式把依赖「注入」到模块内部，上面的代码可以通过依赖注入的方式改造成如下方式：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.options = options;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.router = options.router;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.track = options.track;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  init() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.router.to(<span class=\"string\">'home'</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.track.tracking();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.options.onReady();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'path/to/App'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Track <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Track'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  router: <span class=\"keyword\">new</span> Router(),</span><br><span class=\"line\">  track: <span class=\"keyword\">new</span> Track(),</span><br><span class=\"line\">  onReady() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something here...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>可以看到，通过依赖注入解决了上面所说的 <code>INNER BREAKING</code> 的问题，可以直接在 <code>App</code> 外部对各个模块进行修改而不影响内部。</p>\n<p>是不是就万事大吉了？理想很丰满，但现实却是很骨感的，没过两天产品就给你提了一个新需求，给 <code>App</code> 添加一个分享模块<code>Share</code>。这样的话又回到了上面所提到的 <code>INNER BREAKING</code> 的问题上：你不得不对<code>App</code>模块进行修改加上一行 <code>this.share = options.share</code>，这明显不是我们所期望的。</p>\n<p>虽然 <code>App</code>通过依赖注入的方式在一定程度上解耦了与其他几个模块的依赖关系，但是还不够彻底，其中的 <code>this.router</code> 和 <code>this.track</code>等属性其实都还是对「具体实现」的依赖，明显违背了<code>IoC</code> 思想的准则，那如何进一步抽象<code>App</code>模块呢。</p>\n<p><strong>Talk is cheap, show you the code</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> modules = [];</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.options = options;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  init() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initModules();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.options.onReady(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  initModules() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//调用所有module的init方法</span></span><br><span class=\"line\">    App.modules.map(<span class=\"function\"><span class=\"params\">module</span> =&gt;</span> &#123;</span><br><span class=\"line\">      modules.init &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span>.init === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"built_in\">module</span>.init(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//使用use将模块注入到App的modules数组中  可以传入数组  如果是数组的话采用递归实现</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> use(<span class=\"built_in\">module</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.isArray(<span class=\"built_in\">module</span>)</span><br><span class=\"line\">      ? <span class=\"built_in\">module</span>.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">          App.use(item);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      : App.modules.push(<span class=\"built_in\">module</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>经过改造后 <code>App</code> 内已经没有「具体实现」了，看不到任何业务代码了，那么如何使用 <code>App</code> 来管理我们的依赖呢：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// modules/Router.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span>  Router <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Router'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  init(app)&#123;</span><br><span class=\"line\">    app.router=<span class=\"keyword\">new</span> Router(app.options.router)</span><br><span class=\"line\">    app.router.to(<span class=\"string\">'home'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// modules/Track.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span>  Track <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Track'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  init(app)&#123;</span><br><span class=\"line\">    app.track=<span class=\"keyword\">new</span> Track(app.options.track)</span><br><span class=\"line\">    app.track.tracking()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'path/to/App'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Track <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Track'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">App.use([Router,Track])</span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  router:&#123;</span><br><span class=\"line\">    mode:<span class=\"string\">'history'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  track:&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onReady(app)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//app.options</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>可以发现 <code>App</code> 模块在使用上也非常的方便，通过 <code>App.use()</code> 方法来「注入」依赖，在 <code>./modules/some-module.js</code> 中按照一定的「约定」去初始化相关配置，比如此时需要新增一个 <code>Share</code> 模块的话，无需到 <code>App</code> 内部去修改内容：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// modules/Share.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Share <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Share'</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  init(app) &#123;</span><br><span class=\"line\">    app.share = <span class=\"keyword\">new</span> Share();</span><br><span class=\"line\">    app.setShare = <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> app.share.setShare(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\">App.use(Share);</span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  onReady(app) &#123;</span><br><span class=\"line\">    app.setShare(&#123;</span><br><span class=\"line\">      title: <span class=\"string\">'Hello IoC.'</span>,</span><br><span class=\"line\">      description: <span class=\"string\">'description here...'</span>,</span><br><span class=\"line\">      <span class=\"comment\">// some other data here...</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>直接在 <code>App</code>外部去<code>use</code>这个 <code>Share</code>模块即可，对模块的注入和配置极为方便。</p>\n<p>那么在<code>App</code> 内部到底做了哪些工作呢，首先从 <code>App.use</code>方法说起：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> modules = [];</span><br><span class=\"line\">  <span class=\"keyword\">static</span> use(<span class=\"built_in\">module</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.isArray(<span class=\"built_in\">module</span>)</span><br><span class=\"line\">      ? <span class=\"built_in\">module</span>.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> App.use(item))</span><br><span class=\"line\">      : App.modules.push(<span class=\"built_in\">module</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>可以很清楚的发现，<code>App.use</code> 做了一件非常简单的事情，就是把依赖保存在了 <code>App.modules</code> 属性中，等待后续初始化模块的时候被调用。</p>\n<p>接下来我们看一下模块初始化方法 <code>this.initModules()</code> 具体做了什么事情：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">    initModules() &#123;</span><br><span class=\"line\">        App.modules.map(<span class=\"function\"><span class=\"params\">module</span> =&gt;</span> <span class=\"built_in\">module</span>.init &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span>.init == <span class=\"string\">'function'</span> &amp;&amp; <span class=\"built_in\">module</span>.init(<span class=\"keyword\">this</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>可以发现该方法同样做了一件非常简单的事情，就是遍历 <code>App.modules</code> 中所有的模块，判断模块是否包含 <code>init</code> 属性且该属性必须是一个函数，如果判断通过的话，该方法就会去执行模块的 <code>init</code> 方法并把 <code>App</code> 的实例<code>this</code> 传入其中，以便在模块中引用它。</p>\n<p>从这个方法中可以看出，要实现一个可以被 <code>App.use()</code>的模块，就必须满足两个<strong>「约定」</strong>：</p>\n<p>储和同步功能，带来前所未有的书写体验。特点概述：</p>\n<p>1、模块必须包含 <code>init</code> 属性<br>2、<code>init</code> 必须是一个函数</p>\n<p>这其实就是 <code>IoC</code> 思想中对「<strong>面向接口编程 而不要面向实现编程</strong>」这一准则的很好的体现。App 不关心模块具体实现了什么，只要满足对 <strong>接口</strong> <code>init</code> 的「约定」就可以了。</p>\n<p>此时回去看 Router 的模块的实现就可以很容易理解为什么要怎么写了：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// modules/Router.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    init(app) &#123;</span><br><span class=\"line\">        app.router = <span class=\"keyword\">new</span> Router(app.options.router);</span><br><span class=\"line\">        app.router.to(<span class=\"string\">'home'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p><code>App</code>模块此时应该称之为<strong>「容器」</strong>比较合适了，跟业务已经没有任何关系了，它仅仅只是提供了一些方法来辅助管理注入的依赖和控制模块如何执行。·</p>\n<p>控制反转（<code>Inversion of Control</code>）是一种「<strong>思想</strong>」，依赖注入（<code>Dependency Injection</code>）则是这一思想的一种具体「<strong>实现方式</strong>」，而这里的 <code>App</code> 则是辅助依赖管理的一个「<strong>容器</strong>」。<br><code></code></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>前端应用在不断壮大的过程中，内部模块间的依赖可能也会随之越来越复杂，模块间的 <strong>低复用性</strong> 导致应用 <strong>难以维护</strong>，不过我们可以借助计算机领域的一些优秀的编程理念来一定程度上解决这些问题，接下来要讲述的<code>_IoC_</code> 就是其中之一。</p>\n<h1 id=\"什么是-IOC\"><a href=\"#什么是-IOC\" class=\"headerlink\" title=\"什么是 IOC\"></a>什么是 IOC</h1><p><code>IoC</code> 的全称叫做 <code>Inversion of Control</code>，可翻译为为<strong>「控制反转」</strong> 或 <strong>「依赖倒置」</strong>，它主要包含了三个准则：</p>\n<p>1、高层次的模块不应该依赖于低层次的模块，它们都应该依赖于抽象<br>2、抽象不应该依赖于具体实现，具体实现应该依赖于抽象<br>3、面向接口编程 而不要面向实现编程</p>\n<p>概念总是抽象的，所以下面将以一个例子来解释上述的概念：</p>\n<p>假设需要构建一款应用叫 <code>App</code>，它包含一个路由模块 <code>Router</code>和一个页面监控模块 <code>Track</code>，一开始可能会这么实现：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Track <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Track'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.options = options;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.router = <span class=\"keyword\">new</span> Router();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.track = <span class=\"keyword\">new</span> Track();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  init() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.router.to(<span class=\"string\">'home'</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.track.tracking();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.options.onReady();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'path/to/App'</span>;</span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  onReady() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something here...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>嗯，看起来没什么问题，但是实际应用中需求是非常多变的，可能需要给路由新增功能（比如实现 <code>history</code> 模式）或者更新配置（启用 <code>history</code>, <code>new Router({ mode: &#39;history&#39; })）</code>。这就不得不在 App 内部去修改这两个模块，这是一个 <code>INNER BREAKING</code> 的操作，而对于之前测试通过了的 <code>App</code> 来说，也必须重新测试。</p>\n<p>很明显，这不是一个好的应用结构，高层次的模块 <code>App</code>依赖了两个低层次的模块 <code>Router</code>和 <code>Track</code>，对低层次模块的修改都会影响高层次的模块<code>App</code>。那么如何解决这个问题呢，解决方案就是接下来要讲述的 <strong>依赖注入（Dependency Injection）</strong>。</p>\n<h1 id=\"依赖注入\"><a href=\"#依赖注入\" class=\"headerlink\" title=\"依赖注入\"></a>依赖注入</h1><p>所谓的依赖注入，简单来说就是把高层模块所依赖的模块通过传参的方式把依赖「注入」到模块内部，上面的代码可以通过依赖注入的方式改造成如下方式：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.options = options;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.router = options.router;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.track = options.track;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  init() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.router.to(<span class=\"string\">'home'</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.track.tracking();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.options.onReady();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'path/to/App'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Track <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Track'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  router: <span class=\"keyword\">new</span> Router(),</span><br><span class=\"line\">  track: <span class=\"keyword\">new</span> Track(),</span><br><span class=\"line\">  onReady() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// do something here...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>可以看到，通过依赖注入解决了上面所说的 <code>INNER BREAKING</code> 的问题，可以直接在 <code>App</code> 外部对各个模块进行修改而不影响内部。</p>\n<p>是不是就万事大吉了？理想很丰满，但现实却是很骨感的，没过两天产品就给你提了一个新需求，给 <code>App</code> 添加一个分享模块<code>Share</code>。这样的话又回到了上面所提到的 <code>INNER BREAKING</code> 的问题上：你不得不对<code>App</code>模块进行修改加上一行 <code>this.share = options.share</code>，这明显不是我们所期望的。</p>\n<p>虽然 <code>App</code>通过依赖注入的方式在一定程度上解耦了与其他几个模块的依赖关系，但是还不够彻底，其中的 <code>this.router</code> 和 <code>this.track</code>等属性其实都还是对「具体实现」的依赖，明显违背了<code>IoC</code> 思想的准则，那如何进一步抽象<code>App</code>模块呢。</p>\n<p><strong>Talk is cheap, show you the code</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> modules = [];</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.options = options;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  init() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initModules();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.options.onReady(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  initModules() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//调用所有module的init方法</span></span><br><span class=\"line\">    App.modules.map(<span class=\"function\"><span class=\"params\">module</span> =&gt;</span> &#123;</span><br><span class=\"line\">      modules.init &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span>.init === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"built_in\">module</span>.init(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//使用use将模块注入到App的modules数组中  可以传入数组  如果是数组的话采用递归实现</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> use(<span class=\"built_in\">module</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.isArray(<span class=\"built_in\">module</span>)</span><br><span class=\"line\">      ? <span class=\"built_in\">module</span>.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">          App.use(item);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      : App.modules.push(<span class=\"built_in\">module</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>经过改造后 <code>App</code> 内已经没有「具体实现」了，看不到任何业务代码了，那么如何使用 <code>App</code> 来管理我们的依赖呢：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// modules/Router.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span>  Router <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Router'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  init(app)&#123;</span><br><span class=\"line\">    app.router=<span class=\"keyword\">new</span> Router(app.options.router)</span><br><span class=\"line\">    app.router.to(<span class=\"string\">'home'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// modules/Track.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span>  Track <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Track'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  init(app)&#123;</span><br><span class=\"line\">    app.track=<span class=\"keyword\">new</span> Track(app.options.track)</span><br><span class=\"line\">    app.track.tracking()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'path/to/App'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Track <span class=\"keyword\">from</span> <span class=\"string\">'./modules/Track'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">App.use([Router,Track])</span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  router:&#123;</span><br><span class=\"line\">    mode:<span class=\"string\">'history'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  track:&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onReady(app)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//app.options</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>可以发现 <code>App</code> 模块在使用上也非常的方便，通过 <code>App.use()</code> 方法来「注入」依赖，在 <code>./modules/some-module.js</code> 中按照一定的「约定」去初始化相关配置，比如此时需要新增一个 <code>Share</code> 模块的话，无需到 <code>App</code> 内部去修改内容：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// modules/Share.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Share <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Share'</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  init(app) &#123;</span><br><span class=\"line\">    app.share = <span class=\"keyword\">new</span> Share();</span><br><span class=\"line\">    app.setShare = <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> app.share.setShare(data);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\">App.use(Share);</span><br><span class=\"line\"><span class=\"keyword\">new</span> App(&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  onReady(app) &#123;</span><br><span class=\"line\">    app.setShare(&#123;</span><br><span class=\"line\">      title: <span class=\"string\">'Hello IoC.'</span>,</span><br><span class=\"line\">      description: <span class=\"string\">'description here...'</span>,</span><br><span class=\"line\">      <span class=\"comment\">// some other data here...</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>直接在 <code>App</code>外部去<code>use</code>这个 <code>Share</code>模块即可，对模块的注入和配置极为方便。</p>\n<p>那么在<code>App</code> 内部到底做了哪些工作呢，首先从 <code>App.use</code>方法说起：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> modules = [];</span><br><span class=\"line\">  <span class=\"keyword\">static</span> use(<span class=\"built_in\">module</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.isArray(<span class=\"built_in\">module</span>)</span><br><span class=\"line\">      ? <span class=\"built_in\">module</span>.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> App.use(item))</span><br><span class=\"line\">      : App.modules.push(<span class=\"built_in\">module</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>可以很清楚的发现，<code>App.use</code> 做了一件非常简单的事情，就是把依赖保存在了 <code>App.modules</code> 属性中，等待后续初始化模块的时候被调用。</p>\n<p>接下来我们看一下模块初始化方法 <code>this.initModules()</code> 具体做了什么事情：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">    initModules() &#123;</span><br><span class=\"line\">        App.modules.map(<span class=\"function\"><span class=\"params\">module</span> =&gt;</span> <span class=\"built_in\">module</span>.init &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span>.init == <span class=\"string\">'function'</span> &amp;&amp; <span class=\"built_in\">module</span>.init(<span class=\"keyword\">this</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>可以发现该方法同样做了一件非常简单的事情，就是遍历 <code>App.modules</code> 中所有的模块，判断模块是否包含 <code>init</code> 属性且该属性必须是一个函数，如果判断通过的话，该方法就会去执行模块的 <code>init</code> 方法并把 <code>App</code> 的实例<code>this</code> 传入其中，以便在模块中引用它。</p>\n<p>从这个方法中可以看出，要实现一个可以被 <code>App.use()</code>的模块，就必须满足两个<strong>「约定」</strong>：</p>\n<p>储和同步功能，带来前所未有的书写体验。特点概述：</p>\n<p>1、模块必须包含 <code>init</code> 属性<br>2、<code>init</code> 必须是一个函数</p>\n<p>这其实就是 <code>IoC</code> 思想中对「<strong>面向接口编程 而不要面向实现编程</strong>」这一准则的很好的体现。App 不关心模块具体实现了什么，只要满足对 <strong>接口</strong> <code>init</code> 的「约定」就可以了。</p>\n<p>此时回去看 Router 的模块的实现就可以很容易理解为什么要怎么写了：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// modules/Router.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'path/to/Router'</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    init(app) &#123;</span><br><span class=\"line\">        app.router = <span class=\"keyword\">new</span> Router(app.options.router);</span><br><span class=\"line\">        app.router.to(<span class=\"string\">'home'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p><code>App</code>模块此时应该称之为<strong>「容器」</strong>比较合适了，跟业务已经没有任何关系了，它仅仅只是提供了一些方法来辅助管理注入的依赖和控制模块如何执行。·</p>\n<p>控制反转（<code>Inversion of Control</code>）是一种「<strong>思想</strong>」，依赖注入（<code>Dependency Injection</code>）则是这一思想的一种具体「<strong>实现方式</strong>」，而这里的 <code>App</code> 则是辅助依赖管理的一个「<strong>容器</strong>」。<br><code></code></p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"ck7otizpt00017guitxxxh6wr","tag_id":"ck7otizq200047guilcumtadv","_id":"ck7otizqm000g7guistfxgu2n"},{"post_id":"ck7otizpt00017guitxxxh6wr","tag_id":"ck7otizqf000b7guirm0ezu5s","_id":"ck7otizqo000i7guiqcsd9frw"},{"post_id":"ck7otizpz00037guiq7r32ig4","tag_id":"ck7otizqk000e7gui8xyru8uu","_id":"ck7otizqq000k7guirrxwux9j"},{"post_id":"ck7otizq900087guisx7zr1a1","tag_id":"ck7otizqp000j7guinilkwtak","_id":"ck7otizqr000m7gui66j91pnn"},{"post_id":"ck7otizqe000a7guiwyw866cs","tag_id":"ck7otizqq000l7guifbtp8gtx","_id":"ck7otizqt000q7guirxcf7gxu"},{"post_id":"ck7otizqe000a7guiwyw866cs","tag_id":"ck7otizqr000n7guidpleazzm","_id":"ck7otizqt000r7guio5ok8tdr"},{"post_id":"ck7otizqe000a7guiwyw866cs","tag_id":"ck7otizqs000o7guieeop1iaz","_id":"ck7otizqu000t7guifihxeo4h"},{"post_id":"ck7otizqh000c7gui1jgylkhj","tag_id":"ck7otizqt000p7guiq2pi7gex","_id":"ck7otizqu000v7guis6ha9a6j"},{"post_id":"ck7otizqh000c7gui1jgylkhj","tag_id":"ck7otizqt000s7guid85vl50d","_id":"ck7otizqv000w7gui2k6pd6oj"},{"post_id":"ck7otizqj000d7gui6882p7zy","tag_id":"ck7otizqu000u7guijmslsy5j","_id":"ck7otizqw000y7guithue9jv0"},{"post_id":"ck7otizql000f7guio1hxmrb6","tag_id":"ck7otizqv000x7guipgxbwjjl","_id":"ck7otizqx00107guilu8t8eoa"},{"post_id":"ck7otizql000f7guio1hxmrb6","tag_id":"ck7otizqx000z7gui5gfsyzs1","_id":"ck7otizqx00117guiuyy57qtj"}],"Tag":[{"name":"Graph","_id":"ck7otizq200047guilcumtadv"},{"name":"REST","_id":"ck7otizqf000b7guirm0ezu5s"},{"name":"发布-订阅","_id":"ck7otizqk000e7gui8xyru8uu"},{"name":"-git","_id":"ck7otizqp000j7guinilkwtak"},{"name":"this,","_id":"ck7otizqq000l7guifbtp8gtx"},{"name":"call,","_id":"ck7otizqr000n7guidpleazzm"},{"name":"apply","_id":"ck7otizqs000o7guieeop1iaz"},{"name":"vue组件封装","_id":"ck7otizqt000p7guiq2pi7gex"},{"name":"npm发布","_id":"ck7otizqt000s7guid85vl50d"},{"name":"mvvm","_id":"ck7otizqu000u7guijmslsy5j"},{"name":"commander","_id":"ck7otizqv000x7guipgxbwjjl"},{"name":"init - cli","_id":"ck7otizqx000z7gui5gfsyzs1"}]}}